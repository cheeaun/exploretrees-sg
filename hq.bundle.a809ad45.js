parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ZamP":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"eIph":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"XQmk":[function(require,module,exports) {
"use strict";function e(e,t,n,r,o,u,i){try{var c=e[u](i),s=c.value}catch(a){return void n(a)}c.done?t(s):Promise.resolve(s).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(o,u){var i=t.apply(n,r);function c(t){e(i,o,u,c,s,"next",t)}function s(t){e(i,o,u,c,s,"throw",t)}c(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"zsb/":[function(require,module,exports) {
"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function t(e){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?exports.default=t=function(t){return o(t)}:exports.default=t=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"Oy8e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWritableStream=exports.isReadableStream=exports.isReadableNodeStream=exports.isWritableNodeStream=exports.isReadableDOMStream=exports.isWritableDOMStream=exports.isFileReadable=exports.isBlob=exports.isFile=exports.isFetchResponse=exports.isIterator=exports.isAsyncIterable=exports.isIterable=exports.isPromise=void 0;var e=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(e){return"boolean"==typeof e},o=function(e){return"function"==typeof e},n=function(r){return null!==r&&"object"===(0,e.default)(r)},i=function(e){return n(e)&&o(e.then)};exports.isPromise=i;var s=function(e){return e&&"function"==typeof e[Symbol.iterator]};exports.isIterable=s;var a=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]};exports.isAsyncIterable=a;var u=function(e){return e&&o(e.next)};exports.isIterator=u;var p=function(e){return"undefined"!=typeof Response&&e instanceof Response||e.arrayBuffer&&e.text&&e.json};exports.isFetchResponse=p;var l=function(e){return"undefined"!=typeof File&&e instanceof File};exports.isFile=l;var f=function(e){return"undefined"!=typeof Blob&&e instanceof Blob};exports.isBlob=f;var c=function(e){return l(e)||f(e)};exports.isFileReadable=c;var b=function(e){return n(e)&&o(e.abort)&&o(e.getWriter)};exports.isWritableDOMStream=b;var x=function(e){return n(e)&&o(e.tee)&&o(e.cancel)&&o(e.pipeTo)&&o(e.getReader)};exports.isReadableDOMStream=x;var d=function(e){return n(e)&&o(e.end)&&o(e.write)&&t(e.writable)};exports.isWritableNodeStream=d;var m=function(e){return n(e)&&o(e.read)&&o(e.pipe)&&t(e.readable)};exports.isReadableNodeStream=m;var v=function(e){return x(e)||m(e)};exports.isReadableStream=v;var y=function(e){return b(e)||d(e)};exports.isWritableStream=y;
},{"@babel/runtime/helpers/esm/typeof":"zsb/"}],"9iDM":[function(require,module,exports) {
"use strict";function e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"lltQ":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"loader assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iWwL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLoaderObject=o,exports.normalizeLoader=i;var e=t(require("@babel/runtime/helpers/esm/defineProperty")),r=t(require("../../utils/assert"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(r){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(s,!0).forEach(function(t){(0,e.default)(r,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):n(s).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))})}return r}function o(e){return!!e&&(Array.isArray(e)&&(e=e[0]),e.parseTextSync||e.parseSync||e.parse||e.loadAndParse||e.parseStream||e.parseInBatches||e.worker)}function i(e){var t;return(0,r.default)(o(e)),Array.isArray(e)&&(t=e[1],e=s({},e=e[0],{options:s({},e.options,{},t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),(0,r.default)(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../../utils/assert":"lltQ"}],"t3G8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.autoDetectLoader=a;var r=e(require("@babel/runtime/helpers/esm/typeof")),t=require("./normalize-loader");function e(r){return r&&r.__esModule?r:{default:r}}var n=/[^.]+$/;function a(r,t){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).url,n=null;return n=(n=n||o(t,void 0===e?"":e))||i(t,r)}function o(r,t){var e=t.match(n),a=e&&e[0];return a&&u(r,a)}function u(r,e){e=e.toLowerCase();var n=!0,a=!1,o=void 0;try{for(var u,i=r[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var l=u.value;(0,t.normalizeLoader)(l);var f=!0,s=!1,y=void 0;try{for(var c,v=l.extensions[Symbol.iterator]();!(f=(c=v.next()).done);f=!0){if(c.value.toLowerCase()===e)return l}}catch(d){s=!0,y=d}finally{try{f||null==v.return||v.return()}finally{if(s)throw y}}}}catch(d){a=!0,o=d}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return null}function i(r,t){var e=!0,n=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var i=o.value;if("string"==typeof t){if(l(t,i))return i}else if(t instanceof ArrayBuffer&&f(t,i))return i}}catch(s){n=!0,a=s}finally{try{e||null==u.return||u.return()}finally{if(n)throw a}}return null}function l(r,t){return t.testText&&t.testText(r)}function f(t,e){switch(Array.isArray(e.test)?"array":(0,r.default)(e.test)){case"function":return e.test(t,e);case"string":case"array":return(Array.isArray(e.test)?e.test:[e.test]).some(function(r){return r===s(t,0,r.length)});default:return!1}}function s(r,t,e){if(r.byteLength<=t+e)return"";for(var n=new DataView(r),a="",o=0;o<e;o++)a+=String.fromCharCode(n.getUint8(t+o));return a}
},{"@babel/runtime/helpers/esm/typeof":"zsb/","./normalize-loader":"iWwL"}],"HdLD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),u=r(require("@babel/runtime/helpers/esm/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(){function r(){(0,e.default)(this,r)}return(0,u.default)(r,[{key:"log",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),r}();exports.default=t;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"u6G8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeLoaderAndUserOptions=r;var e=o(require("./null-log"));function o(e){return e&&e.__esModule?e:{default:e}}function r(o,r){return null===(o=Object.assign({},r&&r.DEFAULT_OPTIONS,r&&r.defaultOptions,r&&r.options,o,{dataType:"arraybuffer"})).log&&(o.log=new e.default),"log"in o||(o.log=console),o}
},{"./null-log":"HdLD"}],"6wth":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerLoaders=t,exports.getRegisteredLoaders=a;var r=require("./loader-utils/normalize-loader"),e={};function t(t){t=Array.isArray(t)?t:[t];var a=!0,o=!1,l=void 0;try{for(var n,i=t[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var u=n.value,s=(0,r.normalizeLoader)(u),y=!0,d=!1,v=void 0;try{for(var f,c=s.extensions[Symbol.iterator]();!(y=(f=c.next()).done);y=!0){var x=f.value;e[x]=s}}catch(b){d=!0,v=b}finally{try{y||null==c.return||c.return()}finally{if(d)throw v}}}}catch(b){o=!0,l=b}finally{try{a||null==i.return||i.return()}finally{if(o)throw l}}}function a(){return Object.values(e)}
},{"./loader-utils/normalize-loader":"iWwL"}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){for(var n,o=h(r),a=o[0],u=o[1],i=new e(c(r,a,u)),f=0,A=u>0?a-4:a,d=0;d<A;d+=4)n=t[r.charCodeAt(d)]<<18|t[r.charCodeAt(d+1)]<<12|t[r.charCodeAt(d+2)]<<6|t[r.charCodeAt(d+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=255&n;return 2===u&&(n=t[r.charCodeAt(d)]<<2|t[r.charCodeAt(d+1)]>>4,i[f++]=255&n),1===u&&(n=t[r.charCodeAt(d)]<<10|t[r.charCodeAt(d+1)]<<4|t[r.charCodeAt(d+2)]>>2,i[f++]=n>>8&255,i[f++]=255&n),i}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aq/z":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aq/z","buffer":"aMB2"}],"gbz4":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(r){return e.isBuffer(r)?new Uint8Array(r).buffer:r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toArrayBuffer=r;
},{"buffer":"aMB2"}],"otEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toArrayBuffer=t;var r=f(require("../utils/assert")),e=require("../node/utils/to-array-buffer.node");function f(r){return r&&r.__esModule?r:{default:r}}function t(f){if(e.toArrayBuffer&&(f=(0,e.toArrayBuffer)(f)),f instanceof ArrayBuffer)return f;if(ArrayBuffer.isView(f))return f.buffer;if("string"==typeof f){var t=f;return(new TextEncoder).encode(t).buffer}return(0,r.default)(!1)}
},{"../utils/assert":"lltQ","../node/utils/to-array-buffer.node":"gbz4"}],"67c9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../javascript-utils/binary-utils"),r=new Map;function t(e){var t=r.get(e);if(!t){var a=new Blob([e],{type:"application/javascript"});t=URL.createObjectURL(a),r.set(e,t)}return new Worker(t)}function a(r,a,s){var o=t(r);s=n(s);var i=function(r,t){return new Promise(function(a,n){o.onmessage=function(e){switch(e.data.type){case"done":a(e.data.result),o.terminate();break;case"error":n(new Error(e.data.message))}};var s=(0,e.toArrayBuffer)(r);o.postMessage({arraybuffer:s,opts:t},[s])})};return a?i(a,s):i}function n(e){return null!==(e=Object.assign({},e)).log&&delete e.log,e}
},{"../javascript-utils/binary-utils":"otEL"}],"U9x2":[function(require,module,exports) {
"use strict";function e(e){this.wrapped=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"EMU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./AwaitValue"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){return new e.default(t)}
},{"./AwaitValue":"U9x2"}],"aZtj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("./AwaitValue"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t){var n,r;function o(n,r){try{var i=t[n](r),a=i.value,c=a instanceof e.default;Promise.resolve(c?a.wrapped:a).then(function(e){c?o("next",e):u(i.done?"return":"normal",e)},function(e){o("throw",e)})}catch(s){u("throw",s)}}function u(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(u,i){var a={key:e,arg:t,resolve:u,reject:i,next:null};r?r=r.next=a:(n=r=a,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)};
},{"./AwaitValue":"U9x2"}],"SBb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./AsyncGenerator"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return function(){return new e.default(t.apply(this,arguments))}}
},{"./AsyncGenerator":"aZtj"}],"g5I+":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"/inT":[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var e=require("process"),o=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeVersion=exports.document=exports.global=exports.window=exports.self=exports.isBrowser=void 0;var r=s(require("@babel/runtime/helpers/esm/typeof"));function s(e){return e&&e.__esModule?e:{default:e}}var t="object"!==(void 0===e?"undefined":(0,r.default)(e))||"[object process]"!==String(e)||!0;exports.isBrowser=t;var n={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document},d=n.self||n.window||n.global;exports.self=d;var l=n.window||n.self||n.global;exports.window=l;var i=n.global||n.self||n.window;exports.global=i;var a=n.document||{};exports.document=a;var p=void 0!==e&&e.version.match(/v([0-9]*)/),u=p&&parseFloat(p[1])||0;exports.nodeVersion=u;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"7Tbm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStreamIterator=s;var e=u(require("@babel/runtime/helpers/esm/asyncToGenerator")),r=u(require("@babel/runtime/regenerator")),t=u(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),n=u(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),a=require("../utils/globals");function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(a.isBrowser||a.nodeVersion>=10){if("function"==typeof e[Symbol.asyncIterator])return e;if("function"==typeof e.getIterator)return e.getIterator()}return a.isBrowser?i(e):c(e)}function i(e){return o.apply(this,arguments)}function o(){return(o=(0,n.default)(r.default.mark(function e(n){var a,u,s,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.getReader(),e.prev=1;case 2:return e.next=5,(0,t.default)(a.read());case 5:if(u=e.sent,s=u.done,i=u.value,!s){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,i;case 12:e.next=2;break;case 14:return e.prev=14,a.releaseLock(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,,14,17]])}))).apply(this,arguments)}function c(e){return f.apply(this,arguments)}function f(){return(f=(0,n.default)(r.default.mark(function e(n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.default)(n);case 2:n=e.sent;case 3:if(null===(a=n.read())){e.next=9;break}return e.next=8,a;case 8:return e.abrupt("continue",3);case 9:if(!n._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,t.default)(l(n));case 13:e.next=3;break;case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=(0,e.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){t.once("readable",e)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}
},{"@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","../utils/globals":"/inT"}],"k986":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=a(require("@babel/runtime/regenerator")),r=a(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),n=a(require("@babel/runtime/helpers/esm/createClass")),u=a(require("../../utils/assert"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){function a(e){(0,t.default)(this,a),this._fileOrBlob=e,this.bodyUsed=!1}return(0,n.default)(a,[{key:"url",value:function(){return this._fileOrBlob.name||""}},{key:"arrayBuffer",value:function(){var t=(0,r.default)(e.default.mark(function r(){var t,n,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,u=t.promise,n.readAsArrayBuffer(this._fileOrBlob),e.abrupt("return",u);case 3:case"end":return e.stop()}},r,this)}));return function(){return t.apply(this,arguments)}}()},{key:"text",value:function(){var t=(0,r.default)(e.default.mark(function r(){var t,n,u;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,u=t.promise,n.readAsText(this._fileOrBlob),e.abrupt("return",u);case 3:case"end":return e.stop()}},r,this)}));return function(){return t.apply(this,arguments)}}()},{key:"json",value:function(){var t=(0,r.default)(e.default.mark(function r(){var t;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}},r,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_getFileReader",value:function(){var e;(0,u.default)(!this.bodyUsed),this.bodyUsed=!0;var r=new Promise(function(r,t){try{(e=new FileReader).onerror=function(e){return t(new Error(e))},e.onabort=function(){return t(new Error("Read aborted."))},e.onload=function(){return r(e.result)}}catch(n){t(n)}});return{reader:e,promise:r}}},{key:"headers",get:function(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}}]),a}();function s(e,r){return Promise.resolve(new i(e,r))}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../../utils/assert":"lltQ"}],"IWzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUrlFromData=i,exports.getArrayBufferOrStringFromDataSync=o,exports.getArrayBufferOrStringFromData=f,exports.getAsyncIteratorFromData=l,exports.getIteratorFromData=p;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../../javascript-utils/is-type"),a=require("../../javascript-utils/stream-utils"),n=s(require("../fetch/fetch-file.browser"));function s(e){return e&&e.__esModule?e:{default:e}}var u="Cannot convert supplied data type";function i(e){return(0,t.isFetchResponse)(e)?e.url:null}function o(e,r){if(r.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var t=e.buffer||e;return r.text&&!r.binary?new TextDecoder("utf8").decode(t):t}throw new Error(u)}function f(e,r){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(a,s){var i;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:if(a=e.sent,i=a instanceof ArrayBuffer||ArrayBuffer.isView(a),"string"!=typeof a&&!i){e.next=6;break}return e.abrupt("return",o(a,s));case 6:if(!(0,t.isFileReadable)(a)){e.next=10;break}return e.next=9,(0,n.default)(a);case 9:a=e.sent;case 10:if(!(0,t.isFetchResponse)(a)){e.next=19;break}if(!s.binary){e.next=17;break}return e.next=14,a.arrayBuffer();case 14:e.t0=e.sent,e.next=18;break;case 17:e.t0=a.text();case 18:return e.abrupt("return",e.t0);case 19:throw new Error(u);case 20:case"end":return e.stop()}},r)}))).apply(this,arguments)}function l(e){return(0,t.isIterator)(e)?e:(0,t.isFetchResponse)(e)&&e.body?(0,a.getStreamIterator)(e.body):(0,t.isReadableStream)(e)?(0,a.getStreamIterator)(e):(0,t.isAsyncIterable)(e)?e[Symbol.asyncIterator]():p(e)}function p(r){if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))return e.default.mark(function t(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.buffer||r;case 2:case"end":return e.stop()}},t)})();if((0,t.isIterator)(r))return r;if((0,t.isIterable)(r))return r[Symbol.iterator]();throw new Error(u)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../../javascript-utils/is-type":"Oy8e","../../javascript-utils/stream-utils":"7Tbm","../fetch/fetch-file.browser":"k986"}],"S7ik":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseWithLoader=u,exports.parseWithLoaderSync=p,exports.parseWithLoaderInBatches=o,exports.parseWithLoaderInBatchesSync=i;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=s(require("../utils/assert")),a=s(require("./parse-with-worker")),n=require("./loader-utils/get-data");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,r,t,a){return c.apply(this,arguments)}function c(){return(c=(0,r.default)(e.default.mark(function r(s,u,c,p){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p=p||(0,n.getUrlFromData)(s),e.next=3,(0,n.getArrayBufferOrStringFromData)(s,u);case 3:if(s=e.sent,!u.parseTextSync||"string"!=typeof s){e.next=7;break}return c.dataType="text",e.abrupt("return",u.parseTextSync(s,c,p,u));case 7:if(!u.parseSync){e.next=9;break}return e.abrupt("return",u.parseSync(s,c,p,u));case 9:if(!u.parse){e.next=13;break}return e.next=12,u.parse(s,c,p,u);case 12:return e.abrupt("return",e.sent);case 13:if(!u.worker){e.next=17;break}return e.next=16,(0,a.default)(u.worker,s,c);case 16:return e.abrupt("return",e.sent);case 17:return e.abrupt("return",(0,t.default)(!1));case 18:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,a,s){return e=(0,n.getArrayBufferOrStringFromDataSync)(e,r),r.parseTextSync&&"string"==typeof e?r.parseTextSync(e,a,s,r):r.parseSync?r.parseSync(e,a,s,r):(0,t.default)(!1)}function o(e,r,t,a){if(r.parseInBatches){var s=(0,n.getAsyncIteratorFromData)(e);return r.parseInBatches(s,t,a,r)}return null}function i(e,r,a,s){if(r.parseInBatchesSync){var u=(0,n.getIteratorFromData)(e);return r.parseInBatchesSync(u,a,s,r,s)}return(0,t.default)(!1)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../utils/assert":"lltQ","./parse-with-worker":"67c9","./loader-utils/get-data":"IWzS"}],"hXvr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=l,exports.parseSync=c,exports.parseInBatches=p,exports.parseInBatchesSync=y;var e=i(require("@babel/runtime/regenerator")),r=i(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../javascript-utils/is-type"),a=require("./loader-utils/auto-detect-loader"),n=require("./loader-utils/normalize-loader"),s=require("./loader-utils/normalize-options"),u=require("./register-loaders"),o=require("./parse-with-loader");function i(e){return e&&e.__esModule?e:{default:e}}function l(e,r,t,a){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(i,l,d,c){var p,f;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(l)||(0,n.isLoaderObject)(l)||(c=d,d=l,l=null),p=(0,t.isFileReadable)(c)?c.name:c,l=l||(0,u.getRegisteredLoaders)(),f=Array.isArray(l)?(0,a.autoDetectLoader)(i,l,{url:p}):l){e.next=6;break}return e.abrupt("return",null);case 6:return(0,n.normalizeLoader)(f),d=(0,s.mergeLoaderAndUserOptions)(d,f),e.next=10,(0,o.parseWithLoader)(i,f,d,p);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},r)}))).apply(this,arguments)}function c(e,r,t,i){Array.isArray(r)||(0,n.isLoaderObject)(r)||(i=t,t=r,r=null),r=r||(0,u.getRegisteredLoaders)();var l=Array.isArray(r)?(0,a.autoDetectLoader)(e,r,{url:i}):r;return(0,n.normalizeLoader)(l),t=(0,s.mergeLoaderAndUserOptions)(t,l),(0,o.parseWithLoaderSync)(e,l,t,i)}function p(e,r,t,a){return f.apply(this,arguments)}function f(){return(f=(0,r.default)(e.default.mark(function r(t,i,l,d){var c;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(i)||(0,n.isLoaderObject)(i)||(d=l,l=i,i=null),i=i||(0,u.getRegisteredLoaders)(),c=Array.isArray(i)?(0,a.autoDetectLoader)(null,i,{url:d}):i,(0,n.normalizeLoader)(c),l=(0,s.mergeLoaderAndUserOptions)(l,c),e.abrupt("return",(0,o.parseWithLoaderInBatches)(t,c,l,d));case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}function y(e,r,t,a){return L.apply(this,arguments)}function L(){return(L=(0,r.default)(e.default.mark(function r(t,i,l,d){var c;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(i)||(0,n.isLoaderObject)(i)||(d=l,l=i,i=null),i=i||(0,u.getRegisteredLoaders)(),c=Array.isArray(i)?(0,a.autoDetectLoader)(null,i,{url:d}):i,(0,n.normalizeLoader)(c),l=(0,s.mergeLoaderAndUserOptions)(l,c),e.abrupt("return",(0,o.parseWithLoaderInBatches)(t,c,l,d));case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../javascript-utils/is-type":"Oy8e","./loader-utils/auto-detect-loader":"t3G8","./loader-utils/normalize-loader":"iWwL","./loader-utils/normalize-options":"u6G8","./register-loaders":"6wth","./parse-with-loader":"S7ik"}],"ZOKI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=r,exports.getPathPrefix=s,exports.addAliases=n,exports.resolvePath=i;var e="",t={};function r(t){e=t}function s(){return e}function n(e){Object.assign(t,e)}function i(r){for(var s in t)if(r.startsWith(s)){var n=t[s];return r.replace(s,n)}return r+=e}
},{}],"b40H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=i;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../../javascript-utils/is-type"),u=require("./file-aliases"),a=n(require("./fetch-file.browser"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,r){return s.apply(this,arguments)}function s(){return(s=(0,r.default)(e.default.mark(function r(n,i){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,t.isFileReadable)(n)){e.next=2;break}return e.abrupt("return",(0,a.default)(n,i));case 2:return n=(0,u.resolvePath)(n),e.abrupt("return",fetch(n,i));case 4:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../../javascript-utils/is-type":"Oy8e","./file-aliases":"ZOKI","./fetch-file.browser":"k986"}],"+3dR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadInBatches=c,exports.load=p;var e=o(require("@babel/runtime/regenerator")),r=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../javascript-utils/is-type"),a=require("./fetch/fetch-file"),n=require("./loader-utils/normalize-loader"),u=require("./loader-utils/normalize-options"),s=require("./loader-utils/auto-detect-loader"),i=require("./parse"),l=require("./register-loaders");function o(e){return e&&e.__esModule?e:{default:e}}function c(e,r,t){return d.apply(this,arguments)}function d(){return(d=(0,r.default)(e.default.mark(function r(t,n,u){var s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.fetchFile)(t,u);case 2:return s=e.sent,e.abrupt("return",(0,i.parseInBatches)(s,n,u,t));case 4:case"end":return e.stop()}},r)}))).apply(this,arguments)}function p(e,r,t){return f.apply(this,arguments)}function f(){return(f=(0,r.default)(e.default.mark(function r(o,c,d){var p,f,b;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(c)||(0,n.isLoaderObject)(c)||(d=c,c=null),p=(0,t.isFileReadable)(o)?o.name:o,c=c||(0,l.getRegisteredLoaders)(),f=Array.isArray(c)?(0,s.autoDetectLoader)(null,c,{url:p}):c,d=(0,u.mergeLoaderAndUserOptions)(d,f),!f||!f.loadAndParse){e.next=9;break}return e.next=8,f.loadAndParse(o,d);case 8:return e.abrupt("return",e.sent);case 9:if(b=o,!(0,t.isFileReadable)(b)&&"string"!=typeof b){e.next=14;break}return e.next=13,(0,a.fetchFile)(o,d);case 13:b=e.sent;case 14:return e.abrupt("return",(0,i.parse)(b,c,d,p));case 15:case"end":return e.stop()}},r)}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../javascript-utils/is-type":"Oy8e","./fetch/fetch-file":"b40H","./loader-utils/normalize-loader":"iWwL","./loader-utils/normalize-options":"u6G8","./loader-utils/auto-detect-loader":"t3G8","./parse":"hXvr","./register-loaders":"6wth"}],"sC8V":[function(require,module,exports) {

},{}],"U7bL":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSync=a;var r=o(require("@babel/runtime/helpers/esm/defineProperty")),t=o(require("fs")),n=require("./utils/to-array-buffer.node");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var i={dataType:"arraybuffer",nothrow:!0};function a(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=c(o),!t.default||!t.default.readFileSync)return null;var u=t.default.readFileSync(r,o,function(){});return u instanceof e?(0,n.toArrayBuffer)(u):u}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"text"!==(e=f({},i,{},e)).responseType&&"text"!==e.dataType||(e.encoding=e.encoding||"utf8"),e}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","fs":"sC8V","./utils/to-array-buffer.node":"gbz4","buffer":"aMB2"}],"tj7+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSyncBrowser=a;var e=r(require("../../utils/assert"));function r(e){return e&&e.__esModule?e:{default:e}}var t={dataType:"arraybuffer",nothrow:!0},n=function(e){return e.startsWith("data:")};function a(r,t){return t=s(t),n(r),t.nothrow||(0,e.default)(!1),null}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=Object.assign({},t,e)).responseType=e.responseType||e.dataType,e}
},{"../../utils/assert":"lltQ"}],"WRQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSync=n;var e=require("../../utils/globals"),r=o(require("../../node/read-file-sync.node")),t=require("./file-aliases"),i=require("./read-file.browser");function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};i.get||i.set?Object.defineProperty(r,t,i):r[t]=e[t]}return r.default=e,r}function n(o){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=(0,t.resolvePath)(o),!e.isBrowser&&r.readFileSync?r.readFileSync(o,n):(0,i.readFileSyncBrowser)(o,n)}
},{"../../utils/globals":"/inT","../../node/read-file-sync.node":"U7bL","./file-aliases":"ZOKI","./read-file.browser":"tj7+"}],"jSD1":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"oxw+":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"wqTM":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,u=o.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=u)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<u;c=o[++n])h(c)||!S(c)?s+=" "+c:s+=" "+i(c);return s},exports.deprecate=function(t,r){if(void 0!==e&&!0===e.noDeprecation)return t;if(void 0===e)return function(){return exports.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),p(r,e,r.depth)}function u(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),u=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(t);if(0===i.length){if(P(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(z(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return f(t)}var b,h="",m=!1,x=["{","}"];(d(t)&&(m=!0,x=["[","]"]),P(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return w(t)&&(h=" "+RegExp.prototype.toString.call(t)),z(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+f(t)),0!==i.length||m&&0!=t.length?r<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),b=m?a(e,t,r,u,i):i.map(function(n){return y(e,t,r,u,n,m)}),e.seen.pop(),g(b,h,x)):x[0]+h+x[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,r,n,o){for(var i=[],u=0,s=t.length;u<s;++u)A(t,String(u))?i.push(y(e,t,r,n,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,r,n,o,!0))}),i}function y(e,t,r,n,o,i){var u,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(u="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),j(u)){if(i&&o.match(/^\d+$/))return s;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+s}function g(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return null==e}function x(e){return"number"==typeof e}function v(e){return"string"==typeof e}function O(e){return"symbol"==typeof e}function j(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function z(e){return S(e)&&"[object Date]"===T(e)}function E(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"==typeof e}function D(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(t){if(j(n)&&(n=""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=e.pid;o[t]=function(){var e=exports.format.apply(exports,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=b,exports.isNull=h,exports.isNullOrUndefined=m,exports.isNumber=x,exports.isString=v,exports.isSymbol=O,exports.isUndefined=j,exports.isRegExp=w,exports.isObject=S,exports.isDate=z,exports.isError=E,exports.isFunction=P,exports.isPrimitive=D,exports.isBuffer=require("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",k(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var J="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function H(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');function n(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};r.apply(this,t).then(function(t){e.nextTick(u,null,t)},function(t){e.nextTick(R,t,u)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,t(r)),n}exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(J&&e[J]){var r;if("function"!=typeof(r=e[J]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(u){r(u)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),J&&Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},exports.promisify.custom=J,exports.callbackify=H;
},{"./support/isBuffer":"jSD1","inherits":"oxw+","process":"g5I+"}],"qTCw":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=f(require("../../utils/assert"));function f(e){return e&&e.__esModule?e:{default:e}}function t(f){if(ArrayBuffer.isView(f)&&(f=f.buffer),void 0!==e&&f instanceof ArrayBuffer){for(var t=new e(f.byteLength),u=new Uint8Array(f),n=0;n<t.length;++n)t[n]=u[n];return t}return(0,r.default)(!1)}
},{"../../utils/assert":"lltQ","buffer":"aMB2"}],"jL8C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=i,exports.writeFileSync=l;var e=u(require("fs")),t=require("util"),r=u(require("./utils/to-buffer.node"));function u(e){return e&&e.__esModule?e:{default:e}}function i(u,i){return(0,t.promisify)(e.default.writeFile)("".concat(u),(0,r.default)(i),{flag:"w"})}function l(t,u){return e.default.writeFileSync("".concat(t),(0,r.default)(u),{flag:"w"})}
},{"fs":"sC8V","util":"wqTM","./utils/to-buffer.node":"qTCw"}],"YW6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=n,exports.writeFileSync=s;var e=require("../../utils/globals"),r=l(require("../../utils/assert")),t=o(require("../../node/write-file.node")),i=require("./file-aliases");function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};i.get||i.set?Object.defineProperty(r,t,i):r[t]=e[t]}return r.default=e,r}function l(e){return e&&e.__esModule?e:{default:e}}function n(o,l,n){return o=(0,i.resolvePath)(o),!e.isBrowser&&t.writeFile?t.writeFile(o,l,n):(0,r.default)(!1)}function s(o,l,n){return o=(0,i.resolvePath)(o),!e.isBrowser&&t.writeFileSync?t.writeFileSync(o,l,n):(0,r.default)(!1)}
},{"../../utils/globals":"/inT","../../utils/assert":"lltQ","../../node/write-file.node":"jL8C","./file-aliases":"ZOKI"}],"D+qz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorMessageFromResponseSync=n,exports.getErrorMessageFromResponse=a;var e=r(require("@babel/runtime/regenerator")),t=r(require("@babel/runtime/helpers/esm/asyncToGenerator"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return"Failed to fetch resource ".concat(e.url,"(").concat(e.status,"): ").concat(e.statusText," ")}function a(e){return s.apply(this,arguments)}function s(){return(s=(0,t.default)(e.default.mark(function t(r){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(r.url," (").concat(r.status,"): "),e.prev=1,!r.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,r.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=r.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},t,null,[[1,13]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk"}],"aLrW":[function(require,module,exports) {
"use strict";function e(e,n,o,r){if(n.encode)return n.encode(e,o);if(n.encodeSync)return Promise.resolve(n.encodeSync(e,o));throw new Error("Writer could not encode data")}function n(e,n,o,r){if(n.encodeSync)return n.encodeSync(e,o);throw new Error("Writer could not synchronously encode data")}function o(e,n,o,r){if(n.encodeInBatches)return n.encodeInBatches(e,o);throw new Error("Writer could not encode data in batches")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=e,exports.encodeSync=n,exports.encodeInBatches=o;
},{}],"DSDZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.save=t,exports.saveSync=n;var e=require("./encode"),r=require("./fetch/write-file");function t(t,n,i,c){var o=(0,e.encode)(t,i,c,n);return(0,r.writeFile)(n,o)}function n(t,n,i,c){var o=(0,e.encodeSync)(t,i,c,n);return(0,r.writeFileSync)(n,o)}
},{"./encode":"aLrW","./fetch/write-file":"YW6i"}],"/02b":[function(require,module,exports) {
"use strict";function e(e){var r;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(r=e[Symbol.asyncIterator]))return r.call(e);if(Symbol.iterator&&null!=(r=e[Symbol.iterator]))return r.call(e)}throw new TypeError("Object is not async iterable")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"P7bW":[function(require,module,exports) {
"use strict";function e(e,r){var t=e instanceof ArrayBuffer?new Uint8Array(e):e,n=r instanceof ArrayBuffer?new Uint8Array(r):r,a=new Uint8Array(t.byteLength+n.byteLength);return a.set(t,0),a.set(n,t.byteLength),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatenateArrayBuffers=e;
},{}],"sq27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=c,exports.concatenateAsyncIterator=f,exports.textDecoderAsyncIterator=p,exports.textEncoderAsyncIterator=x,exports.lineAsyncIterator=v,exports.numberedLineAsyncIterator=h;var e=s(require("@babel/runtime/regenerator")),r=s(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=s(require("@babel/runtime/helpers/esm/awaitAsyncGenerator")),n=s(require("@babel/runtime/helpers/esm/wrapAsyncGenerator")),a=s(require("@babel/runtime/helpers/esm/asyncIterator")),u=require("../javascript-utils/memory-copy-utils");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,r){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(t,n){var a,u,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.next();case 3:if(a=e.sent,u=a.done,s=a.value,!u){e.next=9;break}return t.return(),e.abrupt("return");case 9:if(!n(s)){e.next=12;break}return e.abrupt("return");case 12:e.next=0;break;case 14:case"end":return e.stop()}},r)}))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(t){var n,s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=new ArrayBuffer,s="",c=!0,i=!1,e.prev=4,l=(0,a.default)(t);case 6:return e.next=8,l.next();case 8:return p=e.sent,c=p.done,e.next=12,p.value;case 12:if(o=e.sent,c){e.next=19;break}"string"==typeof(x=o)?s+=x:n=(0,u.concatenateArrayBuffers)(n,x);case 16:c=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),i=!0,f=e.t0;case 25:if(e.prev=25,e.prev=26,c||null==l.return){e.next=30;break}return e.next=30,l.return();case 30:if(e.prev=30,!i){e.next=33;break}throw f;case 33:return e.finish(30);case 34:return e.finish(25);case 35:return e.abrupt("return",s||n);case 36:case"end":return e.stop()}},r,null,[[4,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function p(e,r){return o.apply(this,arguments)}function o(){return(o=(0,n.default)(e.default.mark(function r(n,u){var s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=new TextDecoder(u),c=!0,i=!1,e.prev=3,l=(0,a.default)(n);case 5:return e.next=7,(0,t.default)(l.next());case 7:return p=e.sent,c=p.done,e.next=11,(0,t.default)(p.value);case 11:if(o=e.sent,c){e.next=19;break}return x=o,e.next=16,"string"==typeof x?x:s.decode(x,{stream:!0});case 16:c=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),i=!0,f=e.t0;case 25:if(e.prev=25,e.prev=26,c||null==l.return){e.next=30;break}return e.next=30,(0,t.default)(l.return());case 30:if(e.prev=30,!i){e.next=33;break}throw f;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}},r,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function x(e,r){return d.apply(this,arguments)}function d(){return(d=(0,n.default)(e.default.mark(function r(n,u){var s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=new TextEncoder,c=!0,i=!1,e.prev=3,l=(0,a.default)(n);case 5:return e.next=7,(0,t.default)(l.next());case 7:return p=e.sent,c=p.done,e.next=11,(0,t.default)(p.value);case 11:if(o=e.sent,c){e.next=19;break}return x=o,e.next=16,"string"==typeof x?s.encode(x):x;case 16:c=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),i=!0,f=e.t0;case 25:if(e.prev=25,e.prev=26,c||null==l.return){e.next=30;break}return e.next=30,(0,t.default)(l.return());case 30:if(e.prev=30,!i){e.next=33;break}throw f;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}},r,null,[[3,21,25,35],[26,,30,34]])}))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=(0,n.default)(e.default.mark(function r(n){var u,s,c,i,f,l,p,o,x;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u="",s=!0,c=!1,e.prev=3,f=(0,a.default)(n);case 5:return e.next=7,(0,t.default)(f.next());case 7:return l=e.sent,s=l.done,e.next=11,(0,t.default)(l.value);case 11:if(p=e.sent,s){e.next=26;break}u+=p,o=void 0;case 16:if(!((o=u.indexOf("\n"))>=0)){e.next=23;break}return x=u.slice(0,o+1),u=u.slice(o+1),e.next=21,x;case 21:e.next=16;break;case 23:s=!0,e.next=5;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),c=!0,i=e.t0;case 32:if(e.prev=32,e.prev=33,s||null==f.return){e.next=37;break}return e.next=37,(0,t.default)(f.return());case 37:if(e.prev=37,!c){e.next=40;break}throw i;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!(u.length>0)){e.next=45;break}return e.next=45,u;case 45:case"end":return e.stop()}},r,null,[[3,28,32,42],[33,,37,41]])}))).apply(this,arguments)}function h(e){return k.apply(this,arguments)}function k(){return(k=(0,n.default)(e.default.mark(function r(n){var u,s,c,i,f,l,p,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=1,s=!0,c=!1,e.prev=3,f=(0,a.default)(n);case 5:return e.next=7,(0,t.default)(f.next());case 7:return l=e.sent,s=l.done,e.next=11,(0,t.default)(l.value);case 11:if(p=e.sent,s){e.next=20;break}return o=p,e.next=16,{counter:u,line:o};case 16:u++;case 17:s=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),c=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,s||null==f.return){e.next=31;break}return e.next=31,(0,t.default)(f.return());case 31:if(e.prev=31,!c){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}},r,null,[[3,22,26,36],[27,,31,35]])}))).apply(this,arguments)}
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/awaitAsyncGenerator":"EMU2","@babel/runtime/helpers/esm/wrapAsyncGenerator":"SBb5","@babel/runtime/helpers/esm/asyncIterator":"/02b","../javascript-utils/memory-copy-utils":"P7bW"}],"ikKD":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createReadStream=h,exports.parseFile=I,exports.parseFileSync=v,exports.loadFile=q,Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(exports,"parseSync",{enumerable:!0,get:function(){return t.parseSync}}),Object.defineProperty(exports,"parseInBatches",{enumerable:!0,get:function(){return t.parseInBatches}}),Object.defineProperty(exports,"parseInBatchesSync",{enumerable:!0,get:function(){return t.parseInBatchesSync}}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function(){return n.fetchFile}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function(){return o.load}}),Object.defineProperty(exports,"loadInBatches",{enumerable:!0,get:function(){return o.loadInBatches}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return a.isBrowser}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return a.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return s.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return s.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return s.resolvePath}}),Object.defineProperty(exports,"readFileSync",{enumerable:!0,get:function(){return u.readFileSync}}),Object.defineProperty(exports,"writeFile",{enumerable:!0,get:function(){return c.writeFile}}),Object.defineProperty(exports,"writeFileSync",{enumerable:!0,get:function(){return c.writeFileSync}}),Object.defineProperty(exports,"_getErrorMessageFromResponseSync",{enumerable:!0,get:function(){return p.getErrorMessageFromResponseSync}}),Object.defineProperty(exports,"_getErrorMessageFromResponse",{enumerable:!0,get:function(){return p.getErrorMessageFromResponse}}),Object.defineProperty(exports,"registerLoaders",{enumerable:!0,get:function(){return l.registerLoaders}}),Object.defineProperty(exports,"encode",{enumerable:!0,get:function(){return f.encode}}),Object.defineProperty(exports,"encodeSync",{enumerable:!0,get:function(){return f.encodeSync}}),Object.defineProperty(exports,"encodeInBatches",{enumerable:!0,get:function(){return f.encodeInBatches}}),Object.defineProperty(exports,"save",{enumerable:!0,get:function(){return b.save}}),Object.defineProperty(exports,"saveSync",{enumerable:!0,get:function(){return b.saveSync}}),Object.defineProperty(exports,"isPromise",{enumerable:!0,get:function(){return d.isPromise}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return d.isIterable}}),Object.defineProperty(exports,"isAsyncIterable",{enumerable:!0,get:function(){return d.isAsyncIterable}}),Object.defineProperty(exports,"isIterator",{enumerable:!0,get:function(){return d.isIterator}}),Object.defineProperty(exports,"isFetchResponse",{enumerable:!0,get:function(){return d.isFetchResponse}}),Object.defineProperty(exports,"isReadableStream",{enumerable:!0,get:function(){return d.isReadableStream}}),Object.defineProperty(exports,"isWritableStream",{enumerable:!0,get:function(){return d.isWritableStream}}),Object.defineProperty(exports,"toArrayBuffer",{enumerable:!0,get:function(){return y.toArrayBuffer}}),Object.defineProperty(exports,"getStreamIterator",{enumerable:!0,get:function(){return m.getStreamIterator}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return x.forEach}}),Object.defineProperty(exports,"concatenateAsyncIterator",{enumerable:!0,get:function(){return x.concatenateAsyncIterator}}),Object.defineProperty(exports,"lineAsyncIterator",{enumerable:!0,get:function(){return x.lineAsyncIterator}}),Object.defineProperty(exports,"textDecoderAsyncIterator",{enumerable:!0,get:function(){return x.textDecoderAsyncIterator}}),Object.defineProperty(exports,"numberedLineAsyncIterator",{enumerable:!0,get:function(){return x.numberedLineAsyncIterator}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return g.default}}),exports.TextDecoder=exports.TextEncoder=void 0;var e=P(require("@babel/runtime/regenerator")),r=P(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("./lib/parse"),n=require("./lib/fetch/fetch-file"),o=require("./lib/load"),i=require("./lib/fetch/file-aliases"),a=require("./utils/globals"),s=require("./lib/fetch/file-aliases.js"),u=require("./lib/fetch/read-file"),c=require("./lib/fetch/write-file"),p=require("./lib/fetch/fetch-error-message"),l=require("./lib/register-loaders"),f=require("./lib/encode"),b=require("./lib/save"),d=require("./javascript-utils/is-type"),y=require("./javascript-utils/binary-utils"),m=require("./javascript-utils/stream-utils"),x=require("./javascript-utils/async-iterator-utils"),g=P(require("./utils/assert"));function P(e){return e&&e.__esModule?e:{default:e}}var j=a.global.TextEncoder;exports.TextEncoder=j;var O=a.global.TextDecoder;function h(e,r){return S.apply(this,arguments)}function S(){return(S=(0,r.default)(e.default.mark(function r(t,o){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("createReadStream() deprecated, use fetch().then(resp => resp.body)"),t=(0,i.resolvePath)(t),e.next=4,(0,n.fetchFile)(t,o);case 4:return a=e.sent,e.abrupt("return",a.body);case 6:case"end":return e.stop()}},r)}))).apply(this,arguments)}function I(){return console.warn("parse() deprecated, use parse()"),t.parse.apply(void 0,arguments)}function v(){return console.warn("parseSync() deprecated, use parseSync()"),t.parseSync.apply(void 0,arguments)}function q(){return console.warn("loadFile() deprecated, use load()"),o.load.apply(void 0,arguments)}exports.TextDecoder=O;
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","./lib/parse":"hXvr","./lib/fetch/fetch-file":"b40H","./lib/load":"+3dR","./lib/fetch/file-aliases":"ZOKI","./utils/globals":"/inT","./lib/fetch/file-aliases.js":"ZOKI","./lib/fetch/read-file":"WRQd","./lib/fetch/write-file":"YW6i","./lib/fetch/fetch-error-message":"D+qz","./lib/register-loaders":"6wth","./lib/encode":"aLrW","./lib/save":"DSDZ","./javascript-utils/is-type":"Oy8e","./javascript-utils/binary-utils":"otEL","./javascript-utils/stream-utils":"7Tbm","./javascript-utils/async-iterator-utils":"sq27","./utils/assert":"lltQ"}],"Jkvy":[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var e=require("process"),o=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.global=exports.isBrowser=void 0;var r=s(require("@babel/runtime/helpers/esm/typeof"));function s(e){return e&&e.__esModule?e:{default:e}}var l="object"!==(void 0===e?"undefined":(0,r.default)(e))||"[object process]"!==String(e)||!0;exports.isBrowser=l;var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o},d=t.global||t.self||t.window;exports.global=d;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"d7B5":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iplO":[function(require,module,exports) {
"use strict";function e(e,r){var t=[],l=!0,n=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(l=(u=a.next()).done)&&(t.push(u.value),!r||t.length!==r);l=!0);}catch(i){n=!0,o=i}finally{try{l||null==a.return||a.return()}finally{if(n)throw o}}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"4VRd":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"TBeo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=u(require("./arrayWithHoles")),r=u(require("./iterableToArrayLimit")),t=u(require("./nonIterableRest"));function u(e){return e&&e.__esModule?e:{default:e}}function a(u,a){return(0,e.default)(u)||(0,r.default)(u,a)||(0,t.default)()}
},{"./arrayWithHoles":"d7B5","./iterableToArrayLimit":"iplO","./nonIterableRest":"4VRd"}],"EjtO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mimeTypeMap=void 0;var t=!1,e=!0,n=new Map([["image/png",{test:i,getSize:r}],["image/jpeg",{test:o,getSize:f}],["image/gif",{test:g,getSize:u}],["image/bmp",{test:a,getSize:h}]]);function i(e){return e.byteLength>=24&&2303741511===e.getUint32(0,t)}function r(e){return{width:e.getUint32(16,t),height:e.getUint32(20,t)}}function g(e){return e.byteLength>=10&&1195984440===e.getUint32(0,t)}function u(t){return{width:t.getUint16(6,e),height:t.getUint16(8,e)}}function a(e){return e.byteLength>=2&&16973===e.getUint16(0,t)}function h(t){return{width:t.getUint32(18,e),height:t.getUint32(22,e)}}function o(e){return e.byteLength>=2&&65496===e.getUint16(0,t)}function f(e){if(e.byteLength<2||65496!==e.getUint16(0,t))return null;for(var n=s(),i=n.tableMarkers,r=n.sofMarkers,g=2;g<e.byteLength;){var u=e.getUint16(g,t);if(r.has(u))return{height:e.getUint16(g+5,t),width:e.getUint16(g+7,t)};if(!i.has(u))return null;g+=2,g+=e.getUint16(g,t)}return null}function s(){for(var t=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}exports.mimeTypeMap=n;
},{}],"hWEW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImage=a,exports.getImageMIMEType=i,exports.getImageSize=o,exports.getImageMetadata=u;var e=t(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("./image-parsers");function t(e){return e&&e.__esModule?e:{default:e}}var n="Invalid MIME type. Supported MIME types are: ".concat(Array.from(r.mimeTypeMap.keys()).join(", "));function a(e,r){return r?(0,f(r).test)(l(e)):Boolean(i(e))}function i(t){var n=l(t),a=!0,i=!1,o=void 0;try{for(var u,f=r.mimeTypeMap.entries()[Symbol.iterator]();!(a=(u=f.next()).done);a=!0){var s=(0,e.default)(u.value,2),p=s[0];if((0,s[1].test)(n))return p}}catch(y){i=!0,o=y}finally{try{a||null==f.return||f.return()}finally{if(i)throw o}}return null}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(0,f(r=r||i(e)).getSize)(l(e));if(!t)throw new Error("invalid image data for type: ".concat(r));return t}function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=o(e,r=r||i(e));return t.mimeType=r,t}function f(e){var t=r.mimeTypeMap.get(e);if(!t)throw new Error(n);return t}function l(e){if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return new DataView(e.buffer||e);throw new Error("toDataView")}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./image-parsers":"EjtO"}],"V5xx":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseImage=o,exports.loadImage=s,exports.parseToImageBitmap=c,exports.loadToHTMLImage=p,exports.canParseImage=void 0;var e=n(require("@babel/runtime/regenerator")),r=n(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=require("../utils/globals"),a=require("./get-image-metadata");function n(e){return e&&e.__esModule?e:{default:e}}var u=t.global._parseImageNode||"undefined"!=typeof ImageBitmap;function o(e,r){if(t.global._parseImageNode){var n=(0,a.getImageMetadata)(e).mimeType;return t.global._parseImageNode(e,n,r)}return c(e,r)}function s(e){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(e.default.mark(function r(t){var a,n,u,s=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:{},"undefined"!=typeof Image){e.next=9;break}return e.next=4,fetch(t,a);case 4:return n=e.sent,e.next=7,n.arrayBuffer();case 7:return u=e.sent,e.abrupt("return",o(u,a));case 9:return e.next=11,p(t,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},r)}))).apply(this,arguments)}function c(e,r){if("undefined"==typeof createImageBitmap)throw new Error("parseImage");var t=new Blob([new Uint8Array(e)]);return createImageBitmap(t,{imageOrientation:r.imageOrientation||"none",premultiplyAlpha:r.premultiplyAlpha||"default"})}function p(e,r){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(e.default.mark(function r(t,a){var n,u,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\.svg((\?|#).*)?$/.test(t)){e.next=10;break}return e.next=3,fetch(t,a);case 3:return u=e.sent,e.next=6,u.text();case 6:o=e.sent,n="data:image/svg+xml;base64,".concat(btoa(o)),e.next=13;break;case 10:return e.next=12,t;case 12:n=e.sent;case 13:return e.next=15,new Promise(function(e,r){try{var u=new Image;u.onload=function(){return e(u)},u.onerror=function(e){return r(new Error("Could not load image ".concat(t,": ").concat(e)))},u.crossOrigin=a&&a.crossOrigin||"anonymous",u.src=n}catch(o){r(o)}});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},r)}))).apply(this,arguments)}exports.canParseImage=u;
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","../utils/globals":"Jkvy","./get-image-metadata":"hWEW"}],"02Aq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HTMLImageLoader=exports.ImageBitmapLoader=exports.default=void 0;var e=require("./lib/parse-image"),a=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],r={name:"Images",extensions:a,parse:e.canParseImage&&e.parseImage,loadAndParse:!e.canParseImage&&e.loadImage};exports.default=r;var s={extensions:a,parse:e.parseToImageBitmap};exports.ImageBitmapLoader=s;var o={extensions:a,loadAndParse:e.loadToHTMLImage};exports.HTMLImageLoader=o;
},{"./lib/parse-image":"V5xx"}],"89QI":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"@loaders.gl/images assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"vojZ":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeImage=r;var e=t(require("../utils/assert")),a=require("../utils/globals");function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(a.global._encodeImageNode)return a.global._encodeImageNode(t,r);if(t instanceof HTMLCanvasElement)return t.toDataURL(r);(0,e.default)(t instanceof Image,"getImageData accepts image or canvas");var n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0);var o=n.toDataURL(r||"png").replace(/^data:image\/(png|jpg);base64,/,"");return Promise.resolve(o)}
},{"../utils/assert":"89QI","../utils/globals":"Jkvy"}],"iXQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./lib/encode-image"),t={name:"Images",extensions:["jpeg"],encode:e.encodeImage,DEFAULT_OPTIONS:{type:"png"}};exports.default=t;
},{"./lib/encode-image":"vojZ"}],"2bIz":[function(require,module,exports) {
"use strict";function e(e,t){var n=t.mimeType,r=new Blob([e],{type:void 0===n?"image/jpeg":n}),o=(window.URL||window.webkitURL).createObjectURL(r);return new Promise(function(e,t){var n=new Image;return n.onload=function(){return e(n)},n.onerror=t,n.src=o,n})}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=t||e.width,n=n||e.height;var r=document.createElement("canvas");r.width=t,r.height=n;var o=r.getContext("2d");return o.drawImage(e,0,0,t,n),o.getImageData(0,0,t,n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeImage=e,exports.getImagePixelData=t;
},{}],"DNDh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ImageLoader",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"HTMLImageLoader",{enumerable:!0,get:function(){return e.HTMLImageLoader}}),Object.defineProperty(exports,"ImageBitmapLoader",{enumerable:!0,get:function(){return e.ImageBitmapLoader}}),Object.defineProperty(exports,"ImageWriter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return t.loadImage}}),Object.defineProperty(exports,"isImage",{enumerable:!0,get:function(){return n.isImage}}),Object.defineProperty(exports,"getImageMetadata",{enumerable:!0,get:function(){return n.getImageMetadata}}),Object.defineProperty(exports,"getImageMIMEType",{enumerable:!0,get:function(){return n.getImageMIMEType}}),Object.defineProperty(exports,"getImageSize",{enumerable:!0,get:function(){return n.getImageSize}}),Object.defineProperty(exports,"decodeImage",{enumerable:!0,get:function(){return a.decodeImage}});var e=i(require("./image-loader")),r=o(require("./image-writer")),t=require("./lib/parse-image"),n=require("./lib/get-image-metadata"),a=require("./lib/image-utils-browser");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}
},{"./image-loader":"02Aq","./image-writer":"iXQV","./lib/parse-image":"V5xx","./lib/get-image-metadata":"hWEW","./lib/image-utils-browser":"2bIz"}],"UmXc":[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var e=require("process"),o=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=exports.isBrowser=void 0;var r=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}var d="object"!==(void 0===e?"undefined":(0,r.default)(e))||"[object process]"!==String(e)||!0;exports.isBrowser=d;var n="undefined"!=typeof window?window:o;exports.window=n;var s=void 0!==o?o:window;exports.global=s;var i="undefined"!=typeof document?document:{};exports.document=i;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"9jqg":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=n(require("@babel/runtime/helpers/esm/typeof"));function n(e){return e&&e.__esModule?e:{default:e}}function t(n){if("undefined"!=typeof window&&"object"===(0,r.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,r.default)(e.versions)&&Boolean(e.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,r.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=n||t;return!!(o&&o.indexOf("Electron")>=0)}
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"KFSy":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.isBrowserMainThread=o;var r=u(require("@babel/runtime/helpers/esm/typeof")),t=u(require("./is-electron"));function u(e){return e&&e.__esModule?e:{default:e}}function n(){return!("object"===(void 0===e?"undefined":(0,r.default)(e))&&"[object process]"===String(e)&&!1)||(0,t.default)()}function o(){return n()&&"undefined"!=typeof document}
},{"@babel/runtime/helpers/esm/typeof":"zsb/","./is-electron":"9jqg","process":"g5I+"}],"N1St":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var s=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===o?"undefined":(0,s.default)(o))&&o},n=t.self||t.window||t.global;exports.self=n;var d=t.window||t.self||t.global;exports.window=d;var l=t.global||t.self||t.window;exports.global=l;var p=t.document||{};exports.document=p;var u=t.process||{};exports.process=u;var f=console;exports.console=f;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"bKlm":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return n.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return n.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return n.console}}),exports.isBrowser=exports.VERSION=void 0;var t=o(require("../env/is-browser")),n=require("../env/globals");function o(e){return e&&e.__esModule?e:{default:e}}var u="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";exports.VERSION=u;var s=(0,t.default)();exports.isBrowser=s;
},{"../env/is-browser":"KFSy","../env/globals":"N1St","process":"g5I+"}],"hsjt":[function(require,module,exports) {

"use strict";var l=require("./utils/globals");l.global.probe={};
},{"./utils/globals":"bKlm"}],"WSiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var e=require("./globals"),r=i(require("./is-browser")),n=i(require("./is-electron"));function i(e){return e&&e.__esModule?e:{default:e}}function o(){return void 0!==e.window.orientation}function t(i){if(!i&&!(0,r.default)())return"Node";if((0,n.default)(i))return"Electron";var o="undefined"!=typeof navigator?navigator:{},t=i||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";var u=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return u||d?"IE":e.window.chrome?"Chrome":e.window.safari?"Safari":e.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"./globals":"N1St","./is-browser":"KFSy","./is-electron":"9jqg"}],"zNKz":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"Assertion failed")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dous":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){var r;if(e.isBrowser&&e.window.performance)r=e.window.performance.now();else if(e.process.hrtime){var o=e.process.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}
},{"./globals":"bKlm"}],"eG3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("@babel/runtime/helpers/esm/classCallCheck")),e=n(require("@babel/runtime/helpers/esm/createClass")),i=n(require("../utils/hi-res-timestamp"));function n(t){return t&&t.__esModule?t:{default:t}}var u=function(){function n(e){(0,t.default)(this,n),this.name=e,this.reset()}return(0,e.default)(n,[{key:"incrementCount",value:function(){this.addCount(1)}},{key:"decrementCount",value:function(){this.subtractCount(1)}},{key:"addCount",value:function(t){this.count+=t}},{key:"subtractCount",value:function(t){this.count-=t}},{key:"addTime",value:function(t){this.time+=t,this.lastTiming=t,this.count++}},{key:"timeStart",value:function(){this._startTime=(0,i.default)(),this._timerPending=!0}},{key:"timeEnd",value:function(){this._timerPending&&(this.addTime((0,i.default)()-this._startTime),this._timerPending=!1)}},{key:"getAverageTime",value:function(){return this.count>0?this.time/this.count:0}},{key:"getHz",value:function(){return this.time>0?this.count/(this.time/1e3):0}},{key:"reset",value:function(){this.time=0,this.count=0,this.lastTiming=0,this._startTime=0,this._timerPending=!1}}]),n}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/hi-res-timestamp":"dous"}],"OKNq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),s=r(require("./stat"));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function r(t){var s=t.id;(0,e.default)(this,r),this.id=s,this.stats={},Object.seal(this)}return(0,t.default)(r,[{key:"get",value:function(e){return this.stats[e]=this.stats[e]||new s.default(e),this.stats[e]}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach(function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./stat":"eG3p"}],"MGbH":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"cQ8X":[function(require,module,exports) {
"use strict";function t(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"JSid":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AdMH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=u(require("./arrayWithoutHoles")),r=u(require("./iterableToArray")),t=u(require("./nonIterableSpread"));function u(e){return e&&e.__esModule?e:{default:e}}function a(u){return(0,e.default)(u)||(0,r.default)(u)||(0,t.default)()}
},{"./arrayWithoutHoles":"MGbH","./iterableToArray":"cQ8X","./nonIterableSpread":"JSid"}],"wGF4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/classCallCheck")),e=i(require("@babel/runtime/helpers/esm/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){try{var e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(s){return null}}var r=function(){function i(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,t.default)(this,i),this.storage=s(n),this.id=e,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return(0,e.default)(i,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),i}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"jG5g":[function(require,module,exports) {
"use strict";function t(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(t).concat(" ".repeat(r))}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.isInteger,n=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return o(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}function o(t,e){for(var r=e.maxElts,o=void 0===r?16:r,a=e.size,c=void 0===a?1:a,i="[",s=0;s<t.length&&s<o;++s)s>0&&(i+=",".concat(s%c==0?" ":"")),i+=n(t[s],e);var u=t.length>o?"...":"]";return"".concat(i).concat(u)}function a(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,o=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(r=Math.min(r,n/t.width));var a=t.width*r,c=t.height*r,i=["font-size:1px;","padding:".concat(Math.floor(c/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(c,"px;"),"background:url(".concat(o,");"),"background-size:".concat(a,"px ").concat(c,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=t,exports.leftPad=e,exports.rightPad=r,exports.formatValue=n,exports.formatImage=a;
},{}],"FJWv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addColor=r,exports.COLOR=void 0;var e=require("./globals"),t={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function o(e){return"string"==typeof e?t[e.toUpperCase()]||t.WHITE:e}function r(t,r,E){return e.isBrowser||"string"!=typeof t||(r&&(r=o(r),t="[".concat(r,"m").concat(t,"[39m")),E&&(r=o(E),t="[".concat(E+10,"m").concat(t,"[49m"))),t}exports.COLOR=t;
},{"./globals":"bKlm"}],"ANz0":[function(require,module,exports) {
"use strict";function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),o=!0,i=!1,u=void 0;try{for(var c,f=function(){var r=c.value;"function"==typeof t[r]&&(e.find(function(t){return r===t})||(t[r]=t[r].bind(t)))},a=n[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)f()}catch(l){i=!0,u=l}finally{try{o||null==a.return||a.return()}finally{if(i)throw u}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=t;
},{}],"oukZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/typeof")),t=f(require("@babel/runtime/helpers/esm/toConsumableArray")),r=f(require("@babel/runtime/helpers/esm/defineProperty")),o=f(require("@babel/runtime/helpers/esm/classCallCheck")),i=f(require("@babel/runtime/helpers/esm/createClass")),n=require("../utils/globals"),a=f(require("../utils/local-storage")),s=require("../utils/formatters"),u=require("../utils/color"),l=require("../utils/autobind"),g=f(require("../utils/assert")),c=f(require("../utils/hi-res-timestamp"));function f(e){return e&&e.__esModule?e:{default:e}}var d={debug:n.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m={enabled:!1,priority:0};function h(){}var y={};function v(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}var p=function(){function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;(0,o.default)(this,f),this.id=e,this.VERSION=n.VERSION,this._startTs=(0,c.default)(),this._deltaTs=(0,c.default)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new a.default("__probe-".concat(this.id,"__"),m),this.userData={},this.timeStamp("".concat(this.id," started")),(0,l.autobind)(this),Object.seal(this)}return(0,i.default)(f,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number(((0,c.default)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,c.default)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function(e,t){(0,g.default)(e,t)}},{key:"warn",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return this._getLogFunction({message:e,args:r,method:d.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return this._getLogFunction({message:e,args:r,method:d.error})}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.debug})}},{key:"info",value:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:console.info})}},{key:"once",value:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:o,method:d.debug||d.info,once:!0})}},{key:"table",value:function(e,t,r){if(t){var o=v(t);return this._getLogFunction({priority:e,message:t,args:r&&[r],tag:o,method:console.table||h})}return h}},{key:"image",value:function(e){var t=e.priority,r=e.image,o=e.message,i=void 0===o?"":o,a=e.scale,s=void 0===a?1:a;return t>this.getPriority()?h:n.isBrowser?this._logImageInBrowser({image:r,message:i,scale:s}):this._logImageInNode({image:r,message:i,scale:s})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration((0,r.default)({},e,t))}},{key:"_logImageInNode",value:function(e){var t=e.image,r=(e.message,e.scale),o=void 0===r?1:r,i=null;try{i=module.require("asciify-image")}catch(n){}return i?function(){return i(t,{fit:"box",width:"".concat(Math.round(80*o),"%")}).then(function(e){return console.log(e)})}:h}},{key:"_logImageInBrowser",value:function(e){var r=e.image,o=e.message,i=void 0===o?"":o,n=e.scale,a=void 0===n?1:n;if("string"==typeof r){var u=new Image;return u.onload=function(){var e,r=(0,s.formatImage)(u,i,a);(e=console).log.apply(e,(0,t.default)(r))},u.src=r,h}var l,g=r.nodeName||"";if("img"===g.toLowerCase())return(l=console).log.apply(l,(0,t.default)((0,s.formatImage)(r,i,a))),h;if("canvas"===g.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,(0,t.default)((0,s.formatImage)(c,i,a)))},c.src=r.toDataURL(),h}return h}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||h})}},{key:"group",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},o=(r=this._normalizeArguments({priority:e,message:t,opts:r})).collapsed;return this._getLogFunction({priority:e,message:t,opts:r,method:(o?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||h})}},{key:"withGroup",value:function(e,t,r){var o=this._normalizeArguments({priority:e,message:t});this.group(o);try{r()}finally{this.groupEnd(o.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=(0,c.default)(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var r=e.method;e=this._parseArguments(e),(0,g.default)(r);var o=e.message,i=e.tag||e.message;if(e.once){if(y[i])return h;y[i]=(0,c.default)()}return o=this._decorateMessage(o,e),r.bind.apply(r,[console,o].concat((0,t.default)(e.args)))}return h}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),r=this._getElapsedTime(),o=r.delta,i=r.total;return Object.assign(e,t,{delta:o,total:i})}},{key:"_normalizePriority",value:function(t){var r;switch((0,e.default)(t)){case"number":r=t;break;case"object":r=t.priority||0;break;default:r=0}return(0,g.default)(Number.isFinite(r)&&r>=0),r}},{key:"_normalizeArguments",value:function(t){var r=t.priority,o=t.message,i=t.args,n=void 0===i?[]:i,a=t.opts,s={priority:this._normalizePriority(r),message:o,args:n};switch((0,e.default)(r)){case"string":case"function":void 0!==o&&n.unshift(o),Object.assign(s,{message:r});break;case"object":Object.assign(s,r)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),(0,g.default)("string"==typeof s.message||"object"===(0,e.default)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var r="";if(t.time){var o=this._getElapsedTime().total;r=(0,s.leftPad)((0,s.formatTime)(o))}e=t.time?"".concat(this.id,": ").concat(r,"  ").concat(e):"".concat(this.id,": ").concat(e),e=(0,u.addColor)(e,t.color,t.background)}return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),f}();exports.default=p,p.VERSION=n.VERSION;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/globals":"bKlm","../utils/local-storage":"wGF4","../utils/formatters":"jG5g","../utils/color":"FJWv","../utils/autobind":"ANz0","../utils/assert":"zNKz","../utils/hi-res-timestamp":"dous"}],"T+YN":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return t.VERSION}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return n.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return n.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return n.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return o.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return u.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return f.COLOR}}),Object.defineProperty(exports,"addColor",{enumerable:!0,get:function(){return f.addColor}}),Object.defineProperty(exports,"leftPad",{enumerable:!0,get:function(){return c.leftPad}}),Object.defineProperty(exports,"rightPad",{enumerable:!0,get:function(){return c.rightPad}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return b.autobind}}),Object.defineProperty(exports,"LocalStorage",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"getHiResTimestamp",{enumerable:!0,get:function(){return d.default}}),exports.default=void 0,require("./init");var t=require("./utils/globals"),n=require("./env/globals"),o=O(require("./env/is-browser")),u=O(require("./env/get-browser")),i=g(require("./env/is-electron")),s=g(require("./utils/assert")),l=g(require("./lib/stats")),a=g(require("./lib/log")),f=require("./utils/color"),c=require("./utils/formatters"),b=require("./utils/autobind"),p=g(require("./utils/local-storage")),d=g(require("./utils/hi-res-timestamp"));function g(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var P=new a.default({id:"probe.gl"});exports.default=P;
},{"./init":"hsjt","./utils/globals":"bKlm","./env/globals":"N1St","./env/is-browser":"KFSy","./env/get-browser":"WSiT","./env/is-electron":"9jqg","./utils/assert":"zNKz","./lib/stats":"OKNq","./lib/log":"oukZ","./utils/color":"FJWv","./utils/formatters":"jG5g","./utils/autobind":"ANz0","./utils/local-storage":"wGF4","./utils/hi-res-timestamp":"dous","process":"g5I+"}],"GVus":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("probe.gl"),r=new e.Log({id:"deck"}).enable();exports.default=r;
},{"probe.gl":"T+YN"}],"DDDc":[function(require,module,exports) {
"use strict";function e(e){var t=e[0],s=e[e.length-1];return"{"===t&&"}"===s||"["===t&&"]"===s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={name:"JSON",extensions:["json","geojson"],testText:e,parseTextSync:JSON.parse};exports.default=t;
},{}],"Xl2d":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=o(require("@babel/runtime/helpers/esm/typeof"));function o(e){return e&&e.__esModule?e:{default:e}}function t(){return"undefined"!=typeof window&&"object"===(0,r.default)(window.process)&&"renderer"===window.process.type||(!(void 0===e||"object"!==(0,r.default)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":(0,r.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}var n=t();exports.default=n;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","process":"g5I+"}],"kDKo":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isBrowserMainThread=void 0;var r=o(require("@babel/runtime/helpers/esm/typeof")),t=o(require("./is-electron"));function o(e){return e&&e.__esModule?e:{default:e}}var s="object"===(void 0===e?"undefined":(0,r.default)(e))&&"[object process]"===String(e)&&!1,d=!s||t.default,u=d&&"undefined"!=typeof document;exports.isBrowserMainThread=u;var i=d;exports.default=i;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","./is-electron":"Xl2d","process":"g5I+"}],"gHeQ":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.document=exports.global=exports.window=exports.self=void 0;var o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},d=o.self||o.window||o.global;exports.self=d;var l=o.window||o.self||o.global;exports.window=l;var n=o.global||o.self||o.window;exports.global=n;var t=o.document||{};exports.document=t;
},{}],"Y0qP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("probe.gl"),r=new e.Log({id:"luma"}).enable();exports.default=r;
},{"probe.gl":"T+YN"}],"eEGv":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"webgl2-polyfill: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Gm4t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParameterPolyfill=g;var e,t=u(require("@babel/runtime/helpers/esm/defineProperty"));function u(e){return e&&e.__esModule?e:{default:e}}var n="OES_element_index",r="WEBGL_draw_buffers",f="EXT_disjoint_timer_query",a="EXT_disjoint_timer_query_webgl2",d="EXT_texture_filter_anisotropic",l="WEBGL_debug_renderer_info",i=35723,o=4352,_=36795,E=34047,s=37445,c=37446,v=function(e){return x(e)?void 0:0},T=(e={},(0,t.default)(e,3074,function(e){return x(e)?void 0:36064}),(0,t.default)(e,i,function(e){return x(e)?void 0:o}),(0,t.default)(e,35977,v),(0,t.default)(e,32937,v),(0,t.default)(e,_,function(e,t){var u=x(e)?e.getExtension(a):e.getExtension(f);return u&&u.GPU_DISJOINT_EXT?t(u.GPU_DISJOINT_EXT):0}),(0,t.default)(e,s,function(e,t){var u=e.getExtension(l);return t(u&&u.UNMASKED_VENDOR_WEBGL||7936)}),(0,t.default)(e,c,function(e,t){var u=e.getExtension(l);return t(u&&u.UNMASKED_RENDERER_WEBGL||7937)}),(0,t.default)(e,E,function(e,t){var u=e.luma.extensions[d];return u?t(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,t.default)(e,32883,v),(0,t.default)(e,35071,v),(0,t.default)(e,37447,v),(0,t.default)(e,36063,function(e,t){if(!x(e)){var u=e.getExtension(r);return u?t(u.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,t.default)(e,35379,v),(0,t.default)(e,35374,v),(0,t.default)(e,35377,v),(0,t.default)(e,34852,function(e){if(!x(e)){var t=e.getExtension(r);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,t.default)(e,36203,function(e){return e.getExtension(n)?2147483647:65535}),(0,t.default)(e,33001,function(e){return e.getExtension(n)?16777216:65535}),(0,t.default)(e,33e3,function(e){return 16777216}),(0,t.default)(e,37157,v),(0,t.default)(e,35373,v),(0,t.default)(e,35657,v),(0,t.default)(e,36183,v),(0,t.default)(e,37137,v),(0,t.default)(e,34045,v),(0,t.default)(e,35978,v),(0,t.default)(e,35979,v),(0,t.default)(e,35968,v),(0,t.default)(e,35376,v),(0,t.default)(e,35375,v),(0,t.default)(e,35659,v),(0,t.default)(e,37154,v),(0,t.default)(e,35371,v),(0,t.default)(e,35658,v),(0,t.default)(e,35076,v),(0,t.default)(e,35077,v),(0,t.default)(e,35380,v),e);function x(e){return Boolean(e&&2===e._version)}function g(e,t,u){var n=T[u],r="function"==typeof n?n(e,t,u):n;return void 0!==r?r:t(u)}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM"}],"whrK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WEBGL2_CONTEXT_OVERRIDES=exports.WEBGL2_CONTEXT_POLYFILLS=void 0;var e,r=a(require("@babel/runtime/helpers/esm/defineProperty")),t=a(require("./assert")),n=require("./polyfills/get-parameter-polyfill");function a(e){return e&&e.__esModule?e:{default:e}}var u="OES_vertex_array_object",i="ANGLE_instanced_arrays",f="WEBGL_draw_buffers",o="EXT_disjoint_timer_query",s="EXT_texture_filter_anisotropic",c="VertexArray requires WebGL2 or OES_vertex_array_object extension";function d(e){return Boolean(e&&2===e._version)}function l(e,r){return{webgl2:d(e),ext:e.getExtension(r)}}var _=(e={},(0,r.default)(e,u,{meta:{suffix:"OES"},createVertexArray:function(){(0,t.default)(!1,c)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,r.default)(e,i,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,r){(0,t.default)(0===r,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,r.default)(e,f,{meta:{suffix:"WEBGL"},drawBuffers:function(){(0,t.default)(!1)}}),(0,r.default)(e,o,{meta:{suffix:"EXT"},createQuery:function(){(0,t.default)(!1)},deleteQuery:function(){(0,t.default)(!1)},beginQuery:function(){(0,t.default)(!1)},endQuery:function(){},getQuery:function(e,r){return this.getQueryObject(e,r)},getQueryParameter:function(e,r){return this.getQueryObject(e,r)},getQueryObject:function(){}}),e);exports.WEBGL2_CONTEXT_POLYFILLS=_;var E={readBuffer:function(e,r,t){d(e)&&r(t)},getVertexAttrib:function(e,r,t,n){var a,u=l(e,i),f=u.webgl2,o=u.ext;switch(n){case 35069:a=!!f&&void 0;break;case 35070:a=f||o?void 0:0}return void 0!==a?a:r(t,n)},getProgramParameter:function(e,r,t,n){if(!d(e))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return r(t,n)},getInternalformatParameter:function(e,r,t,n,a){if(!d(e))switch(a){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(t,n,a)},getTexParameter:function(e,r,t,n){switch(n){case 34046:var a=e.luma.extensions[s];n=a&&a.TEXTURE_MAX_ANISOTROPY_EXT||34046}return r(t,n)},getParameter:n.getParameterPolyfill,hint:function(e,r,t,n){return r(t,n)}};exports.WEBGL2_CONTEXT_OVERRIDES=E;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","./assert":"eEGv","./polyfills/get-parameter-polyfill":"Gm4t"}],"SemM":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=r(require("./assert")),n=require("./polyfill-table");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.luma=t.luma||{},l(t),t.luma.polyfilled||(u(t,n.WEBGL2_CONTEXT_POLYFILLS),i(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0),t}var a=void 0!==t?t:window;function l(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;t.luma[i]=t.getExtension(i)}}catch(u){r=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}function i(t,e){var r=e.target,o=e.target2;Object.keys(n.WEBGL2_CONTEXT_OVERRIDES).forEach(function(e){if("function"==typeof n.WEBGL2_CONTEXT_OVERRIDES[e]){var a=t[e]?t[e].bind(t):function(){},l=n.WEBGL2_CONTEXT_OVERRIDES[e].bind(null,t,a);r[e]=l,o[e]=l}})}function u(t,e){var n=!0,r=!1,o=void 0;try{for(var a,l=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;"overrides"!==i&&f(t,{extension:i,target:t.luma,target2:t})}}catch(u){r=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}function f(t,r){var o=r.extension,a=r.target,l=r.target2,i=n.WEBGL2_CONTEXT_POLYFILLS[o];(0,e.default)(i);for(var u=i.meta,f=(void 0===u?{}:u).suffix,c=void 0===f?"":f,v=t.getExtension(o),y=function(){var e=s[d],n="".concat(e).concat(c),r=null;"meta"===e||"function"==typeof t[e]||(v&&"function"==typeof v[n]?r=function(){return v[n].apply(v,arguments)}:"function"==typeof i[e]&&(r=i[e].bind(a))),r&&(a[e]=r,l[e]=r)},d=0,s=Object.keys(i);d<s.length;d++)y()}a.polyfillContext=o;
},{"./assert":"eEGv","./polyfill-table":"whrK"}],"RKfQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"polyfillContext",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=t(require("./polyfill-context"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./polyfill-context":"SemM"}],"HGnm":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return a.global}}),exports.default=exports.lumaStats=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),l=u(require("@babel/runtime/helpers/esm/createClass")),t=u(require("./utils/is-browser")),a=require("./utils/globals"),r=u(require("./utils/log")),s=require("probe.gl");function u(e){return e&&e.__esModule?e:{default:e}}require("@luma.gl/webgl2-polyfill");var o="7.2.0-beta.1",i="set luma.log.priority=1 (or higher) to trace rendering",n=function(){function t(){(0,e.default)(this,t),this.stats=new Map}return(0,l.default)(t,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new s.Stats({id:e})),this.stats.get(e)}}]),t}(),g=new n;if(exports.lumaStats=g,a.global.luma&&a.global.luma.VERSION!==o)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(a.global.luma.VERSION," vs ").concat(o));a.global.luma||(t.default&&r.default.log(1,"luma.gl ".concat(o," - ").concat(i))(),a.global.luma=a.global.luma||{VERSION:o,version:o,log:r.default,stats:g,globals:{modules:{},nodeIO:{}}});var b=a.global.luma;exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./utils/is-browser":"kDKo","./utils/globals":"gHeQ","./utils/log":"Y0qP","probe.gl":"T+YN","@luma.gl/webgl2-polyfill":"RKfQ"}],"KdlA":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"7T80":[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return!0;var t=Array.isArray(r)||ArrayBuffer.isView(r),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&r.length===e.length){for(var f=0;f<r.length;++f)if(r[f]!==e[f])return!1;return!0}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"HoOA":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)return!1;return!0}function r(e){return Boolean(e&&2===e._version)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObjectEmpty=e,exports.isWebGL2=r;
},{}],"1u9P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"deepArrayEqual",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return t.isWebGL2}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return t.isObjectEmpty}});var e=u(require("./assert")),r=u(require("./deep-array-equal")),t=require("./utils");function u(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"KdlA","./deep-array-equal":"7T80","./utils":"HoOA"}],"ewoQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_PARAMETER_GETTERS=exports.GL_COMPOSITE_PARAMETER_SETTERS=exports.GL_PARAMETER_SETTERS=exports.GL_PARAMETER_DEFAULTS=void 0;var e,t,u,l=n(require("@babel/runtime/helpers/esm/toConsumableArray")),a=n(require("@babel/runtime/helpers/esm/defineProperty")),f=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var d=(e={},(0,a.default)(e,3042,!1),(0,a.default)(e,32773,new Float32Array([0,0,0,0])),(0,a.default)(e,32777,32774),(0,a.default)(e,34877,32774),(0,a.default)(e,32969,1),(0,a.default)(e,32968,0),(0,a.default)(e,32971,1),(0,a.default)(e,32970,0),(0,a.default)(e,3106,new Float32Array([0,0,0,0])),(0,a.default)(e,3107,[!0,!0,!0,!0]),(0,a.default)(e,2884,!1),(0,a.default)(e,2885,1029),(0,a.default)(e,2929,!1),(0,a.default)(e,2931,1),(0,a.default)(e,2932,513),(0,a.default)(e,2928,new Float32Array([0,1])),(0,a.default)(e,2930,!0),(0,a.default)(e,3024,!0),(0,a.default)(e,36006,null),(0,a.default)(e,2886,2305),(0,a.default)(e,33170,4352),(0,a.default)(e,2849,1),(0,a.default)(e,32823,!1),(0,a.default)(e,32824,0),(0,a.default)(e,10752,0),(0,a.default)(e,32938,1),(0,a.default)(e,32939,!1),(0,a.default)(e,3089,!1),(0,a.default)(e,3088,new Int32Array([0,0,1024,1024])),(0,a.default)(e,2960,!1),(0,a.default)(e,2961,0),(0,a.default)(e,2968,4294967295),(0,a.default)(e,36005,4294967295),(0,a.default)(e,2962,519),(0,a.default)(e,2967,0),(0,a.default)(e,2963,4294967295),(0,a.default)(e,34816,519),(0,a.default)(e,36003,0),(0,a.default)(e,36004,4294967295),(0,a.default)(e,2964,7680),(0,a.default)(e,2965,7680),(0,a.default)(e,2966,7680),(0,a.default)(e,34817,7680),(0,a.default)(e,34818,7680),(0,a.default)(e,34819,7680),(0,a.default)(e,2978,new Int32Array([0,0,1024,1024])),(0,a.default)(e,3333,4),(0,a.default)(e,3317,4),(0,a.default)(e,37440,!1),(0,a.default)(e,37441,!1),(0,a.default)(e,37443,37444),(0,a.default)(e,35723,4352),(0,a.default)(e,36010,null),(0,a.default)(e,35977,!1),(0,a.default)(e,3330,0),(0,a.default)(e,3332,0),(0,a.default)(e,3331,0),(0,a.default)(e,3314,0),(0,a.default)(e,32878,0),(0,a.default)(e,3316,0),(0,a.default)(e,3315,0),(0,a.default)(e,32877,0),e);exports.GL_PARAMETER_DEFAULTS=d;var r=function(e,t,u){return t?e.enable(u):e.disable(u)},c=function(e,t,u){return e.hint(u,t)},o=function(e,t,u){return e.pixelStorei(u,t)},i=function(e,t){var u=(0,f.isWebGL2)(e)?36009:36160;return e.bindFramebuffer(u,t)},s=function(e,t){return e.bindFramebuffer(36008,t)},p=(t={},(0,a.default)(t,3042,r),(0,a.default)(t,32773,function(e,t){return e.blendColor.apply(e,(0,l.default)(t))}),(0,a.default)(t,32777,"blendEquation"),(0,a.default)(t,34877,"blendEquation"),(0,a.default)(t,32969,"blendFunc"),(0,a.default)(t,32968,"blendFunc"),(0,a.default)(t,32971,"blendFunc"),(0,a.default)(t,32970,"blendFunc"),(0,a.default)(t,3106,function(e,t){return e.clearColor.apply(e,(0,l.default)(t))}),(0,a.default)(t,3107,function(e,t){return e.colorMask.apply(e,(0,l.default)(t))}),(0,a.default)(t,2884,r),(0,a.default)(t,2885,function(e,t){return e.cullFace(t)}),(0,a.default)(t,2929,r),(0,a.default)(t,2931,function(e,t){return e.clearDepth(t)}),(0,a.default)(t,2932,function(e,t){return e.depthFunc(t)}),(0,a.default)(t,2928,function(e,t){return e.depthRange.apply(e,(0,l.default)(t))}),(0,a.default)(t,2930,function(e,t){return e.depthMask(t)}),(0,a.default)(t,3024,r),(0,a.default)(t,35723,c),(0,a.default)(t,36006,i),(0,a.default)(t,2886,function(e,t){return e.frontFace(t)}),(0,a.default)(t,33170,c),(0,a.default)(t,2849,function(e,t){return e.lineWidth(t)}),(0,a.default)(t,32823,r),(0,a.default)(t,32824,"polygonOffset"),(0,a.default)(t,10752,"polygonOffset"),(0,a.default)(t,35977,r),(0,a.default)(t,32938,"sampleCoverage"),(0,a.default)(t,32939,"sampleCoverage"),(0,a.default)(t,3089,r),(0,a.default)(t,3088,function(e,t){return e.scissor.apply(e,(0,l.default)(t))}),(0,a.default)(t,2960,r),(0,a.default)(t,2961,function(e,t){return e.clearStencil(t)}),(0,a.default)(t,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),(0,a.default)(t,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),(0,a.default)(t,2962,"stencilFuncFront"),(0,a.default)(t,2967,"stencilFuncFront"),(0,a.default)(t,2963,"stencilFuncFront"),(0,a.default)(t,34816,"stencilFuncBack"),(0,a.default)(t,36003,"stencilFuncBack"),(0,a.default)(t,36004,"stencilFuncBack"),(0,a.default)(t,2964,"stencilOpFront"),(0,a.default)(t,2965,"stencilOpFront"),(0,a.default)(t,2966,"stencilOpFront"),(0,a.default)(t,34817,"stencilOpBack"),(0,a.default)(t,34818,"stencilOpBack"),(0,a.default)(t,34819,"stencilOpBack"),(0,a.default)(t,2978,function(e,t){return e.viewport.apply(e,(0,l.default)(t))}),(0,a.default)(t,3333,o),(0,a.default)(t,3317,o),(0,a.default)(t,37440,o),(0,a.default)(t,37441,o),(0,a.default)(t,37443,o),(0,a.default)(t,3330,o),(0,a.default)(t,3332,o),(0,a.default)(t,3331,o),(0,a.default)(t,36010,s),(0,a.default)(t,3314,o),(0,a.default)(t,32878,o),(0,a.default)(t,3316,o),(0,a.default)(t,3315,o),(0,a.default)(t,32877,o),t);exports.GL_PARAMETER_SETTERS=p;var E={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}};exports.GL_COMPOSITE_PARAMETER_SETTERS=E;var F=function(e,t){return e.isEnabled(t)},b=(u={},(0,a.default)(u,3042,F),(0,a.default)(u,2884,F),(0,a.default)(u,2929,F),(0,a.default)(u,3024,F),(0,a.default)(u,32823,F),(0,a.default)(u,32926,F),(0,a.default)(u,32928,F),(0,a.default)(u,3089,F),(0,a.default)(u,2960,F),(0,a.default)(u,35977,F),u);exports.GL_PARAMETER_GETTERS=b;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/defineProperty":"9iDM","../utils":"1u9P"}],"wDcN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameter=n,exports.setParameters=u,exports.getParameter=E,exports.getParameters=s,exports.getDefaultParameters=o,exports.resetParameters=i,exports.getModifiedParameters=A;var e=require("./webgl-parameter-tables"),r=a(require("../utils/deep-array-equal")),t=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}function n(r,a,n){var u=e.GL_PARAMETER_GETTERS[a],E=u?u(r,Number(a)):r.getParameter(Number(a)),s=e.GL_PARAMETER_SETTERS[a];return(0,t.assert)("function"==typeof s),s(r,n,Number(a)),E}function u(r,t){var a={};for(var n in t){var u=Number(n),E=e.GL_PARAMETER_SETTERS[n];E&&("string"==typeof E?a[E]=!0:E(r,t[n],u))}var s=r.state&&r.state.cache;if(s){var o=Object.assign({},s,t);for(var i in a){(0,e.GL_COMPOSITE_PARAMETER_SETTERS[i])(r,o)}}}function E(r,t){var a=e.GL_PARAMETER_GETTERS[t];return a?a(r,Number(t)):r.getParameter(Number(t))}function s(r,t){t=t||e.GL_PARAMETER_DEFAULTS;var a=Array.isArray(t)?t:Object.keys(t),n={},u=!0,s=!1,o=void 0;try{for(var i,A=a[Symbol.iterator]();!(u=(i=A.next()).done);u=!0){var T=i.value;n[T]=E(r,T)}}catch(R){s=!0,o=R}finally{try{u||null==A.return||A.return()}finally{if(s)throw o}}return n}function o(r){return Object.assign({},e.GL_PARAMETER_DEFAULTS,{})}function i(e){u(e,o(e))}function A(t){var a=s(t,Object.keys(e.GL_PARAMETER_DEFAULTS)),n={};for(var u in e.GL_PARAMETER_DEFAULTS)(0,r.default)(a[u],e.GL_PARAMETER_DEFAULTS[u])||(n[u]=a[u]);return n}
},{"./webgl-parameter-tables":"ewoQ","../utils/deep-array-equal":"7T80","../utils":"1u9P"}],"uWVD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/slicedToArray")),n=t(require("@babel/runtime/helpers/esm/toConsumableArray"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var a={framebuffer:function(e,n){var t=n&&"handle"in n?n.handle:n;return e.bindFramebuffer(36160,t)},blend:function(e,n){return n?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,(0,n.default)(t))},blendEquation:function(e,t){t=r(t)?t:[t,t],e.blendEquationSeparate.apply(e,(0,n.default)(t))},blendFunc:function(e,t){t=r(t)&&2===t.length?[].concat((0,n.default)(t),(0,n.default)(t)):t,e.blendFuncSeparate.apply(e,(0,n.default)(t))},clearColor:function(e,t){return e.clearColor.apply(e,(0,n.default)(t))},clearDepth:function(e,n){return e.clearDepth(n)},clearStencil:function(e,n){return e.clearStencil(n)},colorMask:function(e,t){return e.colorMask.apply(e,(0,n.default)(t))},cull:function(e,n){return n?e.enable(2884):e.disable(2884)},cullFace:function(e,n){return e.cullFace(n)},depthTest:function(e,n){return n?e.enable(2929):e.disable(2929)},depthFunc:function(e,n){return e.depthFunc(n)},depthMask:function(e,n){return e.depthMask(n)},depthRange:function(e,t){return e.depthRange.apply(e,(0,n.default)(t))},dither:function(e,n){return n?e.enable(3024):e.disable(3024)},derivativeHint:function(e,n){e.hint(35723,n)},frontFace:function(e,n){return e.frontFace(n)},mipmapHint:function(e,n){return e.hint(33170,n)},lineWidth:function(e,n){return e.lineWidth(n)},polygonOffsetFill:function(e,n){return n?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,(0,n.default)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,(0,n.default)(t))},scissorTest:function(e,n){return n?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,(0,n.default)(t))},stencilTest:function(e,n){return n?e.enable(2960):e.disable(2960)},stencilMask:function(n,t){var a=t=r(t)?t:[t,t],l=(0,e.default)(a,2),u=l[0],i=l[1];n.stencilMaskSeparate(1028,u),n.stencilMaskSeparate(1029,i)},stencilFunc:function(t,a){var l=a=r(a)&&3===a.length?[].concat((0,n.default)(a),(0,n.default)(a)):a,u=(0,e.default)(l,6),i=u[0],c=u[1],o=u[2],f=u[3],s=u[4],d=u[5];t.stencilFuncSeparate(1028,i,c,o),t.stencilFuncSeparate(1029,f,s,d)},stencilOp:function(t,a){var l=a=r(a)&&3===a.length?[].concat((0,n.default)(a),(0,n.default)(a)):a,u=(0,e.default)(l,6),i=u[0],c=u[1],o=u[2],f=u[3],s=u[4],d=u[5];t.stencilOpSeparate(1028,i,c,o),t.stencilOpSeparate(1029,f,s,d)},viewport:function(e,t){return e.viewport.apply(e,(0,n.default)(t))}};exports.default=a;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/toConsumableArray":"AdMH"}],"aB8E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameters=a;var e=require("./unified-parameter-api"),r=t(require("./webgl-setter-function-table"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a){for(var u in(0,e.setParameters)(t,a),a){var i=r.default[u];i&&i(t,a[u],u)}}
},{"./unified-parameter-api":"wDcN","./webgl-setter-function-table":"uWVD"}],"S/xz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}var u={enable:function(t,u){return t((0,e.default)({},u,!0))},disable:function(t,u){return t((0,e.default)({},u,!1))},pixelStorei:function(t,u,n){return t((0,e.default)({},u,n))},hint:function(t,u,n){return t((0,e.default)({},u,n))},bindFramebuffer:function(t,u,n){var r;switch(u){case 36160:return t((r={},(0,e.default)(r,36006,n),(0,e.default)(r,36010,n),r));case 36009:return t((0,e.default)({},36006,n));case 36008:return t((0,e.default)({},36010,n));default:return null}},blendColor:function(t,u,n,r,a){return t((0,e.default)({},32773,new Float32Array([u,n,r,a])))},blendEquation:function(t,u){var n;return t((n={},(0,e.default)(n,32777,u),(0,e.default)(n,34877,u),n))},blendEquationSeparate:function(t,u,n){var r;return t((r={},(0,e.default)(r,32777,u),(0,e.default)(r,34877,n),r))},blendFunc:function(t,u,n){var r;return t((r={},(0,e.default)(r,32969,u),(0,e.default)(r,32968,n),(0,e.default)(r,32971,u),(0,e.default)(r,32970,n),r))},blendFuncSeparate:function(t,u,n,r,a){var f;return t((f={},(0,e.default)(f,32969,u),(0,e.default)(f,32968,n),(0,e.default)(f,32971,r),(0,e.default)(f,32970,a),f))},clearColor:function(t,u,n,r,a){return t((0,e.default)({},3106,new Float32Array([u,n,r,a])))},clearDepth:function(t,u){return t((0,e.default)({},2931,u))},clearStencil:function(t,u){return t((0,e.default)({},2961,u))},colorMask:function(t,u,n,r,a){return t((0,e.default)({},3107,[u,n,r,a]))},cullFace:function(t,u){return t((0,e.default)({},2885,u))},depthFunc:function(t,u){return t((0,e.default)({},2932,u))},depthRange:function(t,u,n){return t((0,e.default)({},2928,new Float32Array([u,n])))},depthMask:function(t,u){return t((0,e.default)({},2930,u))},frontFace:function(t,u){return t((0,e.default)({},2886,u))},lineWidth:function(t,u){return t((0,e.default)({},2849,u))},polygonOffset:function(t,u,n){var r;return t((r={},(0,e.default)(r,32824,u),(0,e.default)(r,10752,n),r))},sampleCoverage:function(t,u,n){var r;return t((r={},(0,e.default)(r,32938,u),(0,e.default)(r,32939,n),r))},scissor:function(t,u,n,r,a){return t((0,e.default)({},3088,new Int32Array([u,n,r,a])))},stencilMask:function(t,u){var n;return t((n={},(0,e.default)(n,2968,u),(0,e.default)(n,36005,u),n))},stencilMaskSeparate:function(t,u,n){return t((0,e.default)({},1028===u?2968:36005,n))},stencilFunc:function(t,u,n,r){var a;return t((a={},(0,e.default)(a,2962,u),(0,e.default)(a,2967,n),(0,e.default)(a,2963,r),(0,e.default)(a,34816,u),(0,e.default)(a,36003,n),(0,e.default)(a,36004,r),a))},stencilFuncSeparate:function(t,u,n,r,a){var f;return t((f={},(0,e.default)(f,1028===u?2962:34816,n),(0,e.default)(f,1028===u?2967:36003,r),(0,e.default)(f,1028===u?2963:36004,a),f))},stencilOp:function(t,u,n,r){var a;return t((a={},(0,e.default)(a,2964,u),(0,e.default)(a,2965,n),(0,e.default)(a,2966,r),(0,e.default)(a,34817,u),(0,e.default)(a,34818,n),(0,e.default)(a,34819,r),a))},stencilOpSeparate:function(t,u,n,r,a){var f;return t((f={},(0,e.default)(f,1028===u?2964:34817,n),(0,e.default)(f,1028===u?2965:34818,r),(0,e.default)(f,1028===u?2966:34819,a),f))},viewport:function(t,u,n,r,a){return t((0,e.default)({},2978,new Int32Array([u,n,r,a])))}};exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM"}],"9UaW":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h,exports.pushContextState=p,exports.popContextState=d;var t=c(require("@babel/runtime/helpers/esm/classCallCheck")),a=c(require("@babel/runtime/helpers/esm/createClass")),i=c(require("./webgl-function-to-parameters-table")),n=require("../unified-parameter-api/webgl-parameter-tables"),r=require("../unified-parameter-api/unified-parameter-api"),s=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=a.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:a.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function l(e,t,a){var i=e[t].bind(e);e[t]=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var c,o=a.apply(void 0,[e.state._updateCache].concat(r)),l=o.valueChanged,u=o.oldValue;l&&((c=e.state).log.apply(c,["gl.".concat(t)].concat(r)),i.apply(void 0,r));return u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var u=function(){function e(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.copyState,c=void 0!==s&&s,o=i.log,l=void 0===o?function(){}:o;(0,t.default)(this,e),this.gl=a,this.stateStack=[],this.enable=!0,this.cache=c?(0,r.getParameters)(a):Object.assign({},n.GL_PARAMETER_DEFAULTS),this.log=l,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,a.default)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){(0,s.assert)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];(0,r.setParameters)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,a=!1,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var n in e)(0,s.assert)(void 0!==n),(0,s.deepArrayEqual)(e[n],this.cache[n])||(a=!0,t=this.cache[n],!i||n in i||(i[n]=this.cache[n]),this.cache[n]=e[n]);return{valueChanged:a,oldValue:t}}}]),e}();function h(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.enable,r=void 0===n||n,c=a.copyState;if((0,s.assert)(void 0!==c),!t.state){var h=void 0!==e?e:window;for(var p in h.polyfillContext&&h.polyfillContext(t),t.state=new u(t,{copyState:c,enable:r}),i.default){l(t,p,i.default[p])}o(t,"getParameter"),o(t,"isEnabled")}return t.state.enable=r,t}function p(e){e.state||h(e,{copyState:!1}),e.state.push()}function d(e){(0,s.assert)(e.state),e.state.pop()}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./webgl-function-to-parameters-table":"S/xz","../unified-parameter-api/webgl-parameter-tables":"ewoQ","../unified-parameter-api/unified-parameter-api":"wDcN","../utils":"1u9P"}],"Pivz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.withParameters=a;var e=require("./track-context-state"),t=require("../unified-parameter-api/set-parameters"),r=require("../utils");function a(a,s,i){if((0,r.isObjectEmpty)(s))return i(a);var o,u=s.nocatch,n=void 0===u||u;if((0,r.assert)(!s.frameBuffer),(0,e.pushContextState)(a),(0,t.setParameters)(a,s),n)o=i(a),(0,e.popContextState)(a);else try{o=i(a)}finally{(0,e.popContextState)(a)}return o}
},{"./track-context-state":"9UaW","../unified-parameter-api/set-parameters":"aB8E","../utils":"1u9P"}],"1gQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return e.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return e.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return e.setParameter}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return e.resetParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return e.getModifiedParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return t.setParameters}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"pushContextState",{enumerable:!0,get:function(){return r.pushContextState}}),Object.defineProperty(exports,"popContextState",{enumerable:!0,get:function(){return r.popContextState}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return n.withParameters}});var e=require("./unified-parameter-api/unified-parameter-api"),t=require("./unified-parameter-api/set-parameters"),r=a(require("./state-tracking/track-context-state")),n=require("./state-tracking/with-parameters");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}
},{"./unified-parameter-api/unified-parameter-api":"wDcN","./unified-parameter-api/set-parameters":"aB8E","./state-tracking/track-context-state":"9UaW","./state-tracking/with-parameters":"Pivz"}],"51kF":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.headlessGL=a,exports.WebGL2RenderingContext=exports.WebGLShaderPrecisionFormat=exports.WebGLActiveInfo=exports.WebGLUniformLocation=exports.WebGLTexture=exports.WebGLRenderbuffer=exports.WebGLFramebuffer=exports.WebGLBuffer=exports.WebGLShader=exports.WebGLProgram=exports.WebGLRenderingContext=exports.Image=exports.webGLTypesAvailable=exports.headlessTypes=exports.ERR_HEADLESSGL_LOAD=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck")),r=require("../utils/globals"),o=t(require("../utils/is-browser"));function t(e){return e&&e.__esModule?e:{default:e}}var s="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.";exports.ERR_HEADLESSGL_LOAD=s;var n=module,i=null;function a(){var e=n.require("gl");if(!e)throw new Error(s);return e.apply(void 0,arguments)}if(exports.headlessTypes=i,!o.default)try{exports.headlessTypes=i=n.require("gl/wrap")}catch(q){}var b=function r(){(0,e.default)(this,r)},d=i||r.global,l=d.WebGLRenderingContext,p=void 0===l?b:l,u=d.WebGLProgram,L=void 0===u?b:u,x=d.WebGLShader,f=void 0===x?b:x,G=d.WebGLBuffer,W=void 0===G?b:G,c=d.WebGLFramebuffer,v=void 0===c?b:c,g=d.WebGLRenderbuffer,h=void 0===g?b:g,m=d.WebGLTexture,R=void 0===m?b:m,y=d.WebGLUniformLocation,S=void 0===y?b:y,A=d.WebGLActiveInfo,T=void 0===A?b:A,C=d.WebGLShaderPrecisionFormat,_=void 0===C?b:C;exports.WebGLShaderPrecisionFormat=_,exports.WebGLActiveInfo=T,exports.WebGLUniformLocation=S,exports.WebGLTexture=R,exports.WebGLRenderbuffer=h,exports.WebGLFramebuffer=v,exports.WebGLBuffer=W,exports.WebGLShader=f,exports.WebGLProgram=L,exports.WebGLRenderingContext=p;var w=p!==b&&L!==b&&f!==b&&W!==b&&v!==b&&h!==b&&R!==b&&S!==b&&T!==b&&_!==b;function E(){return r.global.WebGL2RenderingContext||function r(){(0,e.default)(this,r)}}function F(){return r.global.Image||function r(){(0,e.default)(this,r)}}exports.webGLTypesAvailable=w;var P=E();exports.WebGL2RenderingContext=P;var I=F();exports.Image=I;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","../utils/globals":"gHeQ","../utils/is-browser":"kDKo"}],"EV9w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(r){(0,e.default)(t,r,n[r])})}return t}
},{"./defineProperty":"9iDM"}],"7h1p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHeadlessContext=s;var e=require("../webgl-utils/webgl-types"),t="Failed to create WebGL context in Node.js, headless gl not available",r="Failed to create WebGL context in Node.js, headless gl returned null";function s(s){var l=s.width,a=s.height,o=s.webgl1,n=s.webgl2,d=s.onError;if(n&&!o)return d("headless-gl does not support WebGL2");if(!e.headlessGL)return d(t);var i=(0,e.headlessGL)(l,a,s);return i||d(r)}
},{"../webgl-utils/webgl-types":"51kF"}],"o+mr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window.navigator||{},n=r.userAgent||t.userAgent||"",i=-1!==n.indexOf("MSIE "),o=-1!==n.indexOf("Trident/");return i||o}
},{"./globals":"gHeQ"}],"OhKi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uid=n,exports.isPowerOfTwo=u,exports.isObjectEmpty=o;var e=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}var t={};function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";t[e]=t[e]||1;var r=t[e]++;return"".concat(e,"-").concat(r)}function u(r){return(0,e.default)("number"==typeof r,"Input must be a number"),r&&0==(r&r-1)}function o(e){var r=!0;for(var t in e){r=!1;break}return r}
},{"./assert":"KdlA"}],"Ijwg":[function(require,module,exports) {
"use strict";function e(e,t){for(var i=t.maxElts,n=void 0===i?16:i,a=t.size,o=void 0===a?1:a,s="[",u=0;u<e.length&&u<n;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=r(e[u],t);var f=e.length>n?"...":"]";return"".concat(s).concat(f)}function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isInteger,n=void 0!==i&&i;if(Array.isArray(r)||ArrayBuffer.isView(r))return e(r,t);if(!Number.isFinite(r))return String(r);if(Math.abs(r)<1e-16)return n?"0":"0.";if(n)return r.toFixed(0);if(Math.abs(r)>100&&Math.abs(r)<1e4)return r.toFixed(0);var a=r.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=r;
},{}],"EgC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stubRemovedMethods=o;var e=t(require("./log"));function t(e){return e&&e.__esModule?e:{default:e}}function o(t,o,r,u){var a="See luma.gl ".concat(r," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),n=Object.getPrototypeOf(t);u.forEach(function(t){n.methodName||(n[t]=function(){throw e.default.removed("Calling removed method ".concat(o,".").concat(t,": "),a)(),new Error(t)})})}
},{"./log":"Y0qP"}],"2vBG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkProps=r;var e=c(require("./log"));function c(e){return e&&e.__esModule?e:{default:e}}function r(c,r,o){var a=o.removedProps,t=void 0===a?{}:a,n=o.deprecatedProps,d=void 0===n?{}:n,i=o.replacedProps,v=void 0===i?{}:i;for(var u in t)if(u in r){var f=t[u]?"".concat(c,".").concat(t[u]):"N/A";e.default.removed("".concat(c,".").concat(u),f)()}for(var l in d)if(l in r){var s=d[l];e.default.deprecated("".concat(c,".").concat(l),"".concat(c,".").concat(s))()}var p=null;for(var P in v)if(P in r){var _=v[P];e.default.deprecated("".concat(c,".").concat(P),"".concat(c,".").concat(_))(),(p=p||Object.assign({},r))[_]=r[P],delete p[P]}return p||r}
},{"./log":"Y0qP"}],"CgZv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isOldIE",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return o.uid}}),Object.defineProperty(exports,"isPowerOfTwo",{enumerable:!0,get:function(){return o.isPowerOfTwo}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return o.isObjectEmpty}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return n.formatValue}}),Object.defineProperty(exports,"stubRemovedMethods",{enumerable:!0,get:function(){return i.stubRemovedMethods}}),Object.defineProperty(exports,"checkProps",{enumerable:!0,get:function(){return s.checkProps}});var e=f(require("./assert")),r=f(require("./log")),t=f(require("./is-browser")),u=f(require("./is-old-ie")),o=require("./utils"),n=require("./format-value"),i=require("./stub-methods"),s=require("./check-props");function f(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"KdlA","./log":"Y0qP","./is-browser":"kDKo","./is-old-ie":"o+mr","./utils":"OhKi","./format-value":"Ijwg","./stub-methods":"EgC4","./check-props":"2vBG"}],"xnoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPageLoadPromise=i,exports.createCanvas=r,exports.getCanvas=a;var e,t=require("../utils"),o=t.isBrowser&&"undefined"!=typeof document,n=o&&"complete"===document.readyState;function i(){return e||(e=o?new Promise(function(e,t){if(o&&"complete"===document.readyState)return n=!0,void e(document);window.onload=function(){n=!0,e(document)}}):Promise.resolve({})),e}function r(e){var t=e.width,o=void 0===t?800:t,n=e.height,i=void 0===n?600:n,r=e.id,a=void 0===r?"gl-canvas":r,d=e.insert,c=void 0===d||d,s=document.createElement("canvas");if(s.id=a,s.style.width=Number.isFinite(o)?"".concat(o,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",c){var u=document.body;u.insertBefore(s,u.firstChild)}return s}function a(e){var t,o=e.canvas,i=e.width,a=e.height,d=e.onError,c=void 0===d?function(){}:d;return"string"==typeof o?(n||c("createGLContext called on canvas '".concat(o,"' before page was loaded")),t=document.getElementById(o)):t=o||r({id:"lumagl-canvas",width:i,height:a,onError:c}),t}
},{"../utils":"CgZv"}],"8tWm":[function(require,module,exports) {
"use strict";function e(e,t){var r=t.onError,n=void 0===r?function(e){return null}:r,o=function(e){return n("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",o,!1);var c=t.webgl1,l=void 0===c||c,a=t.webgl2,i=void 0===a||a,g=null;return i&&(g=(g=g||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),l&&(g=(g=g||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",o,!1),g||n("Failed to create ".concat(i&&!l?"WebGL2":"WebGL"," context"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBrowserContext=e;
},{}],"L13w":[function(require,module,exports) {
"use strict";function e(e){var r=e.getParameter(7936),t=e.getParameter(7937),a=e.getExtension("WEBGL_debug_renderer_info");return{vendor:a&&e.getParameter(a.UNMASKED_VENDOR_WEBGL||7936)||r,renderer:a&&e.getParameter(a.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:r,rendererMasked:t,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextDebugInfo=e;
},{}],"SdWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=o,exports.isWebGL2=n,exports.assertWebGLContext=i,exports.assertWebGL2Context=x,exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var e=require("../utils"),t="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=t;var r=t;exports.ERR_WEBGL=r;var s="Requires WebGL2";function o(e){return Boolean(e&&Number.isFinite(e._version))}function n(e){return Boolean(e&&2===e._version)}function i(r){(0,e.assert)(o(r),t)}function x(t){(0,e.assert)(n(t),s)}exports.ERR_WEBGL2=s;
},{"../utils":"CgZv"}],"AGkC":[function(require,module,exports) {
"use strict";function e(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function n(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestAnimationFrame=e,exports.cancelAnimationFrame=n;
},{}],"M+BU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTypeFromTypedArray=e,exports.getTypedArrayFromGLType=t,exports.flipRows=a,exports.scalePixels=n;var r="Failed to deduce GL constant from typed array";function e(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function t(r){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,t=void 0===e||e;switch(r){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(r){var e=r.data,t=r.width,a=r.height,n=r.bytesPerPixel,s=void 0===n?4:n,o=r.temp,i=t*s;o=o||new Uint8Array(i);for(var c=0;c<a/2;++c){var y=c*i,u=(a-c-1)*i;o.set(e.subarray(y,y+i)),e.copyWithin(y,u,u+i),e.set(o,u)}}function n(r){for(var e=r.data,t=r.width,a=r.height,n=Math.round(t/2),s=Math.round(a/2),o=new Uint8Array(n*s*4),i=0;i<s;i++)for(var c=0;c<n;c++)for(var y=0;y<4;y++)o[4*(i*n+c)+y]=e[4*(2*i*t+2*c)+y];return{data:o,width:n,height:s}}
},{}],"UyRF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKeyValue=r,exports.getKey=t,exports.getKeyType=n;var e=require("../utils");function r(r,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=r[t=t.replace(/^.*\./,"")];return(0,e.assert)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function t(e,r){for(var t in r=Number(r),e)if(e[t]===r)return"GL.".concat(t);return String(r)}function n(r,t){for(var n in(0,e.assert)(void 0!==t,"undefined key"),t=Number(t),r)if(r[n]===t)return"GL.".concat(n);return String(t)}
},{"../utils":"CgZv"}],"Rs9H":[function(require,module,exports) {
"use strict";function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LwjW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("../../helpers/esm/typeof")),t=r(require("./assertThisInitialized"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){return!u||"object"!==(0,e.default)(u)&&"function"!=typeof u?(0,t.default)(r):u}
},{"../../helpers/esm/typeof":"zsb/","./assertThisInitialized":"Rs9H"}],"cYjN":[function(require,module,exports) {
"use strict";function t(e){return exports.default=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"N60M":[function(require,module,exports) {
"use strict";function e(t,r){return exports.default=e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RnSb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./setPrototypeOf"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&(0,e.default)(t,r)}
},{"./setPrototypeOf":"N60M"}],"DwD3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),n=require("../init"),r=require("../webgl-utils"),i=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var s="Resource subclass must define virtual methods",o=function(){function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,a),(0,r.assertWebGLContext)(t);var s=n.id,o=n.userData,u=void 0===o?{}:o;this.gl=t,this.id=s||(0,i.uid)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return(0,t.default)(a,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&t&&n.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(0,r.getKeyValue)(this.gl,e),(0,i.assert)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var a=(0,r.isWebGL2)(this.gl);if(!((!("webgl2"in n)||a)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){var s=n.webgl1,o="webgl2"in n?n.webgl2:n.webgl1;return a?o:s}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,i=t.keys,a=this.constructor.PARAMETERS||{},s=(0,r.isWebGL2)(this.gl),o={},u=n||Object.keys(a),l=!0,h=!1,c=void 0;try{for(var d,g=u[Symbol.iterator]();!(l=(d=g.next()).done);l=!0){var v=d.value,m=a[v];if(m&&(!("webgl2"in m)||s)&&(!("extension"in m)||this.gl.getExtension(m.extension))){var y=i?(0,r.getKey)(this.gl,v):v;o[y]=this.getParameter(v,e),i&&"GLenum"===m.type&&(o[y]=(0,r.getKey)(this.gl,o[y]))}}}catch(f){h=!0,c=f}finally{try{l||null==g.return||g.return()}finally{if(h)throw c}}return o}},{key:"setParameter",value:function(e,t){e=(0,r.getKeyValue)(this.gl,e),(0,i.assert)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var a=(0,r.isWebGL2)(this.gl);if(!((!("webgl2"in n)||a)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=(0,r.getKeyValue)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return(0,i.stubRemovedMethods)(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(s)}},{key:"_deleteHandle",value:function(){throw new Error(s)}},{key:"_bindHandle",value:function(){throw new Error(s)}},{key:"_getOptsFromHandle",value:function(){throw new Error(s)}},{key:"_getParameter",value:function(e,t){throw new Error(s)}},{key:"_setParameter",value:function(e,t){throw new Error(s)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=n.lumaStats.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;n.lumaStats.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,r=n.lumaStats.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=n.lumaStats.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),a}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../init":"HGnm","../webgl-utils":"GZNE","../utils":"CgZv"}],"b6xa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=e(require("./setPrototypeOf"));function e(t){return t&&t.__esModule?t:{default:t}}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function n(e,u,o){return r()?exports.default=n=Reflect.construct:exports.default=n=function(e,r,n){var u=[null];u.push.apply(u,r);var o=new(Function.bind.apply(e,u));return n&&(0,t.default)(o,n.prototype),o},n.apply(null,arguments)}
},{"./setPrototypeOf":"N60M"}],"OEzr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ACCESSOR_VALUES=exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/construct")),t=n(require("@babel/runtime/helpers/esm/classCallCheck")),i=n(require("@babel/runtime/helpers/esm/createClass")),r=require("../webgl-utils"),s=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var o={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1};exports.DEFAULT_ACCESSOR_VALUES=o;var d={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},u=function(){function n(){var e=this;(0,t.default)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return(0,i.default)(n,null,[{key:"getBytesPerElement",value:function(e){return(0,r.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return(0,s.assert)(e.size),(0,r.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,e.default)(n,[o].concat(i))}}]),(0,i.default)(n,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=(0,s.checkProps)("Accessor",e,d)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return n.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return n.getBytesPerVertex(this)}}]),n}();exports.default=u;
},{"@babel/runtime/helpers/esm/construct":"b6xa","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../webgl-utils":"GZNE","../utils":"CgZv"}],"d/4i":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),s=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=o(require("@babel/runtime/helpers/esm/assertThisInitialized")),i=o(require("@babel/runtime/helpers/esm/inherits")),n=o(require("./resource")),u=o(require("./accessor")),l=require("../webgl-utils"),h=require("../utils");function o(e){return e&&e.__esModule?e:{default:e}}var c=10,d={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},f={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:d},g={removedProps:d},y=function(n){function o(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,o),(i=(0,s.default)(this,(0,r.default)(o).call(this,t,n))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=n.target||(i.gl.webgl2?36662:34962),i.initialize(n),Object.seal((0,a.default)(i)),i}return(0,i.default)(o,n),(0,t.default)(o,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/u.default.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/u.default.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=(0,h.checkProps)("Buffer",e,f),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=(0,h.checkProps)("Buffer",e,g))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new u.default(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,s=t.data,r=t.offset,a=void 0===r?0:r,i=t.srcOffset,n=void 0===i?0:i,u=e.byteLength||e.length;(0,h.assert)(s);var o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==n||void 0!==u?((0,l.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,a,s,n,u)):this.gl.bufferSubData(o,a,s),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(s),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,s=e.readOffset,r=void 0===s?0:s,a=e.writeOffset,i=void 0===a?0:a,n=e.size,u=this.gl;return(0,l.assertWebGL2Context)(u),u.bindBuffer(36662,t.handle),u.bindBuffer(36663,this.handle),u.copyBufferSubData(36662,36663,r,i,n),u.bindBuffer(36662,null),u.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,s=void 0===t?null:t,r=e.srcByteOffset,a=void 0===r?0:r,i=e.dstOffset,n=void 0===i?0:i,u=e.length,o=void 0===u?0:u;(0,l.assertWebGL2Context)(this.gl);var c,d,f=(0,l.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(a),y=n;s?c=(d=s.length)-y:d=y+(c=Math.min(g,o||g));var b=Math.min(g,c);return o=o||b,(0,h.assert)(o<=b),s=s||new f(d),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,s,n,o),this.gl.bindBuffer(36662,null),s}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,s=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r,i=e.offset,n=void 0===i?0:i,u=e.size;return 35345===s||35982===s?void 0!==u?this.gl.bindBufferRange(s,a,this.handle,n,u):((0,h.assert)(0===n),this.gl.bindBufferBase(s,a,this.handle)):this.gl.bindBuffer(s,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,s=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r;return 35345===s||35982===s?this.gl.bindBufferBase(s,a,null):this.gl.bindBuffer(s,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:c}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,h.assert)(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var s=this._getTarget();this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,e,t),this.gl.bindBuffer(s,null),this.usage=t,this.debugData=e.slice(0,c),this.bytesUsed=e.byteLength,this._trackAllocatedMemory(e.byteLength);var r=(0,l.getGLTypeFromTypedArray)(e);return(0,h.assert)(r),this.setAccessor(new u.default(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,h.assert)(e>=0),this._trackDeallocatedMemory();var s=e;0===e&&(s=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,s,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/(0,l.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new u.default(this.accessor,{type:(0,l.getGLTypeFromTypedArray)(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return h.log.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return h.log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new u.default(this.accessor,e),this}},{key:"type",get:function(){return h.log.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return h.log.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),o}(n.default);exports.default=y;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./accessor":"OEzr","../webgl-utils":"GZNE","../utils":"CgZv"}],"PH5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFormatSupported=s,exports.isLinearFilteringSupported=i,exports.TYPE_SIZES=exports.DATA_FORMAT_CHANNELS=exports.TEXTURE_FORMATS=void 0;var t,e,a,r=l(require("@babel/runtime/helpers/esm/defineProperty")),u=require("../webgl-utils");function l(t){return t&&t.__esModule?t:{default:t}}var d=(t={},(0,r.default)(t,6407,{dataFormat:6407,types:[5121,33635]}),(0,r.default)(t,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,r.default)(t,6406,{dataFormat:6406,types:[5121]}),(0,r.default)(t,6409,{dataFormat:6409,types:[5121]}),(0,r.default)(t,6410,{dataFormat:6410,types:[5121]}),(0,r.default)(t,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,r.default)(t,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,r.default)(t,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,r.default)(t,34836,{dataFormat:6408,types:[5126],gl2:!0}),t);exports.TEXTURE_FORMATS=d;var f=(e={},(0,r.default)(e,6403,1),(0,r.default)(e,36244,1),(0,r.default)(e,33319,2),(0,r.default)(e,33320,2),(0,r.default)(e,6407,3),(0,r.default)(e,36248,3),(0,r.default)(e,6408,4),(0,r.default)(e,36249,4),(0,r.default)(e,6402,1),(0,r.default)(e,34041,1),(0,r.default)(e,6406,1),(0,r.default)(e,6409,1),(0,r.default)(e,6410,2),e);exports.DATA_FORMAT_CHANNELS=f;var o=(a={},(0,r.default)(a,5126,4),(0,r.default)(a,5125,4),(0,r.default)(a,5124,4),(0,r.default)(a,5123,2),(0,r.default)(a,5122,2),(0,r.default)(a,5131,2),(0,r.default)(a,5120,1),(0,r.default)(a,5121,1),a);function s(t,e){var a=d[e];if(!a)return!1;if(void 0===a.gl1&&void 0===a.gl2)return!0;var r=(0,u.isWebGL2)(t)&&a.gl2||a.gl1;return"string"==typeof r?t.getExtension(r):r}function i(t,e){var a=d[e];switch(a&&a.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}exports.TYPE_SIZES=o;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../webgl-utils":"GZNE"}],"/Aqp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return e.trackContextState}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return e.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return e.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return e.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return e.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return e.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return e.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return e.getModifiedParameters}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return t.createGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return t.instrumentGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return t.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return t.resizeGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return t.setGLContextDefaults}}),Object.defineProperty(exports,"getPageLoadPromise",{enumerable:!0,get:function(){return r.getPageLoadPromise}}),Object.defineProperty(exports,"getCanvas",{enumerable:!0,get:function(){return r.getCanvas}});var e=require("@luma.gl/webgl-state-tracker"),t=require("./context"),r=require("./create-canvas");
},{"@luma.gl/webgl-state-tracker":"1gQ5","./context":"ocf3","./create-canvas":"xnoV"}],"GqKp":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("@babel/runtime/helpers/esm/defineProperty")),t=g(require("@babel/runtime/helpers/esm/classCallCheck")),i=g(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=g(require("@babel/runtime/helpers/esm/getPrototypeOf")),r=g(require("@babel/runtime/helpers/esm/createClass")),s=g(require("@babel/runtime/helpers/esm/inherits")),d=g(require("./resource")),h=g(require("./buffer")),o=require("./texture-formats"),n=require("../context"),u=require("../webgl-utils"),l=require("../utils");function g(e){return e&&e.__esModule?e:{default:e}}var m=[9729,9728],p=function(d){function g(e,r){var s;(0,t.default)(this,g);var d=r.id,h=void 0===d?(0,l.uid)("texture"):d,o=r.handle,n=r.target;return(s=(0,i.default)(this,(0,a.default)(g).call(this,e,{id:h,handle:o}))).target=n,s.textureUnit=void 0,s.loaded=!1,s.width=void 0,s.height=void 0,s.depth=void 0,s.format=void 0,s.type=void 0,s.dataFormat=void 0,s.border=void 0,s.textureUnit=void 0,s.mipmaps=void 0,s}return(0,s.default)(g,d),(0,r.default)(g,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.format,a=t.linearFiltering,r=!0;return i&&(r=(r=r&&(0,o.isFormatSupported)(e,i))&&(!a||(0,o.isLinearFilteringSupported)(e,i))),r}}]),(0,r.default)(g,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.data;if(a instanceof Promise)return a.then(function(e){return t.initialize(Object.assign({},i,{pixels:e,data:e}))}),this;var r=i.pixels,s=void 0===r?null:r,d=i.format,h=void 0===d?6408:d,o=i.border,n=void 0===o?0:o,u=i.recreate,g=void 0!==u&&u,m=i.parameters,p=void 0===m?{}:m,f=i.pixelStore,c=void 0===f?{}:f,v=i.textureUnit,b=void 0===v?void 0:v,T=i.unpackFlipY,y=void 0===T||T,x=i.mipmaps,w=void 0===x||x;a||(a=s);var _=i.width,P=i.height,k=i.dataFormat,F=i.type,E=i.depth,I=void 0===E?0:E,D=this._deduceParameters({format:h,type:F,dataFormat:k,compressed:!1,data:a,width:_,height:P});_=D.width,P=D.height,k=D.dataFormat,F=D.type,this.width=_,this.height=P,this.depth=I,this.format=h,this.type=F,this.dataFormat=k,this.border=n,this.textureUnit=b,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var L=(0,e.default)({},37440,y),M=Object.assign({},L,c);return w&&this._isNPOT()&&(l.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(p)),this.mipmaps=w,this.setImageData({data:a,width:_,height:P,depth:I,format:h,type:F,dataFormat:k,border:n,mipmaps:w,parameters:M}),w&&this.generateMipmap(),this.setParameters(p),g&&(this.data=a),this}},{key:"resize",value:function(e){var t=e.height,i=e.width,a=e.mipmaps,r=void 0!==a&&a;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(l.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,n.withParameters)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,i=void 0===t?this.target:t,a=e.pixels,r=void 0===a?null:a,s=e.level,d=void 0===s?0:s,h=e.format,g=void 0===h?this.format:h,m=e.border,p=void 0===m?this.border:m,f=e.offset,c=void 0===f?0:f,v=e.parameters,b=void 0===v?{}:v,T=e.data,y=void 0===T?null:T,x=e.type,w=void 0===x?this.type:x,_=e.width,P=void 0===_?this.width:_,k=e.height,F=void 0===k?this.height:k,E=e.dataFormat,I=void 0===E?this.dataFormat:E,D=e.compressed,L=void 0!==D&&D;y||(y=r);var M=this._deduceParameters({format:g,type:w,dataFormat:I,compressed:L,data:y,width:P,height:F});w=M.type,I=M.dataFormat,L=M.compressed,P=M.width,F=M.height;var O=this.gl;O.bindTexture(this.target,this.handle);var S,U=this._getDataType({data:y,compressed:L});if(y=U.data,S=U.dataType,(0,n.withParameters)(this.gl,b,function(){switch(S){case"null":O.texImage2D(i,d,g,P,F,p,I,w,y);break;case"typed-array":O.texImage2D(i,d,g,P,F,p,I,w,y,c);break;case"buffer":(0,u.assertWebGL2Context)(O),O.bindBuffer(35052,y.handle||y),O.texImage2D(i,d,g,P,F,p,I,w,c),O.bindBuffer(35052,null);break;case"browser-object":(0,u.isWebGL2)(O)?O.texImage2D(i,d,g,P,F,p,I,w,y):O.texImage2D(i,d,g,I,w,y);break;case"compressed":O.compressedTexImage2D(i,d,g,P,F,p,y);break;default:(0,l.assert)(!1,"Unknown image data type")}}),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var A=o.DATA_FORMAT_CHANNELS[this.dataFormat]||4,R=o.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*A*R,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,i=e.target,a=void 0===i?this.target:i,r=e.pixels,s=void 0===r?null:r,d=e.data,o=void 0===d?null:d,g=e.x,m=void 0===g?0:g,p=e.y,f=void 0===p?0:p,c=e.width,v=void 0===c?this.width:c,b=e.height,T=void 0===b?this.height:b,y=e.level,x=void 0===y?0:y,w=e.format,_=void 0===w?this.format:w,P=e.type,k=void 0===P?this.type:P,F=e.dataFormat,E=void 0===F?this.dataFormat:F,I=e.compressed,D=void 0!==I&&I,L=e.offset,M=void 0===L?0:L,O=e.border,S=(void 0===O&&this.border,e.parameters),U=void 0===S?{}:S,A=this._deduceParameters({format:_,type:k,dataFormat:E,compressed:D,data:o,width:v,height:T});if(k=A.type,E=A.dataFormat,D=A.compressed,v=A.width,T=A.height,(0,l.assert)(0===this.depth,"texSubImage not supported for 3D textures"),o||(o=s),o&&o.data){var R=o;o=R.data,v=R.shape[0],T=R.shape[1]}o instanceof h.default&&(o=o.handle),this.gl.bindTexture(this.target,this.handle),(0,n.withParameters)(this.gl,U,function(){D?t.gl.compressedTexSubImage2D(a,x,m,f,v,T,_,o):null===o?t.gl.texSubImage2D(a,x,m,f,v,T,E,k,null):ArrayBuffer.isView(o)?t.gl.texSubImage2D(a,x,m,f,v,T,E,k,o,M):o instanceof u.WebGLBuffer?((0,u.assertWebGL2Context)(t.gl),t.gl.bindBuffer(35052,o),t.gl.texSubImage2D(a,x,m,f,v,T,E,k,M),t.gl.bindBuffer(35052,null)):(0,u.isWebGL2)(t.gl)?t.gl.texSubImage2D(a,x,m,f,v,T,E,k,o):t.gl.texSubImage2D(a,x,m,f,E,k,o)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,i=e.compressed;return void 0!==i&&i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof h.default?{data:t.handle,dataType:"buffer"}:t instanceof u.WebGLBuffer?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,i=e.data,a=e.width,r=e.height,s=e.dataFormat,d=e.type,h=e.compressed,n=o.TEXTURE_FORMATS[t];s=s||n&&n.dataFormat,d=d||n&&n.types[0],h=h||n&&n.compressed;var u=this._deduceImageSize(i,a,r);return{dataFormat:s,type:d,compressed:h,width:a=u.width,height:r=u.height,format:t,data:i}}},{key:"_deduceImageSize",value:function(e,t,i){var a;return a="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},(0,l.assert)(a,"Could not deduced texture size"),(0,l.assert)(void 0===t||a.width===t,"Deduced texture width does not match supplied width"),(0,l.assert)(void 0===i||a.height===i,"Deduced texture height does not match supplied height"),a}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:(0,l.assert)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(0,u.isWebGL2)(this.gl)&&(!(!this.width||!this.height)&&(!(0,l.isPowerOfTwo)(this.width)||!(0,l.isPowerOfTwo)(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===m.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),g}(d.default);exports.default=p;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./buffer":"d/4i","./texture-formats":"PH5D","../context":"/Aqp","../webgl-utils":"GZNE","../utils":"CgZv"}],"QQ37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=t,exports.loadFile=n,exports.loadImage=o;var r=require("../utils"),e="";function t(r){e=r}function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.assert)("string"==typeof t),t=e+t;var o=n.dataType||"text";return fetch(t,n).then(function(r){return r[o]()})}function o(t,n){return(0,r.assert)("string"==typeof t),t=e+t,new Promise(function(r,e){try{var o=new Image;o.onload=function(){return r(o)},o.onerror=function(){return e(new Error("Could not load image ".concat(t,".")))},o.crossOrigin=n&&n.crossOrigin||"anonymous",o.src=t}catch(i){e(i)}})}
},{"../utils":"CgZv"}],"YE27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=o(require("@babel/runtime/helpers/esm/assertThisInitialized")),s=o(require("@babel/runtime/helpers/esm/createClass")),a=o(require("@babel/runtime/helpers/esm/inherits")),u=o(require("./texture")),l=require("../webgl-utils"),n=require("../utils/load-file");function o(e){return e&&e.__esModule?e:{default:e}}var d=function(o){function d(s){var a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,d),(0,l.assertWebGLContext)(s),(u instanceof Promise||"string"==typeof u)&&(u={data:u}),"string"==typeof u.data&&(u=Object.assign({},u,{data:(0,n.loadImage)(u.data)})),(a=(0,t.default)(this,(0,r.default)(d).call(this,s,Object.assign({},u,{target:3553})))).initialize(u),Object.seal((0,i.default)(a)),a}return(0,a.default)(d,o),(0,s.default)(d,null,[{key:"isSupported",value:function(e,t){return u.default.isSupported(e,t)}}]),d}(u.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./texture":"GqKp","../webgl-utils":"GZNE","../utils/load-file":"QQ37"}],"eOjF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/regenerator")),t=h(require("@babel/runtime/helpers/esm/asyncToGenerator")),a=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/createClass")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),u=h(require("@babel/runtime/helpers/esm/inherits")),l=h(require("./texture")),o=require("../webgl-utils"),d=require("../utils");function h(e){return e&&e.__esModule?e:{default:e}}var m=[34069,34070,34071,34072,34073,34074],p=function(l){function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,h),(0,o.assertWebGLContext)(e),(t=(0,i.default)(this,(0,s.default)(h).call(this,e,Object.assign({},r,{target:34067})))).initialize(r),Object.seal((0,n.default)(t)),t}return(0,u.default)(h,l),(0,r.default)(h,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.mipmaps,r=void 0===a||a,i=t.parameters,s=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then(function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(s)})}},{key:"subImage",value:function(e){var t=e.face,a=e.data,r=e.x,i=void 0===r?0:r,s=e.y,n=void 0===s?0:s,u=e.mipmapLevel,l=void 0===u?0:u;return this._subImage({target:t,data:a,x:i,y:n,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function(){var a=(0,t.default)(e.default.mark(function t(a){var r,i,s,n,u,l,o,h,p,c,f,b,v,g=this;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.width,i=a.height,s=a.pixels,n=a.data,u=a.border,l=void 0===u?0:u,o=a.format,h=void 0===o?6408:o,p=a.type,c=void 0===p?5121:p,f=this.gl,b=s||n,e.next=5,Promise.all(m.map(function(e){var t=b[e];return Promise.all(Array.isArray(t)?t:[t])}));case 5:v=e.sent,this.bind(),m.forEach(function(e,t){v[t].length>1&&!1!==g.opts.mipmaps&&d.log.warn("".concat(g.id," has mipmap and multiple LODs."))(),v[t].forEach(function(t,a){r&&i?f.texImage2D(e,a,h,r,i,l,h,c,t):f.texImage2D(e,a,h,h,c,t)})}),this.unbind();case 9:case"end":return e.stop()}},t,this)}));return function(e){return a.apply(this,arguments)}}()},{key:"setImageDataForFace",value:function(e){var t=this,a=e.face,r=e.width,i=e.height,s=e.pixels,n=e.data,u=e.border,l=void 0===u?0:u,o=e.format,d=void 0===o?6408:o,h=e.type,m=void 0===h?5121:h,p=this.gl,c=s||n;return this.bind(),c instanceof Promise?c.then(function(r){return t.setImageDataForFace(Object.assign({},e,{face:a,data:r,pixels:r}))}):this.width||this.height?p.texImage2D(a,0,d,r,i,l,d,m,c):p.texImage2D(a,0,d,d,m,c),this}}]),h}(l.default);exports.default=p,p.FACES=m;
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","./texture":"GqKp","../webgl-utils":"GZNE","../utils":"CgZv"}],"mm+M":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=h(require("@babel/runtime/helpers/esm/createClass")),s=h(require("@babel/runtime/helpers/esm/inherits")),l=require("../context"),u=require("../webgl-utils"),d=h(require("./texture")),n=require("./texture-formats"),o=h(require("./buffer"));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(d){function h(a){var s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,h),(0,u.assertWebGL2Context)(a),l=Object.assign({depth:1},l,{target:32879,unpackFlipY:!1}),(s=(0,t.default)(this,(0,r.default)(h).call(this,a,l))).initialize(l),Object.seal((0,i.default)(s)),s}return(0,s.default)(h,d),(0,a.default)(h,null,[{key:"isSupported",value:function(e){return(0,u.isWebGL2)(e)}}]),(0,a.default)(h,[{key:"setImageData",value:function(e){var t=this,r=e.level,i=void 0===r?0:r,a=e.dataFormat,s=void 0===a?6408:a,u=e.width,d=e.height,h=e.depth,f=void 0===h?1:h,b=e.border,c=void 0===b?0:b,m=e.format,p=e.type,g=void 0===p?5121:p,v=e.offset,x=void 0===v?0:v,y=e.data,q=e.parameters,_=void 0===q?{}:q;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,l.withParameters)(this.gl,_,function(){ArrayBuffer.isView(y)&&t.gl.texImage3D(t.target,i,s,u,d,f,c,m,g,y),y instanceof o.default&&(t.gl.bindBuffer(35052,y.handle),t.gl.texImage3D(t.target,i,s,u,d,f,c,m,g,x))}),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var T=n.DATA_FORMAT_CHANNELS[this.dataFormat]||4,k=n.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*T*k,"Texture")}return this.loaded=!0,this}}]),h}(d.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","../context":"/Aqp","../webgl-utils":"GZNE","./texture":"GqKp","./texture-formats":"PH5D","./buffer":"d/4i"}],"miHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var p,l=e(require("@babel/runtime/helpers/esm/defineProperty"));function e(p){return p&&p.__esModule?p:{default:p}}var t="EXT_color_buffer_float",u=(p={},(0,l.default)(p,33189,{bpp:2}),(0,l.default)(p,33190,{gl2:!0,bpp:3}),(0,l.default)(p,36012,{gl2:!0,bpp:4}),(0,l.default)(p,36168,{bpp:1}),(0,l.default)(p,34041,{bpp:4}),(0,l.default)(p,35056,{gl2:!0,bpp:4}),(0,l.default)(p,36013,{gl2:!0,bpp:5}),(0,l.default)(p,32854,{bpp:2}),(0,l.default)(p,36194,{bpp:2}),(0,l.default)(p,32855,{bpp:2}),(0,l.default)(p,33321,{gl2:!0,bpp:1}),(0,l.default)(p,33330,{gl2:!0,bpp:1}),(0,l.default)(p,33329,{gl2:!0,bpp:1}),(0,l.default)(p,33332,{gl2:!0,bpp:2}),(0,l.default)(p,33331,{gl2:!0,bpp:2}),(0,l.default)(p,33334,{gl2:!0,bpp:4}),(0,l.default)(p,33333,{gl2:!0,bpp:4}),(0,l.default)(p,33323,{gl2:!0,bpp:2}),(0,l.default)(p,33336,{gl2:!0,bpp:2}),(0,l.default)(p,33335,{gl2:!0,bpp:2}),(0,l.default)(p,33338,{gl2:!0,bpp:4}),(0,l.default)(p,33337,{gl2:!0,bpp:4}),(0,l.default)(p,33340,{gl2:!0,bpp:8}),(0,l.default)(p,33339,{gl2:!0,bpp:8}),(0,l.default)(p,32849,{gl2:!0,bpp:3}),(0,l.default)(p,32856,{gl2:!0,bpp:4}),(0,l.default)(p,32857,{gl2:!0,bpp:4}),(0,l.default)(p,36220,{gl2:!0,bpp:4}),(0,l.default)(p,36238,{gl2:!0,bpp:4}),(0,l.default)(p,36975,{gl2:!0,bpp:4}),(0,l.default)(p,36214,{gl2:!0,bpp:8}),(0,l.default)(p,36232,{gl2:!0,bpp:8}),(0,l.default)(p,36226,{gl2:!0,bpp:16}),(0,l.default)(p,36208,{gl2:!0,bpp:16}),(0,l.default)(p,33325,{gl2:t,bpp:2}),(0,l.default)(p,33327,{gl2:t,bpp:4}),(0,l.default)(p,34842,{gl2:t,bpp:8}),(0,l.default)(p,33326,{gl2:t,bpp:4}),(0,l.default)(p,33328,{gl2:t,bpp:8}),(0,l.default)(p,34836,{gl2:t,bpp:16}),(0,l.default)(p,35898,{gl2:t,bpp:4}),p);exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM"}],"baET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),t=f(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=f(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=f(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=f(require("@babel/runtime/helpers/esm/createClass")),s=f(require("@babel/runtime/helpers/esm/inherits")),l=f(require("./resource")),u=f(require("./renderbuffer-formats")),n=require("../webgl-utils"),h=require("../utils");function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){var i=r[t];if(!i)return!1;var a=(0,n.isWebGL2)(e)&&i.gl2||i.gl1;return"string"==typeof a?e.getExtension(a):a}var o=function(l){function f(a){var s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,f),(s=(0,t.default)(this,(0,r.default)(f).call(this,a,l))).initialize(l),Object.seal((0,i.default)(s)),s}return(0,s.default)(f,l),(0,a.default)(f,null,[{key:"isSupported",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||d(e,t,u.default)}},{key:"getSamplesForFormat",value:function(e,t){var r=t.format;return e.getInternalformatParameter(36161,r,32937)}}]),(0,a.default)(f,[{key:"initialize",value:function(e){var t=e.format,r=e.width,i=void 0===r?1:r,a=e.height,s=void 0===a?1:a,l=e.samples,f=void 0===l?0:l;return(0,h.assert)(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==f&&(0,n.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,f,t,i,s):this.gl.renderbufferStorage(36161,t,i,s),this.format=t,this.width=i,this.height=s,this.samples=f,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*u.default[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),f}(l.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./renderbuffer-formats":"miHD","../webgl-utils":"GZNE","../utils":"CgZv"}],"ztYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=d,exports.clearBuffer=b;var e=l(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("../context"),a=require("../webgl-utils"),t=require("../utils");function l(e){return e&&e.__esModule?e:{default:e}}var f=256,u=1024,c=16384,i=6144,s=6145,o=6146,n=34041,v="clear: bad arguments";function d(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=a.framebuffer,i=void 0===l?null:l,s=a.color,o=void 0===s?null:s,n=a.depth,d=void 0===n?null:n,b=a.stencil,h=void 0===b?null:b,m={};i&&(m.framebuffer=i);var B=0;o&&(B|=c,!0!==o&&(m.clearColor=o)),d&&(B|=f,!0!==d&&(m.clearDepth=d)),h&&(B|=u,!0!==d&&(m.clearStencil=d)),(0,t.assert)(0!==B,v),(0,r.withParameters)(e,m,function(){e.clear(B)})}function b(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=f.framebuffer,c=void 0===u?null:u,d=f.buffer,b=void 0===d?i:d,h=f.drawBuffer,m=void 0===h?0:h,B=f.value,p=void 0===B?[0,0,0,0]:B;(0,a.assertWebGL2Context)(l),(0,r.withParameters)(l,{framebuffer:c},function(){switch(b){case i:switch(p.constructor){case Int32Array:l.clearBufferiv(b,m,p);break;case Uint32Array:l.clearBufferuiv(b,m,p);break;case Float32Array:default:l.clearBufferfv(b,m,p)}break;case s:l.clearBufferfv(s,0,[p]);break;case o:l.clearBufferiv(o,0,[p]);break;case n:var r=(0,e.default)(p,2),a=r[0],f=r[1];l.clearBufferfi(n,0,a,f);break;default:(0,t.assert)(!1,v)}})}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","../context":"/Aqp","../webgl-utils":"GZNE","../utils":"CgZv"}],"BCIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glFormatToComponents=r,exports.glTypeToBytes=s;var e=require("../utils");function r(r){switch(r){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,e.assert)(!1),0}}function s(r){switch(r){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,e.assert)(!1),0}}
},{"../utils":"CgZv"}],"DmZq":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPixelsToArray=s,exports.readPixelsToBuffer=l,exports.copyToDataUrl=c,exports.copyToImage=g,exports.copyToTexture=m,exports.blit=v;var e=n(require("./buffer")),r=n(require("./framebuffer")),t=n(require("./texture")),a=require("../context"),i=require("../webgl-utils"),o=require("../webgl-utils/typed-array-utils"),u=require("../webgl-utils/format-utils"),d=require("../webgl-utils/texture-utils"),f=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceX,a=void 0===t?0:t,i=r.sourceY,u=void 0===i?0:i,d=r.sourceFormat,n=void 0===d?6408:d,s=r.sourceAttachment,l=void 0===s?36064:s,c=r.target,g=void 0===c?null:c,m=r.sourceWidth,v=r.sourceHeight,p=r.sourceType,F=h(e),y=F.framebuffer,x=F.deleteFramebuffer;(0,f.assert)(y);var w=y.gl,T=y.handle,A=y.attachments;m=m||y.width,v=v||y.height,36064===l&&null===T&&(l=1028),(0,f.assert)(A[l]),g=b(g,p=p||A[l].type,n,m,v),p=p||(0,o.getGLTypeFromTypedArray)(g);var I=w.bindFramebuffer(36160,T);return w.readPixels(a,u,m,v,n,p,g),w.bindFramebuffer(36160,I||null),x&&y.delete(),g}function l(r,t){var o=t.sourceX,d=void 0===o?0:o,n=t.sourceY,s=void 0===n?0:n,l=t.sourceFormat,c=void 0===l?6408:l,g=t.target,m=void 0===g?null:g,v=t.targetByteOffset,b=void 0===v?0:v,p=t.sourceWidth,F=t.sourceHeight,y=t.sourceType,x=h(r),w=x.framebuffer,T=x.deleteFramebuffer;(0,f.assert)(w);var A=w.gl;if(p=p||w.width,F=F||w.height,(0,i.assertWebGL2Context)(A),y=y||(m?m.type:5121),!m){var I=(0,u.glFormatToComponents)(c),q=(0,u.glTypeToBytes)(y),B=b+p*F*I*q;m=new e.default(A,{byteLength:B,accessor:{type:y,size:I}})}return m.bind({target:35051}),(0,a.withParameters)(A,{framebuffer:w},function(){A.readPixels(d,s,p,F,c,y,b)}),m.unbind({target:35051}),T&&w.delete(),m}function c(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceAttachment,a=void 0===t?36064:t,o=r.targetMaxHeight,u=void 0===o?Number.MAX_SAFE_INTEGER:o,d=s(e,{sourceAttachment:a}),f=e.width,n=e.height;n>u;){var l=(0,i.scalePixels)({data:d,width:f,height:n});d=l.data,f=l.width,n=l.height}(0,i.flipRows)({data:d,width:f,height:n});var c=document.createElement("canvas");c.width=f,c.height=n;var g=c.getContext("2d"),m=g.createImageData(f,n);return m.data.set(d),g.putImageData(m,0,0),c.toDataURL()}function g(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.sourceAttachment,a=void 0===t?36064:t,i=r.targetImage,o=void 0===i?null:i,u=c(e,{sourceAttachment:a});return(o=o||new Image).src=u,o}function m(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.sourceX,o=void 0===i?0:i,u=a.sourceY,d=void 0===u?0:u,n=a.targetX,s=a.targetY,l=a.targetZ,c=a.targetMipmaplevel,g=void 0===c?0:c,m=a.targetInternalFormat,v=void 0===m?6408:m,b=a.width,p=a.height,F=h(e),y=F.framebuffer,x=F.deleteFramebuffer;(0,f.assert)(y);var w=y.gl,T=y.handle,A=void 0!==n||void 0!==s||void 0!==l;n=n||0,s=s||0,l=l||0;var I=w.bindFramebuffer(36160,T);(0,f.assert)(r);var q=null;if(r instanceof t.default&&(q=r,b=Number.isFinite(b)?b:q.width,p=Number.isFinite(p)?p:q.height,q.bind(0),r=q.target),A)switch(r){case 3553:case 34067:w.copyTexSubImage2D(r,g,n,s,o,d,b,p);break;case 35866:case 32879:w.copyTexSubImage3D(r,g,n,s,l,o,d,b,p)}else w.copyTexImage2D(r,g,v,o,d,b,p,0);return q&&q.unbind(),w.bindFramebuffer(36160,I||null),x&&y.delete(),q}function v(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.sourceAttachment,o=void 0===a?36064:a,u=t.sourceX0,d=void 0===u?0:u,n=t.sourceY0,s=void 0===n?0:n,l=t.sourceX1,c=t.sourceY1,g=t.targetX0,m=void 0===g?0:g,v=t.targetY0,b=void 0===v?0:v,p=t.targetX1,F=t.targetY1,y=t.color,x=void 0===y||y,w=t.depth,T=void 0!==w&&w,A=t.stencil,I=void 0!==A&&A,q=t.mask,B=void 0===q?0:q,X=t.filter,L=void 0===X?9728:X,Y=h(e),_=Y.framebuffer,D=Y.deleteFramebuffer,P=h(r),C=P.framebuffer,G=P.deleteFramebuffer;(0,f.assert)(_),(0,f.assert)(C);var E=C.gl,M=C.handle,R=C.width,N=C.height,O=C.readBuffer;(0,i.assertWebGL2Context)(E),_.handle||36064!==o||(o=1028),x&&(B|=16384),T&&(B|=256),I&&(B|=1024),(D||G)&&1280&B&&(B=16384,f.log.warn("Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT")()),(0,f.assert)(B),l=void 0===l?_.width:l,c=void 0===c?_.height:c,p=void 0===p?R:p,F=void 0===F?N:F;var W=E.bindFramebuffer(36009,M),k=E.bindFramebuffer(36008,_.handle);return E.readBuffer(o),E.blitFramebuffer(d,s,l,c,m,b,p,F,B,L),E.readBuffer(O),E.bindFramebuffer(36008,k||null),E.bindFramebuffer(36009,W||null),D&&_.delete(),G&&C.delete(),C}function h(e){return e instanceof r.default?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(0,d.toFramebuffer)(e),deleteFramebuffer:!0}}function b(e,r,t,a,i){return e||(r=r||5121,new((0,o.getTypedArrayFromGLType)(r,{clamped:!1}))(a*i*(0,u.glFormatToComponents)(t)))}
},{"./buffer":"d/4i","./framebuffer":"1QRT","./texture":"GqKp","../context":"/Aqp","../webgl-utils":"GZNE","../webgl-utils/typed-array-utils":"M+BU","../webgl-utils/format-utils":"BCIn","../webgl-utils/texture-utils":"oR6C","../utils":"CgZv"}],"IlXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l,e=g(require("@babel/runtime/helpers/esm/defineProperty"));function g(l){return l&&l.__esModule?l:{default:l}}var t=(l={},(0,e.default)(l,33902,{gl1:new Float32Array([1,1])}),(0,e.default)(l,33901,{gl1:new Float32Array([1,1])}),(0,e.default)(l,3379,{gl1:64,gl2:2048}),(0,e.default)(l,34076,{gl1:16}),(0,e.default)(l,34930,{gl1:8}),(0,e.default)(l,35661,{gl1:8}),(0,e.default)(l,35660,{gl1:0}),(0,e.default)(l,34024,{gl1:1}),(0,e.default)(l,36348,{gl1:8}),(0,e.default)(l,34921,{gl1:8}),(0,e.default)(l,36347,{gl1:128}),(0,e.default)(l,36349,{gl1:16}),(0,e.default)(l,3386,{gl1:new Int32Array([0,0])}),(0,e.default)(l,32883,{gl1:0,gl2:256}),(0,e.default)(l,35071,{gl1:0,gl2:256}),(0,e.default)(l,37447,{gl1:0,gl2:0}),(0,e.default)(l,36063,{gl1:0,gl2:4}),(0,e.default)(l,35379,{gl1:0,gl2:0}),(0,e.default)(l,35374,{gl1:0,gl2:0}),(0,e.default)(l,35377,{gl1:0,gl2:0}),(0,e.default)(l,34852,{gl1:0,gl2:4}),(0,e.default)(l,36203,{gl1:0,gl2:0}),(0,e.default)(l,33001,{gl1:0,gl2:0}),(0,e.default)(l,33e3,{gl1:0,gl2:0}),(0,e.default)(l,37157,{gl1:0,gl2:0}),(0,e.default)(l,35373,{gl1:0,gl2:0}),(0,e.default)(l,35657,{gl1:0,gl2:0}),(0,e.default)(l,36183,{gl1:0,gl2:0}),(0,e.default)(l,37137,{gl1:0,gl2:0}),(0,e.default)(l,34045,{gl1:0,gl2:0}),(0,e.default)(l,35978,{gl1:0,gl2:0}),(0,e.default)(l,35979,{gl1:0,gl2:0}),(0,e.default)(l,35968,{gl1:0,gl2:0}),(0,e.default)(l,35376,{gl1:0,gl2:0}),(0,e.default)(l,35375,{gl1:0,gl2:0}),(0,e.default)(l,35659,{gl1:0,gl2:0}),(0,e.default)(l,37154,{gl1:0,gl2:0}),(0,e.default)(l,35371,{gl1:0,gl2:0}),(0,e.default)(l,35658,{gl1:0,gl2:0}),(0,e.default)(l,35076,{gl1:0,gl2:-8,negative:!0}),(0,e.default)(l,35077,{gl1:0,gl2:7}),(0,e.default)(l,35380,{gl1:0,gl2:0}),l);exports.default=t;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM"}],"5J/+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextLimits=u,exports.getGLContextInfo=r,exports.getContextInfo=a;var e=l(require("@babel/runtime/helpers/esm/defineProperty")),i=require("../webgl-utils"),t=l(require("./webgl-limits-table")),n=require("../debug/get-context-debug-info");function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var n=(0,i.isWebGL2)(e);for(var l in t.default){var u=t.default[l],r=u.gl1,a="gl2"in u?u.gl2:u.gl1,s=n?a:r,m="gl2"in u&&!n||"extension"in u&&!e.getExtension(u.extension)?s:e.getParameter(l);e.luma.limits[l]=m,e.luma.webgl1MinLimits[l]=r,e.luma.webgl2MinLimits[l]=a}}return e.luma.limits}function r(i){i.luma=i.luma||{};var t,l=(0,n.getContextDebugInfo)(i);i.luma.info||(i.luma.info=(t={},(0,e.default)(t,37445,l.vendor),(0,e.default)(t,37446,l.renderer),(0,e.default)(t,7936,l.vendorMasked),(0,e.default)(t,7937,l.rendererMasked),(0,e.default)(t,7938,l.version),(0,e.default)(t,35724,l.shadingLanguageVersion),t));return i.luma.info}function a(e){return Object.assign((0,n.getContextDebugInfo)(e),{limits:u(e),info:r(e),webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits})}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../webgl-utils":"GZNE","./webgl-limits-table":"IlXB","../debug/get-context-debug-info":"L13w"}],"UM+a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.FEATURES=void 0;var _,E=L(require("@babel/runtime/helpers/esm/defineProperty")),T=require("../webgl-utils");function L(_){return _&&_.__esModule?_:{default:_}}var R={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};exports.FEATURES=R;var e=(_={},(0,E.default)(_,R.WEBGL2,[function(_){return(0,T.isWebGL2)(_)}]),(0,E.default)(_,R.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,E.default)(_,R.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,E.default)(_,R.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,E.default)(_,R.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,E.default)(_,R.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,E.default)(_,R.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,E.default)(_,R.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,E.default)(_,R.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,E.default)(_,R.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,E.default)(_,R.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,E.default)(_,R.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,E.default)(_,R.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,E.default)(_,R.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,E.default)(_,R.COLOR_ATTACHMENT_RGBA32F,["WEBGL_color_buffer_float","EXT_color_buffer_float"]),(0,E.default)(_,R.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,E.default)(_,R.COLOR_ATTACHMENT_HALF_FLOAT,[!1,"EXT_color_buffer_half_float"]),(0,E.default)(_,R.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,E.default)(_,R.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,E.default)(_,R.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,E.default)(_,R.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),_);exports.default=e;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../webgl-utils":"GZNE"}],"qa8S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasFeature=u,exports.hasFeatures=n,exports.getFeatures=s;var e=a(require("./webgl-features-table")),r=require("../webgl-utils"),t=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,r){return n(e,r)}function n(e,r){return(r=Array.isArray(r)?r:[r]).every(function(r){return l(e,r)})}function s(t){if(t.luma=t.luma||{},!t.luma.caps)for(var a in t.luma.caps={},t.luma.caps.webgl2=(0,r.isWebGL2)(t),e.default)t.luma.caps[a]=l(t,a);return t.luma.caps}function l(a,u){var n=e.default[u];(0,t.assert)(n,u);var s,l=(0,r.isWebGL2)(a)&&n[1]||n[0];if("function"==typeof l)s=l(a);else if(Array.isArray(l)){s=!0;var o=!0,i=!1,f=void 0;try{for(var c,y=l[Symbol.iterator]();!(o=(c=y.next()).done);o=!0){var p=c.value;s=s&&Boolean(a.getExtension(p))}}catch(v){i=!0,f=v}finally{try{o||null==y.return||y.return()}finally{if(i)throw f}}}else"string"==typeof l?s=Boolean(a.getExtension(l)):"boolean"==typeof l?s=l:(0,t.assert)(!1);return s}
},{"./webgl-features-table":"UM+a","../webgl-utils":"GZNE","../utils":"CgZv"}],"8tGt":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="undefined"!=typeof window&&window.navigator||{},t=e.userAgent||n.userAgent||"",r=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return r||d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"7Cuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("./check-old-ie")),r=a(require("./webgl-features-table")),t=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var u={};function i(a,i){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.default[i];if((0,t.assert)(n,i),!(0,e.default)(d))return!0;if(i in u)return u[i];var l=n[0],o="#extension GL_".concat(l," : enable\nvoid main(void) {}"),s=a.createShader(35633);a.shaderSource(s,o),a.compileShader(s);var c=a.getShaderParameter(s,35713);return a.deleteShader(s),u[i]=c,c}
},{"./check-old-ie":"8tGt","./webgl-features-table":"UM+a","../utils":"CgZv"}],"QnT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return e.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return e.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return e.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return r.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return r.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return r.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return n.default}});var e=require("./limits"),t=require("./webgl-features-table"),r=require("./features"),n=u(require("./check-glsl-extension"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./limits":"5J/+","./webgl-features-table":"UM+a","./features":"qa8S","./check-glsl-extension":"7Cuw"}],"1QRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=exports.default=void 0;var e=v(require("@babel/runtime/helpers/esm/defineProperty")),t=v(require("@babel/runtime/helpers/esm/slicedToArray")),r=v(require("@babel/runtime/helpers/esm/classCallCheck")),a=v(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=v(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=v(require("@babel/runtime/helpers/esm/assertThisInitialized")),u=v(require("@babel/runtime/helpers/esm/createClass")),l=v(require("@babel/runtime/helpers/esm/inherits")),s=v(require("./resource")),f=v(require("./texture-2d")),h=v(require("./renderbuffer")),o=require("./clear"),d=require("./copy-and-blit.js"),c=require("../features"),g=require("../webgl-utils"),m=require("../utils");function v(e){return e&&e.__esModule?e:{default:e}}var b="Multiple render targets not supported",y=function(s){function v(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.default)(this,v),(t=(0,a.default)(this,(0,i.default)(v).call(this,e,u))).width=null,t.height=null,t.attachments={},t.readBuffer=36064,t.drawBuffers=[36064],t.initialize(u),Object.seal((0,n.default)(t)),t}return(0,l.default)(v,s),(0,u.default)(v,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,a=t.colorBufferHalfFloat;return r&&e.getExtension((0,g.isWebGL2)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),a&&e.getExtension((0,g.isWebGL2)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new v(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),(0,u.default)(v,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,a=e.height,i=void 0===a?1:a,n=e.attachments,u=void 0===n?null:n,l=e.color,s=void 0===l||l,f=e.depth,h=void 0===f||f,o=e.stencil,d=void 0!==o&&o,c=e.check,g=void 0===c||c,v=e.readBuffer,b=e.drawBuffers;if((0,m.assert)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,u)for(var y in u){var p=u[y];(Array.isArray(p)?p[0]:p).resize({width:r,height:i})}else u=this._createDefaultAttachments(s,h,d,r,i);this.update({clearAttachments:!0,attachments:u,readBuffer:v,drawBuffers:b}),u&&g&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,r=void 0===t?{}:t,a=e.readBuffer,i=e.drawBuffers,n=e.clearAttachments,u=void 0!==n&&n,l=e.resizeAttachments,s=void 0===l||l;this.attach(r,{clearAttachments:u,resizeAttachments:s});var f=this.gl,h=f.bindFramebuffer(36160,this.handle);return a&&this._setReadBuffer(a),i&&this._setDrawBuffers(i),f.bindFramebuffer(36160,h||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return(0,m.assert)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var a in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&m.log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r))(),this.attachments)this.attachments[a].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.clearAttachments,n=void 0!==i&&i,u=a.resizeAttachments,l=void 0===u||u,s={};n&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var f=this.gl.bindFramebuffer(36160,this.handle);for(var o in s){(0,m.assert)(void 0!==o,"Misspelled framebuffer binding point?");var d=Number(o),c=s[d],g=c;if(g)if(g instanceof h.default)this._attachRenderbuffer({attachment:d,renderbuffer:g});else if(Array.isArray(c)){var v=(0,t.default)(c,3),b=v[0],y=v[1],p=void 0===y?0:y,T=v[2],w=void 0===T?0:T;g=b,this._attachTexture({attachment:d,texture:b,layer:p,level:w})}else this._attachTexture({attachment:d,texture:g,layer:0,level:0});else this._unattach(d);l&&g&&g.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,f||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!r.attachments[e]}).forEach(function(e){delete r.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==r)throw new Error(T(r));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,a=e.stencil,i=e.drawBuffers,n=void 0===i?[]:i,u=this.gl.bindFramebuffer(36160,this.handle);return(t||r||a)&&(0,o.clear)(this.gl,{color:t,depth:r,stencil:a}),n.forEach(function(e,t){(0,o.clearBuffer)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,u||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.log.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,a=e.x,i=void 0===a?0:a,n=e.y,u=void 0===n?0:n,l=e.width,s=e.height,f=this.gl;(0,g.assertWebGL2Context)(f);var h=f.bindFramebuffer(36008,this.handle);return 0===i&&0===u&&void 0===l&&void 0===s?f.invalidateFramebuffer(36008,r):f.invalidateFramebuffer(36008,r,i,u,l,s),f.bindFramebuffer(36008,h),this}},{key:"getAttachmentParameter",value:function(e,t,r){var a=this._getAttachmentParameterFallback(t);return null===a&&(this.gl.bindFramebuffer(36160,this.handle),a=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&a>1e3&&(a=(0,g.getKey)(this.gl,a)),a}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],a={},i=!0,n=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var f=l.value;a[t?(0,g.getKey)(this.gl,f):f]=this.getAttachmentParameter(e,f,t)}}catch(h){n=!0,u=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw u}}return a}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={},r=0,a=Object.keys(this.attachments);r<a.length;r++){var i=a[r],n=Number(i);t[e?(0,g.getKey)(this.gl,n):n]=this.getAttachmentParameters(n,e)}return t}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open((0,d.copyToDataUrl)(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>m.log.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=(0,d.copyToDataUrl)(this,{maxHeight:100});return m.log.image({priority:e,message:t,image:r},t)(),this}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function(t,r,a,i,n){var u,l=null;t&&((l=l||{})[36064]=new f.default(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:n,mipmaps:!1,parameters:(u={},(0,e.default)(u,10241,9729),(0,e.default)(u,10240,9729),(0,e.default)(u,10242,33071),(0,e.default)(u,10243,33071),u)}));return r&&a?(l=l||{})[33306]=new h.default(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}):r?(l=l||{})[36096]=new h.default(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:n}):a&&(0,m.assert)(!1),l}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof h.default?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?36064:t,a=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,r,36161,a.handle),this.attachments[r]=a}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?36064:t,a=e.texture,i=e.layer,n=e.level,u=this.gl;switch(u.bindTexture(a.target,a.handle),a.target){case 35866:case 32879:u.framebufferTextureLayer(36160,r,a.target,n,i);break;case 34067:var l=p(i);u.framebufferTexture2D(36160,r,l,a.handle,n);break;case 3553:u.framebufferTexture2D(36160,r,3553,a.handle,n);break;default:(0,m.assert)(!1,"Illegal texture type")}u.bindTexture(a.target,null),this.attachments[r]=a}},{key:"_setReadBuffer",value:function(e){var t=this.gl;(0,g.isWebGL2)(t)?t.readBuffer(e):(0,m.assert)(36064===e||1029===e,b),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if((0,g.isWebGL2)(t))t.drawBuffers(e);else{var r=t.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(e):(0,m.assert)(1===e.length&&(36064===e[0]||1029===e[0]),b)}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=(0,c.getFeatures)(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),v}(s.default);function p(e){return e<34069?e+34069:e}function T(e){return(y.STATUS||{})[e]||"Framebuffer error ".concat(e)}exports.default=y;var w=[36049,36048,33296,33298,33299,33300,33301,33302,33303];exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=w,y.ATTACHMENT_PARAMETERS=w;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./texture-2d":"YE27","./renderbuffer":"baET","./clear":"ztYM","./copy-and-blit.js":"DmZq","../features":"QnT2","../webgl-utils":"GZNE","../utils":"CgZv"}],"oR6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTextureFrom=n,exports.toFramebuffer=o;var e=i(require("@babel/runtime/helpers/esm/defineProperty")),t=i(require("../classes/texture-2d")),r=i(require("../classes/texture-cube")),a=i(require("../classes/texture-3d")),s=i(require("../classes/framebuffer")),u=require("../utils");function i(e){return e&&e.__esModule?e:{default:e}}function n(e,s){(0,u.assert)(e instanceof t.default||e instanceof r.default||e instanceof a.default);var i=e.constructor,n=e.gl,o=e.width,f=e.height,d=e.format,c=e.type,l=e.dataFormat,m=e.border,h=e.mipmaps;return new i(n,Object.assign({width:o,height:f,format:d,type:c,dataFormat:l,border:m,mipmaps:h},s))}function o(t,r){var a=t.gl,u=t.width,i=t.height,n=t.id;return new s.default(a,Object.assign({},r,{id:"framebuffer-for-".concat(n),width:u,height:i,attachments:(0,e.default)({},36064,t)}))}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../classes/texture-2d":"YE27","../classes/texture-cube":"eOjF","../classes/texture-3d":"mm+M","../classes/framebuffer":"1QRT","../utils":"CgZv"}],"GZNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return e.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return e.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return e.WebGL2RenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return e.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return e.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return e.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return e.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return e.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return e.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return e.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return e.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return e.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return e.webGLTypesAvailable}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return r.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return r.isWebGL2}}),Object.defineProperty(exports,"assertWebGLContext",{enumerable:!0,get:function(){return r.assertWebGLContext}}),Object.defineProperty(exports,"assertWebGL2Context",{enumerable:!0,get:function(){return r.assertWebGL2Context}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return t.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return t.cancelAnimationFrame}}),Object.defineProperty(exports,"getGLTypeFromTypedArray",{enumerable:!0,get:function(){return n.getGLTypeFromTypedArray}}),Object.defineProperty(exports,"getTypedArrayFromGLType",{enumerable:!0,get:function(){return n.getTypedArrayFromGLType}}),Object.defineProperty(exports,"flipRows",{enumerable:!0,get:function(){return n.flipRows}}),Object.defineProperty(exports,"scalePixels",{enumerable:!0,get:function(){return n.scalePixels}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return o.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return o.getKey}}),Object.defineProperty(exports,"getKeyType",{enumerable:!0,get:function(){return o.getKeyType}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return u.cloneTextureFrom}});var e=require("./webgl-types"),r=require("./webgl-checks"),t=require("./request-animation-frame"),n=require("./typed-array-utils"),o=require("./constants-to-keys"),u=require("./texture-utils");
},{"./webgl-types":"51kF","./webgl-checks":"SdWy","./request-animation-frame":"AGkC","./typed-array-utils":"M+BU","./constants-to-keys":"UyRF","./texture-utils":"oR6C"}],"ocf3":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=h,exports.isWebGL2=v,exports.assertWebGLContext=x,exports.assertWebGL2Context=b,exports.setGLContextDefaults=w,exports.createGLContext=p,exports.instrumentGLContext=G,exports.destroyGLContext=L,exports.resizeGLContext=C,exports.ERR_WEBGL2=exports.ERR_WEBGL=exports.ERR_CONTEXT=void 0;var e=c(require("@babel/runtime/helpers/esm/objectSpread")),t=require("@luma.gl/webgl-state-tracker"),r=require("./create-headless-context"),n=require("./create-canvas"),o=require("./create-browser-context"),i=require("../debug/get-context-debug-info"),a=require("../webgl-utils"),s=require("../utils"),u=require("../utils/globals");function c(e){return e&&e.__esModule?e:{default:e}}var g="Invalid WebGLRenderingContext";exports.ERR_CONTEXT=g;var l=g;exports.ERR_WEBGL=l;var d="Requires WebGL2";function h(e){return Boolean(e&&Number.isFinite(e._version))}function v(e){return Boolean(e&&2===e._version)}function x(e){(0,s.assert)(h(e),g)}function b(e){(0,s.assert)(v(e),d)}exports.ERR_WEBGL2=d;var f={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(f,{width:1,height:1},e)}function p(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i=Object.assign({},f,i),u=a.width,c=a.height;function g(e){if(i.throwOnError)throw new Error(e);return null}if(s.isBrowser){var l=i.canvas,d=(0,n.getCanvas)({canvas:l,width:u,height:c,onError:g});t=(0,o.createBrowserContext)(d,i)}else t=(0,r.createHeadlessContext)((0,e.default)({},i,{width:u,height:c,onError:g}));return t?(_(t=G(t,i)),t):null}function G(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e._instrumented)return e;e._version=e._version||E(e);var n=r=Object.assign({},f,r),o=n.manageState,i=n.debug;return o&&(0,t.trackContextState)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.log.log.apply(s.log,[1].concat(t))()}}),s.isBrowser&&i&&(u.global.makeDebugContext?(e=u.global.makeDebugContext(e,r),s.log.priority=Math.max(s.log.priority,1)):s.log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function L(e){var t=e.getExtension("STACKGL_destroy_context");t&&t.destroy()}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var r=t.useDevicePixels&&window.devicePixelRatio||1,n="width"in t?t.width:e.canvas.clientWidth,o="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=n*r,void(e.canvas.height=o*r)}var i=e.getExtension("STACKGL_resize_drawingbuffer");i&&"width"in t&&"height"in t&&i.resize(t.width,t.height)}function _(e){var t=v(e)?"WebGL2":"WebGL1",r=(0,i.getContextDebugInfo)(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",o=e.debug?" debug":"";s.log.once(1,"".concat(t).concat(o," context ").concat(n))()}function E(e){return void 0!==a.WebGL2RenderingContext&&e instanceof a.WebGL2RenderingContext?2:1}
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@luma.gl/webgl-state-tracker":"1gQ5","./create-headless-context":"7h1p","./create-canvas":"xnoV","./create-browser-context":"8tWm","../debug/get-context-debug-info":"L13w","../webgl-utils":"GZNE","../utils":"CgZv","../utils/globals":"gHeQ"}],"WHl0":[function(require,module,exports) {
"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"OBvR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=35632,t=35633;function r(r){switch(r){case e:return"fragment";case t:return"vertex";default:return"unknown type"}}
},{}],"fowk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.parseGLSLCompilerError=a;var r=t(require("./get-shader-name")),n=t(require("./get-shader-type-name"));function t(r){return r&&r.__esModule?r:{default:r}}function e(r,n,t){var e=a(r,n,t),o=e.shaderName,c=e.errors,i=e.warnings;return"GLSL compilation error in ".concat(o,"\n\n").concat(c,"\n").concat(i)}function a(t,e,a,i){for(var s=t.split(/\r?\n/),u={},l={},f=i||(0,r.default)(e)||"(unnamed)",g="".concat((0,n.default)(a)," shader ").concat(f),p=0;p<s.length;p++){var d=s[p];if(!(d.length<=1)){var h=d.split(":"),v=h[0],m=parseInt(h[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(g,": ").concat(t));"WARNING"!==v?u[m]=d:l[m]=d}}var L=c(e);return{shaderName:g,errors:o(u,L),warnings:o(l,L)}}function o(r,n){for(var t="",e=0;e<n.length;e++){var a=n[e];if((r[e+3]||r[e+2]||r[e+1])&&(t+="".concat(a,"\n"),r[e+1])){var o=r[e+1],c=o.split(":",3),s=c[0],u=parseInt(c[1],10)||0,l=o.substring(c.join(":").length+1).trim();t+=i("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return t}function c(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",e=r.split(/\r?\n/),a=String(e.length+n-1).length;return e.map(function(r,e){var o=e+n,c=String(o).length;return i(o,a-c)+t+r})}function i(r,n){for(var t="",e=0;e<n;++e)t+=" ";return"".concat(t).concat(r)}
},{"./get-shader-name":"WHl0","./get-shader-type-name":"OBvR"}],"ZDha":[function(require,module,exports) {
"use strict";function e(e){var t=100,r=e.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){var s=parseInt(r[1],10);Number.isFinite(s)&&(t=s)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bJJz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatGLSLCompilerError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"parseGLSLCompilerError",{enumerable:!0,get:function(){return e.parseGLSLCompilerError}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"getShaderTypeName",{enumerable:!0,get:function(){return n.default}});var e=u(require("./format-glsl-error")),r=o(require("./get-shader-name")),t=o(require("./get-shader-version")),n=o(require("./get-shader-type-name"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}
},{"./format-glsl-error":"fowk","./get-shader-name":"WHl0","./get-shader-version":"ZDha","./get-shader-type-name":"OBvR"}],"Mfxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=o(require("@babel/runtime/helpers/esm/createClass")),n=o(require("@babel/runtime/helpers/esm/inherits")),s=require("../glsl-utils"),i=require("../webgl-utils"),u=require("../utils"),l=o(require("./resource"));function o(e){return e&&e.__esModule?e:{default:e}}var h="Shader: GLSL source code must be a JavaScript string",d=function(l){function o(a,n){var l;(0,e.default)(this,o),(0,i.assertWebGLContext)(a),(0,u.assert)("string"==typeof n.source,h);var d=(0,s.getShaderName)(n.source,null)||n.id||(0,u.uid)("unnamed ".concat(o.getTypeName(n.shaderType)));return(l=(0,r.default)(this,(0,t.default)(o).call(this,a,{id:d}))).shaderType=n.shaderType,l.source=n.source,l.initialize(n),l}return(0,n.default)(o,l),(0,a.default)(o,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,u.assert)(!1),"unknown"}}}]),(0,a.default)(o,[{key:"initialize",value:function(e){var r=e.source,t=(0,s.getShaderName)(r,null);t&&(this.id=(0,u.uid)(t)),this._compile(r)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(o.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,s.getShaderName)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),r=(0,s.parseGLSLCompilerError)(e,this.source,this.shaderType,this.id),t=r.shaderName,a=r.errors,n=r.warnings;throw u.log.error("GLSL compilation errors in ".concat(t,"\n").concat(a))(),u.log.warn("GLSL compilation warnings in ".concat(t,"\n").concat(n))(),new Error("GLSL compilation errors in ".concat(t))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),o}(l.default);exports.Shader=d;var c=function(s){function i(a,n){return(0,e.default)(this,i),"string"==typeof n&&(n={source:n}),(0,r.default)(this,(0,t.default)(i).call(this,a,Object.assign({},n,{shaderType:35633})))}return(0,n.default)(i,s),(0,a.default)(i,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),i}(d);exports.VertexShader=c;var g=function(s){function i(a,n){return(0,e.default)(this,i),"string"==typeof n&&(n={source:n}),(0,r.default)(this,(0,t.default)(i).call(this,a,Object.assign({},n,{shaderType:35632})))}return(0,n.default)(i,s),(0,a.default)(i,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),i}(d);exports.FragmentShader=g;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","../glsl-utils":"bJJz","../webgl-utils":"GZNE","../utils":"CgZv","./resource":"DwD3"}],"0OGh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./getPrototypeOf"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=(0,e.default)(t)););return t}
},{"./getPrototypeOf":"cYjN"}],"9KGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./superPropBase"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,u,f){return"undefined"!=typeof Reflect&&Reflect.get?exports.default=r=Reflect.get:exports.default=r=function(t,r,u){var f=(0,e.default)(t,r);if(f){var l=Object.getOwnPropertyDescriptor(f,r);return l.get?l.get.call(u):l.value}},r(t,u,f||t)}
},{"./superPropBase":"0OGh"}],"15DC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUniformName=y,exports.getUniformSetter=h,exports.checkUniformValues=p,exports.areUniformsEqual=w,exports.getUniformCopy=M;var r,n=i(require("@babel/runtime/helpers/esm/defineProperty")),u=i(require("./framebuffer")),t=i(require("./renderbuffer")),e=i(require("./texture")),f=require("../utils");function i(r){return r&&r.__esModule?r:{default:r}}var o=(r={},(0,n.default)(r,5126,function(r,n,u){return r.uniform1fv(n,v(u,1))}),(0,n.default)(r,35664,function(r,n,u){return r.uniform2fv(n,v(u,2))}),(0,n.default)(r,35665,function(r,n,u){return r.uniform3fv(n,v(u,3))}),(0,n.default)(r,35666,function(r,n,u){return r.uniform4fv(n,v(u,4))}),(0,n.default)(r,5124,function(r,n,u){return r.uniform1iv(n,s(u,1))}),(0,n.default)(r,35667,function(r,n,u){return r.uniform2iv(n,s(u,2))}),(0,n.default)(r,35668,function(r,n,u){return r.uniform3iv(n,s(u,3))}),(0,n.default)(r,35669,function(r,n,u){return r.uniform4iv(n,s(u,4))}),(0,n.default)(r,35670,function(r,n,u){return r.uniform1iv(n,s(u,1))}),(0,n.default)(r,35671,function(r,n,u){return r.uniform2iv(n,s(u,2))}),(0,n.default)(r,35672,function(r,n,u){return r.uniform3iv(n,s(u,3))}),(0,n.default)(r,35673,function(r,n,u){return r.uniform4iv(n,s(u,4))}),(0,n.default)(r,35674,function(r,n,u){return r.uniformMatrix2fv(n,!1,v(u,4))}),(0,n.default)(r,35675,function(r,n,u){return r.uniformMatrix3fv(n,!1,v(u,9))}),(0,n.default)(r,35676,function(r,n,u){return r.uniformMatrix4fv(n,!1,v(u,16))}),(0,n.default)(r,35678,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,35680,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,5125,function(r,n,u){return r.uniform1uiv(n,x(u,1))}),(0,n.default)(r,36294,function(r,n,u){return r.uniform2uiv(n,x(u,2))}),(0,n.default)(r,36295,function(r,n,u){return r.uniform3uiv(n,x(u,3))}),(0,n.default)(r,36296,function(r,n,u){return r.uniform4uiv(n,x(u,4))}),(0,n.default)(r,35685,function(r,n,u){return r.uniformMatrix2x3fv(n,!1,v(u,6))}),(0,n.default)(r,35686,function(r,n,u){return r.uniformMatrix2x4fv(n,!1,v(u,8))}),(0,n.default)(r,35687,function(r,n,u){return r.uniformMatrix3x2fv(n,!1,v(u,6))}),(0,n.default)(r,35688,function(r,n,u){return r.uniformMatrix3x4fv(n,!1,v(u,12))}),(0,n.default)(r,35689,function(r,n,u){return r.uniformMatrix4x2fv(n,!1,v(u,8))}),(0,n.default)(r,35690,function(r,n,u){return r.uniformMatrix4x3fv(n,!1,v(u,12))}),(0,n.default)(r,35679,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,35682,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36289,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36292,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36293,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36298,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36299,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36300,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36303,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36306,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36307,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36308,function(r,n,u){return r.uniform1i(n,u)}),(0,n.default)(r,36311,function(r,n,u){return r.uniform1i(n,u)}),r),a={},c={},l={},m=[0];function d(r,n,u,t){1===n&&"boolean"==typeof r&&(r=r?1:0),Number.isFinite(r)&&(m[0]=r,r=m);var e=r.length;if(e%n&&f.log.warn("Uniform size should be multiples of ".concat(n),r)(),r instanceof u)return r;var i=t[e];i||(i=new u(e),t[e]=i);for(var o=0;o<e;o++)i[o]=r[o];return i}function v(r,n){return d(r,n,Float32Array,a)}function s(r,n){return d(r,n,Int32Array,c)}function x(r,n){return d(r,n,Uint32Array,l)}function y(r){if("]"!==r[r.length-1])return{name:r,length:1,isArray:!1};var n=r.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(r));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function h(r,n,u){var t=o[u.type];if(!t)throw new Error("Unknown GLSL uniform type ".concat(u.type));return t.bind(null,r,n)}function p(r,n,u){for(var t in r){var e=r[t];if((!u||Boolean(u[t]))&&!A(e))throw n=n?"".concat(n," "):"",console.error("".concat(n," Bad uniform ").concat(t),e),new Error("".concat(n," Bad uniform ").concat(t))}return!0}function A(r){return Array.isArray(r)||ArrayBuffer.isView(r)?g(r):!!isFinite(r)||(!0===r||!1===r||(r instanceof e.default||(r instanceof t.default||r instanceof u.default&&Boolean(r.texture))))}function g(r){if(0===r.length)return!1;for(var n=Math.min(r.length,16),u=0;u<n;++u)if(!Number.isFinite(r[u]))return!1;return!0}function w(r,n){if(Array.isArray(r)||ArrayBuffer.isView(r)){if(!n)return!1;var u=r.length;if(n.length!==u)return!1;for(var t=0;t<u;t++)if(r[t]!==n[t])return!1;return!0}return r===n}function M(r){return Array.isArray(r)||ArrayBuffer.isView(r)?r.slice():r}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","./framebuffer":"1QRT","./renderbuffer":"baET","./texture":"GqKp","../utils":"CgZv"}],"r3DH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveDrawMode=J,exports.getPrimitiveCount=K,exports.getVertexCount=N,exports.decomposeCompositeGLType=Q,exports.getCompositeGLType=R;var e,t=u(require("@babel/runtime/helpers/esm/slicedToArray")),r=u(require("@babel/runtime/helpers/esm/defineProperty")),a=require("../utils");function u(e){return e&&e.__esModule?e:{default:e}}var s=5120,c=5121,n=5122,l=5123,d=0,f=1,o=2,i=3,v=4,m=5,p=6,x=5126,b=35664,w=35665,y=35666,C=5124,h=35667,M=35668,g=35669,P=5125,T=36294,_=36295,q=36296,G=35670,L=35671,j=35672,A=35673,D=35674,O=35675,V=35676,k=35685,z=35686,B=35687,E=35688,F=35689,H=35690,I=(e={},(0,r.default)(e,x,[x,1,"float"]),(0,r.default)(e,b,[x,2,"vec2"]),(0,r.default)(e,w,[x,3,"vec3"]),(0,r.default)(e,y,[x,4,"vec4"]),(0,r.default)(e,C,[C,1,"int"]),(0,r.default)(e,h,[C,2,"ivec2"]),(0,r.default)(e,M,[C,3,"ivec3"]),(0,r.default)(e,g,[C,4,"ivec4"]),(0,r.default)(e,P,[P,1,"uint"]),(0,r.default)(e,T,[P,2,"uvec2"]),(0,r.default)(e,_,[P,3,"uvec3"]),(0,r.default)(e,q,[P,4,"uvec4"]),(0,r.default)(e,G,[x,1,"bool"]),(0,r.default)(e,L,[x,2,"bvec2"]),(0,r.default)(e,j,[x,3,"bvec3"]),(0,r.default)(e,A,[x,4,"bvec4"]),(0,r.default)(e,D,[x,8,"mat2"]),(0,r.default)(e,k,[x,8,"mat2x3"]),(0,r.default)(e,z,[x,8,"mat2x4"]),(0,r.default)(e,O,[x,12,"mat3"]),(0,r.default)(e,B,[x,12,"mat3x2"]),(0,r.default)(e,E,[x,12,"mat3x4"]),(0,r.default)(e,V,[x,16,"mat4"]),(0,r.default)(e,F,[x,16,"mat4x2"]),(0,r.default)(e,H,[x,16,"mat4x3"]),e);function J(e){switch(e){case d:return d;case f:case i:case o:return f;case v:case m:case p:return v;default:return(0,a.assert)(!1),0}}function K(e){var t=e.drawMode,r=e.vertexCount;switch(t){case d:case o:return r;case f:return r/2;case i:return r-1;case v:return r/3;case m:case p:return r-2;default:return(0,a.assert)(!1),0}}function N(e){var t=e.drawMode,r=K({drawMode:t,vertexCount:e.vertexCount});switch(J(t)){case d:return r;case f:return 2*r;case v:return 3*r;default:return(0,a.assert)(!1),0}}function Q(e){var r=I[e];if(!r)return null;var a=(0,t.default)(r,2);return{type:a[0],components:a[1]}}function R(e,r){switch(e){case s:case c:case n:case l:e=x}for(var a in I){var u=(0,t.default)(I[a],3),d=u[0],f=u[1],o=u[2];if(d===e&&f===r)return{glType:a,name:o}}return null}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"9iDM","../utils":"CgZv"}],"MOlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),r=a(require("./accessor")),i=require("../webgl-utils"),n=require("../webgl-utils/attribute-utils");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function a(t){(0,e.default)(this,a),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return(0,t.default)(a,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,r=t.getProgramParameter(e.handle,35721),i=0;i<r;i++){var n=t.getActiveAttrib(e.handle,i),a=n.name,o=n.type,s=n.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if((0,i.isWebGL2)(t)){for(var r=t.getProgramParameter(e.handle,35971),n=0;n<r;n++){var a=t.getTransformFeedbackVarying(e.handle,n),o=a.name,s=a.type,u=a.size;this._addVarying(n,o,s,u)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function(e,t,i,a){var o=(0,n.decomposeCompositeGLType)(i),s={type:o.type,size:a*o.components};this._inferProperties(e,t,s);var u={location:e,name:t,accessor:new r.default(s)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}},{key:"_inferProperties",value:function(e,t,r){/instance/i.test(t)&&(r.divisor=1)}},{key:"_addVarying",value:function(e,t,i,a){var o=(0,n.decomposeCompositeGLType)(i),s=o.type,u=o.components,l={location:e,name:t,accessor:new r.default({type:s,size:a*u})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}]),a}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./accessor":"OEzr","../webgl-utils":"GZNE","../webgl-utils/attribute-utils":"r3DH"}],"mrLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("@babel/runtime/helpers/esm/classCallCheck")),t=y(require("@babel/runtime/helpers/esm/createClass")),r=y(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=y(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=y(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=y(require("@babel/runtime/helpers/esm/get")),s=y(require("@babel/runtime/helpers/esm/inherits")),o=y(require("./resource")),u=y(require("./texture")),l=y(require("./framebuffer")),f=require("./uniforms"),d=require("./shader"),h=y(require("./program-configuration")),c=require("../context"),m=require("../webgl-utils"),g=require("../webgl-utils/attribute-utils"),v=require("../utils");function y(e){return e&&e.__esModule?e:{default:e}}var b=4,x=35981,k=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],_=function(o){function y(t){var a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,y),(a=(0,r.default)(this,(0,n.default)(y).call(this,t,s))).stubRemovedMethods("Program","v6.0",k),a._isCached=!1,a.initialize(s),Object.seal((0,i.default)(a)),a._setId(s.id),a}return(0,s.default)(y,o),(0,t.default)(y,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,r=e.fs,i=e.varyings,n=e.bufferMode,a=void 0===n?x:n;return this.vs="string"==typeof t?new d.VertexShader(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof r?new d.FragmentShader(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,(0,v.assert)(this.vs instanceof d.VertexShader),(0,v.assert)(this.fs instanceof d.FragmentShader),this.uniforms={},i&&((0,m.assertWebGL2Context)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new h.default(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:(0,a.default)((0,n.default)(y.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,r=e.logPriority,i=e.drawMode,n=void 0===i?4:i,a=e.vertexCount,s=e.offset,o=void 0===s?0:s,u=e.start,l=e.end,f=e.isIndexed,d=void 0!==f&&f,h=e.indexType,y=void 0===h?5123:h,b=e.isInstanced,x=void 0!==b&&b,k=e.instanceCount,_=void 0===k?0:k,p=e.vertexArray,P=void 0===p?null:p,U=e.transformFeedback,w=e.framebuffer,I=e.parameters,S=void 0===I?{}:I,q=e.uniforms,A=e.samplers;if((q||A)&&(v.log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(q||{})),void 0!==r){var C=w?w.id:"default",L="mode=".concat((0,m.getKey)(this.gl,n)," verts=").concat(a," ")+"instances=".concat(_," indexType=").concat((0,m.getKey)(this.gl,y)," ")+"isInstanced=".concat(x," isIndexed=").concat(d," ")+"Framebuffer=".concat(C);v.log.log(r,L)()}return(0,v.assert)(P),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(P.bindForDraw(a,_,function(){if(void 0!==w&&(S=Object.assign({},S,{framebuffer:w})),U){var e=(0,g.getPrimitiveDrawMode)(n);U.begin(e)}t._bindTextures(),(0,c.withParameters)(t.gl,S,function(){d&&x?t.gl.drawElementsInstanced(n,a,y,o,_):d&&(0,m.isWebGL2)(t.gl)&&!isNaN(u)&&!isNaN(l)?t.gl.drawRangeElements(n,u,l,a,y,o):d?t.gl.drawElements(n,a,y,o):x?t.gl.drawArraysInstanced(n,o,a,_):t.gl.drawArrays(n,o,a)}),U&&U.end()}),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=!1,i={};for(var n in e)(0,f.areUniformsEqual)(this.uniforms[n],e[n])||(r=!0,i[n]=e[n],this.uniforms[n]=(0,f.getUniformCopy)(e[n]));return r&&(t(),(0,f.checkUniformValues)(i,this.id,this._uniformSetters),this._setUniforms(i)),this}},{key:"reset",value:function(){}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this.uniforms){var r=this._uniformSetters[t];if(r&&void 0!==r.textureIndex){var i=this.uniforms[t];if(i instanceof l.default)i=i.texture;if(i instanceof u.default)e=e&&i.loaded}}return e}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var r=this.uniforms[e];if(r instanceof l.default&&(r=r.texture),r instanceof u.default)r.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var r=e[t],i=this._uniformSetters[t];if(i)if(r instanceof l.default&&(r=r.texture),r instanceof u.default){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var n=r,a=i.textureIndex;n.bind(a),i(a)}else i(r)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),r={},i=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var u=s.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new d.VertexShader({handle:u});break;case 35632:r.fs=new d.FragmentShader({handle:u})}}}catch(l){n=!0,a=l}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=(0,v.uid)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),v.log.time(b,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),v.log.timeEnd(b,"linkProgram for ".concat(this._getName()))(),e.debug||v.log.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),i=(0,f.parseUniformName)(r.name),n=i.name,a=i.isArray,s=e.getUniformLocation(this.handle,n);if(this._uniformSetters[n]=(0,f.getUniformSetter)(e,s,r,a),r.size>1)for(var o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(n,"[").concat(o,"]")),this._uniformSetters["".concat(n,"[").concat(o,"]")]=(0,f.getUniformSetter)(e,s,r,a)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),y}(o.default);exports.default=_;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./texture":"GqKp","./framebuffer":"1QRT","./uniforms":"15DC","./shader":"Mfxg","./program-configuration":"MOlP","../context":"/Aqp","../webgl-utils":"GZNE","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"utYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),n=h(require("@babel/runtime/helpers/esm/createClass")),u=h(require("@babel/runtime/helpers/esm/inherits")),l=h(require("./resource")),s=require("../features"),a=require("../webgl-utils"),o=require("../utils");function h(e){return e&&e.__esModule?e:{default:e}}var g=34918,d=34919,c=35007,f=36795,m=35976,v=35887,y=36202,b=function(l){function h(n){var u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,h),(u=(0,t.default)(this,(0,r.default)(h).call(this,n,l))).target=null,u._queryPending=!1,u._pollingPromise=null,Object.seal((0,i.default)(u)),u}return(0,u.default)(h,l),(0,n.default)(h,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,a.isWebGL2)(e),i=(0,s.hasFeatures)(e,s.FEATURES.TIMER_QUERY),n=r||i,u=!0,l=!1,h=void 0;try{for(var g,d=t[Symbol.iterator]();!(u=(g=d.next()).done);u=!0){switch(g.value){case"queries":n=n&&r;break;case"timers":n=n&&i;break;default:(0,o.assert)(!1)}}}catch(c){l=!0,h=c}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}return n}}]),(0,n.default)(h,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(c)}},{key:"beginOcclusionQuery",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?y:v)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(m)}},{key:"begin",value:function(e){return this._queryPending?this:(this.target=e,this.gl.beginQuery(this.target,this.handle),this)}},{key:"end",value:function(){return this._queryPending?this:(this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,d);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(f)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,g)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var r=0;return this._pollingPromise=new Promise(function(i,n){requestAnimationFrame(function u(){e.isResultAvailable()?(i(e.getResult()),e._pollingPromise=null):r++>t?(n("Timed out"),e._pollingPromise=null):requestAnimationFrame(u)})}),this._pollingPromise}},{key:"_createHandle",value:function(){return h.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),h}(l.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","../features":"QnT2","../webgl-utils":"GZNE","../utils":"CgZv"}],"us29":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),i=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=l(require("@babel/runtime/helpers/esm/assertThisInitialized")),r=l(require("@babel/runtime/helpers/esm/createClass")),u=l(require("@babel/runtime/helpers/esm/inherits")),s=l(require("./resource")),f=l(require("./buffer")),a=require("../webgl-utils"),o=require("../utils");function l(e){return e&&e.__esModule?e:{default:e}}var b=function(s){function l(r){var u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,l),(0,a.assertWebGL2Context)(r),(u=(0,i.default)(this,(0,t.default)(l).call(this,r,s))).initialize(s),u.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,n.default)(u)),u}return(0,u.default)(l,s),(0,r.default)(l,null,[{key:"isSupported",value:function(e){return(0,a.isWebGL2)(e)}}]),(0,r.default)(l,[{key:"initialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,o.isObjectEmpty)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(i),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var t in i)e.setBuffer(t,i[t])}),this}},{key:"setBuffer",value:function(e,i){var t=this,n=this._getVaryingIndex(e),r=this._getBufferParams(i),u=r.buffer,s=r.byteSize,f=r.byteOffset;return n<0?(this.unused[e]=u,o.log.warn(function(){return"".concat(t.id," unused varying buffer ").concat(e)})(),this):(this.buffers[n]=i,this.bindOnUse||this._bindBuffer(n,u,f,s),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var i,t,n;return e instanceof f.default==!1?(n=e.buffer,t=e.byteSize,i=e.byteOffset):n=e,void 0===i&&void 0===t||(i=i||0,t=t||n.byteLength-i),{buffer:n,byteOffset:i,byteSize:t}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var i=Number(e);return Number.isFinite(i)?i:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var i=this._getBufferParams(this.buffers[e]),t=i.buffer,n=i.byteSize,r=i.byteOffset;this._bindBuffer(e,t,r,n)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,r=i&&i.handle;return r&&void 0!==n?this.gl.bindBufferRange(35982,e,r,t,n):this.gl.bindBufferBase(35982,e,r),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),l}(s.default);exports.default=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./buffer":"d/4i","../webgl-utils":"GZNE","../utils":"CgZv"}],"vUP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScratchArrayBuffer=t,exports.getScratchArray=e,exports.fillArray=n;var r=null;function t(t){return(!r||r.byteLength<t)&&(r=new ArrayBuffer(t)),r}function e(r,e){return new r(t(r.BYTES_PER_ELEMENT*e),0,e)}function n(r){for(var t=r.target,e=r.source,n=r.start,o=void 0===n?0:n,u=r.count,c=void 0===u?1:u,i=e.length,a=c*i,f=0,s=o;f<i;f++)t[s++]=e[f];for(;f<a;)f<a-f?(t.copyWithin(o+f,o,o+f),f*=2):(t.copyWithin(o+f,o,o+a-f),f=a);return t}
},{}],"R2V4":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/classCallCheck")),t=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=c(require("@babel/runtime/helpers/esm/assertThisInitialized")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=c(require("@babel/runtime/helpers/esm/get")),s=c(require("@babel/runtime/helpers/esm/createClass")),n=c(require("@babel/runtime/helpers/esm/inherits")),u=c(require("./resource")),l=c(require("./buffer")),f=require("../webgl-utils"),o=require("../utils/array-utils-flat"),b=require("../utils"),h=require("probe.gl");function c(e){return e&&e.__esModule?e:{default:e}}var v="OES_vertex_array_object",A="elements must be GL.ELEMENT_ARRAY_BUFFER",d=function(u){function c(i){var s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,c);var u=n.id||n.program&&n.program.id;return(s=(0,t.default)(this,(0,a.default)(c).call(this,i,Object.assign({},n,{id:u})))).hasVertexArrays=c.isSupported(i),s.buffer=null,s.bufferValue=null,s.initialize(n),Object.seal((0,r.default)(s)),s}return(0,n.default)(c,u),(0,s.default)(c,null,[{key:"isSupported",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?(0,f.isWebGL2)(e)||"Chrome"===(0,h.getBrowser)():(0,f.isWebGL2)(e)||e.getExtension(v)}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new c(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return c.MAX_ATTRIBUTES=c.MAX_ATTRIBUTES||e.getParameter(34921),c.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,t,r){switch(r.constructor){case Float32Array:c._setConstantFloatArray(e,t,r);break;case Int32Array:c._setConstantIntArray(e,t,r);break;case Uint32Array:c._setConstantUintArray(e,t,r);break;default:(0,b.assert)(!1)}}}]),(0,s.default)(c,[{key:"delete",value:function(){(0,i.default)((0,a.default)(c.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,b.assert)(!t||34963===t.target,A),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var a=r.size,i=r.type,s=r.stride,n=r.offset,u=r.normalized,l=r.integer,o=r.divisor,h=this.gl;return e=Number(e),this.bind(function(){h.bindBuffer(34962,t.handle),l?((0,b.assert)((0,f.isWebGL2)(h)),h.vertexAttribIPointer(e,a,i,s,n)):h.vertexAttribPointer(e,a,i,u,s,n),h.enableVertexAttribArray(e),h.vertexAttribDivisor(e,o||0)}),this}},{key:"enable",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===e&&!c.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return r?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function(e,t,r){var a=this._normalizeConstantArrayValue(t,r),i=a.byteLength*e,s=a.length*e,n=!this.buffer;if(this.buffer=this.buffer||new l.default(this.gl,i),n=(n=n||this.buffer.reallocate(i))||!this._compareConstantArrayValues(a,this.bufferValue)){var u=(0,o.getScratchArray)(t.constructor,s);(0,o.fillArray)({target:u,source:a,start:0,count:s}),this.buffer.subData(u),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=c.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var r=this,a=t.location;return(0,b.assert)(Number.isFinite(a)),this.bind(function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(a,e);default:return r.gl.getVertexAttrib(a,e)}})}},{key:"MAX_ATTRIBUTES",get:function(){return c.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:(0,b.assert)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,r){switch((0,b.assert)((0,f.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:(0,b.assert)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,r){switch((0,b.assert)((0,f.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:(0,b.assert)(!1)}}}]),c}(u.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./resource":"DwD3","./buffer":"d/4i","../webgl-utils":"GZNE","../utils/array-utils-flat":"vUP6","../utils":"CgZv","probe.gl":"T+YN"}],"uoYk":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),r=a(require("./accessor")),s=a(require("./buffer")),i=a(require("./vertex-array-object")),n=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var u="VertexArray: attributes must be Buffers or constants (i.e. typed array)",o=/^(.+)__LOCATION_([0-9]+)$/,l=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],f=function(){function a(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,a);var s=r.id||r.program&&r.program.id;this.id=s,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=i.default.isSupported(t)?new i.default(t):i.default.getDefaultArray(t),(0,n.stubRemovedMethods)(this,"VertexArray","v6.0",l),this.initialize(r),Object.seal(this)}return(0,t.default)(a,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return this.vertexArrayObject.bind(function(){for(var r in e){var s=e[r];t._setAttribute(r,s)}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,r);var s=this._resolveLocationAndAccessor(e,t,t.accessor,r),i=s.location,n=s.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,n)),this}},{key:"setConstant",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r)),i=s.location,n=s.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,n),this.values[i]=t,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new s.default(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof s.default&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof s.default&&e.setBuffer(t,r)}}),this}},{key:"bindForDraw",value:function(e,t,r){var s,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),s=r(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),s}},{key:"_resolveLocationAndAccessor",value:function(e,t,s,i){var a=this,u=this._getAttributeIndex(e),o=u.location,l=u.name;if(!Number.isFinite(o)||o<0)return this.unused[e]=t,n.log.once(3,function(){return"unused value ".concat(e," in ").concat(a.id)})(),this;var f=this._getAttributeInfo(l||o);if(!f)return{location:-1,accessor:null};var c=r.default.resolve(f.accessor,s,i),h=c.size,v=c.type;return(0,n.assert)(Number.isFinite(h)&&Number.isFinite(v)),{location:o,accessor:c}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var r=o.exec(e),s=r?r[1]:e,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(s)+i,name:s}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof s.default)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof s.default){var r=t[0],i=t[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var n=t;this.setConstant(e,n)}else{if(!(t.buffer instanceof s.default))throw new Error(u);var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var r=Math.max(0|e,0|t),s=this.values[0];ArrayBuffer.isView(s)&&this._setConstantAttributeZero(s,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)s=this.values[i],ArrayBuffer.isView(s)&&this._setConstantAttribute(i,s)}},{key:"_setConstantAttributeZero",value:function(e,t){if(i.default.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){i.default.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var r=this.values[t],i=this.accessors[t];if(r){var n=i.divisor>0;if(e.isInstanced=e.isInstanced||n,r instanceof s.default){var a=r;if(n){var u=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,u)}else{var o=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,o)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.log.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),a}();exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./accessor":"OEzr","./buffer":"d/4i","./vertex-array-object":"R2V4","../utils":"CgZv"}],"Z+kr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),s=require("../webgl-utils/attribute-utils"),i=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var u="UniformBufferLayout illegal argument",n=5126,l=5124,f=5125,o=function(){function a(r){var s;for(var i in(0,t.default)(this,a),this.layout={},this.size=0,r)this._addUniform(i,r[i]);this.size+=(4-this.size%4)%4;var u=new Float32Array(this.size);this.typedArray=(s={},(0,e.default)(s,n,u),(0,e.default)(s,l,new Int32Array(u.buffer)),(0,e.default)(s,f,new Uint32Array(u.buffer)),s)}return(0,r.default)(a,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[n]}},{key:"getSubData",value:function(e){var t,r;if(void 0===e)t=this.data,r=0;else{var s=this.offsets[e],i=s+this.sizes[e];t=this.data.subarray(s,i),r=4*s}return{data:t,offset:r}}},{key:"setUniforms",value:function(e){for(var t in e)this._setValue(t,e[t]);return this}},{key:"_setValue",value:function(e,t){var r=this.layout[e];(0,i.assert)(r,"UniformLayoutStd140 illegal argument");var s=this.typedArray[r.type];1===r.size?s[r.offset]=t:s.set(t,r.offset)}},{key:"_addUniform",value:function(e,t){var r=(0,s.decomposeCompositeGLType)(t);(0,i.assert)(r,u);var a=r.type,n=r.components;this.size=this._alignTo(this.size,n);var l=this.size;this.size+=n,this.layout[e]={type:a,size:n,offset:l}}},{key:"_alignTo",value:function(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}}]),a}();exports.default=o;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"VDWA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForUniforms=t;var e=n(require("@babel/runtime/helpers/esm/defineProperty")),r=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.header,u=void 0===t?"Uniforms":t,o=n.program,i=n.uniforms,l=n.undefinedOnly,f=void 0!==l&&l;(0,r.assert)(o);var d=o._uniformSetters,m={},v=Object.keys(d).sort(),y=0,s=!0,c=!1,h=void 0;try{for(var b,O=v[Symbol.iterator]();!(s=(b=O.next()).done);s=!0){var p=b.value;p.match(".*_.*")||p.match(".*Matrix")||a({table:m,header:u,uniforms:i,uniformName:p,undefinedOnly:f})&&y++}}catch(A){c=!0,h=A}finally{try{s||null==O.return||O.return()}finally{if(c)throw h}}var x=!0,N=!1,T=void 0;try{for(var _,S=v[Symbol.iterator]();!(x=(_=S.next()).done);x=!0){var g=_.value;g.match(".*Matrix")&&a({table:m,header:u,uniforms:i,uniformName:g,undefinedOnly:f})&&y++}}catch(A){N=!0,T=A}finally{try{x||null==S.return||S.return()}finally{if(N)throw T}}var D=!0,M=!1,U=void 0;try{for(var w,P=v[Symbol.iterator]();!(D=(w=P.next()).done);D=!0){var V=w.value;m[V]||a({table:m,header:u,uniforms:i,uniformName:V,undefinedOnly:f})&&y++}}catch(A){M=!0,U=A}finally{try{D||null==P.return||P.return()}finally{if(M)throw U}}var j=0,q={};if(!f)for(var E in i){var k=i[E];m[E]||(j++,q[E]=(0,e.default)({Type:"NOT USED: ".concat(k)},u,(0,r.formatValue)(k)))}return{table:m,count:y,unusedTable:q,unusedCount:j}}function a(n){var t,a=n.table,o=n.header,i=n.uniforms,l=n.uniformName,f=n.undefinedOnly,d=i[l],m=u(d);return(!f||!m)&&(a[l]=(t={},(0,e.default)(t,o,m?(0,r.formatValue)(d):"N/A"),(0,e.default)(t,"Uniform Type",m?d:"NOT PROVIDED"),t),!0)}function u(e){return null!=e}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../utils":"CgZv"}],"TDxR":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForVertexArray=o;var e=c(require("@babel/runtime/helpers/esm/defineProperty")),t=c(require("../classes/buffer")),r=require("../webgl-utils"),a=require("../webgl-utils/attribute-utils"),n=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,a=void 0===r?"Attributes":r;if(!t.configuration)return{};var n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=i(t,t.elements,null,a));var c=t.values;for(var o in c){var s=t._getAttributeInfo(o);if(s){var l="".concat(o,": ").concat(s.name),f=t.accessors[s.location];f&&(l="".concat(o,": ").concat(u(s.name,f))),n[l]=i(t,c[o],f,a)}}return n}function i(a,c,o,i){var u,s,l,f,d=a.gl,g="NOT PROVIDED",v="N/A",b="N/A",m="N/A";if(o&&(g=o.type,v=o.size,s=-1!==(g=String(g).replace("Array","")).indexOf("nt")),c instanceof t.default){var y,p,A=c,E=A.getDebugData(),_=E.data;if(l=E.modified?"*":"",f=_,b=(m=A.byteLength)/_.BYTES_PER_ELEMENT/v,o){var x=o.divisor>0;p="".concat(x?"I ":"P "," ").concat(b," (x").concat(v,"=").concat(m," bytes ").concat((0,r.getKey)(d,g),")")}else s=!0,p="".concat(m," bytes");return y={},(0,e.default)(y,i,"".concat(l).concat((0,n.formatValue)(f,{size:v,isInteger:s}))),(0,e.default)(y,"Format ",p),y}return f=c,v=c.length,s=-1!==(g=String(c.constructor.name).replace("Array","")).indexOf("nt"),u={},(0,e.default)(u,i,"".concat((0,n.formatValue)(f,{size:v,isInteger:s})," (constant)")),(0,e.default)(u,"Format ","".concat(v,"x").concat(g," (constant)")),u}function u(e,t){var r=t.type,n=t.size,c=(0,a.getCompositeGLType)(r,n);return c?"".concat(e," (").concat(c.name,")"):e}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../classes/buffer":"d/4i","../webgl-utils":"GZNE","../webgl-utils/attribute-utils":"r3DH","../utils":"CgZv"}],"9jWh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForProgramConfiguration=a;var r=t(require("@babel/runtime/helpers/esm/defineProperty")),e=require("../webgl-utils/attribute-utils");function t(r){return r&&r.__esModule?r:{default:r}}function a(e){var t={},a="Accessors for ".concat(e.id),o=!0,i=!1,u=void 0;try{for(var l,c=e.attributeInfos[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;if(s){var f=n(s);t["in ".concat(f)]=(0,r.default)({},a,JSON.stringify(s.accessor))}}}catch(h){i=!0,u=h}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}var y=!0,v=!1,d=void 0;try{for(var b,g=e.varyingInfos[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var m=b.value;if(m){var p=n(m);t["out ".concat(p)]=(0,r.default)({},a,JSON.stringify(m.accessor))}}}catch(h){v=!0,d=h}finally{try{y||null==g.return||g.return()}finally{if(v)throw d}}return t}function n(r){var t=r.accessor,a=t.type,n=t.size,o=(0,e.getCompositeGLType)(a,n);return o?"".concat(o.name," ").concat(r.name):r.name}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../webgl-utils/attribute-utils":"r3DH"}],"50Kd":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return r.lumaStats}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return t.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return t.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return t.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return t.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return t.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return t.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return t.getModifiedParameters}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.Image}}),Object.defineProperty(exports,"WebGLRenderingContext",{enumerable:!0,get:function(){return n.WebGLRenderingContext}}),Object.defineProperty(exports,"WebGLProgram",{enumerable:!0,get:function(){return n.WebGLProgram}}),Object.defineProperty(exports,"WebGLShader",{enumerable:!0,get:function(){return n.WebGLShader}}),Object.defineProperty(exports,"WebGLBuffer",{enumerable:!0,get:function(){return n.WebGLBuffer}}),Object.defineProperty(exports,"WebGLFramebuffer",{enumerable:!0,get:function(){return n.WebGLFramebuffer}}),Object.defineProperty(exports,"WebGLRenderbuffer",{enumerable:!0,get:function(){return n.WebGLRenderbuffer}}),Object.defineProperty(exports,"WebGLTexture",{enumerable:!0,get:function(){return n.WebGLTexture}}),Object.defineProperty(exports,"WebGLUniformLocation",{enumerable:!0,get:function(){return n.WebGLUniformLocation}}),Object.defineProperty(exports,"WebGLActiveInfo",{enumerable:!0,get:function(){return n.WebGLActiveInfo}}),Object.defineProperty(exports,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return n.WebGLShaderPrecisionFormat}}),Object.defineProperty(exports,"WebGL2RenderingContext",{enumerable:!0,get:function(){return n.WebGL2RenderingContext}}),Object.defineProperty(exports,"webGLTypesAvailable",{enumerable:!0,get:function(){return n.webGLTypesAvailable}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return u.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return u.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return u.resizeGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return u.instrumentGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return u.setGLContextDefaults}}),Object.defineProperty(exports,"getCanvas",{enumerable:!0,get:function(){return o.getCanvas}}),Object.defineProperty(exports,"getPageLoadPromise",{enumerable:!0,get:function(){return o.getPageLoadPromise}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return i.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return i.cancelAnimationFrame}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return a.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return a.isWebGL2}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return f.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return s.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return s.getKey}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return b.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return b.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return b.getContextLimits}}),Object.defineProperty(exports,"getContextDebugInfo",{enumerable:!0,get:function(){return c.getContextDebugInfo}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return l.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return p.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return p.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return p.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Accessor",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return x.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return x.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return x.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return q.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return q.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return G.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return G.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return G.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return G.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return G.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return G.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return S.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return S.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return S.loadImage}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return U.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return U.isObjectEmpty}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return B.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return B.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return B.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return B.document}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"parseUniformName",{enumerable:!0,get:function(){return V.parseUniformName}}),Object.defineProperty(exports,"getUniformSetter",{enumerable:!0,get:function(){return V.getUniformSetter}}),Object.defineProperty(exports,"getDebugTableForUniforms",{enumerable:!0,get:function(){return E.getDebugTableForUniforms}}),Object.defineProperty(exports,"getDebugTableForVertexArray",{enumerable:!0,get:function(){return k.getDebugTableForVertexArray}}),Object.defineProperty(exports,"getDebugTableForProgramConfiguration",{enumerable:!0,get:function(){return K.getDebugTableForProgramConfiguration}});var r=require("./init"),t=require("@luma.gl/webgl-state-tracker"),n=require("./webgl-utils/webgl-types"),u=require("./context/context"),o=require("./context/create-canvas"),i=require("./webgl-utils/request-animation-frame"),a=require("./webgl-utils/webgl-checks"),f=require("./webgl-utils/texture-utils"),s=require("./webgl-utils/constants-to-keys"),b=require("./features/limits"),c=require("./debug/get-context-debug-info"),l=require("./features/webgl-features-table"),p=require("./features/features"),g=M(require("./features/check-glsl-extension")),d=M(require("./classes/accessor")),m=M(require("./classes/buffer")),x=require("./classes/shader"),P=M(require("./classes/program")),y=M(require("./classes/framebuffer")),j=M(require("./classes/renderbuffer")),O=M(require("./classes/texture-2d")),L=M(require("./classes/texture-cube")),q=require("./classes/clear"),G=require("./classes/copy-and-blit"),F=M(require("./classes/query")),T=M(require("./classes/texture-3d")),C=M(require("./classes/transform-feedback")),W=M(require("./classes/vertex-array-object")),h=M(require("./classes/vertex-array")),w=M(require("./classes/uniform-buffer-layout")),S=require("./utils/load-file"),A=M(require("./glsl-utils/get-shader-name")),v=M(require("./glsl-utils/get-shader-version")),D=M(require("./utils/log")),I=M(require("./utils/assert")),U=require("./utils/utils"),B=require("./utils/globals"),R=M(require("./utils/is-browser")),V=require("./classes/uniforms"),E=require("./debug/debug-uniforms"),k=require("./debug/debug-vertex-array"),K=require("./debug/debug-program-configuration");function M(e){return e&&e.__esModule?e:{default:e}}
},{"./init":"HGnm","@luma.gl/webgl-state-tracker":"1gQ5","./webgl-utils/webgl-types":"51kF","./context/context":"ocf3","./context/create-canvas":"xnoV","./webgl-utils/request-animation-frame":"AGkC","./webgl-utils/webgl-checks":"SdWy","./webgl-utils/texture-utils":"oR6C","./webgl-utils/constants-to-keys":"UyRF","./features/limits":"5J/+","./debug/get-context-debug-info":"L13w","./features/webgl-features-table":"UM+a","./features/features":"qa8S","./features/check-glsl-extension":"7Cuw","./classes/accessor":"OEzr","./classes/buffer":"d/4i","./classes/shader":"Mfxg","./classes/program":"mrLl","./classes/framebuffer":"1QRT","./classes/renderbuffer":"baET","./classes/texture-2d":"YE27","./classes/texture-cube":"eOjF","./classes/clear":"ztYM","./classes/copy-and-blit":"DmZq","./classes/query":"utYa","./classes/texture-3d":"mm+M","./classes/transform-feedback":"us29","./classes/vertex-array-object":"R2V4","./classes/vertex-array":"uoYk","./classes/uniform-buffer-layout":"Z+kr","./utils/load-file":"QQ37","./glsl-utils/get-shader-name":"WHl0","./glsl-utils/get-shader-version":"ZDha","./utils/log":"Y0qP","./utils/assert":"KdlA","./utils/utils":"OhKi","./utils/globals":"gHeQ","./utils/is-browser":"kDKo","./classes/uniforms":"15DC","./debug/debug-uniforms":"VDWA","./debug/debug-vertex-array":"TDxR","./debug/debug-program-configuration":"9jWh"}],"a2N7":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return t.assert}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return t.log}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return t.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return t.isObjectEmpty}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}});var t=require("@luma.gl/webgl");
},{"@luma.gl/webgl":"50Kd"}],"a/Y4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DRAW_MODE=void 0;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),i=s(require("@babel/runtime/helpers/esm/createClass")),r=require("../utils");function s(e){return e&&e.__esModule?e:{default:e}}var u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};exports.DRAW_MODE=u;var n=function(){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,s);var i=e.id,n=void 0===i?(0,r.uid)("geometry"):i,a=e.drawMode,d=void 0===a?u.TRIANGLES:a,o=e.attributes,l=void 0===o?{}:o,c=e.indices,h=void 0===c?null:c,v=e.vertexCount,f=void 0===v?null:v;this.id=n,this.drawMode=0|d,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=f||this._calculateVertexCount(this.attributes,this.indices)}return(0,i.default)(s,null,[{key:"DRAW_MODE",get:function(){return u}}]),(0,i.default)(s,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?(0,e.default)({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var i in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var s=e[i];s=ArrayBuffer.isView(s)?{value:s}:s,(0,r.assert)(ArrayBuffer.isView(s.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),"POSITION"!==i&&"positions"!==i||s.size||(s.size=3),"indices"===i?((0,r.assert)(!this.indices),this.indices=s):this.attributes[i]=s}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var i=1/0;for(var s in e){var u=e[s],n=u.value,a=u.size;!u.constant&&n&&a>=1&&(i=Math.min(i,n.length/a))}return(0,r.assert)(Number.isFinite(i)),i}},{key:"mode",get:function(){return this.drawMode}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils":"a2N7"}],"OqDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/classCallCheck"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function t(){(0,e.default)(this,t)};exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP"}],"+AMt":[function(require,module,exports) {
"use strict";function e(e){return-1!==Function.toString.call(e).indexOf("[native code]")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Hj0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=o(require("./getPrototypeOf")),t=o(require("./setPrototypeOf")),r=o(require("./isNativeFunction")),u=o(require("./construct"));function o(e){return e&&e.__esModule?e:{default:e}}function n(o){var i="function"==typeof Map?new Map:void 0;return exports.default=n=function(o){if(null===o||!(0,r.default)(o))return o;if("function"!=typeof o)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(o))return i.get(o);i.set(o,n)}function n(){return(0,u.default)(o,arguments,(0,e.default)(this).constructor)}return n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,t.default)(n,o)},n(o)}
},{"./getPrototypeOf":"cYjN","./setPrototypeOf":"N60M","./isNativeFunction":"+AMt","./construct":"b6xa"}],"5tOD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=r,exports.checkNumber=t,exports.formatValue=o,exports.formatAngle=i,exports.isArray=u,exports.clone=a,exports.radians=s,exports.degrees=f,exports.sin=p,exports.cos=h,exports.tan=l,exports.asin=x,exports.acos=g,exports.atan=d,exports.clamp=M,exports.lerp=v,exports.equals=b,exports.config=void 0;var n={};function r(r){"epsilon"in r&&(n.EPSILON=r.epsilon),"debug"in r&&(n.debug=r.debug)}function t(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function e(r){return Math.round(r/n.EPSILON)*n.EPSILON}function o(r){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,o=void 0===t?n.precision||4:t;return r=e(r),parseFloat(r.toPrecision(o))}function i(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.precision,i=void 0===o?n.precision||4:o,u=t.printDegrees,a=void 0===u?n.printAngles:u;return r=e(r=a?f(r):r),"".concat(parseFloat(r.toPrecision(i))).concat(a?"°":"")}function u(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&void 0!==n.length}function a(n){return n.clone?n.clone():new Array(n)}function c(n,r){if(u(n)){for(var t=a(n),e=0;e<t.length;++e)t[e]=r(t[e],e,t);return t}return r(n)}function s(n){return c(n,function(n){return n/180*Math.PI})}function f(n){return c(n,function(n){return 180*n/Math.PI})}function p(n){return c(n,function(n){return Math.sin(n)})}function h(n){return c(n,function(n){return Math.cos(n)})}function l(n){return c(n,function(n){return Math.tan(n)})}function x(n){return c(n,function(n){return Math.asin(n)})}function g(n){return c(n,function(n){return Math.acos(n)})}function d(n){return c(n,function(n){return Math.atan(n)})}function M(n,r,t){return c(n,function(n){return Math.max(r,Math.min(t,n))})}function v(n,r,t){return u(n)?n.map(function(n,e){return v(n,r[e],t)}):t*r+(1-t)*n}function b(r,t){if(u(r)&&u(t)){if(r===t)return!0;if(r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(!b(r[e],t[e]))return!1;return!0}return Math.abs(r-t)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))}exports.config=n,n.EPSILON=1e-12,n.debug=!0,n.precision=4,n.printTypes=!1,n.printDegrees=!1,n.printRowMajor=!0;
},{}],"WFwf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),e=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("@babel/runtime/helpers/esm/wrapNativeSuper")),a=require("./common");function s(t){return t&&t.__esModule?t:{default:t}}var h=function(u){function s(){return(0,t.default)(this,s),(0,r.default)(this,(0,i.default)(s).apply(this,arguments))}return(0,n.default)(s,u),(0,e.default)(s,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}},{key:"toString",value:function(){return this.formatString(a.config)}},{key:"formatString",value:function(t){for(var e="",r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+(0,a.formatValue)(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!(0,a.equals)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,r){void 0===r&&(r=e,e=t,t=this);for(var i=0;i<this.ELEMENTS;++i){var n=t[i];this[i]=n+r*(e[i]-n)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:"check",value:function(){if(a.config.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}}]),s}((0,u.default)(Array));exports.default=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/wrapNativeSuper":"Hj0I","./common":"5tOD"}],"AkAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("@babel/runtime/helpers/esm/inherits")),i=s(require("./math-array")),a=require("./common");function s(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t){if(!e)throw new Error(t)},c=function(i){function s(){return(0,e.default)(this,s),(0,r.default)(this,(0,n.default)(s).apply(this,arguments))}return(0,u.default)(s,i),(0,t.default)(s,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-e[r];t+=n*n}return(0,a.checkNumber)(t)}},{key:"dot",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return(0,a.checkNumber)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var u=t[n],i=0;i<this.ELEMENTS;++i)this[i]+=u[i];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var u=t[n],i=0;i<this.ELEMENTS;++i)this[i]-=u[i];return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var u=t[n],i=0;i<this.ELEMENTS;++i)this[i]*=u[i];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var u=t[n],i=0;i<this.ELEMENTS;++i)this[i]/=u[i];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=this[r]*t+e[r];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return h(e>=0&&e<this.ELEMENTS,"index is out of range"),(0,a.checkNumber)(this[e])}},{key:"setComponent",value:function(e,t){return h(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,a.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,a.checkNumber)(e)}}]),s}(i.default);exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./math-array":"WFwf","./common":"5tOD"}],"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=a,exports.toRadian=s,exports.equals=p,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var r=1e-6;exports.EPSILON=r;var t="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=t;var e=Math.random;function a(r){exports.ARRAY_TYPE=t=r}exports.RANDOM=e;var o=Math.PI/180;function s(r){return r*o}function p(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}
},{}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=v,exports.max=h,exports.round=M,exports.scale=l,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=q,exports.squaredLength=P,exports.negate=A,exports.inverse=O,exports.normalize=y,exports.dot=g,exports.cross=E,exports.lerp=R,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=j,exports.transformMat3=w,exports.transformMat4=D,exports.rotate=L,exports.angle=I,exports.zero=T,exports.str=N,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=t(require("./common.js"));function t(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};n.get||n.set?Object.defineProperty(t,e,n):t[e]=r[e]}return t.default=r,t}function e(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function n(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function u(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function c(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function p(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function f(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function v(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function h(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function M(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function l(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function d(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function m(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function q(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}function P(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function y(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function g(r,t){return r[0]*t[0]+r[1]*t[1]}function E(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function R(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function j(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function L(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],s=Math.sin(n),u=Math.cos(n);return r[0]=o*u-a*s+e[0],r[1]=o*s+a*u+e[1],r}function I(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],s=e*e+n*n;s>0&&(s=1/Math.sqrt(s));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var i=(e*o+n*a)*s*u;return i>1?0:i<-1?Math.PI:Math.acos(i)}function T(r){return r[0]=0,r[1]=0,r}function N(r){return"vec2("+r[0]+", "+r[1]+")"}function z(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],s=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))}var F=q;exports.len=F;var V=i;exports.sub=V;var k=c;exports.mul=k;var B=p;exports.div=B;var C=m;exports.dist=C;var G=b;exports.sqrDist=G;var H=P;exports.sqrLen=H;var J=function(){var r=e();return function(t,e,n,o,a,s){var u,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,u=n;u<i;u+=e)r[0]=t[u],r[1]=t[u+1],a(r,r,s),t[u]=r[0],t[u+1]=r[1];return t}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"LvGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("./lib/vector")),l=a(require("gl-matrix/vec2"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}var o=function(u){function a(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,e.default)(this,a),t=(0,r.default)(this,(0,i.default)(a).call(this,2)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,u),t}return(0,n.default)(a,u),(0,t.default)(a,[{key:"cross",value:function(e){return l.cross(this,this,e),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),a}(u.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/vector":"AkAM","gl-matrix/vec2":"XSo1"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.length=o,exports.fromValues=a,exports.copy=s,exports.set=u,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=x,exports.ceil=f,exports.floor=h,exports.min=M,exports.max=v,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=q,exports.inverse=A,exports.normalize=y,exports.dot=E,exports.cross=R,exports.lerp=g,exports.hermite=Y,exports.bezier=_,exports.random=j,exports.transformMat4=D,exports.transformMat3=w,exports.transformQuat=L,exports.rotateX=I,exports.rotateY=N,exports.rotateZ=T,exports.angle=z,exports.zero=S,exports.str=F,exports.exactEquals=Q,exports.equals=V,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function o(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function a(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function u(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function f(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function v(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(e*e+n*n+o*o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function y(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function g(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function Y(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,x=3*i*s,f=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*x+o[0]*f,t[1]=r[1]*c+e[1]*p+n[1]*x+o[1]*f,t[2]=r[2]*c+e[2]*p+n[2]*x+o[2]*f,t}function j(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function w(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function L(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,x=a*u-n*c,f=n*i-o*u,h=o*f-a*x,M=a*p-n*f,v=n*x-o*p,l=2*s;return p*=l,x*=l,f*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+x+M,t[2]=c+f+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r){var e=a(t[0],t[1],t[2]),n=a(r[0],r[1],r[2]);y(e,e),y(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function S(t){return t[0]=0,t[1]=0,t[2]=0,t}function F(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Q(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function V(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var X=c;exports.sub=X;var Z=p;exports.mul=Z;var k=x;exports.div=k;var B=b;exports.dist=B;var C=P;exports.sqrDist=C;var G=o;exports.len=G;var H=O;exports.sqrLen=H;var J=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"XRSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("./lib/vector")),o=require("./lib/common"),s=a(require("gl-matrix/vec3"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}var c=[0,0,0],h=function(u){function a(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,e.default)(this,a),t=(0,r.default)(this,(0,i.default)(a).call(this,3)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,u,o),t}return(0,n.default)(a,u),(0,t.default)(a,[{key:"angle",value:function(e){return s.angle(this,e)}},{key:"cross",value:function(e){return s.cross(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,r=e.origin,i=void 0===r?c:r;return s.rotateX(this,this,i,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,r=e.origin,i=void 0===r?c:r;return s.rotateY(this,this,i,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,r=e.origin,i=void 0===r?c:r;return s.rotateZ(this,this,i,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,o.checkNumber)(e)}}]),a}(u.default);exports.default=h;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/vector":"AkAM","./lib/common":"5tOD","gl-matrix/vec3":"AWBd"}],"Xumn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("./lib/vector")),s=require("./lib/common");function l(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function l(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,e.default)(this,l),t=(0,r.default)(this,(0,u.default)(l).call(this,4)),Array.isArray(i)&&1===arguments.length?t.copy(i):t.set(i,n,s,o),t}return(0,i.default)(l,n),(0,t.default)(l,[{key:"applyMatrix4",value:function(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,s.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,s.checkNumber)(e)}}]),l}(n.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/vector":"AkAM","./lib/common":"5tOD"}],"/S3e":[function(require,module,exports) {
"use strict";function e(e,t){return e.length===t&&e.every(Number.isFinite)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateVector=e;
},{}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=p,exports.transpose=i,exports.invert=M,exports.adjoint=c,exports.determinant=h,exports.multiply=f,exports.translate=x,exports.rotate=b,exports.scale=l,exports.fromTranslation=m,exports.fromRotation=v,exports.fromScaling=P,exports.fromMat2d=O,exports.fromQuat=d,exports.normalFromMat4=w,exports.projection=E,exports.str=y,exports.frob=S,exports.add=A,exports.subtract=j,exports.multiplyScalar=I,exports.multiplyScalarAndAdd=L,exports.exactEquals=N,exports.equals=R,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,a):{};n.get||n.set?Object.defineProperty(r,a,n):r[a]=t[a]}return r.default=t,r}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function e(r){var a=new t.ARRAY_TYPE(9);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,a,n,e,o,s,u,p,i){var M=new t.ARRAY_TYPE(9);return M[0]=r,M[1]=a,M[2]=n,M[3]=e,M[4]=o,M[5]=s,M[6]=u,M[7]=p,M[8]=i,M}function u(t,r,a,n,e,o,s,u,p,i){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t[8]=i,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,r){if(t===r){var a=r[1],n=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function M(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=M*s-u*i,h=-M*o+u*p,f=i*o-s*p,x=a*c+n*h+e*f;return x?(x=1/x,t[0]=c*x,t[1]=(-M*n+e*i)*x,t[2]=(u*n-e*s)*x,t[3]=h*x,t[4]=(M*a-e*p)*x,t[5]=(-u*a+e*o)*x,t[6]=f*x,t[7]=(-i*a+n*p)*x,t[8]=(s*a-n*o)*x,t):null}function c(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8];return t[0]=s*M-u*i,t[1]=e*i-n*M,t[2]=n*u-e*s,t[3]=u*p-o*M,t[4]=a*M-e*p,t[5]=e*o-a*u,t[6]=o*i-s*p,t[7]=n*p-a*i,t[8]=a*s-n*o,t}function h(t){var r=t[0],a=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],p=t[7],i=t[8];return r*(i*o-s*p)+a*(-i*e+s*u)+n*(p*e-o*u)}function f(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return t[0]=h*n+f*s+x*i,t[1]=h*e+f*u+x*M,t[2]=h*o+f*p+x*c,t[3]=b*n+l*s+m*i,t[4]=b*e+l*u+m*M,t[5]=b*o+l*p+m*c,t[6]=v*n+P*s+O*i,t[7]=v*e+P*u+O*M,t[8]=v*o+P*p+O*c,t}function x(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=p,t[6]=h*n+f*s+i,t[7]=h*e+f*u+M,t[8]=h*o+f*p+c,t}function b(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=Math.sin(a),f=Math.cos(a);return t[0]=f*n+h*s,t[1]=f*e+h*u,t[2]=f*o+h*p,t[3]=f*s-h*n,t[4]=f*u-h*e,t[5]=f*p-h*o,t[6]=i,t[7]=M,t[8]=c,t}function l(t,r,a){var n=a[0],e=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function m(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function v(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function P(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function d(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=a+a,u=n+n,p=e+e,i=a*s,M=n*s,c=n*u,h=e*s,f=e*u,x=e*p,b=o*s,l=o*u,m=o*p;return t[0]=1-c-x,t[3]=M-m,t[6]=h+l,t[1]=M+m,t[4]=1-i-x,t[7]=f-b,t[2]=h-l,t[5]=f+b,t[8]=1-i-c,t}function w(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=r[9],h=r[10],f=r[11],x=r[12],b=r[13],l=r[14],m=r[15],v=a*u-n*s,P=a*p-e*s,O=a*i-o*s,d=n*p-e*u,w=n*i-o*u,E=e*i-o*p,y=M*b-c*x,S=M*l-h*x,A=M*m-f*x,j=c*l-h*b,I=c*m-f*b,L=h*m-f*l,N=v*L-P*I+O*j+d*A-w*S+E*y;return N?(N=1/N,t[0]=(u*L-p*I+i*j)*N,t[1]=(p*A-s*L-i*S)*N,t[2]=(s*I-u*A+i*y)*N,t[3]=(e*I-n*L-o*j)*N,t[4]=(a*L-e*A+o*S)*N,t[5]=(n*A-a*I-o*y)*N,t[6]=(b*E-l*w+m*d)*N,t[7]=(l*O-x*E-m*P)*N,t[8]=(x*w-b*O+m*v)*N,t):null}function E(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function S(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function j(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function I(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function L(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function N(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function R(r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return Math.abs(n-h)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-f)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-x)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-l)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(p-m)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(i-v)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(M-P)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(c-O)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))}var Y=f;exports.mul=Y;var _=j;exports.sub=_;
},{"./common.js":"XJqx"}],"DMv2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateMatrix3=g,exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/toConsumableArray")),t=d(require("@babel/runtime/helpers/esm/classCallCheck")),r=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=d(require("@babel/runtime/helpers/esm/inherits")),u=d(require("./lib/math-array")),l=require("./lib/validators"),h=require("./lib/common"),a=d(require("./vector2")),o=d(require("./vector3")),c=m(require("gl-matrix/mat3")),v=m(require("gl-matrix/vec2")),f=m(require("gl-matrix/vec3"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var y=[1,0,0,0,1,0,0,0,1];function g(e){return 9===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])}var b=function(u){function m(){for(var e,r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(0,t.default)(this,m),e=(0,i.default)(this,(0,n.default)(m).call(this,9)),Array.isArray(s[0])&&1===arguments.length?e.copy(s[0]):e.identity(),e}return(0,s.default)(m,u),(0,r.default)(m,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=e,this[1]=i,this[2]=u,this[3]=t,this[4]=n,this[5]=l,this[6]=r,this[7]=s,this[8]=h,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this[4]=n,this[5]=s,this[6]=u,this[7]=l,this[8]=h,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,(0,e.default)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[3*e+t]:this[3*t+e]}},{key:"setElement",value:function(e,t,r){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[3*e+t]=(0,h.checkNumber)(r):this[3*t+e]=(0,h.checkNumber)(r),this}},{key:"determinant",value:function(){return c.determinant(this)}},{key:"identity",value:function(){for(var e=0;e<y.length;++e)this[e]=y[e];return this.check()}},{key:"fromQuaternion",value:function(e){return c.fromQuat(this,e),this.check()}},{key:"transpose",value:function(){return c.transpose(this,this),this.check()}},{key:"invert",value:function(){return c.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return c.multiply(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return c.multiply(this,this,e),this.check()}},{key:"rotate",value:function(e){return c.rotate(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?c.scale(this,this,e):c.scale(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return c.translate(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return t=t||new a.default,v.transformMat3(t,e,this),(0,l.validateVector)(t,2),t}},{key:"transformVector3",value:function(e,t){return t=t||new o.default,f.transformMat3(t,e,this),(0,l.validateVector)(t,3),t}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 9}}]),m}(u.default);exports.default=b;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/math-array":"WFwf","./lib/validators":"/S3e","./lib/common":"5tOD","./vector2":"LvGW","./vector3":"XRSK","gl-matrix/mat3":"vtQf","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=r,exports.clone=n,exports.copy=o,exports.fromValues=e,exports.set=s,exports.identity=h,exports.transpose=M,exports.invert=u,exports.adjoint=i,exports.determinant=p,exports.multiply=c,exports.translate=f,exports.scale=x,exports.rotate=b,exports.rotateX=l,exports.rotateY=v,exports.rotateZ=m,exports.fromTranslation=P,exports.fromScaling=O,exports.fromRotation=E,exports.fromXRotation=S,exports.fromYRotation=w,exports.fromZRotation=I,exports.fromRotationTranslation=L,exports.fromQuat2=N,exports.getTranslation=q,exports.getScaling=R,exports.getRotation=d,exports.fromRotationTranslationScale=g,exports.fromRotationTranslationScaleOrigin=A,exports.fromQuat=y,exports.frustum=Y,exports.perspective=T,exports.perspectiveFromFieldOfView=_,exports.ortho=j,exports.lookAt=D,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=X,exports.subtract=Z,exports.multiplyScalar=k,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=a(require("./common.js"));function a(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(a,r,n):a[r]=t[r]}return a.default=t,a}function r(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function n(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function e(a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=o,v[4]=e,v[5]=s,v[6]=h,v[7]=M,v[8]=u,v[9]=i,v[10]=p,v[11]=c,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function s(t,a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=s,t[6]=h,t[7]=M,t[8]=u,t[9]=i,t[10]=p,t[11]=c,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],o=a[3],e=a[6],s=a[7],h=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=e,t[11]=a[14],t[12]=o,t[13]=s,t[14]=h}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function u(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*h-n*s,P=r*M-o*s,O=r*u-e*s,E=n*M-o*h,S=n*u-e*h,w=o*u-e*M,I=i*b-p*x,L=i*l-c*x,N=i*v-f*x,q=p*l-c*b,R=p*v-f*b,d=c*v-f*l,g=m*d-P*R+O*q+E*N-S*L+w*I;return g?(g=1/g,t[0]=(h*d-M*R+u*q)*g,t[1]=(o*R-n*d-e*q)*g,t[2]=(b*w-l*S+v*E)*g,t[3]=(c*S-p*w-f*E)*g,t[4]=(M*N-s*d-u*L)*g,t[5]=(r*d-o*N+e*L)*g,t[6]=(l*O-x*w-v*P)*g,t[7]=(i*w-c*O+f*P)*g,t[8]=(s*R-h*N+u*I)*g,t[9]=(n*N-r*R-e*I)*g,t[10]=(x*S-b*O+v*m)*g,t[11]=(p*O-i*S-f*m)*g,t[12]=(h*L-s*q-M*I)*g,t[13]=(r*q-n*L+o*I)*g,t[14]=(b*P-x*E-l*m)*g,t[15]=(i*E-p*P+c*m)*g,t):null}function i(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=h*(c*v-f*l)-p*(M*v-u*l)+b*(M*f-u*c),t[1]=-(n*(c*v-f*l)-p*(o*v-e*l)+b*(o*f-e*c)),t[2]=n*(M*v-u*l)-h*(o*v-e*l)+b*(o*u-e*M),t[3]=-(n*(M*f-u*c)-h*(o*f-e*c)+p*(o*u-e*M)),t[4]=-(s*(c*v-f*l)-i*(M*v-u*l)+x*(M*f-u*c)),t[5]=r*(c*v-f*l)-i*(o*v-e*l)+x*(o*f-e*c),t[6]=-(r*(M*v-u*l)-s*(o*v-e*l)+x*(o*u-e*M)),t[7]=r*(M*f-u*c)-s*(o*f-e*c)+i*(o*u-e*M),t[8]=s*(p*v-f*b)-i*(h*v-u*b)+x*(h*f-u*p),t[9]=-(r*(p*v-f*b)-i*(n*v-e*b)+x*(n*f-e*p)),t[10]=r*(h*v-u*b)-s*(n*v-e*b)+x*(n*u-e*h),t[11]=-(r*(h*f-u*p)-s*(n*f-e*p)+i*(n*u-e*h)),t[12]=-(s*(p*l-c*b)-i*(h*l-M*b)+x*(h*c-M*p)),t[13]=r*(p*l-c*b)-i*(n*l-o*b)+x*(n*c-o*p),t[14]=-(r*(h*l-M*b)-s*(n*l-o*b)+x*(n*M-o*h)),t[15]=r*(h*c-M*p)-s*(n*c-o*p)+i*(n*M-o*h),t}function p(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],s=t[5],h=t[6],M=t[7],u=t[8],i=t[9],p=t[10],c=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*e)*(p*l-c*b)-(a*h-n*e)*(i*l-c*x)+(a*M-o*e)*(i*b-p*x)+(r*h-n*s)*(u*l-c*f)-(r*M-o*s)*(u*b-p*f)+(n*M-o*h)*(u*x-i*f)}function c(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*h+E*p+S*b,t[1]=P*o+O*M+E*c+S*l,t[2]=P*e+O*u+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*h+E*p+S*b,t[5]=P*o+O*M+E*c+S*l,t[6]=P*e+O*u+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*h+E*p+S*b,t[9]=P*o+O*M+E*c+S*l,t[10]=P*e+O*u+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*h+E*p+S*b,t[13]=P*o+O*M+E*c+S*l,t[14]=P*e+O*u+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function f(t,a,r){var n,o,e,s,h,M,u,i,p,c,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],t[0]=n,t[1]=o,t[2]=e,t[3]=s,t[4]=h,t[5]=M,t[6]=u,t[7]=i,t[8]=p,t[9]=c,t[10]=f,t[11]=x,t[12]=n*b+h*l+p*v+a[12],t[13]=o*b+M*l+c*v+a[13],t[14]=e*b+u*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function x(t,a,r){var n=r[0],o=r[1],e=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function b(a,r,n,o){var e,s,h,M,u,i,p,c,f,x,b,l,v,m,P,O,E,S,w,I,L,N,q,R,d=o[0],g=o[1],A=o[2],y=Math.sqrt(d*d+g*g+A*A);return y<t.EPSILON?null:(d*=y=1/y,g*=y,A*=y,e=Math.sin(n),h=1-(s=Math.cos(n)),M=r[0],u=r[1],i=r[2],p=r[3],c=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=d*d*h+s,E=g*d*h+A*e,S=A*d*h-g*e,w=d*g*h-A*e,I=g*g*h+s,L=A*g*h+d*e,N=d*A*h+g*e,q=g*A*h-d*e,R=A*A*h+s,a[0]=M*O+c*E+l*S,a[1]=u*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=p*O+b*E+P*S,a[4]=M*w+c*I+l*L,a[5]=u*w+f*I+v*L,a[6]=i*w+x*I+m*L,a[7]=p*w+b*I+P*L,a[8]=M*N+c*q+l*R,a[9]=u*N+f*q+v*R,a[10]=i*N+x*q+m*R,a[11]=p*N+b*q+P*R,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function l(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[4],s=a[5],h=a[6],M=a[7],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+u*n,t[5]=s*o+i*n,t[6]=h*o+p*n,t[7]=M*o+c*n,t[8]=u*o-e*n,t[9]=i*o-s*n,t[10]=p*o-h*n,t[11]=c*o-M*n,t}function v(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-u*n,t[1]=s*o-i*n,t[2]=h*o-p*n,t[3]=M*o-c*n,t[8]=e*n+u*o,t[9]=s*n+i*o,t[10]=h*n+p*o,t[11]=M*n+c*o,t}function m(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[4],i=a[5],p=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+u*n,t[1]=s*o+i*n,t[2]=h*o+p*n,t[3]=M*o+c*n,t[4]=u*o-e*n,t[5]=i*o-s*n,t[6]=p*o-h*n,t[7]=c*o-M*n,t}function P(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function O(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(a,r,n){var o,e,s,h=n[0],M=n[1],u=n[2],i=Math.sqrt(h*h+M*M+u*u);return i<t.EPSILON?null:(h*=i=1/i,M*=i,u*=i,o=Math.sin(r),s=1-(e=Math.cos(r)),a[0]=h*h*s+e,a[1]=M*h*s+u*o,a[2]=u*h*s-M*o,a[3]=0,a[4]=h*M*s-u*o,a[5]=M*M*s+e,a[6]=u*M*s+h*o,a[7]=0,a[8]=h*u*s+M*o,a[9]=M*u*s-h*o,a[10]=u*u*s+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function S(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=n+n,M=o+o,u=e+e,i=n*h,p=n*M,c=n*u,f=o*M,x=o*u,b=e*u,l=s*h,v=s*M,m=s*u;return t[0]=1-(f+b),t[1]=p+m,t[2]=c-v,t[3]=0,t[4]=p-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=c+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function N(a,r){var n=new t.ARRAY_TYPE(3),o=-r[0],e=-r[1],s=-r[2],h=r[3],M=r[4],u=r[5],i=r[6],p=r[7],c=o*o+e*e+s*s+h*h;return c>0?(n[0]=2*(M*h+p*o+u*s-i*e)/c,n[1]=2*(u*h+p*e+i*o-M*s)/c,n[2]=2*(i*h+p*s+M*e-u*o)/c):(n[0]=2*(M*h+p*o+u*s-i*e),n[1]=2*(u*h+p*e+i*o-M*s),n[2]=2*(i*h+p*s+M*e-u*o)),L(a,r,n),a}function q(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function R(t,a){var r=a[0],n=a[1],o=a[2],e=a[4],s=a[5],h=a[6],M=a[8],u=a[9],i=a[10];return t[0]=Math.sqrt(r*r+n*n+o*o),t[1]=Math.sqrt(e*e+s*s+h*h),t[2]=Math.sqrt(M*M+u*u+i*i),t}function d(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t}function g(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=a[3],M=o+o,u=e+e,i=s+s,p=o*M,c=o*u,f=o*i,x=e*u,b=e*i,l=s*i,v=h*M,m=h*u,P=h*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(c+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(c-P)*E,t[5]=(1-(p+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(p+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function A(t,a,r,n,o){var e=a[0],s=a[1],h=a[2],M=a[3],u=e+e,i=s+s,p=h+h,c=e*u,f=e*i,x=e*p,b=s*i,l=s*p,v=h*p,m=M*u,P=M*i,O=M*p,E=n[0],S=n[1],w=n[2],I=o[0],L=o[1],N=o[2],q=(1-(b+v))*E,R=(f+O)*E,d=(x-P)*E,g=(f-O)*S,A=(1-(c+v))*S,y=(l+m)*S,Y=(x+P)*w,T=(l-m)*w,_=(1-(c+b))*w;return t[0]=q,t[1]=R,t[2]=d,t[3]=0,t[4]=g,t[5]=A,t[6]=y,t[7]=0,t[8]=Y,t[9]=T,t[10]=_,t[11]=0,t[12]=r[0]+I-(q*I+g*L+Y*N),t[13]=r[1]+L-(R*I+A*L+T*N),t[14]=r[2]+N-(d*I+y*L+_*N),t[15]=1,t}function y(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=r+r,h=n+n,M=o+o,u=r*s,i=n*s,p=n*h,c=o*s,f=o*h,x=o*M,b=e*s,l=e*h,v=e*M;return t[0]=1-p-x,t[1]=i+v,t[2]=c-l,t[3]=0,t[4]=i-v,t[5]=1-u-x,t[6]=f+b,t[7]=0,t[8]=c+l,t[9]=f-b,t[10]=1-u-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,a,r,n,o,e,s){var h=1/(r-a),M=1/(o-n),u=1/(e-s);return t[0]=2*e*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*M,t[6]=0,t[7]=0,t[8]=(r+a)*h,t[9]=(o+n)*M,t[10]=(s+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*e*2*u,t[15]=0,t}function T(t,a,r,n,o){var e,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(n-o),t[10]=(o+n)*e,t[14]=2*o*n*e):(t[10]=-1,t[14]=-2*n),t}function _(t,a,r,n){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),h=Math.tan(a.rightDegrees*Math.PI/180),M=2/(s+h),u=2/(o+e);return t[0]=M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-h)*M*.5,t[9]=(o-e)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function j(t,a,r,n,o,e,s){var h=1/(a-r),M=1/(n-o),u=1/(e-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(a+r)*h,t[13]=(o+n)*M,t[14]=(s+e)*u,t[15]=1,t}function D(a,r,n,o){var e,s,M,u,i,p,c,f,x,b,l=r[0],v=r[1],m=r[2],P=o[0],O=o[1],E=o[2],S=n[0],w=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-w)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(c=l-S,f=v-w,x=m-I,e=O*(x*=b=1/Math.sqrt(c*c+f*f+x*x))-E*(f*=b),s=E*(c*=b)-P*x,M=P*f-O*c,(b=Math.sqrt(e*e+s*s+M*M))?(e*=b=1/b,s*=b,M*=b):(e=0,s=0,M=0),u=f*M-x*s,i=x*e-c*M,p=c*s-f*e,(b=Math.sqrt(u*u+i*i+p*p))?(u*=b=1/b,i*=b,p*=b):(u=0,i=0,p=0),a[0]=e,a[1]=u,a[2]=c,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=M,a[9]=p,a[10]=x,a[11]=0,a[12]=-(e*l+s*v+M*m),a[13]=-(u*l+i*v+p*m),a[14]=-(c*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=n[0],M=n[1],u=n[2],i=o-r[0],p=e-r[1],c=s-r[2],f=i*i+p*p+c*c;f>0&&(i*=f=1/Math.sqrt(f),p*=f,c*=f);var x=M*c-u*p,b=u*i-h*c,l=h*p-M*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=p*l-c*b,t[5]=c*x-i*l,t[6]=i*b-p*x,t[7]=0,t[8]=i,t[9]=p,t[10]=c,t[11]=0,t[12]=o,t[13]=e,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function X(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function Z(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function k(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],w=r[4],I=r[5],L=r[6],N=r[7],q=r[8],R=r[9],d=r[10],g=r[11],A=r[12],y=r[13],Y=r[14],T=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-O)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(e-E)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(h-w)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(M-I)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(u-L)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(p-q)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-d)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(x-g)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(g))&&Math.abs(b-A)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(l-y)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(v-Y)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(Y))&&Math.abs(m-T)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))}var G=c;exports.mul=G;var H=Z;exports.sub=H;
},{"./common.js":"XJqx"}],"9+zW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=h,exports.max=M,exports.round=l,exports.scale=v,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=O,exports.squaredLength=A,exports.negate=P,exports.inverse=q,exports.normalize=R,exports.dot=E,exports.cross=y,exports.lerp=D,exports.random=g,exports.transformMat4=w,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=j,exports.equals=L,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function u(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function c(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function p(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function f(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function h(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function v(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function d(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function m(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.sqrt(e*e+n*n+o*o+a*a)}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function O(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.sqrt(r*r+e*e+n*n+o*o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function R(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],s=e*e+n*n+o*o+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e*s,t[1]=n*s,t[2]=o*s,t[3]=a*s,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function y(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],s=e[0]*n[3]-e[3]*n[0],u=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],x=r[1],f=r[2],h=r[3];return t[0]=x*c-f*i+h*u,t[1]=-p*c+f*s-h*a,t[2]=p*i-x*s+h*o,t[3]=-p*u+x*a-f*o,t}function D(t,r,e,n){var o=r[0],a=r[1],s=r[2],u=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t[3]=u+n*(e[3]-u),t}function g(r,e){var n,o,a,s,u,i;e=e||1;do{u=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(u>=1);do{i=(a=2*t.RANDOM()-1)*a+(s=2*t.RANDOM()-1)*s}while(i>=1);var c=Math.sqrt((1-u)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*s*c,r}function w(t,r,e){var n=r[0],o=r[1],a=r[2],s=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*s,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*s,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*s,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*s,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2],c=e[3],p=c*n+u*a-i*o,x=c*o+i*n-s*a,f=c*a+s*o-u*n,h=-s*n-u*o-i*a;return t[0]=p*c+h*-s+x*-i-f*-u,t[1]=x*c+h*-u+f*-s-p*-i,t[2]=f*c+h*-i+p*-u-x*-s,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function j(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function L(r,e){var n=r[0],o=r[1],a=r[2],s=r[3],u=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-u)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-p)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var I=i;exports.sub=I;var S=c;exports.mul=S;var T=p;exports.div=T;var z=m;exports.dist=z;var F=b;exports.sqrDist=F;var Q=O;exports.len=Q;var V=A;exports.sqrLen=V;var k=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();exports.forEach=k;
},{"./common.js":"XJqx"}],"kCre":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateMatrix4=b,exports.default=void 0;var t=k(require("@babel/runtime/helpers/esm/slicedToArray")),e=k(require("@babel/runtime/helpers/esm/classCallCheck")),r=k(require("@babel/runtime/helpers/esm/createClass")),i=k(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=k(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=k(require("@babel/runtime/helpers/esm/inherits")),a=k(require("./lib/math-array")),s=require("./lib/common"),h=require("./lib/validators"),u=k(require("./vector2")),l=k(require("./vector3")),c=k(require("./vector4")),v=y(require("gl-matrix/mat4")),f=y(require("gl-matrix/vec2")),d=y(require("gl-matrix/vec3")),m=y(require("gl-matrix/vec4"));function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}var g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(t){return 16===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])&&Number.isFinite(t[4])&&Number.isFinite(t[5])&&Number.isFinite(t[6])&&Number.isFinite(t[7])&&Number.isFinite(t[8])&&Number.isFinite(t[9])&&Number.isFinite(t[10])&&Number.isFinite(t[11])&&Number.isFinite(t[12])&&Number.isFinite(t[13])&&Number.isFinite(t[14])&&Number.isFinite(t[15])}var p=function(a){function y(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(0,e.default)(this,y),t=(0,i.default)(this,(0,n.default)(y).call(this,16)),Array.isArray(o[0])&&1===arguments.length?t.copy(o[0]):t.identity(),t}return(0,o.default)(y,a),(0,r.default)(y,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=n,this[2]=h,this[3]=v,this[4]=e,this[5]=o,this[6]=u,this[7]=f,this[8]=r,this[9]=a,this[10]=l,this[11]=d,this[12]=i,this[13]=s,this[14]=c,this[15]=m,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=o,this[6]=a,this[7]=s,this[8]=h,this[9]=u,this[10]=l,this[11]=c,this[12]=v,this[13]=f,this[14]=d,this[15]=m,this.check()}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,r){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[t][e]=(0,s.checkNumber)(r):this[e][t]=(0,s.checkNumber)(r),this}},{key:"determinant",value:function(){return v.determinant(this)}},{key:"identity",value:function(){return this.copy(g)}},{key:"fromQuaternion",value:function(t){return v.fromQuat(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,o=t.near,a=t.far;return v.frustum(this,e,r,i,n,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,r=t.center,i=void 0===r?[0,0,0]:r,n=t.up,o=void 0===n?[0,1,0]:n;return v.lookAt(this,e,i,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,r=t.right,i=t.bottom,n=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,h=void 0===s?500:s;return v.ortho(this,e,r,i,n,a,h),this.check()}},{key:"orthographic",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,n=void 0===i?1:i,o=t.focalDistance,a=void 0===o?1:o,s=t.near,h=void 0===s?.1:s,u=t.far,l=void 0===u?500:u;if(r>2*Math.PI)throw Error("radians");var c=r/2,v=a*Math.tan(c),f=v*n;return(new y).ortho({left:-f,right:f,bottom:-v,top:v,near:h,far:l})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,r=t.fov,i=void 0===r?45*Math.PI/180:r,n=t.aspect,o=void 0===n?1:n,a=t.near,s=void 0===a?.1:a,h=t.far,u=void 0===h?500:h;if((e=e||i)>2*Math.PI)throw Error("radians");return v.perspective(this,e,o,s,u),this.check()}},{key:"transpose",value:function(){return v.transpose(this,this),this.check()}},{key:"invert",value:function(){return v.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return v.multiply(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return v.multiply(this,this,t),this.check()}},{key:"rotateX",value:function(t){return v.rotateX(this,this,t),this.check()}},{key:"rotateY",value:function(t){return v.rotateY(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return v.rotateZ(this,this,t),this.check()}},{key:"rotateXYZ",value:function(e){var r=(0,t.default)(e,3),i=r[0],n=r[1],o=r[2];return this.rotateX(i).rotateY(n).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return v.rotate(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?v.scale(this,this,t):v.scale(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return v.translate(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new u.default,f.transformMat4(e,t,this),(0,h.validateVector)(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new l.default,d.transformMat4(e,t,this),(0,h.validateVector)(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new c.default,m.transformMat4(e,t,this),(0,h.validateVector)(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,r){switch(t.length){case 2:e=e||new u.default,m.transformMat4(e,[t[0],t[1],0,r],this),e.length=2,(0,h.validateVector)(e,2);break;case 3:e=e||new l.default,m.transformMat4(e,[t[0],t[1],t[2],r],this),e.length=3,(0,h.validateVector)(e,3);break;case 4:if(Boolean(r)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new c.default,m.transformMat4(e,t,this),(0,h.validateVector)(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,r){return this.identity().translate([t,e,r])}},{key:"ELEMENTS",get:function(){return 16}}]),y}(a.default);exports.default=p;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/math-array":"WFwf","./lib/common":"5tOD","./lib/validators":"/S3e","./vector2":"LvGW","./vector3":"XRSK","./vector4":"Xumn","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","gl-matrix/vec4":"9+zW"}],"1KdR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.identity=n,exports.setAxisAngle=u,exports.getAxisAngle=p,exports.multiply=c,exports.rotateX=i,exports.rotateY=x,exports.rotateZ=l,exports.calculateW=v,exports.slerp=h,exports.random=M,exports.invert=f,exports.conjugate=q,exports.fromMat3=d,exports.fromEuler=m,exports.str=P,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var r=s(require("./common.js")),t=s(require("./mat3.js")),e=s(require("./vec3.js")),o=s(require("./vec4.js"));function s(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};o.get||o.set?Object.defineProperty(t,e,o):t[e]=r[e]}return t.default=r,t}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function n(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function u(r,t,e){e*=.5;var o=Math.sin(e);return r[0]=o*t[0],r[1]=o*t[1],r[2]=o*t[2],r[3]=Math.cos(e),r}function p(t,e){var o=2*Math.acos(e[3]),s=Math.sin(o/2);return s>r.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),o}function c(r,t,e){var o=t[0],s=t[1],a=t[2],n=t[3],u=e[0],p=e[1],c=e[2],i=e[3];return r[0]=o*i+n*u+s*c-a*p,r[1]=s*i+n*p+a*u-o*c,r[2]=a*i+n*c+o*p-s*u,r[3]=n*i-o*u-s*p-a*c,r}function i(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+n*u,r[1]=s*p+a*u,r[2]=a*p-s*u,r[3]=n*p-o*u,r}function x(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p-a*u,r[1]=s*p+n*u,r[2]=a*p+o*u,r[3]=n*p-s*u,r}function l(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+s*u,r[1]=s*p-o*u,r[2]=a*p+n*u,r[3]=n*p-a*u,r}function v(r,t){var e=t[0],o=t[1],s=t[2];return r[0]=e,r[1]=o,r[2]=s,r[3]=Math.sqrt(Math.abs(1-e*e-o*o-s*s)),r}function h(t,e,o,s){var a,n,u,p,c,i=e[0],x=e[1],l=e[2],v=e[3],h=o[0],M=o[1],f=o[2],q=o[3];return(n=i*h+x*M+l*f+v*q)<0&&(n=-n,h=-h,M=-M,f=-f,q=-q),1-n>r.EPSILON?(a=Math.acos(n),u=Math.sin(a),p=Math.sin((1-s)*a)/u,c=Math.sin(s*a)/u):(p=1-s,c=s),t[0]=p*i+c*h,t[1]=p*x+c*M,t[2]=p*l+c*f,t[3]=p*v+c*q,t}function M(t){var e=r.RANDOM(),o=r.RANDOM(),s=r.RANDOM(),a=Math.sqrt(1-e),n=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*o),t[1]=a*Math.cos(2*Math.PI*o),t[2]=n*Math.sin(2*Math.PI*s),t[3]=n*Math.cos(2*Math.PI*s),t}function f(r,t){var e=t[0],o=t[1],s=t[2],a=t[3],n=e*e+o*o+s*s+a*a,u=n?1/n:0;return r[0]=-e*u,r[1]=-o*u,r[2]=-s*u,r[3]=a*u,r}function q(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r}function d(r,t){var e,o=t[0]+t[4]+t[8];if(o>0)e=Math.sqrt(o+1),r[3]=.5*e,e=.5/e,r[0]=(t[5]-t[7])*e,r[1]=(t[6]-t[2])*e,r[2]=(t[1]-t[3])*e;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var a=(s+1)%3,n=(s+2)%3;e=Math.sqrt(t[3*s+s]-t[3*a+a]-t[3*n+n]+1),r[s]=.5*e,e=.5/e,r[3]=(t[3*a+n]-t[3*n+a])*e,r[a]=(t[3*a+s]+t[3*s+a])*e,r[n]=(t[3*n+s]+t[3*s+n])*e}return r}function m(r,t,e,o){var s=.5*Math.PI/180;t*=s,e*=s,o*=s;var a=Math.sin(t),n=Math.cos(t),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return r[0]=a*p*i-n*u*c,r[1]=n*u*i+a*p*c,r[2]=n*p*c-a*u*i,r[3]=n*p*i+a*u*c,r}function P(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var A=o.clone;exports.clone=A;var O=o.fromValues;exports.fromValues=O;var g=o.copy;exports.copy=g;var y=o.set;exports.set=y;var j=o.add;exports.add=j;var E=c;exports.mul=E;var I=o.scale;exports.scale=I;var b=o.dot;exports.dot=b;var L=o.lerp;exports.lerp=L;var R=o.length;exports.length=R;var _=R;exports.len=_;var D=o.squaredLength;exports.squaredLength=D;var N=D;exports.sqrLen=N;var V=o.normalize;exports.normalize=V;var Y=o.exactEquals;exports.exactEquals=Y;var w=o.equals;exports.equals=w;var z=function(){var r=e.create(),t=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(s,a,n){var p=e.dot(a,n);return p<-.999999?(e.cross(r,t,a),e.len(r)<1e-6&&e.cross(r,o,a),e.normalize(r,r),u(s,r,Math.PI),s):p>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(e.cross(r,a,n),s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=1+p,V(s,s))}}();exports.rotationTo=z;var T=function(){var r=a(),t=a();return function(e,o,s,a,n,u){return h(r,o,n,u),h(t,s,a,u),h(e,r,t,2*u*(1-u)),e}}();exports.sqlerp=T;var S=function(){var r=t.create();return function(t,e,o,s){return r[0]=o[0],r[3]=o[1],r[6]=o[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],V(t,d(t,r))}}();exports.setAxes=S;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"9+zW"}],"B+Vu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateQuaternion=l,exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=h(require("@babel/runtime/helpers/esm/inherits")),u=h(require("./lib/math-array")),s=require("./lib/common"),o=c(require("gl-matrix/quat"));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var a=[0,0,0,1];function l(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}var f=function(u){function c(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,e.default)(this,c),t=(0,r.default)(this,(0,i.default)(c).call(this,4)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,u,s,o),t}return(0,n.default)(c,u),(0,t.default)(c,[{key:"fromMatrix3",value:function(e){return o.fromMat3(this,e),this.check()}},{key:"fromValues",value:function(e,t,r,i){return this.set(e,t,r,i)}},{key:"identity",value:function(){return o.identity(this),this.check()}},{key:"length",value:function(){return o.length(this)}},{key:"squaredLength",value:function(e){return o.squaredLength(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return o.dot(this,e)}},{key:"rotationTo",value:function(e,t){return o.rotationTo(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return o.add(this,e),this.check()}},{key:"calculateW",value:function(){return o.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return o.conjugate(this,this),this.check()}},{key:"invert",value:function(){return o.invert(this,this),this.check()}},{key:"lerp",value:function(e,t,r){return o.lerp(this,e,t,r),this.check()}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return o.multiply(this,this,e),this.check()}},{key:"normalize",value:function(){return o.normalize(this,this),this.check()}},{key:"rotateX",value:function(e){return o.rotateX(this,this,e),this.check()}},{key:"rotateY",value:function(e){return o.rotateY(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return o.rotateZ(this,this,e),this.check()}},{key:"scale",value:function(e){return o.scale(this,this,e),this.check()}},{key:"set",value:function(e,t,r,i){return o.set(this,e,t,r,i),this.check()}},{key:"setAxisAngle",value:function(e,t){return o.setAxisAngle(this,e,t),this.check()}},{key:"slerp",value:function(e){var t=e.start,r=void 0===t?a:t,i=e.target,n=e.ratio;return o.slerp(this,r,i,n),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,s.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,s.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,s.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,s.checkNumber)(e)}}]),c}(u.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/math-array":"WFwf","./lib/common":"5tOD","gl-matrix/quat":"1KdR"}],"+etX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("@babel/runtime/helpers/esm/slicedToArray")),e=n(require("@babel/runtime/helpers/esm/classCallCheck")),i=n(require("@babel/runtime/helpers/esm/createClass")),r=require("./lib/common"),s=n(require("./vector3")),a=h(require("gl-matrix/vec3"));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};r.get||r.set?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}var u=1e-6,c=6371e3,o=function(){function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.phi,r=t.theta,s=t.radius,a=t.bearing,n=t.pitch,u=(t.altitude,t.radiusScale),o=void 0===u?c:u;(0,e.default)(this,h),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(i)||Number.isFinite(r)?(this.phi=i||0,this.theta=r||0):(Number.isFinite(a)||Number.isFinite(n))&&(this.bearing=a||0,this.pitch=n||0),this.radius=s||1,this.radiusScale=o||1,this.check()}return(0,i.default)(h,[{key:"toString",value:function(){return this.formatString(r.config)}},{key:"formatString",value:function(t){var e=t.printTypes,i=(t.printDegrees,r.formatValue);return"".concat(e?"Spherical":"","[rho:").concat(i(this.radius),",theta:").concat(i(this.theta),",phi:").concat(i(this.phi),"]")}},{key:"equals",value:function(t){return(0,r.equals)(this.radius,t.radius)&&(0,r.equals)(this.theta,t.theta)&&(0,r.equals)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var i=(0,t.default)(e,3),s=i[0],a=i[1],h=i[2];this.radius=1+h/this.radiusScale,this.phi=(0,r.radians)(a),this.theta=(0,r.radians)(s)}},{key:"fromVector3",value:function(t){return this.radius=a.length(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,r.clamp)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new s.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(u,Math.min(Math.PI-u,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-(0,r.degrees)(this.phi)},set:function(t){this.phi=Math.PI-(0,r.radians)(t)}},{key:"pitch",get:function(){return(0,r.degrees)(this.theta)},set:function(t){this.theta=(0,r.radians)(t)}},{key:"longitude",get:function(){return(0,r.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,r.degrees)(this.theta)}},{key:"lng",get:function(){return(0,r.degrees)(this.phi)}},{key:"lat",get:function(){return(0,r.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),h}();exports.default=o;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./lib/common":"5tOD","./vector3":"XRSK","gl-matrix/vec3":"AWBd"}],"kzJT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("@babel/runtime/helpers/esm/slicedToArray")),e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),n=l(require("@babel/runtime/helpers/esm/createClass")),a=l(require("@babel/runtime/helpers/esm/inherits")),h=l(require("./lib/math-array")),s=require("./lib/common"),u=l(require("./matrix4")),o=l(require("./quaternion")),c=l(require("./vector3"));function l(t){return t&&t.__esModule?t:{default:t}}var f="Unknown Euler angle order",k=.99999;function v(t){return t>=0&&t<6}function y(t){if(t<0&&t>=6)throw new Error(f);return t}var M=function(h){function l(){var t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.DefaultOrder;((0,e.default)(this,l),t=(0,r.default)(this,(0,i.default)(l).call(this,4)),arguments.length>0&&Array.isArray(arguments[0]))?(n=t).fromVector3.apply(n,arguments):t.set(a,h,s,u);return t}return(0,a.default)(l,h),(0,n.default)(l,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return l.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return l.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),(0,n.default)(l,[{key:"fromQuaternion",value:function(e){var r=(0,t.default)(e,4),i=r[0],n=r[1],a=r[2],h=r[3],s=n*n,u=-2*(s+a*a)+1,o=2*(i*n+h*a),c=-2*(i*a-h*n),f=2*(n*a+h*i),k=-2*(i*i+s)+1;return c=(c=c>1?1:c)<-1?-1:c,new l(Math.atan2(f,k),Math.asin(c),Math.atan2(o,u),l.RollPitchYaw)}},{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(i)?i:this[3],this.check()}},{key:"validate",value:function(){return v(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new c.default(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,e,r){return this.set(t,e,r,l.ZYX)}},{key:"fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DefaultOrder;return this._fromRotationMatrix(t,e),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.default;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new o.default;switch(this[4]){case l.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case l.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case l.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case l.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case l.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case l.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(f)}}},{key:"_fromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DefaultOrder,r=t.elements,i=r[0],n=r[4],a=r[8],h=r[1],u=r[5],o=r[9],c=r[2],v=r[6],y=r[10];switch(e=e||this[3]){case l.XYZ:this[1]=Math.asin((0,s.clamp)(a,-1,1)),Math.abs(a)<k?(this[0]=Math.atan2(-o,y),this[2]=Math.atan2(-n,i)):(this[0]=Math.atan2(v,u),this[2]=0);break;case l.YXZ:this[0]=Math.asin(-(0,s.clamp)(o,-1,1)),Math.abs(o)<k?(this[1]=Math.atan2(a,y),this[2]=Math.atan2(h,u)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case l.ZXY:this[0]=Math.asin((0,s.clamp)(v,-1,1)),Math.abs(v)<k?(this[1]=Math.atan2(-c,y),this[2]=Math.atan2(-n,u)):(this[1]=0,this[2]=Math.atan2(h,i));break;case l.ZYX:this[1]=Math.asin(-(0,s.clamp)(c,-1,1)),Math.abs(c)<k?(this[0]=Math.atan2(v,y),this[2]=Math.atan2(h,i)):(this[0]=0,this[2]=Math.atan2(-n,u));break;case l.YZX:this[2]=Math.asin((0,s.clamp)(h,-1,1)),Math.abs(h)<k?(this[0]=Math.atan2(-o,u),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(a,y));break;case l.XZY:this[2]=Math.asin(-(0,s.clamp)(n,-1,1)),Math.abs(n)<k?(this[0]=Math.atan2(v,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-o,y),this[1]=0);break;default:throw new Error(f)}return this[3]=e,this}},{key:"_getRotationMatrix",value:function(){var t=new u.default,e=this.x,r=this.y,i=this.z,n=Math.cos(e),a=Math.cos(r),h=Math.cos(i),s=Math.sin(e),o=Math.sin(r),c=Math.sin(i);switch(this[3]){case l.XYZ:var k=n*h,v=n*c,y=s*h,M=s*c;t[0]=a*h,t[4]=-a*c,t[8]=o,t[1]=v+y*o,t[5]=k-M*o,t[9]=-s*a,t[2]=M-k*o,t[6]=y+v*o,t[10]=n*a;break;case l.YXZ:var b=a*h,d=a*c,m=o*h,g=o*c;t[0]=b+g*s,t[4]=m*s-d,t[8]=n*o,t[1]=n*c,t[5]=n*h,t[9]=-s,t[2]=d*s-m,t[6]=g+b*s,t[10]=n*a;break;case l.ZXY:var Y=a*h,X=a*c,Z=o*h,p=o*c;t[0]=Y-p*s,t[4]=-n*c,t[8]=Z+X*s,t[1]=X+Z*s,t[5]=n*h,t[9]=p-Y*s,t[2]=-n*o,t[6]=s,t[10]=n*a;break;case l.ZYX:var w=n*h,N=n*c,q=s*h,x=s*c;t[0]=a*h,t[4]=q*o-N,t[8]=w*o+x,t[1]=a*c,t[5]=x*o+w,t[9]=N*o-q,t[2]=-o,t[6]=s*a,t[10]=n*a;break;case l.YZX:var R=n*a,O=n*o,E=s*a,_=s*o;t[0]=a*h,t[4]=_-R*c,t[8]=E*c+O,t[1]=c,t[5]=n*h,t[9]=-s*h,t[2]=-o*h,t[6]=O*c+E,t[10]=R-_*c;break;case l.XZY:var A=n*a,F=n*o,P=s*a,C=s*o;t[0]=a*h,t[4]=-c,t[8]=o*h,t[1]=A*c+C,t[5]=n*h,t[9]=F*c-P,t[2]=P*c-F,t[6]=s*h,t[10]=C*c+A;break;default:throw new Error(f)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"toQuaternion",value:function(){var t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),i=Math.sin(.5*this.roll),n=Math.cos(.5*this.pitch),a=Math.sin(.5*this.pitch),h=t*r*n+e*i*a,s=t*i*n-e*r*a,u=t*r*a+e*i*n,c=e*r*n-t*i*a;return new o.default(s,u,c,h)}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,s.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,s.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,s.checkNumber)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=(0,s.checkNumber)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=(0,s.checkNumber)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=(0,s.checkNumber)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=(0,s.checkNumber)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=(0,s.checkNumber)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=(0,s.checkNumber)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=(0,s.checkNumber)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=(0,s.checkNumber)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=(0,s.checkNumber)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=y(t)}}]),l}(h.default);exports.default=M;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/inherits":"RnSb","./lib/math-array":"WFwf","./lib/common":"5tOD","./matrix4":"kCre","./quaternion":"B+Vu","./vector3":"XRSK"}],"9BZq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/esm/classCallCheck")),i=r(require("@babel/runtime/helpers/esm/createClass")),e=r(require("./matrix4")),n=r(require("./vector3")),o=r(require("./euler"));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function r(i){var e=i.x,a=void 0===e?0:e,s=i.y,u=void 0===s?0:s,l=i.z,h=void 0===l?0:l,f=i.roll,c=void 0===f?0:f,y=i.pitch,p=void 0===y?0:y,d=i.yaw,v=void 0===d?0:d,g=i.position,x=i.orientation;(0,t.default)(this,r),Array.isArray(g)&&3===g.length?this.position=new n.default(g):this.position=new n.default(a,u,h),Array.isArray(x)&&4===x.length?this.orientation=new o.default(x,x[3]):this.orientation=new o.default(c,p,v,o.default.RollPitchYaw)}return(0,i.default)(r,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}},{key:"exactEquals",value:function(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),i=Math.sin(this.pitch),n=Math.sin(this.yaw),o=Math.cos(this.roll),r=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new e.default).setRowMajor(a*r,-n*o+a*i*t,n*t+a*i*o,this.x,n*r,a*o+n*i*t,-a*t+n*i*o,this.y,-i,r*t,r*o,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new e.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new e.default).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){return this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){return this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){return this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){return this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){return this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){return this.orientation.yaw=t}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./matrix4":"kCre","./vector3":"XRSK","./euler":"kzJT"}],"TXFH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),i=require("../lib/common");function s(e){return e&&e.__esModule?e:{default:e}}var n=function(){function s(t){(0,e.default)(this,s),this.points=t,this.isClosed=(0,i.equals)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return(0,t.default)(s,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment(function(t,i){e+=(t[0]+i[0])*(t[1]-i[1])}),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,i=0;i<t-1;i++)e(this.points[i],this.points[i+1],i,i+1);this.isPolygon&&!this.isClosed()&&e(this.points[t-1],this.points[0],t-1,0)}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../lib/common":"5tOD"}],"4xAa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Matrix3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return i.config}}),Object.defineProperty(exports,"checkNumber",{enumerable:!0,get:function(){return i.checkNumber}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return i.configure}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return i.formatValue}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return i.isArray}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return i.clone}}),Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return i.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return i.degrees}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return i.sin}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return i.cos}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return i.tan}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return i.asin}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return i.acos}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return i.atan}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return i.clamp}}),Object.defineProperty(exports,"lerp",{enumerable:!0,get:function(){return i.lerp}}),Object.defineProperty(exports,"equals",{enumerable:!0,get:function(){return i.equals}}),Object.defineProperty(exports,"_SphericalCoordinates",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"_Pose",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"_Euler",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_Polygon",{enumerable:!0,get:function(){return p.default}});var e=b(require("./vector2")),r=b(require("./vector3")),t=b(require("./vector4")),n=b(require("./matrix3")),u=b(require("./matrix4")),o=b(require("./quaternion")),i=require("./lib/common"),c=b(require("./spherical-coordinates")),a=b(require("./pose")),f=b(require("./euler")),p=b(require("./addons/polygon"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./vector2":"LvGW","./vector3":"XRSK","./vector4":"Xumn","./matrix3":"DMv2","./matrix4":"kCre","./quaternion":"B+Vu","./lib/common":"5tOD","./spherical-coordinates":"+etX","./pose":"9BZq","./euler":"kzJT","./addons/polygon":"TXFH"}],"Ubhm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=exports.DirectionalLight=exports.AmbientLight=void 0;var t=a(require("@babel/runtime/helpers/esm/createClass")),e=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),r=a(require("@babel/runtime/helpers/esm/inherits")),n=a(require("@babel/runtime/helpers/esm/classCallCheck")),u=require("math.gl"),o=require("../utils");function a(t){return t&&t.__esModule?t:{default:t}}var l=[255,255,255],s=1,d=[0,0,1],h=[0,0,-1],c=[0,0,1],f=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t),this.id=e.id||(0,o.uid)("light");var i=e.color,r=void 0===i?l:i;this.color=r;var u=e.intensity,a=void 0===u?s:u;this.intensity=a},v=function(t){function u(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.default)(this,u),(t=(0,e.default)(this,(0,i.default)(u).call(this,r))).type="ambient",t}return(0,r.default)(u,t),u}(f);exports.AmbientLight=v;var p=function(t){function o(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,o),(t=(0,e.default)(this,(0,i.default)(o).call(this,r))).type="directional";var a=r.direction,l=void 0===a?h:a;return t.direction=new u.Vector3(l).normalize().toArray(),t}return(0,r.default)(o,t),o}(f);exports.DirectionalLight=p;var b=function(u){function o(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,o),(t=(0,e.default)(this,(0,i.default)(o).call(this,r))).type="point";var u=r.position,a=void 0===u?c:u;return t.position=a,t.attenuation=t._getAttenuation(r),t}return(0,r.default)(o,u),(0,t.default)(o,[{key:"_getAttenuation",value:function(t){return"attenuation"in t?t.attenuation:"intensity"in t?[0,0,t.intensity]:d}}]),o}(f);exports.PointLight=b;
},{"@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/classCallCheck":"ZamP","math.gl":"4xAa","../utils":"a2N7"}],"uR4M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/typeof")),i=o(require("@babel/runtime/regenerator")),t=o(require("@babel/runtime/helpers/esm/asyncToGenerator")),n=o(require("@babel/runtime/helpers/esm/classCallCheck")),s=o(require("@babel/runtime/helpers/esm/createClass")),a=require("@luma.gl/webgl"),r=require("../utils");function o(e){return e&&e.__esModule?e:{default:e}}var u=0,l=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,o);var i=e.onCreateContext,t=void 0===i?function(e){return(0,a.createGLContext)(e)}:i,s=e.onAddHTML,l=void 0===s?null:s,h=e.onInitialize,m=void 0===h?function(){}:h,d=e.onRender,p=void 0===d?function(){}:d,f=e.onFinalize,c=void 0===f?function(){}:f,v=e.gl,g=void 0===v?null:v,_=e.glOptions,y=void 0===_?{}:_,w=e.debug,P=void 0!==w&&w,b=e.createFramebuffer,k=void 0!==b&&b,F=e.autoResizeViewport,x=void 0===F||F,R=e.autoResizeDrawingBuffer,z=void 0===R||R,D=e.stats,T=void 0===D?a.lumaStats.get("animation-loop-".concat(u++)):D,C=e.useDevicePixels,L=void 0===C||C;"useDevicePixelRatio"in e&&(r.log.deprecated("useDevicePixelRatio","useDevicePixels")(),L=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:l,onInitialize:m,onRender:p,onFinalize:c,gl:g,glOptions:y,debug:P,createFramebuffer:k},this.gl=g,this.needsRedraw=null,this.timeline=null,this.stats=T,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:x,autoResizeDrawingBuffer:z,useDevicePixels:L}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return(0,s.default)(o,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return(0,r.assert)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,(0,a.getPageLoadPromise)().then(function(){return!e._running||e._initialized?null:(e._createWebGLContext(i),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=a.Query.isSupported(e.gl,["timers"])?new a.Query(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))}).then(function(i){e._running&&(e._addCallbackData(i||{}),!1!==i&&e._startLoop())}),this)}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),(0,a.cancelAnimationFrame)(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(i){e._resolveNextFrame=i})),this._nextFramePromise}},{key:"toDataURL",value:function(){var e=(0,t.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=document.getElementById(e);return t?Number(t.value):i}},{key:"setViewParameters",value:function(){return r.log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;(0,a.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(function i(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(i))})}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){this.display&&this.display.requestAnimationFrame(e)||(0,a.requestAnimationFrame)(e)}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),i=e.width,t=e.height,n=e.aspect;i===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=i,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(i){"object"===(0,e.default)(i)&&null!==i&&(this.animationProps=Object.assign({},this.animationProps,i))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?(0,a.instrumentGLContext)(this.props.gl,e):this.onCreateContext(e),!(0,a.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,a.resetParameters)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var i=document.createElement("div");i.style.position="absolute",i.style.left="10px",i.style.bottom="10px",i.style.width="300px",i.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(i);var t=this.props.onAddHTML(i);t&&(i.innerHTML=t)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,i=this.gl.drawingBufferHeight,t=1,n=this.gl.canvas;return n&&n.clientHeight?t=n.clientWidth/n.clientHeight:e>0&&i>0&&(t=e/i),{width:e,height:i,aspect:t}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&(0,a.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new a.Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),o}();exports.default=l;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd","../utils":"a2N7"}],"NDJ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodePickingColor=n,exports.decodePickingColor=o,exports.getNullPickingColor=u;var e=r(require("@babel/runtime/helpers/esm/slicedToArray"));function r(e){return e&&e.__esModule?e:{default:e}}var t=new Uint8Array([0,0,0]);function n(e){return[e+1&255,e+1>>8&255,e+1>>16&255]}function o(r){var t=(0,e.default)(r,3);return t[0]+256*t[1]+65536*t[2]-1}function u(){return t}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo"}],"StUL":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBuffersFromGeometry=a,exports.inferAttributeAccessor=n;var e=t(require("@babel/runtime/helpers/esm/objectSpread")),r=require("@luma.gl/webgl"),s=require("../utils");function t(e){return e&&e.__esModule?e:{default:e}}var i={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function a(t,i,a){var u={},c=i.indices;for(var d in i.attributes){var f=i.attributes[d],l=o(d,a);if("indices"===d)c=f;else if(f.constant)u[l]=f.value;else{var v=f.value,b=(0,e.default)({},f);delete b.value,u[l]=[new r.Buffer(t,v),b],n(d,b)}}if(c){var x=c.value||c;(0,s.assert)(x instanceof Uint16Array||x instanceof Uint32Array,'attribute array for "indices" must be of integer type');var C={size:1,isIndexed:void 0===c.isIndexed||c.isIndexed};u.indices=[new r.Buffer(t,{data:x,target:34963}),C]}return u}function o(e,r){var s=(r||{}).attributeMap,t=void 0===s?i:s;return t&&t[e]||e}function n(e,r){var t;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":r.size=r.size||3;break;case"uvs":r.size=r.size||2}(0,s.assert)(Number.isFinite(r.size),"attribute ".concat(e," needs size"))}
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@luma.gl/webgl":"50Kd","../utils":"a2N7"}],"o8+G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n";exports.default=n;
},{}],"Ot2n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n";exports.default=o;
},{}],"+hdw":[function(require,module,exports) {
"use strict";function e(e,a,c){switch(a){case 300:return c?t(e):r(e);case 100:return c?u(e):n(e);default:throw new Error("unknown GLSL version ".concat(a))}}function t(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}function r(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}function u(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function n(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"0fG4":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"shadertools: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"JUP5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}});var e=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"0fG4"}],"p0tA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=a;var e=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t={number:{validate:function(e,r){return Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)}},array:{validate:function(e,r){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function a(e){var r={};for(var t in e){var a=n(e[t]);r[t]=a}return r}function n(e){var r=i(e);return"object"===r?e?"type"in e?Object.assign({},e,t[e.type]):"value"in e?(r=i(e.value),Object.assign({type:r},e,t[r])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:r,value:e},t[r])}function i(r){return Array.isArray(r)||ArrayBuffer.isView(r)?"array":(0,e.default)(r)}
},{"@babel/runtime/helpers/esm/typeof":"zsb/"}],"8X8l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeShaderModule=f,exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=s(require("./transpile-shader")),r=require("../utils"),i=require("./filters/prop-types");function s(e){return e&&e.__esModule?e:{default:e}}var a="vs",o="fs",u=function(){function s(t){var n=t.name,a=t.vs,o=t.fs,u=t.dependencies,f=void 0===u?[]:u,c=t.uniforms,d=t.getUniforms,l=t.deprecations,h=void 0===l?[]:l,p=t.defines,v=void 0===p?{}:p,m=t.vertexShader,g=t.fragmentShader;(0,e.default)(this,s),(0,r.assert)("string"==typeof n),this.name=n,this.vs=a||m,this.fs=o||g,this.getModuleUniforms=d,this.dependencies=f,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=v,c&&(this.uniforms=(0,i.parsePropTypes)(c))}return(0,t.default)(s,[{key:"getModuleSource",value:function(e,t){var i;switch(e){case a:i=(0,n.default)(this.vs||"",t,!0);break;case o:i=(0,n.default)(this.fs||"",t,!1);break;default:(0,r.assert)(!1)}return"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(i,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach(function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var i in n){var s=n[i];i in e&&!s.private?(s.validate&&(0,r.assert)(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),t[i]=e[i]):t[i]=s.value}return t}}]),s}();function f(e){if(!e.normalized&&(e.normalized=!0,e.uniforms&&!e.getUniforms)){var t=new u(e);e.getUniforms=t.getUniforms.bind(t)}return e}exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./transpile-shader":"+hdw","../utils":"JUP5","./filters/prop-types":"p0tA"}],"QuIY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),t=a(require("./shader-module")),u=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function a(){(0,e.default)(this,a),this.shaderModules={},this.defaultShaderModules=[]}return(0,r.default)(a,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"getDefaultShaderModules",value:function(){return this.defaultShaderModules}},{key:"registerShaderModules",value:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,t=void 0!==r&&r,u=!0,a=!1,s=void 0;try{for(var l,d=e[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){var n=l.value;this._registerShaderModule(n,t)}}catch(o){a=!0,s=o}finally{try{u||null==d.return||d.return()}finally{if(a)throw s}}}},{key:"getShaderModule",value:function(e){if(e instanceof t.default)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var r=this.shaderModules[e];return r||(0,u.assert)(!1,"Unknown shader module ".concat(e)),r}},{key:"resolveModules",value:function(e){var r=this;return e.map(function(e){return r.getShaderModule(e)})}},{key:"_registerShaderModule",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof t.default)return e;if((0,u.assert)(e.name,"shader module has no name"),this.shaderModules[e.name]&&!r)throw new Error("shader module ".concat(e.name," already registered"));return(e=new t.default(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),a}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./shader-module":"8X8l","../utils":"JUP5"}],"vIC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDefaultShaderModules=o,exports.getDefaultShaderModules=n,exports.registerShaderModules=l,exports.resolveModules=u,exports.getShaderModule=a,exports.TEST_EXPORTS=void 0;var e=r(require("./shader-module-registry"));function r(e){return e&&e.__esModule?e:{default:e}}var t=new e.default;function o(e){t.setDefaultShaderModules(e)}function n(){return t.getDefaultShaderModules()}function l(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,o=void 0!==r&&r;t.registerShaderModules(e,{ignoreMultipleRegistrations:o})}function u(e){return e=e.concat(t.defaultShaderModules),d(e=t.resolveModules(e))}function a(e){return t.getShaderModule(e)}function d(e){var r={},t={};return i({modules:e,level:0,moduleMap:r,moduleDepth:t}),Object.keys(t).sort(function(e,r){return t[r]-t[e]}).map(function(e){return r[e]})}function i(e){var r=e.modules,t=e.level,o=e.moduleMap,n=e.moduleDepth;if(t>=5)throw new Error("Possible loop in shader dependency graph");var l=!0,u=!1,a=void 0;try{for(var d,s=r[Symbol.iterator]();!(l=(d=s.next()).done);l=!0){var f=d.value;o[f.name]=f,(void 0===n[f.name]||n[f.name]<t)&&(n[f.name]=t)}}catch(S){u=!0,a=S}finally{try{l||null==s.return||s.return()}finally{if(u)throw a}}var p=!0,v=!1,c=void 0;try{for(var h,M=r[Symbol.iterator]();!(p=(h=M.next()).done);p=!0){var m=h.value;m.dependencies&&i({modules:m.dependencies,level:t+1,moduleMap:o,moduleDepth:n})}}catch(S){v=!0,c=S}finally{try{p||null==M.return||M.return()}finally{if(v)throw c}}}var s={getShaderDependencies:d,getDependencyGraph:i};exports.TEST_EXPORTS=s;
},{"./shader-module-registry":"QuIY"}],"+A8g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAGMENT_SHADER=exports.VERTEX_SHADER=void 0;var e="vs";exports.VERTEX_SHADER=e;var r="fs";exports.FRAGMENT_SHADER=r;
},{}],"w4sN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextInfo=c,exports.canCompileGLGSExtension=f,exports.hasFeatures=h,exports.FEATURES=void 0;var e=t(require("./is-old-ie")),r=t(require("./assert"));function t(e){return e&&e.__esModule?e:{default:e}}var a=7936,n=7937,o=7938,i=35724,u={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},d={};function s(e){return Boolean(e&&2===e._version)}function c(e){var r=e.getExtension("WEBGL_debug_renderer_info"),t=e.getParameter(r&&r.UNMASKED_VENDOR_WEBGL||a),u=e.getParameter(r&&r.UNMASKED_RENDERER_WEBGL||n);return{gpuVendor:E(t,u),vendor:t,renderer:u,version:e.getParameter(o),shadingLanguageVersion:e.getParameter(i)}}function E(e,r){return e.match(/NVIDIA/i)||r.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||r.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||r.match(/AMD/i)||e.match(/ATI/i)||r.match(/ATI/i)?"AMD":"UNKNOWN GPU"}exports.FEATURES=d,Object.keys(u).forEach(function(e){d[e]=e});var _={};function f(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=u[a];if((0,r.default)(o,a),!(0,e.default)(n))return!0;if(a in _)return _[a];var i=o[0],d=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(d,"\nvoid main(void) {}"),c=t.createShader(35633);t.shaderSource(c,s),t.compileShader(c);var E=t.getShaderParameter(c,35713);return t.deleteShader(c),_[a]=E,E}function v(e,t){var a=u[t];(0,r.default)(a,t);var n=s(e)&&a[1]||a[0],o="string"==typeof n?Boolean(e.getExtension(n)):n;return(0,r.default)(!1===o||!0===o),o}function h(e,r){return(r=Array.isArray(r)?r:[r]).every(function(r){return v(e,r)})}
},{"./is-old-ie":"8tGt","./assert":"0fG4"}],"iiHz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlatformShaderDefines=n,exports.getVersionDefines=t;var e=require("../utils/webgl-info");function n(n){switch((0,e.getContextInfo)(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function t(n,t,i){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_DERIVATIVES)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DATA)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}
},{"../utils/webgl-info":"w4sN"}],"qukd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MODULE_INJECTORS_FS=exports.MODULE_INJECTORS_VS=void 0;var o="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n";exports.MODULE_INJECTORS_VS=o;var r="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n";exports.MODULE_INJECTORS_FS=r;
},{}],"VTdi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f,exports.combineInjects=E,exports.DECLARATION_INJECT_MARKER=void 0;var e,r=c(require("@babel/runtime/helpers/esm/defineProperty")),n=require("../modules/module-injectors"),t=require("./constants"),a=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}var o=(e={},(0,r.default)(e,t.VERTEX_SHADER,n.MODULE_INJECTORS_VS),(0,r.default)(e,t.FRAGMENT_SHADER,n.MODULE_INJECTORS_FS),e),s="__LUMA_INJECT_DECLARATIONS__";exports.DECLARATION_INJECT_MARKER=s;var u=/void main\s*\([^)]*\)\s*\{\n?/,i=/}\n?[^{}]*$/,l=[];function f(e,r,n,a){var c=r===t.VERTEX_SHADER,f=function(r){var t=n[r];t.sort(function(e,r){return e.order-r.order}),l.length=t.length;for(var a=0,o=t.length;a<o;++a)l[a]=t[a].injection;var f="".concat(l.join("\n"),"\n");switch(r){case"vs:#decl":c&&(e=e.replace(s,f));break;case"vs:#main-start":c&&(e=e.replace(u,function(e){return e+f}));break;case"vs:#main-end":c&&(e=e.replace(i,function(e){return f+e}));break;case"fs:#decl":c||(e=e.replace(s,f));break;case"fs:#main-start":c||(e=e.replace(u,function(e){return e+f}));break;case"fs:#main-end":c||(e=e.replace(i,function(e){return f+e}));break;default:e=e.replace(r,function(e){return e+f})}};for(var E in n)f(E);return e=e.replace(s,""),a&&(e=e.replace(/\}\s*$/,function(e){return e+o[r]})),e}function E(e){var r={};return(0,a.assert)(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var n in e)r[n]=r[n]?"".concat(r[n],"\n").concat(e[n]):e[n]}),r}
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","../modules/module-injectors":"qukd","./constants":"+A8g","../utils":"JUP5"}],"aMx+":[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.createShaderHook=E,exports.createModuleInjection=g,exports.assembleShaders=m;var r,n,t=f(require("@babel/runtime/helpers/esm/slicedToArray")),o=f(require("@babel/runtime/helpers/esm/defineProperty")),a=require("./constants"),i=require("./resolve-modules"),c=require("./platform-defines"),u=l(require("./inject-shader")),s=require("../utils");function l(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};t.get||t.set?Object.defineProperty(r,n,t):r[n]=e[n]}return r.default=e,r}function f(e){return e&&e.__esModule?e:{default:e}}var d="\n\n".concat(u.DECLARATION_INJECT_MARKER,"\n\n"),v=(r={},(0,o.default)(r,a.VERTEX_SHADER,"vertex"),(0,o.default)(r,a.FRAGMENT_SHADER,"fragment"),r),p=(n={},(0,o.default)(n,a.VERTEX_SHADER,{}),(0,o.default)(n,a.FRAGMENT_SHADER,{}),n),y={},h="precision highp float;\n\n";function E(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e=e.trim()).split(":"),o=(0,t.default)(n,2),a=o[0],i=o[1],c=e.replace(/\(.+/,"");p[a][c]=Object.assign(r,{signature:i})}function g(e,r){var n=r.hook,t=r.injection,o=r.order,a=void 0===o?0:o,i=n.slice(0,2);y[e]=y[e]||{},y[e][i]=y[e][i]||{},(0,s.assert)(!y[e][i][n],"Module injection already created"),y[e][i][n]={injection:t,order:a}}function m(e,r){var n=r.vs,t=r.fs,o=(0,i.resolveModules)(r.modules||[]);return{gl:e,vs:b(e,Object.assign({},r,{source:n,type:a.VERTEX_SHADER,modules:o})),fs:b(e,Object.assign({},r,{source:t,type:a.FRAGMENT_SHADER,modules:o})),getUniforms:j(o),modules:A(o)}}function b(e,r){var n=r.id,t=r.source,o=r.type,i=r.modules,l=r.defines,f=void 0===l?{}:l,v=r.inject,p=void 0===v?{}:v,E=r.prologue,g=void 0===E||E,m=r.log;(0,s.assert)("string"==typeof t,"shader source must be a string");var b=o===a.VERTEX_SHADER,j=t.split("\n"),A=100,D="",M=t;0===j[0].indexOf("#version ")&&(A=300,D=j[0],M=j.slice(1).join("\n"));var T={};i.forEach(function(e){Object.assign(T,e.getDefines())}),Object.assign(T,f);var x=g?"".concat(D,"\n").concat(S({id:n,source:t,type:o}),"\n").concat(R({type:o}),"\n").concat((0,c.getPlatformShaderDefines)(e),"\n").concat((0,c.getVersionDefines)(e,A,!b),"\n").concat(_(T),"\n").concat(b?"":h,"\n"):"".concat(D,"\n"),H=!1,P={},N={};for(var w in p){var q="string"==typeof p[w]?{injection:p[w],order:0}:p[w];w.match(/^(v|f)s:/)?"#"===w[3]?N[w]=[q]:P[w]=[q]:N[w]=[q]}var I=!0,C=!1,F=void 0;try{for(var V,k=i[Symbol.iterator]();!(I=(V=k.next()).done);I=!0){var U=V.value;switch(U.name){case"inject":H=!0;break;default:if(m&&U.checkDeprecations(M,m),x+=U.getModuleSource(o,A),y[U.name]){var X=y[U.name][o];for(var G in X)G.match(/^(v|f)s:#/)?(N[G]=N[G]||[],N[G].push(X[G])):(P[G]=P[G]||[],P[G].push(X[G]))}}}}catch(L){C=!0,F=L}finally{try{I||null==k.return||k.return()}finally{if(C)throw F}}return x+=d,x+=O(o,P),x+=M,x=(0,u.default)(x,o,N,H)}function j(e){return function(r){var n={},t=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var u=i.value.getUniforms(r,n);Object.assign(n,u)}}catch(s){o=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}return n}}function A(e){var r={},n=!0,t=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var u=a.value,s=(0,i.getShaderModule)(u);r[u]=s}}catch(l){t=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(t)throw o}}return r}function R(e){var r=e.type;return"\n#define SHADER_TYPE_".concat(v[r].toUpperCase(),"\n")}function S(e){var r=e.id,n=e.source,t=e.type;return r&&"string"==typeof r&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(r,"_").concat(v[t],"\n\n"):""}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=0,n="";for(var t in e){0===r&&(n+="\n// APPLICATION DEFINES\n"),r++;var o=e[t];(o||Number.isFinite(o))&&(n+="#define ".concat(t.toUpperCase()," ").concat(e[t],"\n"))}return 0===r&&(n+="\n"),n}function O(e,r){var n="",t=p[e];for(var o in t){var a=t[o];if(n+="void ".concat(a.signature," {\n"),a.header&&(n+="  ".concat(a.header)),r[o]){var i=r[o];i.sort(function(e,r){return e.order-r.order});var c=!0,u=!1,s=void 0;try{for(var l,f=i[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var d=l.value;n+="  ".concat(d.injection,"\n")}}catch(v){u=!0,s=v}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}a.footer&&(n+="  ".concat(a.footer)),n+="}\n"}return n}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/defineProperty":"9iDM","./constants":"+A8g","./resolve-modules":"vIC4","./platform-defines":"iiHz","./inject-shader":"VTdi","../utils":"JUP5"}],"uzoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQualifierDetails=a,exports.getPassthroughFS=u,exports.typeToChannelSuffix=o,exports.typeToChannelCount=s,exports.convertToVec4=i;var e=r(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("../utils");function r(e){return e&&e.__esModule?e:{default:e}}var n="void main() {gl_FragColor = vec4(0);}",c="#version 300 es\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}";function a(t,r){r=Array.isArray(r)?r:[r];var n=t.replace(/^\s+/,"").split(/\s+/),c=(0,e.default)(n,3),a=c[0],u=c[1],o=c[2];return r.includes(a)&&u&&o?{qualifier:a,type:u,name:o.split(";")[0]}:null}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,r=void 0===t?100:t,a=e.input,u=e.inputType,o=e.output;if(!a)return 300===r?c:n;var s=i(a,u);return 300===r?"#version 300 es\nin ".concat(u," ").concat(a,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(s,";\n}"):"varying ".concat(u," ").concat(a,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}function o(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,t.assert)(!1),null}}function s(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,t.assert)(!1),null}}function i(e,r){switch(r){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return(0,t.assert)(!1),null}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","../utils":"JUP5"}],"rSwV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",t={name:"fp32",vs:n,fs:null};exports.default=t;
},{}],"MlO6":[function(require,module,exports) {
"use strict";function r(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.fround(r),n=r-o;return t[e]=o,t[e+1]=n,t}function t(r){return r-Math.fround(r)}function e(t){for(var e=new Float32Array(32),o=0;o<4;++o)for(var n=0;n<4;++n){var f=4*o+n;r(t[4*n+o],e,2*f)}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=r,exports.fp64LowPart=t,exports.fp64ifyMatrix4=e;
},{}],"ObaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";exports.default=n;
},{}],"yYYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n";exports.default=n;
},{}],"mLAB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp64ify",{enumerable:!0,get:function(){return e.fp64ify}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return e.fp64LowPart}}),Object.defineProperty(exports,"fp64ifyMatrix4",{enumerable:!0,get:function(){return e.fp64ifyMatrix4}}),exports.fp64fs=exports.fp64arithmetic=exports.default=void 0;var e=require("./fp64-utils"),t=f(require("./fp64-arithmetic.glsl")),r=f(require("./fp64-functions.glsl"));function f(e){return e&&e.__esModule?e:{default:e}}var i="".concat(t.default,"\n").concat(r.default),n={ONE:1};function p(){return Object.assign({},n)}var a={name:"fp64",vs:i,fs:null,fp64ify:e.fp64ify,fp64LowPart:e.fp64LowPart,fp64ifyMatrix4:e.fp64ifyMatrix4,getUniforms:p};exports.default=a;var o={name:"fp64-arithmetic",vs:"".concat(t.default),fs:null};exports.fp64arithmetic=o;var u={name:"fp64-fs",vs:null,fs:i};exports.fp64fs=u;
},{"./fp64-utils":"MlO6","./fp64-arithmetic.glsl":"ObaP","./fp64-functions.glsl":"yYYN"}],"06zj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("math.gl"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==i.modelMatrix&&(r.modelMatrix=i.modelMatrix),void 0!==i.viewMatrix&&(r.viewMatrix=i.viewMatrix),void 0!==i.projectionMatrix&&(r.projectionMatrix=i.projectionMatrix),void 0!==i.cameraPositionWorld&&(r.cameraPositionWorld=i.cameraPositionWorld),void 0===i.projectionMatrix&&void 0===i.viewMatrix||(r.viewProjectionMatrix=new o.Matrix4(i.projectionMatrix).multiplyRight(i.viewMatrix)),r}var t="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",e="".concat(t,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),c="\n".concat(t),a={name:"project",getUniforms:r,vs:e,fs:c};exports.default=a;
},{"math.gl":"4xAa"}],"eBHh":[function(require,module,exports) {
"use strict";function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.fogEnable,e=void 0!==r&&r,f=o.fogColor,n=void 0===f?[.5,.5,.5]:f,g=o.fogNear,l=void 0===g?1:g,a=o.fogFar;return{fog_uEnable:e,fog_uColor:n,fog_uNear:l,fog_uFar:void 0===a?100:a}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r="\nuniform bool fog_uEnable;\nuniform vec3 fog_uColor;\nuniform float fog_uNear;\nuniform float fog_uFar;\nvec4 fog_filterColor(vec4 color) {\n  if (fog_uEnable) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fog_uNear, fog_uFar, depth);\n    return mix(color, vec4(fog_uColor, gl_FragColor.w), fogFactor);\n  } else {\n    return color;\n  }\n}\n\n",e={name:"fog",getUniforms:o,vs:"",fs:r};exports.default=e;
},{}],"HCaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";exports.default=n;
},{}],"ob8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./lights.glsl"));function i(t){return t&&t.__esModule?t:{default:t}}var n={name:"lights",vs:t.default,fs:t.default,getUniforms:g,defines:{MAX_LIGHTS:3}};exports.default=n;var e={};function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.color,n=void 0===i?[0,0,0]:i,e=t.intensity,o=void 0===e?1:e;return n.map(function(t){return t*o/255})}function r(t){var i=t.ambientLight,n=t.pointLights,e=void 0===n?[]:n,r=t.directionalLights,g=void 0===r?[]:r,a={};return a["lighting_uAmbientLight.color"]=i?o(i):[0,0,0],e.forEach(function(t,i){a["lighting_uPointLight[".concat(i,"].color")]=o(t),a["lighting_uPointLight[".concat(i,"].position")]=t.position,a["lighting_uPointLight[".concat(i,"].attenuation")]=t.attenuation}),a.lighting_uPointLightCount=e.length,g.forEach(function(t,i){a["lighting_uDirectionalLight[".concat(i,"].color")]=o(t),a["lighting_uDirectionalLight[".concat(i,"].direction")]=t.direction}),a.lighting_uDirectionalLightCount=g.length,a}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;if("lightSources"in t){var i=t.lightSources||{},n=i.ambientLight,o=i.pointLights,a=i.directionalLights;return n||o&&o.length>0||a&&a.length>0?Object.assign({},r({ambientLight:n,pointLights:o,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var l={pointLights:[],directionalLights:[]},h=!0,u=!1,c=void 0;try{for(var s,d=(t.lights||[])[Symbol.iterator]();!(h=(s=d.next()).done);h=!0){var f=s.value;switch(f.type){case"ambient":l.ambientLight=f;break;case"directional":l.directionalLights.push(f);break;case"point":l.pointLights.push(f)}}}catch(L){u=!0,c=L}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return g({lightSources:l})}return{}}
},{"./lights.glsl":"HCaU"}],"VcTg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../project/project"));function r(e){return e&&e.__esModule?e:{default:e}}var t=new Float32Array([1,1,2]),i={lightDirection:t};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r={};return e.lightDirection&&(r.dirlight_uLightDirection=e.lightDirection),r}var n=null,l="uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",c={name:"dirlight",vs:n,fs:l,getUniforms:o,dependencies:[e.default]};exports.default=c;
},{"../project/project":"06zj"}],"flfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=new Uint8Array([0,255,255,255]),e={pickingSelectedColor:null,pickingHighlightColor:i,pickingThreshold:1,pickingActive:!1};function o(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o={};if(void 0!==i.pickingSelectedColor)if(null===i.pickingSelectedColor)o.picking_uSelectedColorValid=0;else{var n=[i.pickingSelectedColor[0],i.pickingSelectedColor[1],i.pickingSelectedColor[2]];o.picking_uSelectedColorValid=1,o.picking_uSelectedColor=n}return void 0!==i.pickingHighlightColor&&(o.picking_uHighlightColor=i.pickingHighlightColor),void 0!==i.pickingThreshold&&(o.picking_uThreshold=i.pickingThreshold),void 0!==i.pickingActive&&(o.picking_uActive=i.pickingActive?1:0),o}var n="uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",l="uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",c={name:"picking",vs:n,fs:l,getUniforms:o};exports.default=c;
},{}],"P+Yq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={diffuseTexture:null,diffuseColor:[.5,.5,.5,1]};function u(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,f={};return void 0!==u.diffuseTexture&&(f.diffuse_uHasTexture=Boolean(u.diffuseTexture),f.diffuse_uTexture=u.diffuseTexture),void 0!==u.diffuseColor&&(f.diffuse_uColor=u.diffuseColor),f}var f="out vec2 diffuse_vTexCoord;\nvoid diffuse_setTextureCoordinate(vec2 uv) {\n  diffuse_vTexCoord = uv;\n}\n",o="uniform vec4 diffuse_uColor;\nuniform bool diffuse_uHasTexture;\nuniform sampler2D diffuse_uTexture;\n\nin vec2 diffuse_vTexCoord;\n\n\n\nvec4 diffuse_getColor() {\n  vec2 texCoord = diffuse_vTexCoord;\n  return diffuse_uHasTexture ?\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\n    diffuse_uColor;\n}\n\nvec4 diffuse_filterColor(vec4 color) {\n  return diffuse_getColor();\n}\n",r={name:"diffuse",getUniforms:u,vs:f,fs:o};exports.default=r;
},{}],"bRsz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";exports.default=i;
},{}],"96VX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phonglighting=exports.gouraudlighting=void 0;var e=n(require("../lights/lights")),i=n(require("./phong-lighting.glsl"));function n(e){return e&&e.__esModule?e:{default:e}}var t={name:"gouraud-lighting",dependencies:[e.default],vs:i.default,defines:{LIGHTING_VERTEX:1},getUniforms:l};exports.gouraudlighting=t;var r={name:"phong-lighting",dependencies:[e.default],fs:i.default,defines:{LIGHTING_FRAGMENT:1},getUniforms:l};exports.phonglighting=r;var g={};function u(e){var i={};return i.lighting_uAmbient=e.ambient,i.lighting_uDiffuse=e.diffuse,i.lighting_uShininess=e.shininess,i.lighting_uSpecularColor=e.specularColor.map(function(e){return e/255}),i}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(!("material"in e))return{};var i=e.material;return i?u(i):{lighting_uEnabled:!1}}
},{"../lights/lights":"ob8R","./phong-lighting.glsl":"bRsz"}],"ckG0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n";exports.default=t;
},{}],"ETa1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./project2.vertex.glsl"));function t(e){return e&&e.__esModule?e:{default:e}}var r={name:"project2",vs:e.default,fs:e.default};exports.default=r;
},{"./project2.vertex.glsl":"ckG0"}],"tuD/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="varying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n";exports.default=n;
},{}],"VAQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n\n\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();\n  vec3 v = normalize(u_Camera - pbr_vPosition);\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0,\n    NdotV,\n    0.0,\n    0.0,\n    0.0,\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n";exports.default=n;
},{}],"rSII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("../project2/project2")),r=l(require("../lights/lights")),t=l(require("./pbr-vertex.glsl")),u=l(require("./pbr-fragment.glsl"));function l(e){return e&&e.__esModule?e:{default:e}}var s={name:"pbr",vs:t.default,fs:u.default,defines:{LIGHTING_FRAGMENT:1},dependencies:[e.default,r.default]};exports.default=s;
},{"../project2/project2":"ETa1","../lights/lights":"ob8R","./pbr-vertex.glsl":"tuD/","./pbr-fragment.glsl":"VAQj"}],"hgD9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",r={name:"transform",vs:e,fs:null};exports.default=r;
},{}],"wMsA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"fog",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"diffuse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return p.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return p.phonglighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return l.default}});var e=d(require("./fp32/fp32")),r=d(require("./fp64/fp64")),t=d(require("./project/project")),n=d(require("./fog/fog")),u=d(require("./lights/lights")),i=d(require("./dirlight/dirlight")),o=d(require("./picking/picking")),f=d(require("./diffuse/diffuse")),p=require("./phong-lighting/phong-lighting"),g=d(require("./pbr/pbr")),l=d(require("./transform/transform"));function d(e){return e&&e.__esModule?e:{default:e}}
},{"./fp32/fp32":"rSwV","./fp64/fp64":"mLAB","./project/project":"06zj","./fog/fog":"eBHh","./lights/lights":"ob8R","./dirlight/dirlight":"VcTg","./picking/picking":"flfn","./diffuse/diffuse":"P+Yq","./phong-lighting/phong-lighting":"96VX","./pbr/pbr":"rSII","./transform/transform":"hgD9"}],"Pzgo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={MODULAR_SHADERS:!0,registerShaderModules:!0,setDefaultShaderModules:!0,getDefaultShaderModules:!0,assembleShaders:!0,createShaderHook:!0,createModuleInjection:!0,combineInjects:!0,normalizeShaderModule:!0,getQualifierDetails:!0,getPassthroughFS:!0,typeToChannelSuffix:!0,typeToChannelCount:!0,convertToVec4:!0};Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return n.registerShaderModules}}),Object.defineProperty(exports,"setDefaultShaderModules",{enumerable:!0,get:function(){return n.setDefaultShaderModules}}),Object.defineProperty(exports,"getDefaultShaderModules",{enumerable:!0,get:function(){return n.getDefaultShaderModules}}),Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return o.assembleShaders}}),Object.defineProperty(exports,"createShaderHook",{enumerable:!0,get:function(){return o.createShaderHook}}),Object.defineProperty(exports,"createModuleInjection",{enumerable:!0,get:function(){return o.createModuleInjection}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return u.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return a.normalizeShaderModule}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return s.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return s.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return s.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return s.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return s.convertToVec4}}),exports.MODULAR_SHADERS=void 0;var r=i(require("./shaders/modular-vertex.glsl")),t=i(require("./shaders/modular-fragment.glsl")),n=require("./lib/resolve-modules"),o=require("./lib/assemble-shaders"),u=require("./lib/inject-shader"),a=require("./lib/shader-module"),s=require("./utils/shader-utils"),l=require("./modules");function i(e){return e&&e.__esModule?e:{default:e}}Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return l[r]}}))});var d={vs:r.default,fs:t.default,uniforms:{}};exports.MODULAR_SHADERS=d;
},{"./shaders/modular-vertex.glsl":"o8+G","./shaders/modular-fragment.glsl":"Ot2n","./lib/resolve-modules":"vIC4","./lib/assemble-shaders":"aMx+","./lib/inject-shader":"VTdi","./lib/shader-module":"8X8l","./utils/shader-utils":"uzoD","./modules":"wMsA"}],"Suce":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t="undefined"!=typeof window&&window.addEventListener,n=new Map,o=function(){return t&&window.__SEER_INITIALIZED__},r=function(e,t){var o=n.get(e),r=Date.now();return!!(o&&r-o<t)||(n.set(e,r),!1)},i=function(t){return function(n,o){if(!o||"object"!==(void 0===o?"undefined":e(o))||!t.has(o))return t.add(o),Object.prototype.toString.call(o).slice(8,-1).includes("Array")?Array.prototype.slice.call(o,0,20):o}},a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&o()){var a=new Set,u=JSON.stringify(n,i(a));try{window.postMessage({type:e,payload:u,source:"seer-agent"},"*")}catch(d){if(r("seer-log",2e3))return;console.log(d)}}},u=new Map,d=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,o=t.payload,r=u.get(n);r&&r.forEach(function(e){return e(o)})}},c=function(){t&&!window.__SEER_LISTENER__&&(window.addEventListener("message",d),window.__SEER_LISTENER__=!0)},s=function(){t&&window.__SEER_LISTENER__&&(window.removeEventListener("message",d),delete window.__SEER_LISTENER__)},f=function(e,n){if(t){if(!e||!n)throw new Error("Please provide a type and callback");u.has(e)||u.set(e,[]),window.__SEER_LISTENER__||c(),u.get(e).push(n)}},y=function(e){u.forEach(function(t,n){u.set(n,t.filter(function(t){return t!==e}))})},E=function(e,t){return a("LIST",{key:e,data:t})},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a("LIST_ITEM",{key:e,itemKey:t,data:n})},l=function(e,t,n,o){return a("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:o})},p=function(e,t,n){return a("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},w=function(e,t){return a("DELETE_ITEM",{key:e,itemKey:t})},m=function(e,t,n){return a("ADD_LOG",{key:e,itemKey:t,msg:n})};exports.default={send:a,throttle:r,isReady:o,list:E,listItem:_,updateItem:l,multiUpdate:p,deleteItem:w,addLog:m,listeners:u,listenFor:f,removeListener:y,init:c,clean:s};
},{}],"lv4s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOverrides=exports.setOverride=exports.removeModel=exports.logModel=exports.addModel=void 0;var e=r(require("seer")),t=require("../utils");function r(e){return e&&e.__esModule?e:{default:e}}var a={},i=function(t){a[t.id]||(a[t.id]=t,e.default.listItem("luma.gl",t.id))};exports.addModel=i;var o=function(t,r){if(e.default.isReady()&&!e.default.throttle("luma.gl:".concat(t.id),1e3)){var a=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,i=Object.assign({},t.uniforms,r);e.default.multiUpdate("luma.gl",t.id,[{path:"objects.uniforms",data:i},{path:"objects.attributes",data:a}])}};exports.logModel=o;var s=function(t){delete a[t],e.default.deleteItem("luma.gl",t)};exports.removeModel=s;var l=function e(t,r,a){t&&(r.length>1?e(t[r[0]],r.slice(1),a):t[r[0]]=a)},u=new Map,d=function(e,r,a){t.window.__SEER_INITIALIZED__&&(u.has(e)||u.set(e,new Map),u.get(e).set(r,a))};exports.setOverride=d;var n=function(e,r){if(t.window.__SEER_INITIALIZED__&&e){var a=u.get(e);a&&a.forEach(function(e,t){l(r,t,e)})}};exports.getOverrides=n,e.default.listenFor("luma.gl",function(e){var t=a[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var r=e.valuePath.slice(1);d(e.itemKey,r,e.value);var i=t.getUniforms();l(i,r,e.value),t.setUniforms(i)}});
},{"seer":"Suce","../utils":"a2N7"}],"gf0Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),i=require("@luma.gl/webgl"),r=require("@luma.gl/shadertools"),s=require("../debug/seer-integration"),a=require("../utils");function n(e){return e&&e.__esModule?e:{default:e}}var o=2,u=1e4,l=function(){function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,n),(0,a.assert)((0,i.isWebGL)(t));var s=r.id,o=void 0===s?(0,a.uid)("base-model"):s;this.id=o,this.gl=t,this.id=r.id||(0,a.uid)("Model"),this.lastLogTime=0,this.initialize(r),this._setBaseModelProps(r)}return(0,t.default)(n,[{key:"initialize",value:function(e){this.props={},this.program=this._createProgram(e),this.vertexArray=new i.VertexArray(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._setBaseModelProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings)))}},{key:"setProps",value:function(e){this._setBaseModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this.program.delete(),this.vertexArray.delete(),(0,s.removeModel)(this.id)}},{key:"isAnimated",value:function(){return this.animated}},{key:"getProgram",value:function(){return this.program}},{key:"getUniforms",value:function(){return this.program.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({},e),(0,s.getOverrides)(this.id,e),e=this._extractAnimatedUniforms(e),this.program.setUniforms(e),this}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return(0,i.clear)(this.program.gl,e),this}},{key:"drawGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,i=void 0===t?null:t,r=e.framebuffer,n=e.uniforms,o=void 0===n?{}:n,u=e.attributes,l=void 0===u?{}:u,d=e.transformFeedback,m=void 0===d?this.transformFeedback:d,h=e.parameters,f=void 0===h?{}:h,g=e.vertexArray,c=void 0===g?this.vertexArray:g,v=e.animationProps;(0,s.addModel)(this),this.setAttributes(l),this.updateModuleSettings(i),this.setUniforms(o),this._refreshAnimationProps(v);var p=this._logDrawCallStart(2),y=this.vertexArray.getDrawParams(this.props);y.isInstanced&&!this.isInstanced&&a.log.warn("Found instanced attributes on non-instanced model",this.id)();var b=y.isIndexed,_=y.indexType,U=y.indexOffset,M=this.isInstanced,k=this.instanceCount,A=function(){},E=this.props,Q=E.onBeforeRender,P=void 0===Q?A:Q,F=E.onAfterRender,x=void 0===F?A:F;P(),this._timerQueryStart();var D=this.program.draw(Object.assign({},e,{logPriority:p,uniforms:null,framebuffer:r,parameters:f,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:m,isIndexed:b,indexType:_,isInstanced:M,instanceCount:k,offset:b?U:0}));return this._timerQueryEnd(),x(),this._logDrawCallEnd(p,c,r),D}},{key:"_setBaseModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&i.Query.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&a.log.warn("GPU timer not supported")()),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"_createProgram",value:function(e){var t=e.vs,s=void 0===t?null:t,n=e.fs,o=void 0===n?null:n,u=e.modules,l=void 0===u?null:u,d=e.defines,m=void 0===d?{}:d,h=e.inject,f=void 0===h?{}:h,g=e.shaderCache,c=void 0===g?null:g,v=e.varyings,p=void 0===v?null:v,y=e.bufferMode,b=void 0===y?35981:y,_=e.program,U=void 0===_?null:_;this.getModuleUniforms=function(e){};var M=this.id;if(!U){s=s||r.MODULAR_SHADERS.vs,o=o||r.MODULAR_SHADERS.fs;var k=(0,r.assembleShaders)(this.gl,{vs:s,fs:o,modules:l,inject:f,defines:m,log:a.log});s=k.vs,o=k.fs,U=c?c.getProgram(this.gl,{id:M,vs:s,fs:o}):new i.Program(this.gl,{id:M,vs:s,fs:o,varyings:p,bufferMode:b}),this.getModuleUniforms=k.getUniforms||function(e){}}return(0,a.assert)(U instanceof i.Program,"Model needs a program"),U}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var i in this.animatedUniforms){var r=this.animatedUniforms[i];t[i]=r(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var i in e){var r=e[i];"function"==typeof r?(this.animatedUniforms[i]=r,t=!0):delete this.animatedUniforms[i]}if(this.animated=!(0,a.isObjectEmpty)(this.animatedUniforms),!t)return e;var s={};for(var n in e)this.animatedUniforms[n]||(s[n]=e[n]);return s}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new i.Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,a.log.log(o,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:u;if(!(a.log.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),a.log.group(o,">>> DRAWING MODEL ".concat(this.id),{collapsed:a.log.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,r,n){if(void 0!==e){var u=(0,i.getDebugTableForVertexArray)({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),l=(0,i.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),d=l.table,m=l.unusedTable,h=l.unusedCount,f=(0,i.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),g=f.table;f.count>0&&a.log.log("MISSING UNIFORMS",Object.keys(g))(),h>0&&a.log.log("UNUSED UNIFORMS",Object.keys(m))();var c=(0,i.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);a.log.table(e,u)(),a.log.table(e,d)(),a.log.table(e+1,c)(),(0,s.logModel)(this,r),n&&n.log({priority:o,message:"Rendered to ".concat(n.id)}),a.log.groupEnd(o,">>> DRAWING MODEL ".concat(this.id))()}}}]),n}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd","@luma.gl/shadertools":"Pzgo","../debug/seer-integration":"lv4s","../utils":"a2N7"}],"X9XX":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/defineProperty")),t=h(require("@babel/runtime/helpers/esm/objectSpread")),r=h(require("@babel/runtime/helpers/esm/classCallCheck")),s=h(require("@babel/runtime/helpers/esm/createClass")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=h(require("@babel/runtime/helpers/esm/get")),a=h(require("@babel/runtime/helpers/esm/inherits")),o=require("@luma.gl/webgl"),d=require("./model-utils"),l=h(require("./base-model")),f=require("../utils");function h(e){return e&&e.__esModule?e:{default:e}}var c="Model needs drawMode and vertexCount",m=function(l){function h(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,h);var u=s.id,a=void 0===u?(0,f.uid)("model"):u;return(0,i.default)(this,(0,n.default)(h).call(this,e,(0,t.default)({},s,{id:a})))}return(0,a.default)(h,l),(0,s.default)(h,[{key:"initialize",value:function(e){(0,u.default)((0,n.default)(h.prototype),"initialize",this).call(this,e),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced,this._setModelProps(e),this.geometry={},(0,f.assert)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),c)}},{key:"setProps",value:function(e){(0,u.default)((0,n.default)(h.prototype),"setProps",this).call(this,e),this._setModelProps(e)}},{key:"delete",value:function(){(0,u.default)((0,n.default)(h.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return(0,f.assert)(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return(0,f.assert)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=(0,d.getBuffersFromGeometry)(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,f.isObjectEmpty)(e))return this;var t={};for(var r in e){var s=e[r];t[r]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(t),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(e)}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.discard,s=void 0===r||r,i=t.feedbackBuffers,n=t.unbindModels,u=void 0===n?[]:n,a=t.parameters;i&&this._setFeedbackBuffers(i),s&&(a=Object.assign({},a,(0,e.default)({},35977,s))),u.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},t,{parameters:a}))}finally{u.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.log.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof o.Buffer&&t.delete()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){(0,f.assert)(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);this.program.setUniforms(t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,f.isObjectEmpty)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new o.TransformFeedback(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}}]),h}(l.default);exports.default=m;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/webgl":"50Kd","./model-utils":"StUL","./base-model":"gf0Q","../utils":"a2N7"}],"iUbT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateForTextures=c,exports.getSizeUniforms=i,exports.getVaryingType=u,exports.processAttributeDefinition=l;var e=require("../utils"),t=require("@luma.gl/shadertools"),r="transform_uSampler_",n="transform_uSize_",a="transform_position";function c(r){var c=r.vs,i=r.sourceTextureMap,o=r.targetTextureVarying,s=r.targetTexture,f=Object.keys(i).length,p=null,m={},v=c,g={};if(f>0||o){var x=v.split("\n"),T=x.slice();if(x.forEach(function(e,r,n){if(f>0){var a=l(e,i);if(a){var c=a.updatedLine,s=a.inject;T[r]=c,g=(0,t.combineInjects)([g,s]),Object.assign(m,a.samplerTextureMap),f--}}o&&!p&&(p=u(e,o))}),o){(0,e.assert)(s);var d="".concat(n).concat(o),y={"vs:#decl":"uniform vec2 ".concat(d,";\n"),"vs:#main-start":"     vec2 ".concat(a," = transform_getPos(").concat(d,");\n     gl_Position = vec4(").concat(a,", 0, 1.);\n")};g=(0,t.combineInjects)([g,y])}v=T.join("\n")}return{vs:v,targetTextureType:p,inject:g,samplerTextureMap:m}}function i(e){var t,r,a=e.sourceTextureMap,c=e.targetTextureVarying,i=e.targetTexture,o={};for(var s in c&&(t=i.width,r=i.height,o["".concat(n).concat(c)]=[t,r]),a){var u=a[s];t=u.width,r=u.height,o["".concat(n).concat(s)]=[t,r]}return o}function o(e){return(0,t.getQualifierDetails)(e,["attribute","in"])}function s(e){var t="".concat(r).concat(e),a="".concat(n).concat(e);return{samplerName:t,sizeName:a,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(a,";")}}function u(e,r){var n=(0,t.getQualifierDetails)(e,["varying","out"]);return n&&n.name===r?n.type:null}function l(e,r){var n={},a=o(e);if(!a)return null;var c=a.type,i=a.name;if(i&&r[i]){var u="// ".concat(e," => Replaced by Transform with a sampler"),l=s(i),f=l.samplerName,p=l.sizeName,m=l.uniformDeclerations,v=(0,t.typeToChannelSuffix)(c),g="  ".concat(c," ").concat(i," = transform_getInput(").concat(f,", ").concat(p,").").concat(v,";\n");return n[f]=i,{updatedLine:u,inject:{"vs:#decl":m,"vs:#main-start":g},samplerTextureMap:n}}return null}
},{"../utils":"a2N7","@luma.gl/shadertools":"Pzgo"}],"x+Mg":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/createClass")),s=h(require("@babel/runtime/helpers/esm/defineProperty")),u=require("@luma.gl/shadertools"),a=require("@luma.gl/webgl"),i=require("../utils"),f=h(require("./model")),n=require("./transform-shader-utils");function h(e){return e&&e.__esModule?e:{default:e}}var o=(e={},(0,s.default)(e,10241,9728),(0,s.default)(e,10240,9728),(0,s.default)(e,10242,33071),(0,s.default)(e,10243,33071),e),c="transform_output",d=function(){function e(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,e),(0,i.assert)((0,a.isWebGL2)(r)),this.gl=r,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this.resources={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(s),Object.seal(this)}return(0,r.default)(e,null,[{key:"isSupported",value:function(e){return(0,a.isWebGL2)(e)}}]),(0,r.default)(e,[{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete();this.model.delete()}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.feedbackBuffers[this.currentIndex][e]:null;return t?t instanceof a.Buffer?t:t.buffer:null}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,r=void 0===t?null:t,s=e.packed,f=void 0!==s&&s,n=this.getBuffer(r);if(n)return n.getData();(0,i.assert)(!r||r===this.targetTextureVarying);var h=(0,a.readPixelsToArray)(this.framebuffers[this.currentIndex]);if(!f)return h;for(var o=h.constructor,c=(0,u.typeToChannelCount)(this.targetTextureType),d=new o(h.length*c/4),l=0,g=0;g<h.length;g+=4)for(var x=0;x<c;x++)d[l++]=h[g+x];return d}},{key:"getFramebuffer",value:function(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function(){var e={},t=this.currentIndex,r=Object.assign({},this.sourceBuffers[t]);if(this.hasSourceTextures||this.targetTextureVarying){for(var s in r.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var u=this.samplerTextureMap[s];e[s]=this.sourceTextures[t][u]}this._setSourceTextureParameters();var a=(0,n.getSizeUniforms)({sourceTextureMap:this.sourceTextures[t],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[t]});Object.assign(e,a)}return{attributes:r,uniforms:e}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputs(),r=t.attributes,s=t.uniforms;Object.assign(s,e.uniforms);var u=Object.assign({},e.parameters),a=e.clearRenderTarget,f=void 0===a||a,n=null,h=!0;this.renderingToTexture&&(h=!1,n=this.framebuffers[this.currentIndex],(0,i.assert)(n),u.viewport=[0,0,n.width,n.height],f&&n.clear({color:!0})),this.model.setAttributes(r),this.model.transform(Object.assign({},e,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:s,discard:h,framebuffer:n,parameters:u}))}},{key:"swapBuffers",value:function(){i.log.deprecated("swapBuffers()","swap()")(),this.swap()}},{key:"swap",value:function(){(0,i.assert)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementCount&&this._setElementCount(e.elementCount);var t=e.sourceBuffers,r=void 0===t?null:t,s=e.feedbackBuffers,u=void 0===s?null:s,f=this.currentIndex;if(r||u){for(var n in u)(0,i.assert)(u[n]instanceof a.Buffer||u[n].buffer instanceof a.Buffer);Object.assign(this.sourceBuffers[f],r),Object.assign(this.feedbackBuffers[f],u),this._createFeedbackBuffers({feedbackBuffers:u}),this.transformFeedbacks[f]&&this.transformFeedbacks[f].setBuffers(this.feedbackBuffers[f]),this._setupSwapBuffers()}var h=e._sourceTextures,o=e._targetTexture;(h||o)&&(Object.assign(this.sourceTextures[f],h),this._updateTargetTexture(o||this._targetRefTexName,f),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex;for(var t in this.sourceTextures[e])this.sourceTextures[e][t].setParameters(o)}},{key:"_setElementCount",value:function(e){this.elementCount!==e&&(this.elementCount<e&&this._updateElementIDBuffer(e),this.model.setVertexCount(e),this.elementCount=e)}},{key:"_updateTargetTexture",value:function(e,t){var r=this._buildTargetTexture(e,t);r&&(this.targetTextures[t]=r,this.framebuffers[t]&&(this.framebuffers[t].update({attachments:(0,s.default)({},36064,this.targetTextures[t]),resizeAttachments:!1}),this.framebuffers[t].resize({width:r.width,height:r.height})))}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._validateProps(e),r=t.feedbackBuffers,s=t.feedbackMap,u=e.sourceBuffers,a=e.varyings,f=e._targetTexture,n=e._targetTextureVarying,h=e._swapTexture,o=a;s&&!Array.isArray(a)&&(o=Object.values(s)),this.varyingsArray=o,this.feedbackMap=s,this._swapTexture=h,f&&(this.targetTextureVarying=n,this.renderingToTexture=!0,(0,i.assert)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:u,feedbackBuffers:r}),this._setupTextures(e),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},e,{id:e.id||"transform-model",drawMode:e.drawMode||0,varyings:o}))}},{key:"_validateProps",value:function(e){var t=e.feedbackBuffers,r=e.feedbackMap,s=e.destinationBuffers,u=e.sourceDestinationMap;s&&(i.log.deprecated("destinationBuffers","feedbackBuffers")(),t=t||s),u&&(i.log.deprecated("sourceDestinationMap","feedbackMap")(),r=r||u);var f=e.vs,n=e.elementCount,h=e.varyings,o=e._sourceTextures,c=e._targetTexture,d=e._targetTextureVarying,l=e._swapTexture;for(var g in(0,i.assert)(f&&(h||r||c)&&n),t||{})(0,i.assert)(t[g]instanceof a.Buffer||t[g].buffer instanceof a.Buffer);for(var x in o||{})(0,i.assert)(o[x]instanceof a.Texture2D);return(0,i.assert)(!c||d),(0,i.assert)(!l||o[l]),{feedbackBuffers:t,feedbackMap:r}}},{key:"_setupBuffers",value:function(e){var t=e.sourceBuffers,r=void 0===t?null:t,s=e.feedbackBuffers,u=void 0===s?null:s;this.sourceBuffers[0]=Object.assign({},r),this.feedbackBuffers[0]=Object.assign({},u),this._createFeedbackBuffers({feedbackBuffers:u}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,r=e._targetTexture;if(this.sourceTextures[0]=Object.assign({},t),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var s=this._buildTargetTexture(r,0);(0,i.assert)(s),this.targetTextures[0]=s,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function(e,t){var r;if(e instanceof a.Texture2D)return e;var u=this.sourceTextures[0][e];if(!u)return null;this._targetRefTexName=e;var i=(0,a.cloneTextureFrom)(u,{parameters:(r={},(0,s.default)(r,10241,9728),(0,s.default)(r,10240,9728),(0,s.default)(r,10242,33071),(0,s.default)(r,10243,33071),r),pixelStore:(0,s.default)({},37440,!1)}),f="target-texture-".concat(t);return this.resources[f]&&this.resources[f].delete(),this.resources[f]=i,i}},{key:"_createFeedbackBuffers",value:function(e){var t=e.feedbackBuffers;if(this.feedbackMap){var r=this.currentIndex;for(var s in this.feedbackMap){var u=this.feedbackMap[s];if(!(u===this.targetTextureVarying||t&&t[u])){var a=this.sourceBuffers[r][s],i=a.byteLength,f=a.usage,n=a.accessor,h=this._createNewBuffer(u,{byteLength:i,usage:f,accessor:n});this.feedbackBuffers[r][u]=h}}}}},{key:"_createNewBuffer",value:function(e,t){var r=new a.Buffer(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var e=this.currentIndex,t=(e+1)%2;for(var r in Object.assign(this.sourceBuffers[t],this.sourceBuffers[e]),Object.assign(this.feedbackBuffers[t],this.feedbackBuffers[e]),this.feedbackMap){var s=this.feedbackMap[r];s!==this.targetTextureVarying&&(this.sourceBuffers[t][r]=this.feedbackBuffers[e][s],this.feedbackBuffers[t][s]=this.sourceBuffers[e][r],(0,i.assert)(this.feedbackBuffers[t][s]instanceof a.Buffer))}this.transformFeedbacks[t]&&this.transformFeedbacks[t].setBuffers(this.feedbackBuffers[t])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var e=this.currentIndex,t=(e+1)%2;Object.assign(this.sourceTextures[t],this.sourceTextures[e]),this.sourceTextures[t][this._swapTexture]=this.targetTextures[e],this._updateTargetTexture(this.sourceTextures[e][this._swapTexture],t)}}},{key:"_buildModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getShaders(e),r=t.vs,s=t.fs,u=t.modules,a=t.uniforms,i=t.inject,n=t.samplerTextureMap;this.model=new f.default(this.gl,Object.assign({},e,{vs:r,fs:s,vertexCount:e.elementCount,modules:u,uniforms:a,inject:i})),this.samplerTextureMap=n,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(e.elementCount)}},{key:"_setupTransformFeedback",value:function(){(0,i.isObjectEmpty)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new a.TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new a.TransformFeedback(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var e=this.targetTextures[0],t=e.width,r=e.height;if(this.framebuffers[0]=new a.Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:t,height:r,attachments:(0,s.default)({},36064,this.targetTextures[0])}),this._swapTexture){var u=this.targetTextures[1];t=u.width,r=u.height,this.framebuffers[1]=new a.Framebuffer(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:t,height:r,attachments:(0,s.default)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(e){if(this.hasSourceTextures||this.targetTextureVarying){var t=new Float32Array(e);t.forEach(function(e,t,r){r[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=this._createNewBuffer("elementIDBuffer",{data:t,accessor:{size:1}})}}},{key:"_getShaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e.vs),r=t.vs,s=t.uniforms,i=t.targetTextureType,f=t.inject,n=t.samplerTextureMap,h=(0,u.combineInjects)([e.inject||{},f]);return this.targetTextureType=i,{vs:r,fs:e._fs||(0,u.getPassthroughFS)({version:(0,a.getShaderVersion)(r),input:this.targetTextureVarying,inputType:i,output:c}),modules:this.hasSourceTextures||this.targetTextureVarying?[u._transform].concat(e.modules||[]):e.modules,uniforms:s,inject:h,samplerTextureMap:n}}},{key:"_processVertexShader",value:function(e){return(0,n.updateForTextures)({vs:e,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),e}();exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/defineProperty":"9iDM","@luma.gl/shadertools":"Pzgo","@luma.gl/webgl":"50Kd","../utils":"a2N7","./model":"X9XX","./transform-shader-utils":"iUbT"}],"Ke+c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=n(require("@babel/runtime/helpers/esm/inherits")),a=n(require("../lib/model")),o=n(require("../geometry/geometry"));function n(e){return e&&e.__esModule?e:{default:e}}var u="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",l=[-1,-1,1,-1,-1,1,1,1],s=function(a){function n(i,a){var s;(0,e.default)(this,n);var d=l.map(function(e){return-1===e?0:e});return(s=(0,t.default)(this,(0,r.default)(n).call(this,i,Object.assign({},a,{vs:u,geometry:new o.default({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(l)},aTexCoord:{size:2,value:new Float32Array(d)},aCoordinate:{size:2,value:new Float32Array(d)}}})})))).setVertexCount(4),s}return(0,i.default)(n,a),n}(a.default);exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lib/model":"X9XX","../geometry/geometry":"a/Y4"}],"IS3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/webgl"),s=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.gl,i=r._cachePrograms,n=void 0!==i&&i;(0,e.default)(this,a),(0,s.assert)(t),this.gl=t,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=n}return(0,r.default)(a,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,r){(0,s.assert)("string"==typeof r),(0,s.assert)(this._compareContexts(e,this.gl));var a=this.vertexShaders[r];return a||(a=new t.VertexShader(e,r),this.vertexShaders[r]=a),a}},{key:"getFragmentShader",value:function(e,r){(0,s.assert)("string"==typeof r),(0,s.assert)(this._compareContexts(e,this.gl));var a=this.fragmentShaders[r];return a||(a=new t.FragmentShader(e,r),this.fragmentShaders[r]=a),a}},{key:"getProgram",value:function(e,r){(0,s.assert)(this._compareContexts(e,this.gl)),(0,s.assert)("string"==typeof r.vs),(0,s.assert)("string"==typeof r.fs),(0,s.assert)("string"==typeof r.id);var t=this._getProgramKey(r),a=this.programs[t];return a?(this._resetProgram(a),a):(a=this._createNewProgram(e,r),this._cachePrograms&&this._checkProgramProp(a)&&(a._isCached=!0,this.programs[t]=a),a)}},{key:"_getProgramKey",value:function(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,r){var s=r.vs,a=r.fs,i=this.getVertexShader(e,s),n=this.getFragmentShader(e,a);return new t.Program(this.gl,Object.assign({},r,{vs:i,fs:n}))}},{key:"_resetProgram",value:function(e,r){e.reset()}},{key:"_compareContexts",value:function(e,r){return(e.gl||e)===(r.gl||r)}}]),a}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd","../utils":"a2N7"}],"G+rv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/typeof")),t=a(require("@babel/runtime/helpers/esm/classCallCheck")),n=a(require("@babel/runtime/helpers/esm/createClass")),i=require("@luma.gl/webgl"),s=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=new Map;t.addEventListener=function(t,i){e.postMessage({command:"addEventListener",type:t}),n.has(t)||n.set(t,[]),n.get(t).push(i)},t.removeEventListener=function(t,i){e.postMessage({command:"removeEventListener",type:t});var s=n.get(t);s&&s.splice(s.indexOf(i),1)},t.dispatchEvent=function(e,t){var i=n.get(e);i&&i.forEach(function(e){return e(t)})},e.canvas=t}var o=function(){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,a);var i=n.onInitialize,r=void 0===i?function(){}:i,o=n.onFinalize,u=void 0===o?function(){}:o,h=n.useDevicePixels,v=void 0===h||h,c=n.autoResizeDrawingBuffer,l=void 0===c||c;this.props={onInitialize:r,onFinalize:u},this.setProps({autoResizeDrawingBuffer:l,useDevicePixels:v}),(0,s.assert)(e instanceof Worker),this.worker=e,this.canvas=null,this.width=null,this.height=null,this._running=!1,this._animationFrameId=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}return(0,n.default)(a,null,[{key:"createWorker",value:function(e){return function(t){e.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),t.canvas=null,t.onmessage=function(n){var i=n.data;switch(i.command){case"start":r(t,i.opts.canvas),e.start(i.opts);break;case"stop":e.stop();break;case"resize":t.canvas.width=i.width,t.canvas.height=i.height;break;case"event":t.canvas.dispatchEvent(i.type,i.event)}}}}}]),(0,n.default)(a,[{key:"setProps",value:function(e){return"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this.worker.onmessage=this._onMessage,(0,i.getPageLoadPromise)().then(function(){return e._running?(e._createAndTransferCanvas(t),e.props.onInitialize(e)):null}).then(function(){e._running&&(e._animationFrameId=(0,i.requestAnimationFrame)(e._updateFrame))}),this)}},{key:"stop",value:function(){return this._running&&((0,i.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._running=!1,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"_onMessage",value:function(e){switch(e.data.command){case"addEventListener":this.canvas.addEventListener(e.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(e.data.type,this._onEvent)}}},{key:"_onEvent",value:function(t){var n=this.useDevicePixels&&window.devicePixelRatio||1,i=t.type,s={};for(var a in t){var r=t[a],o=(0,e.default)(r);"offsetX"!==a&&"offsetY"!==a||(r*=n),"number"!==o&&"boolean"!==o&&"string"!==o||(s[a]=r)}this.worker.postMessage({command:"event",type:i,event:s})}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._animationFrameId=(0,i.requestAnimationFrame)(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(e){var t=(0,i.getCanvas)(e);t.transferControlToOffscreen||s.log.error("OffscreenCanvas is not available in your browser.")();var n=t.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},e,{canvas:n})},[n]),this.canvas=t}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var e=this.useDevicePixels&&window.devicePixelRatio||1,t=this.canvas.clientWidth*e,n=this.canvas.clientHeight*e;this.width===t&&this.height===n||(this.width=t,this.height=n,this.worker.postMessage({command:"resize",width:t,height:n}))}}}]),a}();exports.default=o;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd","../utils":"a2N7"}],"jBpK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/webgl");function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function u(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,u);var s=t.id,f=void 0===s?"pass":s;this.id=f,this.gl=r,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,t)}return(0,r.default)(u,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(e,r){var u=this;if(this.props.enabled){var s=this.gl,f={gl:s,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:r,swapBuffers:function(){return e._swapFramebuffers()}};this.props.screen?(f.inputBuffer=f.outputBuffer,f.outputBuffer=t.Framebuffer.getDefaultFramebuffer(s)):this.props.swap&&(f.inputBuffer=e.writeBuffer,f.outputBuffer=e.readBuffer),(0,t.withParameters)(s,{framebuffer:f.outputBuffer},function(){return u._renderPass(f)}),this.props.debug&&f.outputBuffer.log(1,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function(e){e.gl,e.inputBuffer,e.outputBuffer,e.animationProps}}]),u}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd"}],"OQuY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),r=u(require("@babel/runtime/helpers/esm/createClass")),t=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=u(require("@babel/runtime/helpers/esm/inherits")),l=u(require("./pass"));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(l){function u(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,u),a=Array.isArray(a)?{passes:a}:a,(0,t.default)(this,(0,s.default)(u).call(this,r,Object.assign({id:"composite-pass"},a)))}return(0,a.default)(u,l),(0,r.default)(u,[{key:"render",value:function(){var e=this.props.passes,r=void 0===e?[]:e,t=!0,s=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){var i=l.value;i.render.apply(i,arguments)}}catch(n){s=!0,a=n}finally{try{t||null==u.return||u.return()}finally{if(s)throw a}}}}]),u}(l.default);exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./pass":"jBpK"}],"D+0u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/webgl");function f(e){return e&&e.__esModule?e:{default:e}}var s=function(){function f(r){arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,e.default)(this,f),this.gl=r,this.framebuffer1=new t.Framebuffer(r,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new t.Framebuffer(r,{id:"multi-pass-2",stencil:!0}),this.reset()}return(0,r.default)(f,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),f}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/webgl":"50Kd"}],"y205":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("./composite-pass")),i=l(require("./render-state"));function l(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function l(r){var a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,l),u=Array.isArray(u)?{passes:u}:u,(a=(0,t.default)(this,(0,s.default)(l).call(this,r,Object.assign({id:"multi-pass"},u)))).renderState=new i.default(r,u),a}return(0,a.default)(l,u),(0,r.default)(l,[{key:"render",value:function(e){this.renderState.reset();var r=this.props.passes,t=void 0===r?[]:r,s=!0,a=!1,u=void 0;try{for(var i,l=t[Symbol.iterator]();!(s=(i=l.next()).done);s=!0){i.value.render(this.renderState,e)}}catch(n){a=!0,u=n}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return this}}]),l}(u.default);exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./composite-pass":"OQuY","./render-state":"D+0u"}],"gAqG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),t=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=a(require("@babel/runtime/helpers/esm/inherits")),u=a(require("./pass"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(u){function a(r){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,a),(0,t.default)(this,(0,s.default)(a).call(this,r,Object.assign({id:"clear-pass"},l)))}return(0,l.default)(a,u),(0,r.default)(a,[{key:"_renderPass",value:function(){var e=this.gl,r=this.props.clearBits,t=void 0===r?16640:r;e.clear(t)}}]),a}(u.default);exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./pass":"jBpK"}],"LlpY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),r=i(require("@babel/runtime/helpers/esm/createClass")),t=i(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=i(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=i(require("@babel/runtime/helpers/esm/inherits")),l=i(require("./pass"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(l){function i(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,i),(0,t.default)(this,(0,a.default)(i).call(this,r,Object.assign({id:"render-pass"},s)))}return(0,s.default)(i,l),(0,r.default)(i,[{key:"_renderPass",value:function(e){var r=e.animationProps,t=this.props,a=t.models,s=void 0===a?[]:a,l=t.drawParams,i=!0,u=!1,n=void 0;try{for(var o,d=s[Symbol.iterator]();!(i=(o=d.next()).done);i=!0){o.value.draw(Object.assign({},l,{animationProps:r}))}}catch(f){u=!0,n=f}finally{try{i||null==d.return||d.return()}finally{if(u)throw n}}}}]),i}(l.default);exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./pass":"jBpK"}],"sOpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=l(require("@babel/runtime/helpers/esm/inherits")),i=l(require("../lib/clip-space")),a=l(require("./pass"));function l(e){return e&&e.__esModule?e:{default:e}}var n="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",p=function(a){function l(r){var u,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,l),(u=(0,t.default)(this,(0,s.default)(l).call(this,r,Object.assign({id:"copy-pass",swap:!0},a)))).clipspace=new i.default(r,{id:"copy-pass",fs:n}),u}return(0,u.default)(l,a),(0,r.default)(l,[{key:"_renderPass",value:function(e){var r=e.inputBuffer,t=this.props.opacity,s=void 0===t?1:t;this.clipspace.draw({uniforms:{uDiffuseSampler:r,uOpacity:s},parameters:{depthWrite:!1,depthTest:!1}})}}]),l}(a.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lib/clip-space":"Ke+c","./pass":"jBpK"}],"ygyF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=l(require("@babel/runtime/helpers/esm/inherits")),a=l(require("../lib/clip-space")),i=l(require("./pass"));function l(e){return e&&e.__esModule?e:{default:e}}var n="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",p=function(i){function l(r){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,l),s=(0,t.default)(this,(0,u.default)(l).call(this,r,Object.assign({id:"texture-pass"},i)));var p=i.texture,f=i.opacity,o=void 0===f?1:f;return s.clipspace=new a.default(r,{id:"texture-pass",fs:n,uniforms:{uDiffuseSampler:p,uOpacity:o}}),s}return(0,s.default)(l,i),(0,r.default)(l,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),l}(i.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lib/clip-space":"Ke+c","./pass":"jBpK"}],"apj+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),a=l(require("./pass")),o=l(require("./composite-pass")),s=l(require("../lib/clip-space")),u=require("@luma.gl/shadertools");function l(e){return e&&e.__esModule?e:{default:e}}var f=function(a){function o(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,o),(0,t.default)(this,(0,n.default)(o).call(this,r,Object.assign({swap:!0},i)))}return(0,i.default)(o,a),(0,r.default)(o,[{key:"_renderPass",value:function(e){var r=e.inputBuffer;e.swapBuffers;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:r,texSize:[r.width,r.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),o}(a.default),d=function(a){function o(r,i){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,o);var l="".concat(i.name,"-pass");(0,u.normalizeShaderModule)(i);var f=c(r,i,l,s);return(a=(0,t.default)(this,(0,n.default)(o).call(this,r,Object.assign({id:l,passes:f},s)))).module=i,a}return(0,i.default)(o,a),(0,r.default)(o,[{key:"_renderPass",value:function(e){var r=e.inputBuffer,t=e.swapBuffers,n=!0,i=!0,a=!1,o=void 0;try{for(var s,u=this.props.passes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n||t(),n=!1;var f=l.props,d=f.uniforms,c=f.model;d&&c.setUniforms(d),c.draw({uniforms:{texture:r,texSize:[r.width,r.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(p){a=!0,o=p}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}]),o}(o.default);function c(e,r,t,n){if(r.filter||r.sampler){var i=h(r);return[new f(e,{id:t,model:p(e,r,i,t,n),uniforms:null})]}var a=r.passes||[];return a.map(function(i){var o=h(r,i),s="".concat(t,"-").concat(a.length+1);return new f(e,Object.assign({id:s,model:p(e,r,o,s,n),uniforms:i.uniforms},n))})}function p(e,r,t,n,i){var a=new s.default(e,{id:n,fs:t,modules:[r]}),o=Object.assign(r.getUniforms(),r.getUniforms(i));return a.setUniforms(o),a}exports.default=d;var m=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},v=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function h(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(r.filter){var t="string"==typeof r.filter?r.filter:"".concat(e.name,"_filterColor");return m(t)}if(r.sampler){var n="string"==typeof r.sampler?r.sampler:"".concat(e.name,"_sampleColor");return v(n)}return null}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./pass":"jBpK","./composite-pass":"OQuY","../lib/clip-space":"Ke+c","@luma.gl/shadertools":"Pzgo"}],"di7k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("../geometry/geometry")),o=require("../utils");function s(e){return e&&e.__esModule?e:{default:e}}var l={x:[2,0,1],y:[0,1,2],z:[1,2,0]},d=function(u){function s(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,s);var u=a.id,l=void 0===u?(0,o.uid)("truncated-code-geometry"):u,d=n(a),v=d.indices,f=d.attributes;return(0,t.default)(this,(0,i.default)(s).call(this,(0,e.default)({},a,{id:l,indices:v,attributes:(0,e.default)({},f,a.attributes)})))}return(0,a.default)(s,u),s}(u.default);function n(e){for(var r=e.bottomRadius,t=void 0===r?0:r,i=e.topRadius,a=void 0===i?0:i,u=e.height,o=void 0===u?1:u,s=e.nradial,d=void 0===s?10:s,n=e.nvertical,v=void 0===n?10:n,f=e.verticalAxis,b=void 0===f?"y":f,c=e.topCap,h=void 0!==c&&c,p=e.bottomCap,m=void 0!==p&&p,y=(h?2:0)+(m?2:0),q=(d+1)*(v+1+y),M=Math.atan2(t-a,o),O=Math.sin,g=Math.cos,A=Math.PI,C=g(M),x=O(M),R=h?-2:0,_=v+(m?2:0),w=d+1,z=new Uint16Array(d*(v+y)*6),P=l[b],F=new Float32Array(3*q),I=new Float32Array(3*q),j=new Float32Array(2*q),N=0,S=0,T=R;T<=_;T++){var k=T/v,D=o*k,E=void 0;T<0?(D=0,k=1,E=t):T>v?(D=o,k=1,E=a):E=t+T/v*(a-t),-2!==T&&T!==v+2||(E=0,k=0),D-=o/2;for(var L=0;L<w;L++){var U=O(L*A*2/d),X=g(L*A*2/d);F[N+P[0]]=U*E,F[N+P[1]]=D,F[N+P[2]]=X*E,I[N+P[0]]=T<0||T>v?0:U*C,I[N+P[1]]=T<0?-1:T>v?1:x,I[N+P[2]]=T<0||T>v?0:X*C,j[S+0]=L/d,j[S+1]=k,S+=2,N+=3}}for(var B=0;B<v+y;B++)for(var G=0;G<d;G++){var H=6*(B*d+G);z[H+0]=w*(B+0)+0+G,z[H+1]=w*(B+0)+1+G,z[H+2]=w*(B+1)+1+G,z[H+3]=w*(B+0)+0+G,z[H+4]=w*(B+1)+1+G,z[H+5]=w*(B+1)+0+G}return{indices:z,attributes:{POSITION:{size:3,value:F},NORMAL:{size:3,value:I},TEXCOORD_0:{size:2,value:j}}}}exports.default=d;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"a/Y4","../utils":"a2N7"}],"Ao2G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),o=l(require("./truncated-cone-geometry")),a=require("../utils");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(o){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var o=i.id,s=void 0===o?(0,a.uid)("cone-geometry"):o,d=i.radius,n=void 0===d?1:d,p=i.cap,b=void 0===p||p;return(0,t.default)(this,(0,u.default)(l).call(this,(0,e.default)({},i,{id:s,topRadius:0,topCap:Boolean(b),bottomCap:Boolean(b),bottomRadius:n})))}return(0,i.default)(l,o),l}(o.default);exports.default=s;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./truncated-cone-geometry":"di7k","../utils":"a2N7"}],"rWjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/objectSpread")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("@babel/runtime/helpers/esm/inherits")),l=s(require("../geometry/geometry")),i=require("../utils");function s(e){return e&&e.__esModule?e:{default:e}}var n=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),o=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),d=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),b=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),f={POSITION:{size:3,value:new Float32Array(o)},NORMAL:{size:3,value:new Float32Array(d)},TEXCOORD_0:{size:2,value:new Float32Array(b)}},m=function(l){function s(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,s);var l=u.id,o=void 0===l?(0,i.uid)("cube-geometry"):l;return(0,t.default)(this,(0,a.default)(s).call(this,(0,e.default)({},u,{id:o,indices:{size:1,value:new Uint16Array(n)},attributes:(0,e.default)({},f,u.attributes)})))}return(0,u.default)(s,l),s}(l.default);exports.default=m;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"a/Y4","../utils":"a2N7"}],"296K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/objectSpread")),r=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=a(require("@babel/runtime/helpers/esm/inherits")),l=a(require("./truncated-cone-geometry")),s=require("../utils");function a(e){return e&&e.__esModule?e:{default:e}}var d=function(l){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,a);var l=i.id,d=void 0===l?(0,s.uid)("cylinder-geometry"):l,o=i.radius,n=void 0===o?1:o;return(0,t.default)(this,(0,u.default)(a).call(this,(0,e.default)({},i,{id:d,bottomRadius:n,topRadius:n})))}return(0,i.default)(a,l),a}(l.default);exports.default=d;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./truncated-cone-geometry":"di7k","../utils":"a2N7"}],"TEfa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),t=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=l(require("@babel/runtime/helpers/esm/inherits")),s=require("math.gl"),i=l(require("../geometry/geometry")),n=require("../utils");function l(e){return e&&e.__esModule?e:{default:e}}var o=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],h=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],c=function(s){function i(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,i);var s=u.id,l=void 0===s?(0,n.uid)("ico-sphere-geometry"):s,o=d(u),h=o.indices,c=o.attributes;return(0,r.default)(this,(0,a.default)(i).call(this,(0,e.default)({},u,{id:l,indices:h,attributes:(0,e.default)({},c,u.attributes)})))}return(0,u.default)(i,s),i}(i.default);function d(e){var t=e.iterations,r=void 0===t?0:t,a=Math.PI,u=2*a,i=[].concat(o),n=[].concat(h);i.push(),n.push();for(var l,c=(l={},function(e,t){var r=(e*=3)>(t*=3)?e:t,a="".concat(e<t?e:t,"|").concat(r);if(a in l)return l[a];var u=i[e],s=i[e+1],n=i[e+2],o=(u+i[t])/2,h=(s+i[t+1])/2,c=(n+i[t+2])/2,d=Math.sqrt(o*o+h*h+c*c);return o/=d,h/=d,c/=d,i.push(o,h,c),l[a]=i.length/3-1}),d=0;d<r;d++){for(var p=[],v=0;v<n.length;v+=3){var f=c(n[v+0],n[v+1]),b=c(n[v+1],n[v+2]),m=c(n[v+2],n[v+0]);p.push(m,n[v+0],f,f,n[v+1],b,b,n[v+2],m,f,b,m)}n=p}for(var y=new Array(i.length),g=new Array(i.length/3*2),M=n.length-3;M>=0;M-=3){var q=n[M+0],z=n[M+1],w=n[M+2],x=3*q,A=3*z,O=3*w,_=2*q,C=2*z,P=2*w,F=i[x+0],I=i[x+1],R=i[x+2],j=Math.acos(R/Math.sqrt(F*F+I*I+R*R))/a,N=1-(Math.atan2(I,F)+a)/u,S=i[A+0],T=i[A+1],k=i[A+2],D=Math.acos(k/Math.sqrt(S*S+T*T+k*k))/a,E=1-(Math.atan2(T,S)+a)/u,L=i[O+0],U=i[O+1],V=i[O+2],X=Math.acos(V/Math.sqrt(L*L+U*U+V*V))/a,B=1-(Math.atan2(U,L)+a)/u,G=[L-S,U-T,V-k],H=[F-S,I-T,R-k],J=new s.Vector3(G).cross(H).normalize(),K=void 0;(0===N||0===E||0===B)&&(0===N||N>.5)&&(0===E||E>.5)&&(0===B||B>.5)&&(i.push(i[x+0],i[x+1],i[x+2]),K=i.length/3-1,n.push(K),g[2*K+0]=1,g[2*K+1]=j,y[3*K+0]=J.x,y[3*K+1]=J.y,y[3*K+2]=J.z,i.push(i[A+0],i[A+1],i[A+2]),K=i.length/3-1,n.push(K),g[2*K+0]=1,g[2*K+1]=D,y[3*K+0]=J.x,y[3*K+1]=J.y,y[3*K+2]=J.z,i.push(i[O+0],i[O+1],i[O+2]),K=i.length/3-1,n.push(K),g[2*K+0]=1,g[2*K+1]=X,y[3*K+0]=J.x,y[3*K+1]=J.y,y[3*K+2]=J.z),y[x+0]=y[A+0]=y[O+0]=J.x,y[x+1]=y[A+1]=y[O+1]=J.y,y[x+2]=y[A+2]=y[O+2]=J.z,g[_+0]=N,g[_+1]=j,g[C+0]=E,g[C+1]=D,g[P+0]=B,g[P+1]=X}return{indices:{size:1,value:new Uint16Array(n)},attributes:{POSITION:{size:3,value:new Float32Array(i)},NORMAL:{size:3,value:new Float32Array(y)},TEXCOORD_0:{size:2,value:new Float32Array(g)}}}}exports.default=c;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"4xAa","../geometry/geometry":"a/Y4","../utils":"a2N7"}],"N9xq":[function(require,module,exports) {
"use strict";function e(e){var r=e.indices,t=e.attributes;if(!r)return e;var a=r.value.length,n={};for(var s in t){var u=t[s],i=u.constant,o=u.value,v=u.size;if(!i&&v){for(var c=new o.constructor(a*v),f=0;f<a;++f)for(var l=r.value[f],d=0;d<v;d++)c[f*v+d]=o[l*v+d];n[s]={size:v,value:c}}}return{attributes:Object.assign({},t,n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackIndexedGeometry=e;
},{}],"pXJW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/objectSpread")),r=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=o(require("@babel/runtime/helpers/esm/inherits")),u=o(require("../geometry/geometry")),l=require("../geometry/geometry-utils"),n=require("../utils");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(u){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var u=i.id,o=void 0===u?(0,n.uid)("plane-geometry"):u,s=d(i),c=s.indices,f=s.attributes;return(0,t.default)(this,(0,a.default)(l).call(this,(0,e.default)({},i,{id:o,indices:c,attributes:(0,e.default)({},f,i.attributes)})))}return(0,i.default)(l,u),l}(u.default);function d(e){var r=e.type,t=void 0===r?"x,y":r,a=e.offset,i=void 0===a?0:a,u=e.flipCull,n=void 0!==u&&u,o=e.unpack,s=void 0!==o&&o,d=t.split(","),c=e["".concat(d[0],"len")]||1,f=e["".concat(d[1],"len")]||1,v=e["n".concat(d[0])]||1,b=e["n".concat(d[1])]||1,p=(v+1)*(b+1),y=new Float32Array(3*p),m=new Float32Array(3*p),h=new Float32Array(2*p);n&&(c=-c);for(var q=0,w=0,g=0;g<=b;g++)for(var k=0;k<=v;k++){var x=k/v,O=g/b;switch(h[q+0]=n?1-x:x,h[q+1]=O,t){case"x,y":y[w+0]=c*x-.5*c,y[w+1]=f*O-.5*f,y[w+2]=i,m[w+0]=0,m[w+1]=0,m[w+2]=n?1:-1;break;case"x,z":y[w+0]=c*x-.5*c,y[w+1]=i,y[w+2]=f*O-.5*f,m[w+0]=0,m[w+1]=n?1:-1,m[w+2]=0;break;case"y,z":y[w+0]=i,y[w+1]=c*x-.5*c,y[w+2]=f*O-.5*f,m[w+0]=n?1:-1,m[w+1]=0,m[w+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}q+=2,w+=3}for(var z=v+1,A=new Uint16Array(v*b*6),C=0;C<b;C++)for(var _=0;_<v;_++){var P=6*(C*v+_);A[P+0]=(C+0)*z+_,A[P+1]=(C+1)*z+_,A[P+2]=(C+0)*z+_+1,A[P+3]=(C+1)*z+_,A[P+4]=(C+1)*z+_+1,A[P+5]=(C+0)*z+_+1}var F={indices:{size:1,value:A},attributes:{POSITION:{size:3,value:y},NORMAL:{size:3,value:m},TEXCOORD_0:{size:2,value:h}}};return s?(0,l.unpackIndexedGeometry)(F):F}exports.default=s;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"a/Y4","../geometry/geometry-utils":"N9xq","../utils":"a2N7"}],"JAr1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/objectSpread")),r=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("../geometry/geometry")),s=require("../utils");function l(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function l(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,l);var u=i.id,n=void 0===u?(0,s.uid)("sphere-geometry"):u,d=o(i),f=d.indices,v=d.attributes;return(0,t.default)(this,(0,a.default)(l).call(this,(0,e.default)({},i,{id:n,indices:f,attributes:(0,e.default)({},v,i.attributes)})))}return(0,i.default)(l,u),l}(u.default);function o(e){var r=e.nlat,t=void 0===r?10:r,a=e.nlong,i=void 0===a?10:a,u=e.radius,s=void 0===u?1:u,l=Math.PI-0,n=2*Math.PI-0,o=(t+1)*(i+1);if("number"==typeof s){var d=s;s=function(e,r,t,a,i){return d}}for(var f=new Float32Array(3*o),v=new Float32Array(3*o),b=new Float32Array(2*o),h=new Uint16Array(t*i*6),c=0;c<=t;c++)for(var m=0;m<=i;m++){var p=m/i,y=c/t,M=m+c*(i+1),q=2*M,O=3*M,g=n*p,A=l*y,P=Math.sin(g),_=Math.cos(g),w=Math.sin(A),z=_*w,C=Math.cos(A),I=P*w,x=s(z,C,I,p,y);f[O+0]=x*z,f[O+1]=x*C,f[O+2]=x*I,v[O+0]=z,v[O+1]=C,v[O+2]=I,b[q+0]=p,b[q+1]=1-y}for(var F=t+1,R=0;R<t;R++)for(var j=0;j<i;j++){var N=6*(R*i+j);h[N+0]=j*F+R,h[N+1]=j*F+R+1,h[N+2]=(j+1)*F+R,h[N+3]=(j+1)*F+R,h[N+4]=j*F+R+1,h[N+5]=(j+1)*F+R+1}return{indices:{size:1,value:h},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:v},TEXCOORD_0:{size:2,value:b}}}}exports.default=n;
},{"@babel/runtime/helpers/esm/objectSpread":"EV9w","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../geometry/geometry":"a/Y4","../utils":"a2N7"}],"5IL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=l(require("@babel/runtime/helpers/esm/assertThisInitialized")),i=l(require("@babel/runtime/helpers/esm/inherits")),u=l(require("./material"));function l(e){return e&&e.__esModule?e:{default:e}}var a={ambient:.35,diffuse:.6,shininess:32,specularColor:[30,30,30]},n=function(u){function l(i){var u;return(0,e.default)(this,l),u=(0,r.default)(this,(0,t.default)(l).call(this,i)),i=Object.assign({},a,i),Object.assign((0,s.default)(u),i),u}return(0,i.default)(l,u),l}(u.default);exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","@babel/runtime/helpers/esm/inherits":"RnSb","./material":"OqDf"}],"IuHa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("@babel/runtime/helpers/esm/inherits")),l=s(require("./material"));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(l){function s(){return(0,e.default)(this,s),(0,r.default)(this,(0,t.default)(s).apply(this,arguments))}return(0,u.default)(s,l),s}(l.default);exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./material":"OqDf"}],"90ek":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("@babel/runtime/helpers/esm/classCallCheck")),e=r(require("@babel/runtime/helpers/esm/createClass")),i=require("math.gl"),s=require("../../utils");function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,r);var a=e.id;this.id=a||(0,s.uid)(this.constructor.name),this.display=!0,this.position=new i.Vector3,this.rotation=new i.Vector3,this.scale=new i.Vector3(1,1,1),this.matrix=new i.Matrix4,this.userData={},this.props={},this._setScenegraphNodeProps(e)}return(0,e.default)(r,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return(0,s.assert)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return(0,s.assert)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return(0,s.assert)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,i=t.rotation,s=t.scale,r=t.update,a=void 0===r||r;return e&&this.setPosition(e),i&&this.setRotation(i),s&&this.setScale(s),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,i=t.rotation,s=t.scale;return e&&this.setPosition(e),i&&this.setRotation(i),s&&this.setScale(s),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){(0,s.assert)(t),e=e||this.matrix;var r=new i.Matrix4(t).multiplyRight(e),a=r.invert(),o=a.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:r,worldInverseMatrix:a,worldInverseTransposeMatrix:o}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"4xAa","../../utils":"a2N7"}],"Jc9W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/toConsumableArray")),r=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),i=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=h(require("@babel/runtime/helpers/esm/get")),n=h(require("@babel/runtime/helpers/esm/inherits")),u=require("math.gl"),s=require("../../utils"),o=h(require("./scenegraph-node"));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(h){function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,d);var a=(t=Array.isArray(t)?{children:t}:t).children,n=void 0===a?[]:a;return s.log.assert(n.every(function(e){return e instanceof o.default}),"every child must an instance of ScenegraphNode"),(e=(0,i.default)(this,(0,l.default)(d).call(this,t))).children=n,e}return(0,n.default)(d,h),(0,t.default)(d,[{key:"add",value:function(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];for(var l=0,a=t;l<a.length;l++){var n=a[l];Array.isArray(n)?this.add.apply(this,(0,e.default)(n)):this.children.push(n)}return this}},{key:"remove",value:function(e){var r=this.children,t=r.indexOf(e);return t>-1&&r.splice(t,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(e){return e.delete()}),this.removeAll(),(0,a.default)((0,l.default)(d.prototype),"delete",this).call(this)}},{key:"traverse",value:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).worldMatrix,t=void 0===r?new u.Matrix4:r,i=new u.Matrix4(t).multiplyRight(this.matrix),l=!0,a=!1,n=void 0;try{for(var s,o=this.children[Symbol.iterator]();!(l=(s=o.next()).done);l=!0){var h=s.value;h instanceof d?h.traverse(e,{worldMatrix:i}):e(h,{worldMatrix:i})}}catch(v){a=!0,n=v}finally{try{l||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"traverseReverse",value:function(e,r){return s.log.warn("traverseReverse is not reverse")(),this.traverse(e,r)}}]),d}(o.default);exports.default=d;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"4xAa","../../utils":"a2N7","./scenegraph-node":"90ek"}],"vs/o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),t=i(require("@babel/runtime/helpers/esm/createClass")),r=i(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=i(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=i(require("@babel/runtime/helpers/esm/get")),u=i(require("@babel/runtime/helpers/esm/inherits")),o=i(require("../../lib/model")),n=i(require("./scenegraph-node"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function i(t){var l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,i),(l=(0,r.default)(this,(0,s.default)(i).call(this,u))).onBeforeRender=null,l.AfterRender=null,t instanceof o.default?(l.model=t,l._setModelNodeProps(u)):l.model=new o.default(t,u),l.managedResources=u.managedResources||[],l}return(0,u.default)(i,n),(0,t.default)(i,[{key:"setProps",value:function(e){return(0,l.default)((0,s.default)(i.prototype),"setProps",this).call(this,e),this._setModelNodeProps(e),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(e){return e.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var e;return(e=this.model).draw.apply(e,arguments)}},{key:"setUniforms",value:function(){var e;return(e=this.model).setUniforms.apply(e,arguments),this}},{key:"setAttributes",value:function(){var e;return(e=this.model).setAttributes.apply(e,arguments),this}},{key:"updateModuleSettings",value:function(){var e;return(e=this.model).updateModuleSettings.apply(e,arguments),this}},{key:"_setModelNodeProps",value:function(e){this.model.setProps(e)}}]),i}(n.default);exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","../../lib/model":"X9XX","./scenegraph-node":"90ek"}],"zjTd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),t=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=l(require("@babel/runtime/helpers/esm/inherits")),i=l(require("./scenegraph-node"));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(i){function l(){var u,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e.default)(this,l),(u=(0,r.default)(this,(0,t.default)(l).call(this,i))).projectionMatrix=i.projectionMatrix,u}return(0,u.default)(l,i),l}(i.default);exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./scenegraph-node":"90ek"}],"iuAK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var e=require("buffer").Buffer,r=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return t.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return t.isWebGL2}}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return t.lumaStats}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return t.createGLContext}}),Object.defineProperty(exports,"destroyGLContext",{enumerable:!0,get:function(){return t.destroyGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return t.resizeGLContext}}),Object.defineProperty(exports,"setGLContextDefaults",{enumerable:!0,get:function(){return t.setGLContextDefaults}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return t.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return t.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return t.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return t.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return t.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return t.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return t.canCompileGLGSExtension}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return t.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return t.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return t.getKey}}),Object.defineProperty(exports,"setContextDefaults",{enumerable:!0,get:function(){return t.setGLContextDefaults}}),Object.defineProperty(exports,"glGetDebugInfo",{enumerable:!0,get:function(){return t.getContextDebugInfo}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return t.Buffer}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return t.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return t.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return t.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return t.Program}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return t.Framebuffer}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return t.Renderbuffer}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return t.Texture2D}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return t.TextureCube}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return t.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return t.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return t.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return t.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return t.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return t.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return t.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return t.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return t.Query}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return t.Texture3D}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return t.TransformFeedback}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return t.VertexArrayObject}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return t.VertexArray}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return t.UniformBufferLayout}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return t.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return t.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return t.loadImage}}),Object.defineProperty(exports,"_Accessor",{enumerable:!0,get:function(){return t.Accessor}}),Object.defineProperty(exports,"_clearBuffer",{enumerable:!0,get:function(){return t.clearBuffer}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return t.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return t.assert}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return t.uid}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return n.trackContextState}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return n.resetParameters}}),Object.defineProperty(exports,"getParameter",{enumerable:!0,get:function(){return n.getParameter}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return n.getParameters}}),Object.defineProperty(exports,"setParameter",{enumerable:!0,get:function(){return n.setParameter}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return n.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return n.withParameters}}),Object.defineProperty(exports,"getModifiedParameters",{enumerable:!0,get:function(){return n.getModifiedParameters}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Material",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return i.AmbientLight}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return i.DirectionalLight}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return i.PointLight}}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"encodePickingColor",{enumerable:!0,get:function(){return f.encodePickingColor}}),Object.defineProperty(exports,"decodePickingColor",{enumerable:!0,get:function(){return f.decodePickingColor}}),Object.defineProperty(exports,"getNullPickingColor",{enumerable:!0,get:function(){return f.getNullPickingColor}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"_ShaderCache",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"_AnimationLoopProxy",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"_MultiPassRenderer",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"_RenderState",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"_Pass",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"_CompositePass",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"_ClearPass",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"_RenderPass",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"_CopyPass",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"_TexturePass",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"_ShaderModulePass",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"PhongMaterial",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"PBRMaterial",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"ScenegraphNode",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"GroupNode",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"ModelNode",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"CameraNode",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"registerShaderModules",{enumerable:!0,get:function(){return B.registerShaderModules}}),Object.defineProperty(exports,"setDefaultShaderModules",{enumerable:!0,get:function(){return B.setDefaultShaderModules}}),Object.defineProperty(exports,"getDefaultShaderModules",{enumerable:!0,get:function(){return B.getDefaultShaderModules}}),Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return B.assembleShaders}}),Object.defineProperty(exports,"createShaderHook",{enumerable:!0,get:function(){return B.createShaderHook}}),Object.defineProperty(exports,"createModuleInjection",{enumerable:!0,get:function(){return B.createModuleInjection}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return B.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return B.normalizeShaderModule}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return B.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return B.fp64}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return B.project}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return B.lights}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return B.dirlight}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return B.picking}}),Object.defineProperty(exports,"diffuse",{enumerable:!0,get:function(){return B.diffuse}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return B.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return B.phonglighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return B.pbr}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return B._transform}}),Object.defineProperty(exports,"MODULAR_SHADERS",{enumerable:!0,get:function(){return B.MODULAR_SHADERS}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return B.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return B.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return B.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return B.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return B.convertToVec4}});var t=require("@luma.gl/webgl"),n=require("@luma.gl/webgl-state-tracker"),o=R(require("./geometry/geometry")),u=R(require("./materials/material")),i=require("./lighting/light-source"),a=R(require("./lib/animation-loop")),f=require("./lib/picking-colors"),c=R(require("./lib/model")),p=R(require("./lib/transform")),s=R(require("./lib/clip-space")),l=R(require("./lib/shader-cache")),b=R(require("./lib/animation-loop-proxy")),d=R(require("./multipass/multi-pass-renderer")),g=R(require("./multipass/render-state")),m=R(require("./multipass/pass")),x=R(require("./multipass/composite-pass")),y=R(require("./multipass/clear-pass")),P=R(require("./multipass/render-pass")),j=R(require("./multipass/copy-pass")),O=R(require("./multipass/texture-pass")),h=R(require("./multipass/shader-module-pass")),C=R(require("./geometries/cone-geometry")),S=R(require("./geometries/cube-geometry")),q=R(require("./geometries/cylinder-geometry")),T=R(require("./geometries/ico-sphere-geometry")),L=R(require("./geometries/plane-geometry")),G=R(require("./geometries/sphere-geometry")),D=R(require("./geometries/truncated-cone-geometry")),M=R(require("./materials/phong-material")),_=R(require("./materials/pbr-material")),F=R(require("./scenegraph/nodes/scenegraph-node")),A=R(require("./scenegraph/nodes/group-node")),k=R(require("./scenegraph/nodes/model-node")),I=R(require("./scenegraph/nodes/camera-node")),B=require("@luma.gl/shadertools");function R(e){return e&&e.__esModule?e:{default:e}}
},{"@luma.gl/webgl":"50Kd","@luma.gl/webgl-state-tracker":"1gQ5","./geometry/geometry":"a/Y4","./materials/material":"OqDf","./lighting/light-source":"Ubhm","./lib/animation-loop":"uR4M","./lib/picking-colors":"NDJ9","./lib/model":"X9XX","./lib/transform":"x+Mg","./lib/clip-space":"Ke+c","./lib/shader-cache":"IS3p","./lib/animation-loop-proxy":"G+rv","./multipass/multi-pass-renderer":"y205","./multipass/render-state":"D+0u","./multipass/pass":"jBpK","./multipass/composite-pass":"OQuY","./multipass/clear-pass":"gAqG","./multipass/render-pass":"LlpY","./multipass/copy-pass":"sOpu","./multipass/texture-pass":"ygyF","./multipass/shader-module-pass":"apj+","./geometries/cone-geometry":"Ao2G","./geometries/cube-geometry":"rWjL","./geometries/cylinder-geometry":"296K","./geometries/ico-sphere-geometry":"TEfa","./geometries/plane-geometry":"pXJW","./geometries/sphere-geometry":"JAr1","./geometries/truncated-cone-geometry":"di7k","./materials/phong-material":"5IL4","./materials/pbr-material":"IuHa","./scenegraph/nodes/scenegraph-node":"90ek","./scenegraph/nodes/group-node":"Jc9W","./scenegraph/nodes/model-node":"vs/o","./scenegraph/nodes/camera-node":"zjTd","@luma.gl/shadertools":"Pzgo","buffer":"aMB2"}],"uFGI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n} geometry;\n",t="\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n",o={name:"geometry",vs:e,fs:t};exports.default=o;
},{}],"DSlO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECT_COORDINATE_SYSTEM=void 0;var T={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0};exports.PROJECT_COORDINATE_SYSTEM=T;
},{}],"HHu4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./constants"),o=Object.keys(e.PROJECT_COORDINATE_SYSTEM).map(function(o){return"const float COORDINATE_SYSTEM_".concat(o," = ").concat(e.PROJECT_COORDINATE_SYSTEM[o],".;")}).join(""),t="".concat(o,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_size(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    float X = position.x - project_uCoordinateOrigin.x;\n    float Y = position.y - project_uCoordinateOrigin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_IDENTITY) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64xyLow, 0.0, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters);\n}\nfloat project_pixel_size(float pixels) {\n  return pixels;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels;\n}\nfloat project_scale(float meters) {\n  return project_size(meters);\n}\nvec2 project_scale(vec2 meters) {\n  return project_size(meters);\n}\nvec3 project_scale(vec3 meters) {\n  return project_size(meters);\n}\nvec4 project_scale(vec4 meters) {\n  return project_size(meters);\n}\nvec4 project_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position);\n}\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\n}\n");exports.default=t;
},{"./constants":"DSlO"}],"ysbg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.COORDINATE_SYSTEM=void 0;var e={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0};exports.COORDINATE_SYSTEM=e;var r={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};exports.EVENTS=r;
},{}],"9uXG":[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return!0;if(Array.isArray(r)){var t=r.length;if(!e||e.length!==t)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}return!1}function e(e){var t,n={};return function(u){for(var f in u)if(!r(u[f],n[f])){t=e(u),n=u;break}return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Txat":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"deck.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"7iWu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformsFromViewport=C,exports.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=void 0;var e=a(require("gl-matrix/mat4")),r=a(require("gl-matrix/vec4")),t=require("../../lib/constants"),o=T(require("../../utils/memoize")),i=T(require("../../utils/assert")),n=require("./constants");function T(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var O=[0,0,0,0],E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_=[0,0,0],S=[0,0,0],s=12;exports.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD=s;var u=(0,o.default)(M);function d(e){switch(e){case t.COORDINATE_SYSTEM.LNGLAT:default:return n.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET;case t.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return n.PROJECT_COORDINATE_SYSTEM.LNG_LAT;case t.COORDINATE_SYSTEM.METER_OFFSETS:case t.COORDINATE_SYSTEM.METERS:return n.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS;case t.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return n.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS;case t.COORDINATE_SYSTEM.IDENTITY:return n.PROJECT_COORDINATE_SYSTEM.IDENTITY}}function p(t){var o,i=t.viewport,T=t.coordinateSystem,a=t.coordinateOrigin,c=t.coordinateZoom,_=i.viewMatrixUncentered,S=i.viewMatrix,u=i.projectionMatrix,p=i.viewProjectionMatrix,C=i.cameraPosition,M=d(T),l=a;M===n.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET&&(c<s?M=n.PROJECT_COORDINATE_SYSTEM.LNG_LAT:l=[Math.fround(i.longitude),Math.fround(i.latitude)]);switch(M===n.PROJECT_COORDINATE_SYSTEM.IDENTITY&&(l=[Math.fround(i.position[0]),Math.fround(i.position[1])]),l[2]=l[2]||0,M){case n.PROJECT_COORDINATE_SYSTEM.LNG_LAT:o=O;break;case n.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:case n.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:case n.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:case n.PROJECT_COORDINATE_SYSTEM.IDENTITY:var R=i.projectPosition(l,Math.pow(2,c));C=[C[0]-R[0],C[1]-R[1],C[2]-R[2]],R[3]=1,o=r.transformMat4([],R,p),S=_||S,p=e.multiply([],u,S),p=e.multiply([],p,E);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:S,viewProjectionMatrix:p,projectionCenter:o,cameraPosCommon:C,shaderCoordinateSystem:M,shaderCoordinateOrigin:l}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.viewport,o=e.devicePixelRatio,n=void 0===o?1:o,T=e.modelMatrix,a=void 0===T?null:T,O=e.coordinateSystem,E=void 0===O?t.COORDINATE_SYSTEM.LNGLAT:O,_=e.coordinateOrigin,s=void 0===_?S:_,d=e.wrapLongitude,p=void 0!==d&&d;e.projectionMode,e.positionOrigin;return(0,i.default)(r),Object.assign({project_uModelMatrix:a||c},u({viewport:r,devicePixelRatio:n,coordinateSystem:E,coordinateOrigin:s,wrapLongitude:p}))}function M(e){var r=e.viewport,t=e.devicePixelRatio,o=e.coordinateSystem,T=e.coordinateOrigin,a=e.wrapLongitude,O=p({coordinateSystem:o,coordinateOrigin:T,coordinateZoom:r.zoom,viewport:r}),E=O.projectionCenter,c=O.viewProjectionMatrix,S=O.cameraPosCommon,s=O.shaderCoordinateSystem,u=O.shaderCoordinateOrigin;(0,i.default)(c,"Viewport missing modelViewProjectionMatrix");var d=r.getDistanceScales(),C=[r.width*t,r.height*t],M={project_uCoordinateSystem:s,project_uCenter:E,project_uWrapLongitude:a,project_uAntimeridian:(r.longitude||0)-180,project_uViewportSize:C,project_uDevicePixelRatio:t,project_uFocalDistance:r.focalDistance||1,project_uCommonUnitsPerMeter:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:d.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:_,project_uScale:r.scale,project_uViewProjectionMatrix:c,project_uCameraPosition:S},l=r.getDistanceScales(u);switch(s){case n.PROJECT_COORDINATE_SYSTEM.METER_OFFSETS:M.project_uCommonUnitsPerWorldUnit=l.pixelsPerMeter,M.project_uCommonUnitsPerWorldUnit2=l.pixelsPerMeter2;break;case n.PROJECT_COORDINATE_SYSTEM.LNGLAT_AUTO_OFFSET:M.project_uCoordinateOrigin=u;case n.PROJECT_COORDINATE_SYSTEM.LNG_LAT:case n.PROJECT_COORDINATE_SYSTEM.LNGLAT_OFFSETS:M.project_uCommonUnitsPerWorldUnit=l.pixelsPerDegree,M.project_uCommonUnitsPerWorldUnit2=l.pixelsPerDegree2;break;case n.PROJECT_COORDINATE_SYSTEM.IDENTITY:M.project_uCoordinateOrigin=u}return M}
},{"gl-matrix/mat4":"w3aR","gl-matrix/vec4":"9+zW","../../lib/constants":"ysbg","../../utils/memoize":"9uXG","../../utils/assert":"Txat","./constants":"DSlO"}],"9NVO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),o=r(require("./project.glsl")),t=require("./viewport-uniforms");function r(e){return e&&e.__esModule?e:{default:e}}var p={};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return e.viewport?(0,t.getUniformsFromViewport)(e):{}}var c={name:"project",dependencies:[e.fp32],vs:o.default,getUniforms:i,deprecations:[{type:"function",old:"project_scale",new:"project_size"},{type:"function",old:"project_to_clipspace",new:"project_common_position_to_clipspace"},{type:"function",old:"project_pixel_to_clipspace",new:"project_pixel_size_to_clipspace"}]};exports.default=c;
},{"@luma.gl/core":"iuAK","./project.glsl":"HHu4","./viewport-uniforms":"7iWu"}],"1qxV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=e(require("../project/project"));function e(o){return o&&o.__esModule?o:{default:o}}var t="\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\n}\n",i={name:"project32",dependencies:[o.default],vs:t};exports.default=i;
},{"../project/project":"9NVO"}],"n+D7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\n) {\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_size(position.z);\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 commonPosition64[4];\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  commonPosition64[3] = vec2(1.0, 0.0);\n\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_common_position_to_clipspace_fp64(commonPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, commonPosition\n  );\n}\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  return project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\n}\n";exports.default=o;
},{}],"ifoR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),t=i(require("../project/project")),r=i(require("../../utils/memoize")),o=i(require("./project64.glsl"));function i(e){return e&&e.__esModule?e:{default:e}}var c=e.fp64.fp64ify,p=e.fp64.fp64ifyMatrix4,u={name:"project64",dependencies:[t.default,e.fp64],vs:o.default,getUniforms:l,deprecations:[{type:"function",old:"project_to_clipspace_fp64",new:"project_common_position_to_clipspace_fp64"}]};exports.default=u;var a={},n=(0,r.default)(f);function l(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.project_uViewProjectionMatrix,r=e.project_uScale;return t&&r?n({project_uViewProjectionMatrix:t,project_uScale:r}):{}}function f(e){var t=e.project_uViewProjectionMatrix,r=e.project_uScale,o=p(t);return{project_uViewProjectionMatrixFP64:o,project64_uViewProjectionMatrix:o,project64_uScale:c(r)}}
},{"@luma.gl/core":"iuAK","../project/project":"9NVO","../../utils/memoize":"9uXG","./project64.glsl":"n+D7"}],"Muwq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=t,exports.transformVector=o,exports.mod=n,exports.lerp=c;var r=e(require("gl-matrix/vec4"));function e(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};o.get||o.set?Object.defineProperty(e,t,o):e[t]=r[t]}return e.default=r,e}function t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e,t){var o=r.transformMat4([],t,e);return r.scale(o,o,1/o[3]),o}function n(r,e){var t=r%e;return t<0?e+t:t}function c(r,e,t){return t*e+(1-t)*r}
},{"gl-matrix/vec4":"9+zW"}],"rxaE":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"viewport-mercator-project: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"+n9R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=v,exports.scaleToZoom=M,exports.lngLatToWorld=m,exports.worldToLngLat=g,exports.getMeterZoom=x,exports.getDistanceScales=P,exports.addMetersToLngLat=b,exports.getViewMatrix=F,exports.getProjectionParameters=N,exports.getProjectionMatrix=w,exports.worldToPixels=O,exports.pixelsToWorld=Z;var e=u(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("./math-utils"),r=o(require("gl-matrix/mat4")),i=o(require("gl-matrix/vec2")),a=o(require("gl-matrix/vec3")),n=u(require("./assert"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var l=Math.PI,s=l/4,c=l/180,d=180/l,f=512,p=4003e4,h=1.5;function v(e){return Math.pow(2,e)}function M(e){return Math.log2(e)}function m(t,r){var i=(0,e.default)(t,2),a=i[0],o=i[1];(0,n.default)(Number.isFinite(a)&&Number.isFinite(r)),(0,n.default)(Number.isFinite(o)&&o>=-90&&o<=90,"invalid latitude");var u=o*c;return[(r*=f)*(a*c+l)/(2*l),r*(l-Math.log(Math.tan(s+.5*u)))/(2*l)]}function g(t,r){var i=(0,e.default)(t,2),a=i[0],n=i[1],o=a/(r*=f)*(2*l)-l,u=2*(Math.atan(Math.exp(l-n/r*(2*l)))-s);return[o*d,u*d]}function x(e){var t=e.latitude;(0,n.default)(Number.isFinite(t));var r=Math.cos(t*c);return M(p*r)-9}function P(e){var t=e.latitude,r=e.longitude,i=e.zoom,a=e.scale,o=e.highPrecision,u=void 0!==o&&o;a=void 0!==a?a:v(i),(0,n.default)(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(a));var l={},s=f*a,d=Math.cos(t*c),h=s/360,M=h/d,m=s/p/d;if(l.pixelsPerMeter=[m,-m,m],l.metersPerPixel=[1/m,-1/m,1/m],l.pixelsPerDegree=[h,-M,m],l.degreesPerPixel=[1/h,-1/M,1/m],u){var g=c*Math.tan(t*c)/d,x=h*g/2,P=s/p*g,b=P/M*m;l.pixelsPerDegree2=[0,-x,P],l.pixelsPerMeter2=[b,0,b]}return l}function b(t,r){var i=(0,e.default)(t,3),a=i[0],n=i[1],o=i[2],u=(0,e.default)(r,3),l=u[0],s=u[1],c=u[2],d=P({longitude:a,latitude:n,scale:1,highPrecision:!0}),f=d.pixelsPerMeter,p=d.pixelsPerMeter2,h=m(t,1);h[0]+=l*(f[0]+p[0]*s),h[1]+=s*(f[1]+p[1]*s);var v=g(h,1),M=(o||0)+(c||0);return Number.isFinite(o)||Number.isFinite(c)?[v[0],v[1],M]:v}function F(e){var i=e.height,n=e.pitch,o=e.bearing,u=e.altitude,l=e.center,s=void 0===l?null:l,d=e.flipY,f=void 0!==d&&d,p=(0,t.createMat4)();return r.translate(p,p,[0,0,-u]),r.scale(p,p,[1,1,1/i]),r.rotateX(p,p,-n*c),r.rotateZ(p,p,o*c),f&&r.scale(p,p,[1,-1,1]),s&&r.translate(p,p,a.negate([],s)),p}function N(e){var t=e.width,r=e.height,i=e.altitude,a=void 0===i?h:i,n=e.pitch,o=void 0===n?0:n,u=e.nearZMultiplier,l=void 0===u?1:u,s=e.farZMultiplier,d=void 0===s?1:s,f=o*c,p=Math.atan(.5/a),v=Math.sin(p)*a/Math.sin(Math.PI/2-f-p),M=Math.cos(Math.PI/2-f)*v+a;return{fov:2*Math.atan(r/2/a),aspect:t/r,focalDistance:a,near:l,far:M*d}}function w(e){var t=e.width,i=e.height,a=e.pitch,n=N({width:t,height:i,altitude:e.altitude,pitch:a,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),o=n.fov,u=n.aspect,l=n.near,s=n.far;return r.perspective([],o,u,l,s)}function O(r,i){var a=(0,e.default)(r,3),o=a[0],u=a[1],l=a[2],s=void 0===l?0:l;return(0,n.default)(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(s)),(0,t.transformVector)(i,[o,u,s,1])}function Z(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=(0,e.default)(r,3),l=u[0],s=u[1],c=u[2];if((0,n.default)(Number.isFinite(l)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(c))return(0,t.transformVector)(a,[l,s,c,1]);var d=(0,t.transformVector)(a,[l,s,0,1]),f=(0,t.transformVector)(a,[l,s,1,1]),p=d[2],h=f[2],v=p===h?0:((o||0)-p)/(h-p);return i.lerp([],d,f,v)}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./math-utils":"Muwq","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","./assert":"rxaE"}],"se97":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/slicedToArray")),e=a(require("@babel/runtime/helpers/esm/classCallCheck")),i=a(require("@babel/runtime/helpers/esm/createClass")),r=require("./math-utils"),o=require("./web-mercator-utils"),s=n(require("gl-matrix/mat4"));function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};r.get||r.set?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}var h=(0,r.createMat4)(),l=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.width,o=t.height,a=t.viewMatrix,l=void 0===a?h:a,u=t.projectionMatrix,c=void 0===u?h:u;(0,e.default)(this,n),this.width=i||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=l,this.projectionMatrix=c;var p=(0,r.createMat4)();s.multiply(p,p,this.projectionMatrix),s.multiply(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var d=(0,r.createMat4)();s.scale(d,d,[this.width/2,-this.height/2,1]),s.translate(d,d,[1,-1,0]),s.multiply(d,d,this.viewProjectionMatrix);var j=s.invert((0,r.createMat4)(),d);if(!j)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=j,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,i.default)(n,[{key:"equals",value:function(t){return t instanceof n&&(t.width===this.width&&t.height===this.height&&s.equals(t.projectionMatrix,this.projectionMatrix)&&s.equals(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===i||i,s=this.projectPosition(e),n=(0,o.worldToPixels)(s,this.pixelProjectionMatrix),a=(0,t.default)(n,2),h=a[0],l=a[1],u=r?l:this.height-l;return 2===e.length?[h,u]:[h,u,n[2]]}},{key:"unproject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,s=void 0===r||r,n=i.targetZ,a=(0,t.default)(e,3),h=a[0],l=a[1],u=a[2],c=s?l:this.height-l,p=n&&n*this.pixelsPerMeter,d=(0,o.pixelsToWorld)([h,c,u],this.pixelUnprojectionMatrix,p),j=this.unprojectPosition(d),v=(0,t.default)(j,3),f=v[0],x=v[1],M=v[2];return Number.isFinite(u)?[f,x,M]:Number.isFinite(n)?[f,x,n]:[f,x]}},{key:"projectPosition",value:function(e){var i=this.projectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var i=this.unprojectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),n}();exports.default=l;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./math-utils":"Muwq","./web-mercator-utils":"+n9R","gl-matrix/mat4":"w3aR"}],"M9mU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=r(require("@babel/runtime/helpers/esm/slicedToArray")),e=r(require("./web-mercator-viewport")),i=r(require("./assert"));function r(t){return t&&t.__esModule?t:{default:t}}function o(r){var o=r.width,a=r.height,u=r.bounds,l=r.padding,s=void 0===l?0:l,d=r.offset,n=void 0===d?[0,0]:d,b=(0,t.default)(u,2),f=(0,t.default)(b[0],2),h=f[0],m=f[1],p=(0,t.default)(b[1],2),g=p[0],c=p[1];if(Number.isFinite(s)){s={top:s,bottom:s,left:s,right:s}}else(0,i.default)(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));var M=new e.default({width:o,height:a,longitude:0,latitude:0,zoom:0}),v=M.project([h,c]),w=M.project([g,m]),F=[Math.abs(w[0]-v[0]),Math.abs(w[1]-v[1])],N=[o-s.left-s.right-2*Math.abs(n[0]),a-s.top-s.bottom-2*Math.abs(n[1])];(0,i.default)(N[0]>0&&N[1]>0);var j=N[0]/F[0],_=N[1]/F[1],q=(s.right-s.left)/2/j,z=(s.bottom-s.top)/2/_,x=[(w[0]+v[0])/2+q,(w[1]+v[1])/2+z],y=M.unproject(x),A=M.zoom+Math.log2(Math.abs(Math.min(j,_)));return{longitude:y[0],latitude:y[1],zoom:A}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","./web-mercator-viewport":"CgOb","./assert":"rxaE"}],"CgOb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=h(require("@babel/runtime/helpers/esm/inherits")),l=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),o=h(require("./viewport")),n=require("./web-mercator-utils"),u=h(require("./fit-bounds")),s=d(require("gl-matrix/vec2"));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var c=function(o){function d(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.width,u=a.height,s=a.latitude,h=void 0===s?0:s,c=a.longitude,p=void 0===c?0:c,g=a.zoom,f=void 0===g?0:g,v=a.pitch,b=void 0===v?0:v,m=a.bearing,M=void 0===m?0:m,w=a.altitude,y=void 0===w?1.5:w,L=a.nearZMultiplier,x=a.farZMultiplier;(0,e.default)(this,d),o=o||1,u=u||1;var j=(0,n.zoomToScale)(f);y=Math.max(.75,y);var P=(0,n.lngLatToWorld)([p,h],j);P[2]=0;var O=(0,n.getProjectionMatrix)({width:o,height:u,pitch:b,bearing:M,altitude:y,nearZMultiplier:L||1/u,farZMultiplier:x||1.01}),q=(0,n.getViewMatrix)({height:u,center:P,pitch:b,bearing:M,altitude:y,flipY:!0});return(t=(0,r.default)(this,(0,i.default)(d).call(this,{width:o,height:u,viewMatrix:q,projectionMatrix:O}))).latitude=h,t.longitude=p,t.zoom=f,t.pitch=b,t.bearing=M,t.altitude=y,t.scale=j,t.center=P,t.pixelsPerMeter=(0,n.getDistanceScales)((0,l.default)((0,l.default)(t))).pixelsPerMeter[2],Object.freeze((0,l.default)((0,l.default)(t))),t}return(0,a.default)(d,o),(0,t.default)(d,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,n.lngLatToWorld)(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,n.worldToLngLat)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,i=(0,n.pixelsToWorld)(r,this.pixelUnprojectionMatrix),a=(0,n.lngLatToWorld)(t,this.scale),l=s.add([],a,s.negate([],i)),o=s.add([],this.center,l);return(0,n.worldToLngLat)(o,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=(0,u.default)(Object.assign({width:r,height:i,bounds:e},t));return new d({width:r,height:i,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}}]),d}(o.default);exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","./viewport":"se97","./web-mercator-utils":"+n9R","./fit-bounds":"M9mU","gl-matrix/vec2":"XSo1"}],"msf8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=o(require("./web-mercator-viewport")),t=require("./math-utils");function o(e){return e&&e.__esModule?e:{default:e}}var i=85.05113,r=-85.05113;function u(o){var u=o.width,d=o.height,a=o.longitude,l=o.latitude,h=o.zoom,n=o.pitch,c=void 0===n?0:n,g=o.bearing,p=void 0===g?0:g;(a<-180||a>180)&&(a=(0,t.mod)(a+180,360)-180),(p<-180||p>180)&&(p=(0,t.mod)(p+180,360)-180);var m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h}),v=m.project([a,i])[1],w=m.project([a,r])[1],f=0;return w-v<d&&(h+=Math.log2(d/(w-v)),v=(m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h})).project([a,i])[1],w=m.project([a,r])[1]),v>0?f=v:w<d&&(f=w-d),f&&(l=m.unproject([u/2,d/2+f])[1]),{width:u,height:d,longitude:a,latitude:l,zoom:h,pitch:c,bearing:p}}
},{"./web-mercator-viewport":"CgOb","./math-utils":"Muwq"}],"GgPG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("./math-utils"),e=require("./web-mercator-utils"),r=o(require("gl-matrix/vec2"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};o.get||o.set?Object.defineProperty(e,r,o):e[r]=t[r]}return e.default=t,e}var a=.01,l=["longitude","latitude","zoom"];function i(o,i,n){var u={},c=o.zoom,h=[o.longitude,o.latitude],s=(0,e.zoomToScale)(c),d=i.zoom,g=[i.longitude,i.latitude],f=(0,e.zoomToScale)(d-c),p=(0,e.lngLatToWorld)(h,s),M=(0,e.lngLatToWorld)(g,s),m=r.sub([],M,p),v=Math.max(o.width,o.height),b=v/f,O=r.length(m);if(Math.abs(O)<a){for(var y=0;y<l.length;y++){var z=l[y],T=o[z],j=i[z];u[z]=(0,t.lerp)(T,j,n)}return u}var w=1.414*1.414,P=(b*b-v*v+w*w*O*O)/(2*v*w*O),q=(b*b-v*v-w*w*O*O)/(2*b*w*O),x=Math.log(Math.sqrt(P*P+1)-P),L=n*((Math.log(Math.sqrt(q*q+1)-q)-x)/1.414),_=Math.cosh(x)/Math.cosh(x+1.414*L),S=v*((Math.cosh(x)*Math.tanh(x+1.414*L)-Math.sinh(x))/w)/O,D=1/_,W=c+(0,e.scaleToZoom)(D),Z=r.scale([],m,S);r.add(Z,Z,p),r.scale(Z,Z,D);var k=(0,e.worldToLngLat)(Z,(0,e.zoomToScale)(W));return u.longitude=k[0],u.latitude=k[1],u.zoom=W,u}
},{"./math-utils":"Muwq","./web-mercator-utils":"+n9R","gl-matrix/vec2":"XSo1"}],"ZcHr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"PerspectiveMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return o.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return o.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return o.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return o.pixelsToWorld}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return o.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return o.getDistanceScales}}),Object.defineProperty(exports,"addMetersToLngLat",{enumerable:!0,get:function(){return o.addMetersToLngLat}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return o.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return o.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return o.getProjectionParameters}}),Object.defineProperty(exports,"getUncenteredViewMatrix",{enumerable:!0,get:function(){return o.getViewMatrix}}),Object.defineProperty(exports,"projectFlat",{enumerable:!0,get:function(){return o.lngLatToWorld}}),Object.defineProperty(exports,"unprojectFlat",{enumerable:!0,get:function(){return o.worldToLngLat}});var e=u(require("./web-mercator-viewport")),t=u(require("./fit-bounds")),r=u(require("./normalize-viewport-props")),n=u(require("./fly-to-viewport")),o=require("./web-mercator-utils");function u(e){return e&&e.__esModule?e:{default:e}}
},{"./web-mercator-viewport":"CgOb","./fit-bounds":"M9mU","./normalize-viewport-props":"msf8","./fly-to-viewport":"GgPG","./web-mercator-utils":"+n9R"}],"gw95":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=h(require("@babel/runtime/helpers/esm/toConsumableArray")),a=h(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("@luma.gl/core"),n=require("../project/constants"),e=require("math.gl"),i=h(require("../../utils/memoize")),r=require("viewport-mercator-project");function h(o){return o&&o.__esModule?o:{default:o}}var s="\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",d="\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap[max_lights];\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        shadowAlpha += shadow_getShadowWeight(shadow_vPosition[i], shadow_uShadowMap[i]) * shadow_uColor.a / shadow_uLightCount;\n      }\n    }\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",u="shadow",w=(0,i.default)(f),c=(0,i.default)(m);(0,t.createModuleInjection)(u,{hook:"vs:DECKGL_FILTER_GL_POSITION",injection:"\nposition = shadow_setVertexPosition(geometry.position);\n  "}),(0,t.createModuleInjection)(u,{hook:"fs:DECKGL_FILTER_COLOR",injection:"\ncolor = shadow_filterShadowColor(color);\n  "});var l=[0,0,0,1],p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function _(o,t){var n=(0,a.default)(o,3),e=n[0],i=n[1],h=n[2],s=(0,r.pixelsToWorld)([e,i,h],t);return Number.isFinite(h)?s:[s[0],s[1],0]}function f(o){var a=o.viewport,t=o.center;return new e.Matrix4(a.viewProjectionMatrix).invert().transformVector4(t)}function m(a){var t=a.viewport,n=a.shadowMatrices,i=[],r=t.pixelUnprojectionMatrix,h=[[0,0],[t.width,0],[0,t.height],[t.width,t.height],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(function(o){return _(o,r)}),s=!0,d=!1,u=void 0;try{for(var w,c=function(){var a=w.value,n=a.clone().translate(new e.Vector3(t.center).negate()),r=h.map(function(o){return n.transformVector3(o)}),s=(new e.Matrix4).ortho({left:Math.min.apply(Math,(0,o.default)(r.map(function(o){return o[0]}))),right:Math.max.apply(Math,(0,o.default)(r.map(function(o){return o[0]}))),bottom:Math.min.apply(Math,(0,o.default)(r.map(function(o){return o[1]}))),top:Math.max.apply(Math,(0,o.default)(r.map(function(o){return o[1]}))),near:Math.min.apply(Math,(0,o.default)(r.map(function(o){return-o[2]}))),far:Math.max.apply(Math,(0,o.default)(r.map(function(o){return-o[2]})))});i.push(s.multiplyRight(a))},l=n[Symbol.iterator]();!(s=(w=l.next()).done);s=!0)c()}catch(p){d=!0,u=p}finally{try{s||null==l.return||l.return()}finally{if(d)throw u}}return i}function M(){for(var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={shadow_uDrawShadowMap:Boolean(o.drawToShadowMap),shadow_uUseShadowMap:!!o.shadowMaps&&o.shadowMaps.length>0,shadow_uColor:o.shadowColor||l,shadow_uLightId:o.shadowLightId||0,shadow_uLightCount:o.shadowMatrices.length},i=w({viewport:o.viewport,center:a.project_uCenter}),r=[],h=c({shadowMatrices:o.shadowMatrices,viewport:o.viewport}).slice(),s=0;s<o.shadowMatrices.length;s++){var d=h[s],u=d.clone().translate(new e.Vector3(o.viewport.center).negate());a.project_uCoordinateSystem===n.PROJECT_COORDINATE_SYSTEM.LNG_LAT?(h[s]=u,r[s]=[0,0,0,0]):(h[s]=d.clone().multiplyRight(p),r[s]=u.transformVector4(i))}for(var _=0;_<h.length;_++)t["shadow_uViewProjectionMatrices[".concat(_,"]")]=h[_],t["shadow_uProjectCenters[".concat(_,"]")]=r[_],o.shadowMaps&&o.shadowMaps.length>0?t["shadow_uShadowMap[".concat(_,"]")]=o.shadowMaps[_]:t["shadow_uShadowMap[".concat(_,"]")]=o.dummyShadowMaps[0];return t}var g={name:"shadow",dependencies:["project"],vs:s,fs:d,getUniforms:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.drawToShadowMap||o.shadowMaps&&o.shadowMaps.length>0){var t={},n=o.shadowEnabled;return(void 0===n||n)&&o.shadowMatrices&&o.shadowMatrices.length>0?Object.assign(t,M(o,a)):Object.assign(t,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),t}return{}}};exports.default=g;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/slicedToArray":"TBeo","@luma.gl/core":"iuAK","../project/constants":"DSlO","math.gl":"4xAa","../../utils/memoize":"9uXG","viewport-mercator-project":"ZcHr"}],"vZnx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializeShaderModules=c,Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return e.picking}}),Object.defineProperty(exports,"gouraudlighting",{enumerable:!0,get:function(){return e.gouraudlighting}}),Object.defineProperty(exports,"phonglighting",{enumerable:!0,get:function(){return e.phonglighting}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return n.default}});var e=require("@luma.gl/core"),r=u(require("./misc/geometry")),t=u(require("./project/project")),o=u(require("./project32/project32")),i=u(require("./project64/project64")),n=u(require("./shadow/shadow"));function u(e){return e&&e.__esModule?e:{default:e}}function c(){(0,e.registerShaderModules)([e.fp32,t.default,o.default,e.gouraudlighting,e.phonglighting,e.picking]),(0,e.setDefaultShaderModules)([r.default,t.default]),(0,e.createShaderHook)("vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)"),(0,e.createShaderHook)("vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)"),(0,e.createShaderHook)("vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)"),(0,e.createShaderHook)("fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"),(0,e.createModuleInjection)("picking",{hook:"fs:DECKGL_FILTER_COLOR",order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n"})}
},{"@luma.gl/core":"iuAK","./misc/geometry":"uFGI","./project/project":"9NVO","./project32/project32":"1qxV","./project64/project64":"ifoR","./shadow/shadow":"gw95"}],"N6pv":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@loaders.gl/core"),r=require("@loaders.gl/images"),l=require("../utils/globals"),o=i(require("../utils/log")),t=i(require("../utils/json-loader")),a=require("../shaderlib");function i(e){return e&&e.__esModule?e:{default:e}}var d="7.2.0-beta.3",s="set deck.log.priority=1 (or higher) to trace attribute updates";if(l.global.deck&&l.global.deck.VERSION!==d)throw new Error("deck.gl - multiple versions detected: ".concat(l.global.deck.VERSION," vs ").concat(d));l.global.deck||(o.default.log(0,"deck.gl ".concat(d," - ").concat(s))(),l.global.deck=l.global.deck||{VERSION:d,version:d,log:o.default},(0,e.registerLoaders)([t.default,[r.ImageLoader,{imageOrientation:"flipY"}]]),(0,a.initializeShaderModules)());var u=l.global.deck;exports.default=u;
},{"@loaders.gl/core":"ikKD","@loaders.gl/images":"DNDh","../utils/globals":"UmXc","../utils/log":"GVus","../utils/json-loader":"DDDc","../shaderlib":"vZnx"}],"n3wt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/classCallCheck")),r=i(require("@babel/runtime/helpers/esm/createClass")),t=i(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=i(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=i(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/core");function i(e){return e&&e.__esModule?e:{default:e}}var a=function(s){function i(r){var l;(0,e.default)(this,i),l=(0,t.default)(this,(0,u.default)(i).call(this,r));var s=r._shadow,a=void 0!==s&&s;return l.shadow=a,l}return(0,l.default)(i,s),(0,r.default)(i,[{key:"getProjectedLight",value:function(){return this}}]),i}(s.DirectionalLight);exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/core":"iuAK"}],"Z10T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,r);var u=t.id,a=void 0===u?"effect":u;this.id=a,this.props={},Object.assign(this.props,t)}return(0,t.default)(r,[{key:"prepare",value:function(){}},{key:"getParameters",value:function(){}},{key:"cleanup",value:function(){}}]),r}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"2ay0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,s);var i=r.id,u=void 0===i?"pass":i;this.id=u,this.gl=t,this.props={},Object.assign(this.props,r)}return(0,t.default)(s,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),s}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"7oM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),r=n(require("@babel/runtime/helpers/esm/createClass")),t=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=n(require("@babel/runtime/helpers/esm/inherits")),s=n(require("./pass")),o=require("@luma.gl/core");function n(e){return e&&e.__esModule?e:{default:e}}var u=function(s){function n(){return(0,e.default)(this,n),(0,t.default)(this,(0,a.default)(n).apply(this,arguments))}return(0,i.default)(n,s),(0,r.default)(n,[{key:"render",value:function(e){var r=this,t=this.gl;return(0,o.withParameters)(t,{framebuffer:e.outputBuffer},function(){return r.drawLayers(e)})}},{key:"drawLayers",value:function(e){var r=this,t=e.layers,a=e.viewports,i=e.views,s=e.onViewportActive,o=e.deviceRect,n=void 0===o?null:o,u=e.parameters,p=void 0===u?{}:u,l=e.pass,c=void 0===l?"draw":l,v=e.redrawReason,f=void 0===v?"":v,d=e.clearCanvas,w=void 0===d||d,h=e.effects,m=e.effectProps,y=this.gl;w&&this.clearCanvas(y);var g=[];return a.forEach(function(e,a){var o=r.getViewportFromDescriptor(e),u=i&&i[o.id];s(o);var l=r.drawLayersInViewport(y,{layers:t,viewport:o,view:u,deviceRect:n,parameters:p,pass:c,redrawReason:f,effects:h,effectProps:m});g.push(l)}),g}},{key:"drawLayersInViewport",value:function(e,r){var t=this,a=r.layers,i=r.viewport,s=r.view,n=(r.deviceRect,r.parameters),u=void 0===n?{}:n,p=(r.pass,r.redrawReason,r.effects),l=r.effectProps,c=this.getGLViewport(e,{viewport:i});if(s&&s.props.clear){var v=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;(0,o.withParameters)(e,{scissorTest:!0,scissor:c},function(){return(0,o.clear)(e,v)})}var f={totalCount:a.length,visibleCount:0,compositeCount:0,pickableCount:0};return(0,o.setParameters)(e,u||{}),a.forEach(function(r,a){var s=t.shouldDrawLayer(r,i);s&&r.props.pickable&&f.pickableCount++,r.isComposite&&f.compositeCount++,s&&(f.visibleCount++,t.drawLayerInViewport({gl:e,layer:r,layerIndex:a,glViewport:c,parameters:u,effects:p,effectProps:l}))}),f}},{key:"drawLayerInViewport",value:function(e){e.gl;var r=e.layer,t=e.layerIndex,a=e.glViewport,i=e.parameters,s=e.effects,o=e.effectProps,n=this.getModuleParameters(r,s,o),u=Object.assign({},r.context.uniforms,{layerIndex:t}),p=this.getLayerParameters(r,t,a,i);r.drawLayer({moduleParameters:n,uniforms:u,parameters:p})}},{key:"getViewportFromDescriptor",value:function(e){return e.viewport?e.viewport:e}},{key:"shouldDrawLayer",value:function(e,r){var t=this.props.layerFilter,a=!e.isComposite&&e.props.visible;return a&&t&&(a=t({layer:e,viewport:r,isPicking:!1})),a}},{key:"getModuleParameters",value:function(e){return Object.assign(Object.create(e.props),{viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:this.props.pixelRatio})}},{key:"getLayerParameters",value:function(e,r,t,a){var i=Object.assign({},e.props.parameters||{},a);return Object.assign(i,{viewport:t}),i}},{key:"getGLViewport",value:function(e,r){var t=r.viewport,a=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=t,s=this.props.pixelRatio;return[i.x*s,(a-i.y-i.height)*s,i.width*s,i.height*s]}},{key:"clearCanvas",value:function(e){var r=e.drawingBufferWidth,t=e.drawingBufferHeight;(0,o.withParameters)(e,{viewport:[0,0,r,t]},function(){e.clear(16640)})}}]),n}(s.default);exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./pass":"2ay0","@luma.gl/core":"iuAK"}],"STtv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/defineProperty")),t=d(require("@babel/runtime/helpers/esm/classCallCheck")),r=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=d(require("@babel/runtime/helpers/esm/get")),u=d(require("@babel/runtime/helpers/esm/inherits")),l=d(require("./layers-pass")),h=require("@luma.gl/core");function d(e){return e&&e.__esModule?e:{default:e}}var o=function(l){function d(r,s){var u,l,o;return(0,t.default)(this,d),(o=(0,i.default)(this,(0,a.default)(d).call(this,r,s))).shadowMap=new h.Texture2D(r,{width:1,height:1,parameters:(u={},(0,e.default)(u,10241,9729),(0,e.default)(u,10240,9729),(0,e.default)(u,10242,33071),(0,e.default)(u,10243,33071),u)}),o.depthBuffer=new h.Renderbuffer(r,{format:33189,width:1,height:1}),o.fbo=new h.Framebuffer(r,{id:"shadowmap",width:1,height:1,attachments:(l={},(0,e.default)(l,36064,o.shadowMap),(0,e.default)(l,36096,o.depthBuffer),l)}),o}return(0,u.default)(d,l),(0,r.default)(d,[{key:"render",value:function(e){var t=this,r=this.fbo;(0,h.withParameters)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var i=e.viewports[0],u=i.width*t.props.pixelRatio,l=i.height*t.props.pixelRatio;u===r.width&&l===r.height||r.resize({width:u,height:l}),(0,s.default)((0,a.default)(d.prototype),"render",t).call(t,Object.assign(e,{outputBuffer:r}))})}},{key:"getModuleParameters",value:function(e,t,r){var i=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:0,drawToShadowMap:!0,devicePixelRatio:this.props.pixelRatio});return Object.assign(i,r),i}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),d}(l.default);exports.default=o;
},{"@babel/runtime/helpers/esm/defineProperty":"9iDM","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","./layers-pass":"7oM9","@luma.gl/core":"iuAK"}],"MByF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),r=d(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/core"),o=d(require("./directional-light")),h=d(require("../../lib/effect")),n=require("math.gl"),l=d(require("../../passes/shadow-pass")),u=d(require("../../shaderlib/shadow/shadow"));function d(e){return e&&e.__esModule?e:{default:e}}var c={color:[255,255,255],intensity:1},f=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],g=[0,0,0,200/255],p=function(h){function d(t){var r;for(var s in(0,e.default)(this,d),(r=(0,i.default)(this,(0,a.default)(d).call(this,t))).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=g,r.shadowPasses=[],r.dummyShadowMaps=[],r.shadow=!1,t){var o=t[s];switch(o.type){case"ambient":r.ambientLight=o;break;case"directional":r.directionalLights.push(o);break;case"point":r.pointLights.push(o)}}return r._applyDefaultLights(),r.directionalLights.some(function(e){return e.shadow})&&(r.shadow=!0,r._addShadowModule()),r}return(0,r.default)(d,h),(0,t.default)(d,[{key:"prepare",value:function(e,t){var i=t.layers,a=t.viewports,r=t.onViewportActive,s=t.views,o=t.pixelRatio;if(!this.shadow)return{};var h=this._createLightMatrix();0===this.shadowPasses.length&&this._createShadowPasses(e,o),0===this.dummyShadowMaps.length&&this._createDummyShadowMaps(e);for(var n=[],l=0;l<this.shadowPasses.length;l++){var u=this.shadowPasses[l];u.render({layers:i.filter(function(e){return!1!==e.props.shadowEnabled}),viewports:a,onViewportActive:r,views:s,effectProps:{shadowLightId:l,dummyShadowMaps:this.dummyShadowMaps,shadowMatrices:h}}),n.push(u.shadowMap)}return{shadowMaps:n,dummyShadowMaps:this.dummyShadowMaps,shadowColor:this.shadowColor,shadowMatrices:h}}},{key:"getParameters",value:function(e){var t=this.ambientLight,i=this._getProjectedPointLights(e);return{lightSources:{ambientLight:t,directionalLights:this._getProjectedDirectionalLights(e),pointLights:i}}}},{key:"cleanup",value:function(){var e=!0,t=!1,i=void 0;try{for(var a,r=this.shadowPasses[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){a.value.delete()}}catch(u){t=!0,i=u}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}this.shadowPasses.length=0;var s=!0,o=!1,h=void 0;try{for(var n,l=this.dummyShadowMaps[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){n.value.delete()}}catch(u){o=!0,h=u}finally{try{s||null==l.return||l.return()}finally{if(o)throw h}}this.dummyShadowMaps.length=0,this.shadow&&this._removeShadowModule()}},{key:"_createLightMatrix",value:function(){var e=[],t=!0,i=!1,a=void 0;try{for(var r,s=this.directionalLights[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value,h=(new n.Matrix4).lookAt({eye:new n.Vector3(o.direction).negate()});e.push(h)}}catch(l){i=!0,a=l}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return e}},{key:"_createShadowPasses",value:function(e,t){for(var i=0;i<this.directionalLights.length;i++)this.shadowPasses.push(new l.default(e,{pixelRatio:t}))}},{key:"_createDummyShadowMaps",value:function(e){for(var t=0;t<this.directionalLights.length;t++)this.dummyShadowMaps.push(new s.Texture2D(e,{width:1,height:1}))}},{key:"_addShadowModule",value:function(){var e=(0,s.getDefaultShaderModules)(),t=!1,i=!0,a=!1,r=void 0;try{for(var o,h=e[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){if("shadow"===o.value.name){t=!0;break}}}catch(n){a=!0,r=n}finally{try{i||null==h.return||h.return()}finally{if(a)throw r}}t||(e.push(u.default),(0,s.setDefaultShaderModules)(e))}},{key:"_removeShadowModule",value:function(){for(var e=(0,s.getDefaultShaderModules)(),t=0;t<e.length;t++)if("shadow"===e[t].name){e.splice(t,1),(0,s.setDefaultShaderModules)(e);break}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,i=this.directionalLights;e||0!==t.length||0!==i.length||(this.ambientLight=new s.AmbientLight(c),this.directionalLights.push(new o.default(f[0])),this.directionalLights.push(new o.default(f[1])))}},{key:"_getProjectedPointLights",value:function(e){for(var t=[],i=0;i<this.pointLights.length;i++){var a=this.pointLights[i];t.push(a.getProjectedLight({layer:e}))}return t}},{key:"_getProjectedDirectionalLights",value:function(e){for(var t=[],i=0;i<this.directionalLights.length;i++){var a=this.directionalLights[i];t.push(a.getProjectedLight({layer:e}))}return t}}]),d}(h.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/core":"iuAK","./directional-light":"n3wt","../../lib/effect":"Z10T","math.gl":"4xAa","../../passes/shadow-pass":"STtv","../../shaderlib/shadow/shadow":"gw95"}],"AJ0f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorldPosition=O,exports.projectPosition=T;var e=s(require("@babel/runtime/helpers/esm/slicedToArray")),r=require("../../lib/constants"),t=require("./viewport-uniforms"),o=n(require("gl-matrix/vec4")),i=n(require("gl-matrix/vec3")),a=require("viewport-mercator-project");function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}function s(e){return e&&e.__esModule?e:{default:e}}function c(r,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,e.default)(r,3),n=i[0],s=i[1],c=i[2],d=void 0===c?0:c,O=t.projectFlat(r),T=(0,e.default)(O,2);return[T[0],T[1],d*(o?(0,a.getDistanceScales)({longitude:n,latitude:s,scale:t.scale}):t.getDistanceScales()).pixelsPerMeter[2]]}function d(e){var o=Object.assign({},e),i=e.viewport,a=e.coordinateSystem,n=e.coordinateOrigin,s=e.fromCoordinateSystem,c=e.fromCoordinateOrigin;return void 0===s&&(o.fromCoordinateSystem=a),void 0===c&&(o.fromCoordinateOrigin=n),a===r.COORDINATE_SYSTEM.LNGLAT&&i.zoom>=t.LNGLAT_AUTO_OFFSET_ZOOM_THRESHOLD&&(o.coordinateSystem=r.COORDINATE_SYSTEM.LNGLAT_OFFSETS,o.coordinateOrigin=[Math.fround(i.longitude),Math.fround(i.latitude)]),o}function O(t,i){var n=i.viewport,s=i.modelMatrix,d=i.coordinateSystem,O=i.coordinateOrigin,T=i.offsetMode,S=(0,e.default)(t,3),u=S[0],E=S[1],f=S[2];if(s){var l=o.transformMat4([],[u,E,f,1],s),M=(0,e.default)(l,3);u=M[0],E=M[1],f=M[2]}switch(d){case r.COORDINATE_SYSTEM.LNGLAT:case r.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:return c([u,E,f],n,T);case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return c([u+O[0],E+O[1],f+(O[2]||0)],n,T);case r.COORDINATE_SYSTEM.METER_OFFSETS:return c((0,a.addMetersToLngLat)(O,[u,E,f]),n,T);case r.COORDINATE_SYSTEM.IDENTITY:default:return n.projectPosition([u,E,f])}}function T(e,t){var o=d(t),a=o.viewport,n=o.coordinateSystem,s=o.coordinateOrigin,T=o.modelMatrix,S=o.fromCoordinateSystem,u=o.fromCoordinateOrigin;switch(n){case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:case r.COORDINATE_SYSTEM.METER_OFFSETS:var E=O(e,{viewport:a,modelMatrix:T,coordinateSystem:S,coordinateOrigin:u,offsetMode:!0}),f=c(s,a,!0);return i.sub(E,E,f),E;case r.COORDINATE_SYSTEM.LNGLAT:case r.COORDINATE_SYSTEM.LNGLAT_DEPRECATED:case r.COORDINATE_SYSTEM.IDENTITY:default:return O(e,{viewport:a,modelMatrix:T,coordinateSystem:S,coordinateOrigin:u,offsetMode:!1})}}
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","../../lib/constants":"ysbg","./viewport-uniforms":"7iWu","gl-matrix/vec4":"9+zW","gl-matrix/vec3":"AWBd","viewport-mercator-project":"ZcHr"}],"kai7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIterable=r,exports.isAsyncIterable=n;var e=[],t=[];function r(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=e,a={index:-1,data:r,target:[]};return r?"function"==typeof r[Symbol.iterator]?i=r:r.length>0&&(t.length=r.length,i=t):i=e,(n>0||Number.isFinite(o))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(n,o),a.index=n-1),{iterable:i,objectInfo:a}}function n(e){return e&&e[Symbol.asyncIterator]}
},{}],"6gSV":[function(require,module,exports) {
"use strict";function r(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.filter,n=void 0===i?function(){return!0}:i,o=e.map,s=void 0===o?function(r){return r}:o,u=e.result,a=void 0===u?[]:u;return Array.isArray(r)?t(r,n,s,a):n(r)?[s(r)]:[]}function t(r,e,i,n){for(var o=-1;++o<r.length;){var s=r[o];Array.isArray(s)?t(s,e,i,n):e(s)&&n.push(i(s))}return n}function e(r){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.result,n=void 0===i?[]:i,o=t.dimensions,s=void 0===o?3:o,u=-1,a=0;++u<r.length;){var f=r[u];Array.isArray(f)||ArrayBuffer.isView(f)?e(f,{result:n,dimensions:s}):a<s&&(n.push(f),a++)}return a>0&&a<s&&n.push(0),n}function i(r){for(var t=r.target,e=r.source,i=r.start,n=void 0===i?0:i,o=r.count,s=void 0===o?1:o,u=e.length,a=s*u,f=0,v=n;f<u;f++)t[v++]=e[f];for(;f<a;)f<a-f?(t.copyWithin(n+f,n,n+f),f*=2):(t.copyWithin(n+f,n,n+a-f),f=a);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=r,exports.flattenVertices=e,exports.fillArray=i;
},{}],"UFya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=t,exports.FULL=exports.EMPTY=void 0;var r=[];exports.EMPTY=r;var e=[[0,1/0]];function t(r,t){if(r===e)return r;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return r;for(var s=[],o=r.length,p=0,a=0;a<o;a++){var u=r[a];u[1]<t[0]?(s.push(u),p=a+1):u[0]>t[1]?s.push(u):t=[Math.min(u[0],t[0]),Math.max(u[1],t[1])]}return s.splice(p,0,t),s}exports.FULL=e;
},{}],"Mssj":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),i=require("@luma.gl/core");function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,s);var n=r.id,a=void 0===n?(0,i.uid)("attribute"):n,u=r.type,o=r.isIndexed,l=void 0!==o&&o;this.gl=t,this.id=a,this.isIndexed=l,this.target=l?34963:34962,this.type=u,l&&!u&&(this.type=t&&(0,i.hasFeature)(t,i.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(r),this._validateAttributeDefinition()}return(0,t.default)(s,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,i=e.buffer,s=e.constant,r=void 0===s?this.constant||!1:s;if(this.constant=r,i)this.externalBuffer=i,this.constant=!1,this.type=e.type||i.accessor.type,void 0!==i.accessor.divisor&&(this.divisor=i.accessor.divisor),void 0!==e.divisor&&(this.divisor=e.divisor);else if(t){this.externalBuffer=null;var n=this.size||e.size||0;if(r&&t.length!==n){this.value=new Float32Array(n),this._setAccessor(e);for(var a=this.elementOffset,u=0;u<this.size;++u)this.value[u]=t[a+u]}else this.value=t;!r&&this.gl&&(this.buffer=this.buffer||this._createBuffer(e),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)}this._setAccessor(e),r&&this.normalized&&(this.value=this._normalizeConstant(this.value))}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_createBuffer",value:function(e){var t=Object.assign({},e,{id:this.id,target:this.target,accessor:{type:this.type}});return Number.isFinite(t.divisor)&&(t.accessor.divisor=t.divisor),delete t.divisor,Number.isFinite(t.size)&&(t.accessor.size=t.size),delete t.size,new i.Buffer(this.gl,t)}},{key:"_setAccessor",value:function(e){var t=e.size,s=void 0===t?this.size:t,r=e.offset,n=void 0===r?this.offset||0:r,a=e.stride,u=void 0===a?this.stride||0:a,o=e.normalized,l=void 0===o?this.normalized||!1:o,f=e.integer,h=void 0===f?this.integer||!1:f,d=e.divisor,c=void 0===d?this.divisor||0:d,v=e.instanced,y=e.isInstanced;this.size=s,this.offset=n,this.elementOffset=n/i._Accessor.getBytesPerElement(this),this.stride=u,this.normalized=l,this.integer=h,this.divisor=c,void 0!==y&&(i.log.deprecated("Attribute.isInstanced")(),this.divisor=y?1:0),void 0!==v&&(i.log.deprecated("Attribute.instanced")(),this.divisor=v?1:0)}},{key:"_normalizeConstant",value:function(e){switch(this.type){case 5120:return new Float32Array(e).map(function(e){return(e+128)/255*2-1});case 5122:return new Float32Array(e).map(function(e){return(e+32768)/65535*2-1});case 5121:return new Float32Array(e).map(function(e){return e/255});case 5123:return new Float32Array(e).map(function(e){return e/65535});default:return e}}},{key:"_validateAttributeDefinition",value:function(){}}]),s}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK"}],"yeLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TypedArrayManager=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.overAlloc,l=void 0===i?2:i,o=t.poolSize,n=void 0===o?100:o;(0,e.default)(this,r),this.overAlloc=l,this.poolSize=n,this._pool=[]}return(0,t.default)(r,[{key:"allocate",value:function(e,t,r){var i=r.size,l=void 0===i?1:i,o=r.type,n=r.padding,a=void 0===n?0:n,s=r.copy,u=void 0!==s&&s,f=o||e&&e.constructor||Float32Array,h=t*l+a;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new f(e.buffer,0,h)}var c=this._allocate(f,h);return e&&u?c.set(e):c.fill(0,0,4),this._release(e),c}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t){t=Math.max(Math.ceil(t*this.overAlloc),1);var r=this._pool,i=e.BYTES_PER_ELEMENT*t,l=r.findIndex(function(e){return e.byteLength>=i});return l>=0?new e(r.splice(l,1)[0],0,t):new e(t)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,r=e.buffer,i=r.byteLength,l=t.findIndex(function(e){return e.byteLength>=i});l<0?t.push(r):(l>0||t.length<this.poolSize)&&t.splice(l,0,r),t.length>this.poolSize&&t.shift()}}}]),r}();exports.TypedArrayManager=i;var l=new i;exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"QvgI":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glArrayFromType=m,exports.default=void 0;var e=b(require("@babel/runtime/helpers/esm/slicedToArray")),t=b(require("@babel/runtime/helpers/esm/classCallCheck")),r=b(require("@babel/runtime/helpers/esm/createClass")),a=b(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=b(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=b(require("@babel/runtime/helpers/esm/get")),u=b(require("@babel/runtime/helpers/esm/inherits")),n=require("@luma.gl/core"),l=b(require("../utils/assert")),o=require("../utils/iterable-utils"),f=require("../utils/flatten"),d=y(require("../utils/range")),c=b(require("../utils/log")),h=b(require("./base-attribute")),v=b(require("../utils/typed-array-manager"));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var p={isExternalBuffer:!1,lastExternalBuffer:null,allocatedValue:null,needsUpdate:!0,needsRedraw:!1,updateRanges:d.FULL},g=function(h){function y(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,y),r=(0,a.default)(this,(0,s.default)(y).call(this,e,i));var u=i.transition,n=void 0!==u&&u,l=i.noAlloc,o=void 0!==l&&l,f=i.update,d=void 0===f?null:f,c=i.accessor,h=void 0===c?null:c,v=i.bufferLayout,b=void 0===v?null:v,g=i.defaultValue,m=void 0===g?[0,0,0,0]:g;if(m=Array.isArray(m)?m:[m],r.shaderAttributes={},r.hasShaderAttributes=!1,i.shaderAttributes){var A=i.shaderAttributes;for(var w in A){var D=A[w];r.shaderAttributes[w]=new y(r.gl,Object.assign({offset:r.offset,stride:r.stride,normalized:r.normalized},D,{id:w,constant:D.constant||!1,isIndexed:D.isIndexed||D.elements,size:(D.elements?1:D.size)||r.size,value:D.value||null,divisor:D.instanced||D.divisor||r.divisor,buffer:r.getBuffer(),noAlloc:!0})),r.hasShaderAttributes=!0}}return Object.assign(r.userData,p,i,{transition:n,noAlloc:o,update:d||h&&r._standardAccessor,accessor:h,defaultValue:m,bufferLayout:b}),Object.seal(r.userData),r._validateAttributeUpdaters(),r}return(0,u.default)(y,h),(0,r.default)(y,[{key:"delete",value:function(){(0,i.default)((0,s.default)(y.prototype),"delete",this).call(this),v.default.release(this.userData.allocatedValue)}},{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,t=void 0!==e&&e,r=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!t,r}},{key:"getUpdateTriggers",value:function(){var e=this.userData.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"getShaderAttributes",value:function(){var e={};return this.hasShaderAttributes?Object.assign(e,this.shaderAttributes):e[this.id]=this,e}},{key:"supportsTransition",value:function(){return this.userData.transition}},{key:"getTransitionSetting",value:function(e){var t=this.userData,r=t.transition,a=t.accessor;if(!r)return null;var s=Array.isArray(a)?e[a.find(function(t){return e[t]})]:e[a];return Number.isFinite(s)&&(s={duration:s}),s&&s.duration>0?Object.assign({},r,s):null}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.userData.needsUpdate=this.userData.needsUpdate||e,t){var r=t.startRow,a=void 0===r?0:r,s=t.endRow,i=void 0===s?1/0:s;this.userData.updateRanges=d.add(this.userData.updateRanges,[a,i])}else this.userData.updateRanges=d.FULL}},{key:"clearNeedsUpdate",value:function(){this.userData.needsUpdate=!1,this.userData.updateRanges=d.EMPTY}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||e}},{key:"allocate",value:function(e){var t=this.userData;if(t.isExternalBuffer||t.noAlloc)return!1;if(t.update){(0,l.default)(Number.isFinite(e));var r=Math.max(e,1),a=m(this.type||5126),s=t.allocatedValue,i=t.updateRanges!==d.FULL;return this.constant=!1,this.value=v.default.allocate(s,r,{size:this.size,type:a,padding:this.elementOffset,copy:i}),this.buffer&&this.buffer.byteLength<this.value.byteLength&&(this.buffer.reallocate(this.value.byteLength),i&&s&&this.buffer.subData(s)),t.allocatedValue=this.value,!0}return!1}},{key:"updateBuffer",value:function(t){var r=t.numInstances,a=t.bufferLayout,s=t.data,i=t.props,u=t.context;if(!this.needsUpdate())return!1;var n=this.userData,l=n.update,o=n.updateRanges,f=n.noAlloc,d=!0;if(l){var c=!0,h=!1,v=void 0;try{for(var y,b=o[Symbol.iterator]();!(c=(y=b.next()).done);c=!0){var p=(0,e.default)(y.value,2),g=p[0],m=p[1];l.call(u,this,{data:s,startRow:g,endRow:m,props:i,numInstances:r,bufferLayout:a})}}catch(U){h=!0,v=U}finally{try{c||null==b.return||b.return()}finally{if(h)throw v}}if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength)this.update({value:this.value,constant:this.constant});else{var A=!0,w=!1,D=void 0;try{for(var x,_=o[Symbol.iterator]();!(A=(x=_.next()).done);A=!0){var k=(0,e.default)(x.value,2),R=(g=k[0],m=k[1],Number.isFinite(g)?this._getVertexOffset(g,this.bufferLayout):0),L=Number.isFinite(m)?this._getVertexOffset(m,this.bufferLayout):f||!Number.isFinite(r)?this.value.length:r*this.size;this.buffer.subData({data:this.value.subarray(R,L),offset:R*this.value.BYTES_PER_ELEMENT})}}catch(U){w=!0,D=U}finally{try{A||null==_.return||_.return()}finally{if(w)throw D}}}this._checkAttributeArray()}else d=!1;return this._updateShaderAttributes(),this.clearNeedsUpdate(),n.needsRedraw=!0,d}},{key:"update",value:function(e){(0,i.default)((0,s.default)(y.prototype),"update",this).call(this,e),this._updateShaderAttributes()}},{key:"setGenericValue",value:function(e){var t=this.userData;if(void 0===e||"function"==typeof e)return t.isExternalBuffer=!1,!1;e=this._normalizeValue(e);var r=!this.constant||!this._areValuesEqual(e,this.value);return r&&this.update({constant:!0,value:e}),t.needsRedraw=t.needsUpdate||r,this.clearNeedsUpdate(),t.isExternalBuffer=!0,this._updateShaderAttributes(),!0}},{key:"setExternalBuffer",value:function(e){var t,r=this.userData;if(!e)return r.isExternalBuffer=!1,r.lastExternalBuffer=null,!1;if(this.clearNeedsUpdate(),r.lastExternalBuffer===e)return!0;if(r.isExternalBuffer=!0,r.lastExternalBuffer=e,(t=ArrayBuffer.isView(e)?{constant:!1,value:e}:e instanceof n.Buffer?{constant:!1,buffer:e}:Object.assign({constant:!1},e)).value){var a=m(this.type||5126);t.value instanceof a||(c.default.warn("Attribute prop ".concat(this.id," is casted to ").concat(a.name))(),t.value=new a(t.value))}return this.update(t),r.needsRedraw=!0,this._updateShaderAttributes(),!0}},{key:"_getVertexOffset",value:function(e,t){var r=this.elementOffset;if(t){var a=0,s=!0,i=!1,u=void 0;try{for(var n,l=t[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){var o=n.value;if(a>=e)break;r+=o*this.size,a++}}catch(f){i=!0,u=f}finally{try{s||null==l.return||l.return()}finally{if(i)throw u}}return r}return r+e*this.size}},{key:"_normalizeValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.userData.defaultValue;if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return t[r]=Number.isFinite(e)?e:a[0],t;switch(this.size){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:a[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:a[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:a[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:a[0]}return t}},{key:"_areValuesEqual",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}},{key:"_standardAccessor",value:function(e,t){var r=t.data,a=t.startRow,s=t.endRow,i=t.props,u=(t.numInstances,t.bufferLayout),n=e.userData.accessor,d=e.value,c=e.size,h="function"==typeof n?n:i[n];(0,l.default)("function"==typeof h,'accessor "'.concat(n,'" is not a function'));var v=e._getVertexOffset(a,u),y=(0,o.createIterable)(r,a,s),b=y.iterable,p=y.objectInfo,g=!0,m=!1,A=void 0;try{for(var w,D=b[Symbol.iterator]();!(g=(w=D.next()).done);g=!0){var x=w.value;p.index++;var _=h(x,p);if(u){e._normalizeValue(_,p.target);var k=u[p.index];(0,f.fillArray)({target:e.value,source:p.target,start:v,count:k}),v+=k*c}else e._normalizeValue(_,d,v),v+=c}}catch(R){m=!0,A=R}finally{try{g||null==D.return||D.return()}finally{if(m)throw A}}e.constant=!1,e.bufferLayout=u}},{key:"_validateAttributeUpdaters",value:function(){var e=this.userData;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"_updateShaderAttributes",value:function(){var e=this.shaderAttributes;for(var t in e){e[t].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(e){this.userData.bufferLayout=e}}]),y}(h.default);function m(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,r=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce type from array")}}exports.default=g;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/core":"iuAK","../utils/assert":"Txat","../utils/iterable-utils":"kai7","../utils/flatten":"6gSV","../utils/range":"UFya","../utils/log":"GVus","./base-attribute":"Mssj","../utils/typed-array-manager":"yeLJ"}],"LUSB":[function(require,module,exports) {
"use strict";function t(t){var r=t.source,e=t.target,a=t.start,s=void 0===a?0:a,o=t.end,n=t.getData;o=o||e.length;var u=r.length,g=o-s;if(u>g)e.set(r.subarray(0,g),s);else if(e.set(r,s),n)for(var i=u;i<g;)for(var f=n(i,r),c=0;c<f.length;c++)e[s+i]=f[c],i++}function r(r){var e=r.source,a=r.target,s=r.size,o=r.offset,n=void 0===o?0:o,u=r.getData,g=r.sourceLayout,i=r.targetLayout;if(!Array.isArray(i))return t({source:e,target:a,getData:u}),a;for(var f=n,c=n,v=u&&function(t,r){return u(t+c,r)},l=Math.min(g.length,i.length),y=0;y<l;y++){var d=g[y]*s,h=i[y]*s;t({source:e.subarray(f,f+d),target:a,start:c,end:c+h,getData:v}),f+=d,c+=h}return c<a.length&&t({source:[],target:a,start:c,getData:v}),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padArray=r;
},{}],"8bO+":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShaders=o,exports.getBuffers=a,exports.padBuffer=r;var t=require("@luma.gl/core"),e=require("../utils/array-utils"),n={1:"float",2:"vec2",3:"vec3",4:"vec4"};function o(t){var e=[],o=[],a=[],r=[],f=[];for(var c in t){var i=t[c],u=n[i.attribute.size];u&&(i.bufferIndex=e.length,e.push(c),o.push("attribute ".concat(u," ").concat(c,"From;")),o.push("attribute ".concat(u," ").concat(c,"To;")),a.push("uniform float ".concat(c,"Time;")),r.push("varying ".concat(u," ").concat(c,";")),f.push("".concat(c," = mix(").concat(c,"From, ").concat(c,"To,\n        ").concat(c,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(o.join("\n"),"\n").concat(a.join("\n"),"\n").concat(r.join("\n"),"\n\nvoid main(void) {\n  ").concat(f.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(r.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:e}}function a(e){var n={},o={};for(var a in e){var r=e[a],f=r.fromState,c=r.toState,i=r.buffer;n["".concat(a,"From")]=f instanceof t.Buffer?[f,{divisor:0,offset:c.offset}]:f,n["".concat(a,"To")]=c,o["".concat(a)]={buffer:i,byteOffset:c.offset}}return{sourceBuffers:n,feedbackBuffers:o}}function r(n){var o=n.fromState,a=n.toState,r=n.fromLength,f=n.toLength,c=n.fromBufferLayout,i=n.toBufferLayout,u=n.offset,s=n.getData,v=void 0===s?function(t){return t}:s;if((c&&i||!(r>=f))&&o instanceof t.Buffer){var g=new Float32Array(f),d=o.getData({}),l=a.size,m=a.constant,p=m?a.getValue():a.getBuffer().getData({}),h=m?function(t,e){return v(p,e)}:function(t,e){return v(p.subarray(t,t+l),e)};(0,e.padArray)({source:d,target:g,sourceLayout:c,targetLayout:i,offset:u,size:a.size,getData:h}),o.setData({data:g})}}
},{"@luma.gl/core":"iuAK","../utils/array-utils":"LUSB"}],"yDoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_STATE=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),e=s(require("@babel/runtime/helpers/esm/createClass"));function s(t){return t&&t.__esModule?t:{default:t}}var i={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function n(){}exports.TRANSITION_STATE=i;var r=function(){function s(e){(0,t.default)(this,s),this._startTime=null,this._state=i.NONE,this.duration=1,this.easing=function(t){return t},this.onStart=n,this.onUpdate=n,this.onInterrupt=n,this.onEnd=n,Object.assign(this,e)}return(0,e.default)(s,[{key:"start",value:function(t){this.inProgress&&this.onInterrupt(this),Object.assign(this,t),this._setState(i.PENDING)}},{key:"cancel",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(i.NONE))}},{key:"update",value:function(t){if(this.state===i.PENDING&&(this._startTime=t,this._setState(i.IN_PROGRESS)),this.state===i.IN_PROGRESS){var e=!1,s=(t-this._startTime)/this.duration;return s>=1&&(s=1,e=!0),this.time=this.easing(s),this.onUpdate(this),e&&this._setState(i.ENDED),!0}return!1}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,t){case i.PENDING:this.onStart(this);break;case i.ENDED:this.onEnd(this)}}},{key:"state",get:function(){return this._state}},{key:"inProgress",get:function(){return this._state===i.PENDING||this._state===i.IN_PROGRESS}}]),s}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"UP+m":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("@babel/runtime/helpers/esm/classCallCheck")),e=f(require("@babel/runtime/helpers/esm/createClass")),r=require("@luma.gl/core"),i=require("./attribute-transition-utils"),n=f(require("./attribute")),s=f(require("./base-attribute")),a=f(require("../transitions/transition")),u=f(require("../utils/log")),o=f(require("../utils/assert"));function f(t){return t&&t.__esModule?t:{default:t}}var l=function(){},h={duration:0,easing:function(t){return t},onStart:l,onEnd:l,onInterrupt:l},d=function(){function f(e,i){var n=i.id;(0,t.default)(this,f),this.id=n,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,r.Transform.isSupported(e)?this.isSupported=!0:e&&u.default.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return(0,e.default)(f,[{key:"finalize",value:function(){for(var t in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,r=t.transitions,n=void 0===r?{}:r,s=t.numInstances;if(this.opts=n,this.numInstances=s||1,this.isSupported){var a=this.attributeTransitions,u={};for(var o in e){this._updateAttribute(o,e[o])&&(u[o]=a[o])}for(var f in a){var l=e[f];l&&l.supportsTransition()||this._removeTransition(f)}if(this.transform){if(this.transform){var h=(0,i.getBuffers)(u),d=h.sourceBuffers,b=h.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:d,feedbackBuffers:b})}}else this._createModel()}}},{key:"hasAttribute",value:function(t){return t in this.attributeTransitions}},{key:"getAttributes",value:function(){var t={};for(var e in this.attributeTransitions){var r=this.attributeTransitions[e];r.buffer&&(t[e]=r.attributeInTransition)}return t}},{key:"setCurrentTime",value:function(t){if(!this.transform||0===this.numInstances)return!1;var e={},r=this.needsRedraw;for(var i in this.needsRedraw=!1,this.attributeTransitions){var n=this.attributeTransitions[i];n.update(t)&&(e["".concat(i,"Time")]=n.time,r=!0)}return r&&this.transform.run({uniforms:e}),r}},{key:"_createTransition",value:function(t,e){var r=this.attributeTransitions[t];return r?null:(r=new a.default({name:t,attribute:e,attributeInTransition:new n.default(this.gl,e),bufferLayout:e.bufferLayout}),this.attributeTransitions[t]=r,this._invalidateModel(),r)}},{key:"_removeTransition",value:function(t){var e=this.attributeTransitions[t];e&&(e.buffer&&e.buffer.delete(),e._swapBuffer&&e._swapBuffer.delete(),delete this.attributeTransitions[t],this._invalidateModel())}},{key:"_updateAttribute",value:function(t,e){var r=e.getTransitionSetting(this.opts);if(r){var i,n=this.attributeTransitions[t];if(n?i=e.needsRedraw():(n=this._createTransition(t,e),i=!0),i)return this._triggerTransition(n,r),!0}return!1}},{key:"_invalidateModel",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new r.Transform(this.gl,Object.assign({elementCount:this.numInstances},(0,i.getBuffers)(this.attributeTransitions),(0,i.getShaders)(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function(t,e){var n,a=t.attribute,u=a.size,o=a.offset,f=a.normalized;n=a.constant?new s.default(this.gl,{constant:!0,value:a.value,size:u,offset:o}):new s.default(this.gl,{constant:!1,buffer:a.getBuffer(),divisor:0,size:u,offset:o,normalized:f,value:a.externalBuffer?null:a.value});var l=t.buffer||n,h=a.userData.noAlloc?a.value.length:this.numInstances*u,d=l instanceof r.Buffer&&l.getElementCount()||h,b=t._swapBuffer;return t._swapBuffer=t.buffer,b?b.getElementCount()<h&&b.setData({data:new Float32Array(h)}):b=new r.Buffer(this.gl,{data:new Float32Array(h),usage:35050}),t.attributeInTransition.update({buffer:b}),(0,i.padBuffer)({fromState:l,toState:n,fromLength:d,toLength:h,fromBufferLayout:t.bufferLayout,toBufferLayout:a.bufferLayout,offset:a.elementOffset,getData:e.enter}),t.bufferLayout=a.bufferLayout,{fromState:l,toState:n,buffer:b}}},{key:"_triggerTransition",value:function(t,e){(0,o.default)(e&&e.duration>0),this.needsRedraw=!0;var r=Object.assign({},h,e);t.start(Object.assign({},this._getNextTransitionStates(t,e),r))}}]),f}();exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","./attribute-transition-utils":"8bO+","./attribute":"QvgI","./base-attribute":"Mssj","../transitions/transition":"yDoV","../utils/log":"GVus","../utils/assert":"Txat"}],"RHD2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),e=s(require("@babel/runtime/helpers/esm/createClass")),a=s(require("./attribute")),i=s(require("../utils/log")),n=s(require("./attribute-transition-manager"));function s(t){return t&&t.__esModule?t:{default:t}}var r=2,u=3;function d(){}var o={savedMessages:null,timeStart:null,onLog:function(t){var e=t.level,a=t.message;i.default.log(e,a)()},onUpdateStart:function(t){t.level,t.numInstances;o.savedMessages=[],o.timeStart=new Date},onUpdate:function(t){t.level;var e=t.message;o.savedMessages&&o.savedMessages.push(e)},onUpdateEnd:function(t){var e=t.level,a=t.id,n=t.numInstances,s=Math.round(new Date-o.timeStart),r="".concat(s,"ms");i.default.group(e,"Updated attributes for ".concat(n," instances in ").concat(a," in ").concat(r),{collapsed:!0})();var u=!0,d=!1,l=void 0;try{for(var c,v=o.savedMessages[Symbol.iterator]();!(u=(c=v.next()).done);u=!0){var h=c.value;i.default.log(e,h)()}}catch(g){d=!0,l=g}finally{try{u||null==v.return||v.return()}finally{if(d)throw l}}i.default.groupEnd(e,"Updated attributes for ".concat(n," instances in ").concat(a," in ").concat(r))(),o.savedMessages=null}},l=function(){function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.id,r=void 0===i?"attribute-manager":i,u=a.stats;(0,t.default)(this,s),this.id=r,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=u,this.attributeTransitionManager=new n.default(e,{id:"".concat(r,"-transitions")}),Object.seal(this)}return(0,e.default)(s,null,[{key:"setDefaultLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,a=t.onUpdateStart,i=t.onUpdate,n=t.onUpdateEnd;void 0!==e&&(o.onLog=e||d),void 0!==a&&(o.onUpdateStart=a||d),void 0!==i&&(o.onUpdate=i||d),void 0!==n&&(o.onUpdateEnd=n||d)}}]),(0,e.default)(s,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var a=t[e];void 0!==this.attributes[a]&&(this.attributes[a].delete(),delete this.attributes[a])}}},{key:"invalidate",value:function(t,e){var a=this._invalidateTrigger(t,e);o.onLog({level:u,message:"invalidated attributes ".concat(a," (").concat(t,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);o.onLog({level:u,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,a=t.numInstances,i=t.bufferLayout,n=t.transitions,s=t.props,u=void 0===s?{}:s,d=t.buffers,l=void 0===d?{}:d,c=t.context,v=void 0===c?{}:c,h=!1;for(var g in o.onUpdateStart({level:r,id:this.id,numInstances:a}),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var f=this.attributes[g];f.setExternalBuffer(l[g]||e.attributes&&e.attributes[g])||f.setGenericValue(u[f.getAccessor()])||f.needsUpdate()&&(h=!0,this._updateAttribute({attribute:f,numInstances:a,bufferLayout:i,data:e,props:u,context:v})),this.needsRedraw|=f.needsRedraw()}h&&o.onUpdateEnd({level:r,id:this.id,numInstances:a}),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:a,transitions:n})}},{key:"updateTransition",value:function(t){var e=this.attributeTransitionManager.setCurrentTime(t);return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,a=this.attributeTransitionManager,i=Object.assign({},a.getAttributes());for(var n in e){var s=e[n];s.needsRedraw(t)&&!a.hasAttribute(n)&&(i[n]=s)}return i}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&i.default.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var n={};for(var s in t){var r=t[s],u=this._createAttribute(s,r,a);n[s]=u}Object.assign(this.attributes,n),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,e,i){var n={id:t,constant:e.constant||!1,isIndexed:e.isIndexed||e.elements,size:e.elements?1:e.size,value:e.value||null,divisor:e.instanced||i.instanced?1:e.divisor};return new a.default(this.gl,Object.assign({},e,n))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},a=function(a){t.attributes[a].getUpdateTriggers().forEach(function(t){e[t]||(e[t]=[]),e[t].push(a)})};for(var i in this.attributes)a(i);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t,e){var a=this.attributes,n=this.updateTriggers[t];if(n)n.forEach(function(t){var i=a[t];i&&i.setNeedsUpdate(i.id,e)});else{var s="invalidating non-existent trigger ".concat(t," for ").concat(this.id,"\n");s+="Valid triggers: ".concat(Object.keys(a).join(", ")),i.default.warn(s,n)()}return n}},{key:"_updateAttribute",value:function(t){var e=t.attribute,a=t.numInstances;e.allocate(a)&&o.onUpdate({level:u,message:"".concat(e.id," allocated ").concat(a),id:this.id});var i=Date.now();if(e.updateBuffer(t)){this.needsRedraw=!0;var n=Math.round(Date.now()-i);o.onUpdate({level:u,message:"".concat(e.id," updated ").concat(a," in ").concat(n,"ms")})}}}]),s}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./attribute":"QvgI","../utils/log":"GVus","./attribute-transition-manager":"UP+m"}],"cApU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeLayerInSeer=exports.updateLayerInSeer=exports.initLayerInSeer=exports.seerInitListener=exports.layerEditListener=exports.applyPropOverrides=exports.setPropOverrides=void 0;var e=r(require("@babel/runtime/helpers/esm/toConsumableArray")),t=r(require("seer"));function r(e){return e&&e.__esModule?e:{default:e}}var a=function e(t,r,a){t&&(r.length>1?e(t[r[0]],r.slice(1),a):t[r[0]]=a)},s=new Map,i=function(e,r,a){t.default.isReady()&&(s.has(e)||s.set(e,new Map),s.get(e).set(r,a))};exports.setPropOverrides=i;var d=function(r){if(t.default.isReady()&&r.id){var i=s.get(r.id);i&&i.forEach(function(t,s){a(r,s,t),"data"===s[0]&&(r.data=(0,e.default)(r.data))})}};exports.applyPropOverrides=d;var o=function(e){t.default.isReady()&&t.default.listenFor("deck.gl",e)};exports.layerEditListener=o;var n=function(e){t.default.isReady()&&t.default.listenFor("init",e)};exports.seerInitListener=n;var l=function(e){if(t.default.isReady()&&e){var r=[e.constructor.layerName];t.default.listItem("deck.gl",e.id,{badges:r,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parent?e.parent.id:void 0})}};exports.initLayerInSeer=l;var u=function(e){if(t.default.isReady()&&!t.default.throttle("deck.gl:".concat(e.id),1e3)){var r=f(e);t.default.multiUpdate("deck.gl",e.id,r)}};exports.updateLayerInSeer=u;var p=function(e){t.default.isReady()&&e&&t.default.deleteItem("deck.gl",e)};function f(e){var t=[{path:"objects.props",data:e.props}],r=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var a=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:a})}if(e.state.model){e.state.model.setProps({timerQueryEnabled:!0});var s=e.state.model.stats.lastFrameTime;s&&r.push("".concat((1e3*s).toFixed(0),"μs"))}}return t.push({path:"badges",data:r}),t}exports.removeLayerInSeer=p;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","seer":"Suce"}],"UiIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateProps=a,exports.diffProps=t,exports.compareProps=o;var r=n(require("@babel/runtime/helpers/esm/typeof")),e=n(require("../utils/assert"));function n(r){return r&&r.__esModule?r:{default:r}}function a(r){var e=c(r);for(var n in e){var a=e[n],t=a.validate;if(t&&!t(r[n],a))throw new Error("Invalid prop ".concat(n,": ").concat(r[n]))}}function t(r,e){var n=o({newProps:r,oldProps:e,propTypes:c(r),ignoreProps:{data:null,updateTriggers:null,extensions:null}}),a=i(r,e),t=!1;return a||(t=u(r,e)),{dataChanged:a,propsChanged:n,updateTriggersChanged:t,extensionsChanged:d(r,e)}}function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.newProps,t=n.oldProps,o=n.ignoreProps,i=void 0===o?{}:o,u=n.propTypes,d=void 0===u?{}:u,s=n.triggerName,c=void 0===s?"props":s;if((0,e.default)(void 0!==t&&void 0!==a,"compareProps args"),t===a)return null;if("object"!==(0,r.default)(a)||null===a)return"".concat(c," changed shallowly");if("object"!==(0,r.default)(t)||null===t)return"".concat(c," changed shallowly");for(var p=Object.keys(a),f=0;f<p.length;f++){var g=p[f];if(!(g in i)){if(!(g in t))return"".concat(c,".").concat(g," added");var v=l(a[g],t[g],d[g]);if(v)return"".concat(c,".").concat(g," ").concat(v)}}for(var h=Object.keys(t),P=0;P<h.length;P++){var y=h[P];if(!(y in i)){if(!(y in a))return"".concat(c,".").concat(y," dropped");if(!Object.hasOwnProperty.call(a,y)){var w=l(a[y],t[y],d[y]);if(w)return"".concat(c,".").concat(y," ").concat(w)}}}return null}function l(r,e,n){var a=n&&n.equal;return a&&!a(r,e,n)?"changed deeply":a||!(a=r&&e&&r.equals)||a.call(r,e)?a||e===r?null:"changed shallowly":"changed deeply"}function i(r,e){if(null===e)return"oldProps is null, initial diff";var n=null,a=r.dataComparator,t=r._dataDiff;return a?a(r.data,e.data)||(n="Data comparator detected a change"):r.data!==e.data&&(n="A new data container was supplied"),n&&t&&(n=t(r.data,e.data)||n),n}function u(r,e){if(null===e)return"oldProps is null, initial diff";if("all"in r.updateTriggers&&s(r,e,"all"))return{all:!0};var n={},a=!1;for(var t in r.updateTriggers){if("all"!==t)s(r,e,t)&&(n[t]=!0,a=n)}return a}function d(r,e){if(null===e)return"oldProps is null, initial diff";var n=e.extensions,a=r.extensions;if(a===n)return!1;if(a.length!==n.length)return!0;for(var t=0;t<a.length;t++)if(!a[t].equals(n[t]))return!0;return!1}function s(r,e,n){var a=r.updateTriggers[n];a=null==a?{}:a;var t=e.updateTriggers[n];return o({oldProps:t=null==t?{}:t,newProps:a,triggerName:n})}function c(r){var e=r._component,n=e&&e.constructor;return n?n._propTypes:{}}
},{"@babel/runtime/helpers/esm/typeof":"zsb/","../utils/assert":"Txat"}],"4nzk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.count=u;var e=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}var n="count(): argument not an object",r="count(): argument not a container";function u(e){if(!i(e))throw new Error(n);if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(o(e))return Object.keys(e).length;throw new Error(r)}function o(t){return null!==t&&"object"===(0,e.default)(t)&&t.constructor===Object}function i(t){return null!==t&&"object"===(0,e.default)(t)}
},{"@babel/runtime/helpers/esm/typeof":"zsb/"}],"NycH":[function(require,module,exports) {
"use strict";function e(e,n){if(!n)return e;var s=Object.assign({},e,n);if("defines"in n&&(s.defines=Object.assign({},e.defines,n.defines)),"modules"in n&&(s.modules=(e.modules||[]).concat(n.modules),n.modules.some(function(e){return"project64"===e||"project64"===e.name}))){var t=s.modules.findIndex(function(e){return"project32"===e||"project32"===e.name});t>=0&&s.modules.splice(t,1)}return"inject"in n&&(s.inject=Object.assign({},e.inject,n.inject)),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeShaders=e;
},{}],"2dDJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LIFECYCLE=void 0;var e={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};exports.LIFECYCLE=e;
},{}],"9qD4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=u;var e=n(require("@babel/runtime/helpers/esm/typeof")),r=n(require("@babel/runtime/helpers/esm/slicedToArray"));function n(e){return e&&e.__esModule?e:{default:e}}var t={boolean:{validate:function(e,r){return!0},equal:function(e,r,n){return Boolean(e)===Boolean(r)}},number:{validate:function(e,r){return Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)}},color:{validate:function(e,r){return l(e)&&(3===e.length||4===e.length)},equal:function(e,r,n){return a(e,r)}},accessor:{validate:function(e,r){var n=c(e);return"function"===n||n===c(r.value)},equal:function(e,r,n){return"function"==typeof r||a(e,r)}},array:{validate:function(e,r){return r.optional&&!e||l(e)},equal:function(e,r,n){return n.compare?a(e,r):e===r}},function:{validate:function(e,r){return r.optional&&!e||"function"==typeof e},equal:function(e,r,n){return!n.compare||e===r}}};function a(e,r){if(e===r)return!0;if(!l(e)||!l(r))return!1;var n=e.length;if(n!==r.length)return!1;for(var t=0;t<n;t++)if(e[t]!==r[t])return!1;return!0}function u(e){for(var n={},t={},a={},u=Object.entries(e),i=0;i<u.length;i++){var l=(0,r.default)(u[i],2),c=l[0],f=l[1];if(f&&f.deprecatedFor)a[c]=Array.isArray(f.deprecatedFor)?f.deprecatedFor:[f.deprecatedFor];else{var p=o(c,f);n[c]=p,t[c]=p.value}}return{propTypes:n,defaultProps:t,deprecatedProps:a}}function o(e,r){switch(c(r)){case"object":return i(e,r);case"array":return i(e,{type:"array",value:r,compare:!1});case"boolean":return i(e,{type:"boolean",value:r});case"number":return i(e,{type:"number",value:r});case"function":return i(e,{type:"function",value:r,compare:!0});default:return{name:e,type:"unknown",value:r}}}function i(e,r){return"type"in r?Object.assign({name:e},t[r.type],r):"value"in r?Object.assign({name:e,type:c(r.value)},r):{name:e,type:"object",value:r}}function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function c(r){return l(r)?"array":null===r?"null":(0,e.default)(r)}
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/helpers/esm/slicedToArray":"TBeo"}],"jz7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProps=o;var e=require("../lib/seer-integration"),r=n(require("../utils/log")),t=require("../utils/iterable-utils"),a=require("./prop-types");function n(e){return e&&e.__esModule?e:{default:e}}function o(){for(var r=i(this.constructor),t=r.defaultProps,a=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),n=0;n<arguments.length;++n)Object.assign(a,arguments[n]);var o=this.constructor.layerName,u=r.deprecatedProps;return s(o,a,u),s(o,a.updateTriggers,u),s(o,a.transitions,u),(0,e.applyPropOverrides)(a),Object.freeze(a),a}function s(e,t,a){if(t)for(var n in a)if(f(t,n)){var o="".concat(e||"Layer",": ").concat(n),s=!0,i=!1,u=void 0;try{for(var p,l=a[n][Symbol.iterator]();!(s=(p=l.next()).done);s=!0){var c=p.value;f(t,c)||(t[c]=t[n])}}catch(d){i=!0,u=d}finally{try{s||null==l.return||l.return()}finally{if(i)throw u}}r.default.deprecated(o,a[n].join("/"))()}}function i(e){var r=d(e,"_mergedDefaultProps");return r?{defaultProps:r,propTypes:d(e,"_propTypes"),deprecatedProps:d(e,"_deprecatedProps")}:u(e)}function u(e){var r=e.prototype;if(!r)return{defaultProps:{}};var t=Object.getPrototypeOf(e),n=r&&i(t)||null,o=d(e,"defaultProps")||{},s=(0,a.parsePropTypes)(o),u=Object.assign({},n&&n.propTypes,s.propTypes),l=p(s.defaultProps,n&&n.defaultProps,u,e),c=Object.assign({},n&&n.deprecatedProps,s.deprecatedProps);return e._mergedDefaultProps=l,e._propTypes=u,e._deprecatedProps=c,{propTypes:u,defaultProps:l,deprecatedProps:c}}function p(e,r,t,a){var n=Object.create(null);Object.assign(n,r,e);var o=y(a);return delete e.id,Object.defineProperties(n,{id:{configurable:!1,writable:!0,value:o}}),l(n,t),n}function l(e,r){var t={},a={_asyncPropDefaultValues:{enumerable:!1,value:t},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var n in r){var o=r[n],s=o.name,i=o.value;o.async&&(t[s]=i,a[s]=c(s,i))}Object.defineProperties(e,a)}function c(e){return{configurable:!1,enumerable:!0,set:function(r){"string"==typeof r||r instanceof Promise||(0,t.isAsyncIterable)(r)?this._asyncPropOriginalValues[e]=r:this._asyncPropResolvedValues[e]=r},get:function(){if(this._asyncPropResolvedValues){if(e in this._asyncPropResolvedValues){var r=this._asyncPropResolvedValues[e];return"data"===e?r||this._asyncPropDefaultValues[e]:r}if(e in this._asyncPropOriginalValues){var t=this._component&&this._component.internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)}}return this._asyncPropDefaultValues[e]}}}function f(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function d(e,r){return f(e,r)&&e[r]}function y(e){var t=d(e,"layerName")||d(e,"componentName");return t||r.default.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}
},{"../lib/seer-integration":"cApU","../utils/log":"GVus","../utils/iterable-utils":"kai7","./prop-types":"9qD4"}],"c85S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/regenerator")),r=i(require("@babel/runtime/helpers/esm/asyncToGenerator")),t=i(require("@babel/runtime/helpers/esm/classCallCheck")),s=i(require("@babel/runtime/helpers/esm/createClass")),n=i(require("@babel/runtime/helpers/esm/asyncIterator")),a=i(require("../utils/log")),o=i(require("../utils/assert")),u=require("../utils/iterable-utils");function i(e){return e&&e.__esModule?e:{default:e}}var l=Object.freeze({}),c=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,t.default)(this,i),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=l,this.oldAsyncProps=null}return(0,s.default)(i,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var r=this.asyncProps[e];return r&&r.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){var r=this.asyncProps[e];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}},{key:"setAsyncProps",value:function(e){var r=e._asyncPropResolvedValues||{},t=e._asyncPropOriginalValues||e,s=e._asyncPropDefaultValues||{};for(var n in r){var a=r[n];this._createAsyncPropData(n,a,s[n]),this._updateAsyncProp(n,a)}for(var o in t){var u=t[o];this._createAsyncPropData(o,u,s[o]),this._updateAsyncProp(o,u)}}},{key:"_updateAsyncProp",value:function(e,r){if(this._didAsyncInputValueChange(e,r)){if("string"==typeof r)r=(0,this.layer.props.fetch)(r,{propName:e,layer:this.layer});r instanceof Promise?this._watchPromise(e,r):(0,u.isAsyncIterable)(r)?this._resolveAsyncIterable(e,r):this._setPropValue(e,r)}}},{key:"_didAsyncInputValueChange",value:function(e,r){var t=this.asyncProps[e];return r!==t.lastValue&&(t.lastValue=r,!0)}},{key:"_setPropValue",value:function(e,r){var t=this.asyncProps[e];t.value=r,t.resolvedValue=r,t.pendingLoadCount++,t.resolvedLoadCount=t.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,r,t){var s=this.asyncProps[e];s&&t>=s.resolvedLoadCount&&((0,o.default)(void 0!==r),this.freezeAsyncOldProps(),s.resolvedValue=r,s.resolvedLoadCount=t,this.onAsyncPropUpdated(e,r))}},{key:"_watchPromise",value:function(e,r){var t=this,s=this.asyncProps[e];s.pendingLoadCount++;var n=s.pendingLoadCount;r.then(function(r){r=t._postProcessValue(e,r),t._setAsyncPropValue(e,r,n);var s=t.layer.props.onDataLoad;"data"===e&&s&&s(r,{propName:e,layer:t.layer})}).catch(function(e){return a.default.error(e)()})}},{key:"_resolveAsyncIterable",value:function(){var t=(0,r.default)(e.default.mark(function r(t,s){var a,o,u,i,l,c,p,d,y,h,v,f;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,s),(a=this.asyncProps[t]).pendingLoadCount++,o=a.pendingLoadCount,u=[],i=0,l=!0,c=!1,e.prev=8,d=(0,n.default)(s);case 10:return e.next=12,d.next();case 12:return y=e.sent,l=y.done,e.next=16,y.value;case 16:if(h=e.sent,l){e.next=26;break}v=h,u=this._postProcessValue(t,v,u),Object.defineProperty(u,"__diff",{enumerable:!1,value:[{startRow:i,endRow:u.length}]}),i=u.length,this._setAsyncPropValue(t,u,o);case 23:l=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),c=!0,p=e.t0;case 32:if(e.prev=32,e.prev=33,l||null==d.return){e.next=37;break}return e.next=37,d.return();case 37:if(e.prev=37,!c){e.next=40;break}throw p;case 40:return e.finish(37);case 41:return e.finish(32);case 42:(f=this.layer.props.onDataLoad)&&f(u,{propName:t,layer:this.layer});case 44:case"end":return e.stop()}},r,this,[[8,28,32,42],[33,,37,41]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"_postProcessValue",value:function(e,r,t){var s=(this.component?this.component.props:{}).dataTransform;return"data"!==e?r:s?s(r,t):t?t.concat(r):r}},{key:"_createAsyncPropData",value:function(e,r,t){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0})}}]),i}();exports.default=c;
},{"@babel/runtime/regenerator":"8m4e","@babel/runtime/helpers/esm/asyncToGenerator":"XQmk","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/asyncIterator":"/02b","../utils/log":"GVus","../utils/assert":"Txat","../utils/iterable-utils":"kai7"}],"ElXl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),s=require("../lifecycle/constants"),n=require("../lifecycle/create-props"),r=a(require("./component-state"));function a(e){return e&&e.__esModule?e:{default:e}}var i={},l=0,u=function(){function a(){(0,e.default)(this,a),this.props=n.createProps.apply(this,arguments),this.id=this.props.id,this.count=l++,this.lifecycle=s.LIFECYCLE.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return(0,t.default)(a,[{key:"clone",value:function(e){var t=this.props,s={};for(var n in t._asyncPropDefaultValues)n in t._asyncPropResolvedValues?s[n]=t._asyncPropResolvedValues[n]:n in t._asyncPropOriginalValues&&(s[n]=t._asyncPropOriginalValues[n]);return new this.constructor(Object.assign({},t,s,e))}},{key:"_initState",value:function(){this.internalState=new r.default({})}},{key:"stats",get:function(){return this.internalState.stats}}]),a}();exports.default=u,u.componentName="Component",u.defaultProps=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../lifecycle/constants":"2dDJ","../lifecycle/create-props":"jz7I","./component-state":"c85S"}],"CAG+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),r=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=a(require("@babel/runtime/helpers/esm/inherits")),s=a(require("../lifecycle/component-state"));function a(e){return e&&e.__esModule?e:{default:e}}var n=function(s){function a(t){var l,s=t.attributeManager,n=t.layer;return(0,e.default)(this,a),(l=(0,r.default)(this,(0,u.default)(a).call(this,n))).attributeManager=s,l.model=null,l.needsRedraw=!0,l.subLayers=null,l}return(0,l.default)(a,s),(0,t.default)(a,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),a}(s.default);exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lifecycle/component-state":"c85S"}],"xVVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=k(require("@babel/runtime/helpers/esm/slicedToArray")),e=k(require("@babel/runtime/helpers/esm/classCallCheck")),a=k(require("@babel/runtime/helpers/esm/createClass")),r=k(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=k(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=k(require("@babel/runtime/helpers/esm/inherits")),o=require("./constants"),s=k(require("./attribute-manager")),l=require("./seer-integration"),u=require("../lifecycle/props"),d=require("../utils/count"),c=k(require("../utils/log")),h=require("@luma.gl/core"),p=k(require("../utils/assert")),g=require("../utils/shader"),f=require("../shaderlib/project/project-functions"),v=k(require("../lifecycle/component")),y=k(require("./layer-state")),C=require("viewport-mercator-project"),m=require("@loaders.gl/core");function k(t){return t&&t.__esModule?t:{default:t}}var b=1,S=Object.freeze([]),x=new Uint8ClampedArray(0),w={data:{type:"data",value:S,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var a=e.layer;return(0,m.load)(t,a.getLoadOptions())},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:o.COORDINATE_SYSTEM.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},P=function(v){function m(){return(0,e.default)(this,m),(0,r.default)(this,(0,n.default)(m).apply(this,arguments))}return(0,i.default)(m,v),(0,a.default)(m,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setLayerNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"getFirstObject",value:function(){var t=this.props.data,e=!0,a=!1,r=void 0;try{for(var n,i=t[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){return n.value}}catch(o){a=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}return null}},{key:"project",value:function(e){var a=this.context.viewport,r=(0,f.getWorldPosition)(e,{viewport:a,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),n=(0,C.worldToPixels)(r,a.pixelProjectionMatrix),i=(0,t.default)(n,3),o=i[0],s=i[1],l=i[2];return 2===e.length?[o,s]:[o,s,l]}},{key:"unproject",value:function(t){var e=this.context.viewport;return(0,p.default)(Array.isArray(t)),e.unproject(t)}},{key:"projectPosition",value:function(t){return(0,p.default)(Array.isArray(t)),(0,f.projectPosition)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(t){c.default.deprecated("layer.projectFlat","layer.projectPosition")();var e=this.context.viewport;return(0,p.default)(Array.isArray(t)),e.projectFlat(t)}},{key:"unprojectFlat",value:function(t){c.default.deprecated("layer.unprojectFlat")();var e=this.context.viewport;return(0,p.default)(Array.isArray(t)),e.unprojectFlat(t)}},{key:"use64bitPositions",value:function(){return this.props.coordinateSystem===o.COORDINATE_SYSTEM.LNGLAT||this.props.coordinateSystem===o.COORDINATE_SYSTEM.IDENTITY}},{key:"screenToDevicePixels",value:function(t){return c.default.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),t*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:"onClick",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,p.default)(t<16777215,"index out of picking color range"),e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:"decodePickingColor",value:function(e){(0,p.default)(e instanceof Uint8Array);var a=(0,t.default)(e,3);return a[0]+256*a[1]+65536*a[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.props.extensions[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;t=(0,g.mergeShaders)(t,o.getShaders.call(this,o))}}catch(s){a=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}return t}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,a=this.getAttributeManager();if(e.dataChanged&&a){var r=e.dataChanged;if(Array.isArray(r)){var n=!0,i=!1,o=void 0;try{for(var s,l=r[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;a.invalidateAll(u)}}catch(d){i=!0,o=d}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}}else a.invalidateAll()}}},{key:"finalizeState",value:function(){var t=!0,e=!1,a=void 0;try{for(var r,n=this.getModels()[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.delete()}}catch(o){e=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}var i=this.getAttributeManager();i&&i.finalize()}},{key:"draw",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.draw(t)}}catch(o){a=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,a=(t.mode,e.index);return a>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[a]),e}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.getAttributeManager();a&&("all"===t?(c.default.log(b,"updateTriggers invalidating all attributes: ".concat(e))(),a.invalidateAll()):(c.default.log(b,"updateTriggers invalidating attribute ".concat(t,": ").concat(e))(),a.invalidate(t)))}},{key:"updateAttributes",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;this._setModelAttributes(o,t)}}catch(s){a=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"_updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var a=this.getNumInstances(t),r=this.getBufferLayout(t);e.update({data:t.data,numInstances:a,bufferLayout:r,props:t,transitions:t.transitions,buffers:t,context:this,ignoreUnknownAttributes:!0});var n=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(n)}}},{key:"updateTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition(this.context.time)}},{key:"calculateInstancePickingColors",value:function(t,e){var a=e.numInstances,r=t.value,n=t.size;if(1!==r[0]){var i=x.length/n;if(i<a){var o=new Uint8ClampedArray(a*n);o.set(x);for(var s=[],l=i;l<a;l++)this.encodePickingColor(l,s),o[l*n+0]=s[0],o[l*n+1]=s[1],o[l*n+2]=s[2];x=o}r.set(a<i?x.subarray(0,a*n):x)}}},{key:"_setModelAttributes",value:function(t,e){var a={},r=t.userData.excludeAttributes||{};for(var n in e)r[n]||Object.assign(a,e[n].getShaderAttributes());t.setAttributes(a)}},{key:"_clearInstancePickingColor",value:function(t){var e=this.getAttributeManager().attributes.instancePickingColors,a=e.value,r=e.size,n=this.decodePickingColor(t);a[n*r+0]=0,a[n*r+1]=0,a[n*r+2]=0,e.update({value:a})}},{key:"_clearPickingColor",value:function(t){for(var e=this.getAttributeManager().attributes.pickingColors,a=e.value,r=0;r<a.length;r+=3)a[r+0]===t[0]&&a[r+1]===t[1]&&a[r+2]===t[2]&&(a[r+0]=0,a[r+1]=0,a[r+2]=0);e.update({value:a})}},{key:"clearPickingColor",value:function(t){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(t):this._clearInstancePickingColor(t)}},{key:"copyPickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,a=t.instancePickingColors;return new Uint8ClampedArray((e||a).value)}},{key:"restorePickingColors",value:function(t){var e=this.getAttributeManager().attributes,a=e.pickingColors,r=e.instancePickingColors;(a||r).update({value:t})}},{key:"getNumInstances",value:function(t){if(void 0!==(t=t||this.props).numInstances)return t.numInstances;if(this.state&&void 0!==this.state.numInstances)return this.state.numInstances;var e=this.props.data;return(0,d.count)(e)}},{key:"getBufferLayout",value:function(t){return void 0!==(t=t||this.props).bufferLayout?t.bufferLayout:this.state&&void 0!==this.state.bufferLayout?this.state.bufferLayout:null}},{key:"_initialize",value:function(){this._initState(),this.initializeState(this.context);var t=!0,e=!1,a=void 0;try{for(var r,n=this.props.extensions[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value;i.initializeState.call(this,this.context,i)}}catch(s){e=!0,a=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState();var o=this.getSingleModel();o&&(o.id=this.props.id,o.program.id="".concat(this.props.id,"-program"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var t=this._getUpdateParams();if(this.context.gl)this.updateState(t);else try{this.updateState(t)}catch(s){}var e=!0,a=!1,r=void 0;try{for(var n,i=this.props.extensions[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.updateState.call(this,t,o)}}catch(l){a=!0,r=l}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}this.isComposite?this._renderLayers(t):(this.setNeedsRedraw(),this._updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function(){(0,p.default)(this.internalState&&this.state),this.finalizeState(this.context);var t=!0,e=!1,a=void 0;try{for(var r,n=this.props.extensions[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var i=r.value;i.finalizeState.call(this,i)}}catch(o){e=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}(0,l.removeLayerInSeer)(this.id)}},{key:"drawLayer",value:function(t){var e=this,a=t.moduleParameters,r=void 0===a?null:a,n=t.uniforms,i=void 0===n?{}:n,o=t.parameters,s=void 0===o?{}:o;i.picking_uActive||this.updateTransition(),r&&this.setModuleParameters(r);var l=this.context.animationProps;if(l){var u=!0,d=!1,c=void 0;try{for(var p,g=this.getModels()[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){p.value._setAnimationProps(l)}}catch(y){d=!0,c=y}finally{try{u||null==g.return||g.return()}finally{if(d)throw c}}}var f=this.props.getPolygonOffset,v=f&&f(i)||[0,0];s.polygonOffset=v,(0,h.withParameters)(this.context.gl,s,function(){e.draw({moduleParameters:r,uniforms:i,parameters:s,context:e.context})})}},{key:"pickLayer",value:function(t){return this.getPickingInfo(t)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var a=this.internalState.changeFlags;t.dataChanged&&!a.dataChanged&&(a.dataChanged=t.dataChanged,c.default.log(b+1,function(){return"dataChanged: ".concat(t.dataChanged," in ").concat(e.id)})()),t.updateTriggersChanged&&!a.updateTriggersChanged&&(a.updateTriggersChanged=a.updateTriggersChanged&&t.updateTriggersChanged?Object.assign({},t.updateTriggersChanged,a.updateTriggersChanged):t.updateTriggersChanged||a.updateTriggersChanged,c.default.log(b+1,function(){return"updateTriggersChanged: "+"".concat(Object.keys(t.updateTriggersChanged).join(", ")," in ").concat(e.id)})()),t.propsChanged&&!a.propsChanged&&(a.propsChanged=t.propsChanged,c.default.log(b+1,function(){return"propsChanged: ".concat(t.propsChanged," in ").concat(e.id)})()),t.extensionsChanged&&!a.extensionsChanged&&(a.extensionsChanged=t.extensionsChanged,c.default.log(b+1,function(){return"extensionsChanged: ".concat(t.extensionsChanged," in ").concat(e.id)})()),t.viewportChanged&&!a.viewportChanged&&(a.viewportChanged=t.viewportChanged,c.default.log(b+2,function(){return"viewportChanged: ".concat(t.viewportChanged," in ").concat(e.id)})()),t.stateChanged&&!a.stateChanged&&(a.stateChanged=t.stateChanged,c.default.log(b+1,function(){return"stateChanged: ".concat(t.stateChanged," in ").concat(e.id)})());var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;a.propsOrDataChanged=a.propsOrDataChanged||r,a.somethingChanged=a.somethingChanged||r||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var t=this.internalState.changeFlags;return"".concat(t.dataChanged?"data ":"").concat(t.propsChanged?"props ":"").concat(t.updateTriggersChanged?"triggers ":"").concat(t.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(t,e){var a=(0,u.diffProps)(t,e);if(a.updateTriggersChanged)for(var r in a.updateTriggersChanged)a.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(a)}},{key:"validateProps",value:function(){(0,u.validateProps)(this.props)}},{key:"setModuleParameters",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.updateModuleSettings(t)}}catch(o){a=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var a=this.getAttributeManager(),r=a&&a.getNeedsRedraw(t);return e=e||r}},{key:"_getAttributeManager",value:function(){return new s.default(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function(){(0,p.default)(!this.internalState&&!this.state);var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new y.default({attributeManager:t,layer:this}),this.state={},this.state.attributeManager=t,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){var e=t.state,a=t.internalState;if((0,p.default)(e&&a),this!==t){this.internalState=a,this.internalState.component=this,this.state=e,e.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,n=!1,i=void 0;try{for(var o,s=this.getModels()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.userData.layer=this}}catch(l){n=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(t){this.invalidateAttribute(t)}},{key:"_updateBaseUniforms",value:function(){var t=this,e={opacity:"function"==typeof this.props.opacity?function(e){return Math.pow(t.props.opacity(e),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},a=!0,r=!1,n=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){i.value.setUniforms(e)}}catch(s){r=!0,n=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"setUniforms",value:function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=this.getModels()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.setUniforms(t)}}catch(o){a=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}this.setNeedsRedraw(),c.default.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"use64bitProjection",value:function(){return c.default.removed("use64bitProjection","Fp64Extension")(),!1}}]),m}(v.default);exports.default=P,P.layerName="Layer",P.defaultProps=w;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./constants":"ysbg","./attribute-manager":"RHD2","./seer-integration":"cApU","../lifecycle/props":"UiIs","../utils/count":"4nzk","../utils/log":"GVus","@luma.gl/core":"iuAK","../utils/assert":"Txat","../utils/shader":"NycH","../shaderlib/project/project-functions":"AJ0f","../lifecycle/component":"ElXl","./layer-state":"CAG+","viewport-mercator-project":"ZcHr","@loaders.gl/core":"ikKD"}],"dK5R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/get")),s=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("./layer")),u=l(require("../utils/log")),o=require("../utils/flatten");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(n){function l(){return(0,e.default)(this,l),(0,r.default)(this,(0,a.default)(l).apply(this,arguments))}return(0,s.default)(l,n),(0,t.default)(l,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(e){(0,i.default)((0,a.default)(l.prototype),"setState",this).call(this,e),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function(e){var t=e.info,r=t.object;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id?Object.assign(t,{object:r.__source.object,index:r.__source.index}):t}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(e,t){var r=this.props._subLayerProps;return t&&t.length||r&&r[e]}},{key:"getSubLayerClass",value:function(e,t){var r=this.props._subLayerProps;return r&&r[e]&&r[e].type||t}},{key:"getSubLayerRow",value:function(e,t,r){return e.__source={parent:this,object:t,index:r},e}},{key:"getSubLayerAccessor",value:function(e){if("function"==typeof e){var t={data:this.props.data,target:[]};return function(r,a){return r.__source?(t.index=r.__source.index,e(r.__source.object,t)):e(r,a)}}return e}},{key:"getSubLayerProps",value:function(e){var t=this.props,r=t.opacity,a=t.pickable,i=t.visible,s=t.parameters,n=t.getPolygonOffset,u=t.highlightedObjectIndex,o=t.autoHighlight,l=t.highlightColor,c=t.coordinateSystem,d=t.coordinateOrigin,p=t.wrapLongitude,y=t.positionFormat,g=t.modelMatrix,h=t.extensions,f=t._subLayerProps,b={opacity:r,pickable:a,visible:i,parameters:s,getPolygonOffset:n,highlightedObjectIndex:u,autoHighlight:o,highlightColor:l,coordinateSystem:c,coordinateOrigin:d,wrapLongitude:p,positionFormat:y,modelMatrix:g,extensions:h};if(e){var v=f&&f[e.id],m=v&&v.updateTriggers;Object.assign(b,e,v,{id:"".concat(this.props.id,"-").concat(e.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers,m)})}var _=!0,L=!1,S=void 0;try{for(var k,x=h[Symbol.iterator]();!(_=(k=x.next()).done);_=!0){var j=k.value,O=j.getSubLayerProps.call(this,j);Object.assign(b,O,{updateTriggers:Object.assign(b.updateTriggers,O.updateTriggers)})}}catch(C){L=!0,S=C}finally{try{_||null==x.return||x.return()}finally{if(L)throw S}}return b}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?u.default.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(e=this.renderLayers(),e=(0,o.flatten)(e,{filter:Boolean}),this.internalState.subLayers=e,u.default.log(2,"Composite layer rendered new subLayers ".concat(this),e)());var t=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.parent=this}}catch(n){r=!0,a=n}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"isComposite",get:function(){return!0}}]),l}(n.default);exports.default=c,c.layerName="CompositeLayer";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","./layer":"xVVm","../utils/log":"GVus","../utils/flatten":"6gSV"}],"ki6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=r,exports.extractCameraVectors=t,exports.getFrustumPlanes=l,exports.fp64LowPart=p;var e=require("math.gl");function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function t(e){var r=e.viewMatrix,t=e.viewMatrixInverse;return{eye:[t[12],t[13],t[14]],direction:[-r[2],-r[6],-r[10]],up:[r[1],r[5],r[9]],right:[r[0],r[4],r[8]]}}var o=new e.Vector3,a=new e.Vector3,n=new e.Vector3,c=new e.Vector3,s=new e.Vector3,i=new e.Vector3,d=new e.Vector3;function l(r){var t=r.aspect,l=r.near,p=r.far,u=r.fovyRadians,m=r.position,w=r.direction,y=r.up,v=r.right;a.copy(w);var V=1/a.len();a.normalize(),o.copy(m),n.copy(y).normalize(),c.copy(v).normalize();var f=2*Math.tan(u/2)*l,x=f*t;s.copy(a).scale(l*V).add(o),i.copy(a).scale(p*V).add(o);var z=a.clone().negate(),b=z.dot(s),g={near:{distance:b,normal:z},far:{distance:a.dot(i),normal:a.clone()}};return d.copy(c).scale(.5*x).add(s).subtract(o).normalize(),z=new e.Vector3(n).cross(d),b=o.dot(z),g.right={normal:z,distance:b},d.copy(c).scale(.5*-x).add(s).subtract(o).normalize(),z=new e.Vector3(d).cross(n),b=o.dot(z),g.left={normal:z,distance:b},d.copy(n).scale(.5*f).add(s).subtract(o).normalize(),z=new e.Vector3(d).cross(c),b=o.dot(z),g.top={normal:z,distance:b},d.copy(n).scale(.5*-f).add(s).subtract(o).normalize(),z=new e.Vector3(c).cross(d),b=o.dot(z),g.bottom={normal:z,distance:b},g}function p(e){return e-Math.fround(e)}
},{"math.gl":"4xAa"}],"HjGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("@babel/runtime/helpers/esm/slicedToArray")),e=h(require("@babel/runtime/helpers/esm/classCallCheck")),i=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("../utils/log")),a=require("../utils/math-utils"),s=require("math.gl"),o=c(require("gl-matrix/mat4")),n=require("viewport-mercator-project"),l=h(require("../utils/assert"));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};r.get||r.set?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var u=Math.PI/180,d=(0,a.createMat4)(),v=[0,0,0],p=0,x="Illegal argument to Viewport",f=function(){function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,c);var i=t.id,r=void 0===i?null:i,a=t.x,s=void 0===a?0:a,o=t.y,n=void 0===o?0:o,l=t.width,h=void 0===l?1:l,u=t.height,d=void 0===u?1:u;this.id=r||this.constructor.displayName||"viewport",this.x=s,this.y=n,this.width=h||1,this.height=d||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return(0,i.default)(c,[{key:"equals",value:function(t){return t instanceof c&&(t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,s.equals)(t.projectionMatrix,this.projectionMatrix)&&(0,s.equals)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===i||i,a=this.projectPosition(e),s=(0,n.worldToPixels)(a,this.pixelProjectionMatrix),o=(0,t.default)(s,2),l=o[0],c=o[1],h=r?c:this.height-c;return 2===e.length?[l,h]:[l,h,s[2]]}},{key:"unproject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,a=void 0===r||r,s=i.targetZ,o=(0,t.default)(e,3),l=o[0],c=o[1],h=o[2],u=a?c:this.height-c,d=s&&s*this.distanceScales.pixelsPerMeter[2],v=(0,n.pixelsToWorld)([l,u,h],this.pixelUnprojectionMatrix,d),p=this.unprojectPosition(v),x=(0,t.default)(p,3),f=x[0],M=x[1],g=x[2];return Number.isFinite(h)?[f,M,g]:Number.isFinite(s)?[f,M,s]:[f,M]}},{key:"projectPosition",value:function(e){var i=this.projectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var i=this.unprojectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return(0,n.lngLatToWorld)(t,e);var i=this.distanceScales.pixelsPerMeter;return[t[0]*i[0],t[1]*i[1]]}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return(0,n.worldToLngLat)(t,e);var i=this.distanceScales.metersPerPixel;return[t[0]*i[0],t[1]*i[1]]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(0,n.getDistanceScales)({longitude:t[0],latitude:t[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,e=void 0===t?null:t,i=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,a=this.pixelUnprojectionMatrix;return e&&(i=o.multiply([],this.viewProjectionMatrix,e),r=o.multiply([],this.pixelProjectionMatrix,e),a=o.invert([],r)),Object.assign({modelViewProjectionMatrix:i,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:a,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function(t){var e=t.x,i=t.y,r=t.width,a=void 0===r?1:r,s=t.height,o=void 0===s?1:s;return e<this.x+this.width&&this.x<e+a&&i<this.y+this.height&&this.y<i+o}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var t=this.projectionProps,e=t.near,i=t.far,r=t.fovyRadians,s=t.aspect;return Object.assign(this._frustumPlanes,(0,a.getFrustumPlanes)({aspect:s,near:e,far:i,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(e,i){var r=(0,t.default)(e,3),a=r[0],s=r[1],o=r[2],n=void 0===o?0:o,l=this._metersToLngLatDelta(i),c=(0,t.default)(l,3),h=c[0],u=c[1],d=c[2],v=void 0===d?0:d;return 2===e.length?[a+h,s+u]:[a+h,s+u,n+v]}},{key:"_metersToLngLatDelta",value:function(e){var i=(0,t.default)(e,3),r=i[0],a=i[1],s=i[2],o=void 0===s?0:s;(0,l.default)(Number.isFinite(r)&&Number.isFinite(a)&&Number.isFinite(o),x);var n=this.distanceScales,c=n.pixelsPerMeter,h=n.degreesPerPixel,u=r*c[0]*h[0],d=a*c[1]*h[1];return 2===e.length?[u,d]:[u,d,o]}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,i=t.fovyRadians,r=t.aspect,a=t.focalDistance,o=t.near,n=t.far;return(0,l.default)(Number.isFinite(i)),e?(new s.Matrix4).orthographic({fovy:i,aspect:r,focalDistance:a,near:o,far:n}):(new s.Matrix4).perspective({fovy:i,aspect:r,near:o,far:n})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,i=void 0===e?d:e,r=t.longitude,a=void 0===r?null:r,l=t.latitude,c=void 0===l?null:l,h=t.zoom,u=void 0===h?null:h,x=t.position,f=void 0===x?null:x,M=t.modelMatrix,g=void 0===M?null:M,m=t.focalDistance,P=void 0===m?1:m,j=t.distanceScales,w=void 0===j?null:j;this.isGeospatial=Number.isFinite(c)&&Number.isFinite(a),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?(0,n.getMeterZoom)({latitude:c})+Math.log2(P):p);var y=Math.pow(2,this.zoom);this.scale=y,this.distanceScales=this.isGeospatial?(0,n.getDistanceScales)({latitude:c,longitude:a,scale:this.scale}):w||{pixelsPerMeter:[y,y,y],metersPerPixel:[1/y,1/y,1/y]},this.focalDistance=P,this.distanceScales.metersPerPixel=new s.Vector3(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new s.Vector3(this.distanceScales.pixelsPerMeter),this.position=v,this.meterOffset=v,f&&(this.position=f,this.modelMatrix=g,this.meterOffset=g?g.transformVector(f):f),this.isGeospatial?(this.longitude=a,this.latitude=c,this.center=this._getCenterInWorld({longitude:a,latitude:c}),this.viewMatrixUncentered=o.scale([],i,[1,-1,1])):(this.center=f?this.projectPosition(f):[0,0,0],this.viewMatrixUncentered=i),this.viewMatrix=(new s.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new s.Vector3(this.center||v).negate())}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,i=t.latitude,r=this.meterOffset,a=this.scale,o=this.distanceScales,n=this.projectFlat([e,i],a),l=new s.Vector3(n[0],n[1],0);if(r){var c=new s.Vector3(r).scale(o.pixelsPerMeter);l.add(c)}return l}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,i=void 0===e?null:e,r=t.orthographic,a=void 0!==r&&r,s=t.fovyRadians,o=t.fovyDegrees,n=t.fovy,l=t.near,c=void 0===l?.1:l,h=t.far,d=void 0===h?1e3:h,v=t.focalDistance,p=void 0===v?1:v,x=t.orthographicFocalDistance,f=s||(o||n||75)*u;this.projectionProps={orthographic:a,fovyRadians:f,aspect:this.width/this.height,focalDistance:x||p,near:c,far:d},this.projectionMatrix=i||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var t=(0,a.createMat4)();o.multiply(t,t,this.projectionMatrix),o.multiply(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=o.invert([],this.viewMatrix)||this.viewMatrix;var e=(0,a.extractCameraVectors)({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),i=e.eye,s=e.direction,n=e.up,l=e.right;this.cameraPosition=i,this.cameraDirection=s,this.cameraUp=n,this.cameraRight=l;var c=(0,a.createMat4)(),h=(0,a.createMat4)();o.scale(c,c,[this.width/2,-this.height/2,1]),o.translate(c,c,[1,-1,0]),o.multiply(h,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.viewportMatrix=c,this.pixelUnprojectionMatrix=o.invert((0,a.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||r.default.warn("Pixel project matrix not invertible")()}}]),c}();exports.default=f,f.displayName="Viewport";
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/log":"GVus","../utils/math-utils":"ki6G","math.gl":"4xAa","gl-matrix/mat4":"w3aR","viewport-mercator-project":"ZcHr","../utils/assert":"Txat"}],"m8xf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/toConsumableArray")),t=h(require("@babel/runtime/helpers/esm/classCallCheck")),r=h(require("@babel/runtime/helpers/esm/createClass")),a=h(require("../utils/assert")),i=require("@luma.gl/core"),n=h(require("seer")),l=h(require("./layer")),s=require("../lifecycle/constants"),u=h(require("../utils/log")),d=require("../utils/flatten"),o=require("probe.gl"),c=h(require("../viewports/viewport")),y=require("./seer-integration");function h(e){return e&&e.__esModule?e:{default:e}}var f=2,v=4,L=Object.seal({layerManager:null,deck:null,gl:null,time:-1,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,animationProps:null,mousePosition:null,userData:{}}),p=function(e){return e instanceof l.default?"".concat(e):e?"invalid":"null"},g=function(){function l(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.deck,n=r.stats,s=r.viewport,u=void 0===s?null:s;(0,t.default)(this,l),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},L,{layerManager:this,deck:a,gl:e,shaderCache:e&&new i._ShaderCache({gl:e,_cachePrograms:!0}),stats:n||new o.Stats({id:"deck.gl"}),viewport:u||new c.default({id:"DEFAULT-INITIAL-VIEWPORT"})}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),(0,y.seerInitListener)(this._initSeer),(0,y.layerEditListener)(this._editSeer)}return(0,r.default)(l,[{key:"finalize",value:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=this.layers[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var l=a.value;this._finalizeLayer(l)}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}n.default.removeListener(this._initSeer),n.default.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,t=void 0===e?null:e;return t?this.layers.filter(function(e){return t.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"useDevicePixels"in e&&(this.context.useDevicePixels=e.useDevicePixels),"layers"in e&&this.setLayers(e.layers)}},{key:"setLayers",value:function(e){if(e===this.lastRenderedLayers)return u.default.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=(0,d.flatten)(e,{filter:Boolean});var t=!0,r=!1,a=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){i.value.context=this.context}}catch(c){r=!0,a=c}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}var l=this._updateLayers({oldLayers:this.layers,newLayers:e}),s=l.error,o=l.generatedLayers;if(this.layers=o,s)throw s;return this}},{key:"updateLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"time"in t&&(this.context.time=t.time);var r=this.needsUpdate();r&&(this.setNeedsRedraw("updating layers: ".concat(r)),this.setLayers((0,e.default)(this.lastRenderedLayers)))}},{key:"_checkIfNeedsRedraw",value:function(e){var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var r=!0,a=!1,i=void 0;try{for(var n,l=this.layers[Symbol.iterator]();!(r=(n=l.next()).done);r=!0){var s=n.value.getNeedsRedraw(e);t=t||s}}catch(u){a=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return t}},{key:"activateViewport",value:function(e){var t=this.context.viewport;if(!t||!e.equals(t)){u.default.log(4,"Viewport changed",e)(),this.context.viewport=e;var r=!0,i=!1,n=void 0;try{for(var l,s=this.layers[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value;d.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(d)}}catch(o){i=!0,n=o}finally{try{r||null==s.return||s.return()}finally{if(i)throw n}}}return(0,a.default)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,r=e.newLayers,a={},i=!0,n=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var o=s.value;a[o.id]?u.default.warn("Multiple old layers with same id ".concat(p(o)))():a[o.id]=o}}catch(f){n=!0,l=f}finally{try{i||null==d.return||d.return()}finally{if(n)throw l}}var c=[],y=this._updateSublayersRecursively({newLayers:r,oldLayerMap:a,generatedLayers:c}),h=this._finalizeOldLayers(a);return this._needsUpdate=!1,{error:y||h,generatedLayers:c}}},{key:"_updateSublayersRecursively",value:function(e){var t=e.newLayers,r=e.oldLayerMap,a=e.generatedLayers,i=null,n=!0,l=!1,s=void 0;try{for(var d,o=t[Symbol.iterator]();!(n=(d=o.next()).done);n=!0){var c=d.value;c.context=this.context;var h=r[c.id];null===h&&u.default.warn("Multiple new layers with same id ".concat(p(c)))(),r[c.id]=null;var f=null;try{if(this._debug&&h!==c&&c.validateProps(),h){this._transferLayerState(h,c);var v=this._updateLayer(c);i=i||v,(0,y.updateLayerInSeer)(c)}else{var L=this._initializeLayer(c);i=i||L,(0,y.initLayerInSeer)(c)}a.push(c),f=c.isComposite&&c.getSubLayers()}catch(L){u.default.warn("error during matching of ".concat(p(c)),L)(),i=i||L}if(f){var g=this._updateSublayersRecursively({newLayers:f,oldLayerMap:r,generatedLayers:a});i=i||g}}}catch(L){l=!0,s=L}finally{try{n||null==o.return||o.return()}finally{if(l)throw s}}return i}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var r in e){var a=e[r];a&&(t=t||this._finalizeLayer(a))}return t}},{key:"_initializeLayer",value:function(e){u.default.log(f,"initializing ".concat(p(e)))();var t=null;try{e._initialize(),e.lifecycle=s.LIFECYCLE.INITIALIZED}catch(d){u.default.warn("error while initializing ".concat(p(e),"\n"),d)(),t=t||d}e.internalState.layer=e;var r=!0,a=!1,i=void 0;try{for(var n,l=e.getModels()[Symbol.iterator]();!(r=(n=l.next()).done);r=!0){n.value.userData.layer=e}}catch(d){a=!0,i=d}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return t}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=s.LIFECYCLE.MATCHED,t!==e?(u.default.log(v,"matched ".concat(p(t)),e,"->",t)(),e.lifecycle=s.LIFECYCLE.AWAITING_GC):u.default.log(v,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function(e){u.default.log(v,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(r){u.default.warn("error during update of ".concat(p(e)),r)(),t=r}return t}},{key:"_finalizeLayer",value:function(e){(0,a.default)(e.lifecycle!==s.LIFECYCLE.AWAITING_FINALIZATION),e.lifecycle=s.LIFECYCLE.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized ".concat(p(e)));try{e._finalize()}catch(r){u.default.warn("error during finalization of ".concat(p(e)),r)(),t=r}return e.lifecycle=s.LIFECYCLE.FINALIZED,u.default.log(f,"finalizing ".concat(p(e)))(),t}},{key:"_initSeer",value:function(){this.layers.forEach(function(e){(0,y.initLayerInSeer)(e),(0,y.updateLayerInSeer)(e)})}},{key:"_editSeer",value:function(e){"edit"===e.type&&"props"===e.valuePath[0]&&((0,y.setPropOverrides)(e.itemKey,e.valuePath.slice(1),e.value),this.updateLayers())}}]),l}();exports.default=g;
},{"@babel/runtime/helpers/esm/toConsumableArray":"AdMH","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/assert":"Txat","@luma.gl/core":"iuAK","seer":"Suce","./layer":"xVVm","../lifecycle/constants":"2dDJ","../utils/log":"GVus","../utils/flatten":"6gSV","probe.gl":"T+YN","../viewports/viewport":"HjGN","./seer-integration":"cApU"}],"9MNZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return u.default}});var e=require("./constants"),r=a(require("./layer")),t=a(require("./composite-layer")),n=a(require("./attribute-manager")),u=a(require("./layer-manager"));function a(e){return e&&e.__esModule?e:{default:e}}
},{"./constants":"ysbg","./layer":"xVVm","./composite-layer":"dK5R","./attribute-manager":"RHD2","./layer-manager":"m8xf"}],"1yB/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),t=l(require("@babel/runtime/helpers/esm/createClass")),r=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=l(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/core"),n=require("../../shaderlib/project/project-functions"),u=require("../../lib");function l(e){return e&&e.__esModule?e:{default:e}}var a=function(l){function a(t){var o;return(0,e.default)(this,a),(o=(0,r.default)(this,(0,i.default)(a).call(this,t))).projectedLight=new s.PointLight(t),o}return(0,o.default)(a,l),(0,t.default)(a,[{key:"getProjectedLight",value:function(e){var t=e.layer,r=t.context.viewport,i=t.props,o=i.coordinateSystem,s=i.coordinateOrigin,l=(0,n.projectPosition)(this.position,{viewport:r,coordinateSystem:o,coordinateOrigin:s,fromCoordinateSystem:r.isGeospatial?u.COORDINATE_SYSTEM.LNGLAT:u.COORDINATE_SYSTEM.IDENTITY,fromCoordinateOrigin:[0,0,0]});return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=l,this.projectedLight}}]),a}(s.PointLight);exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/core":"iuAK","../../shaderlib/project/project-functions":"AJ0f","../../lib":"9MNZ"}],"xYso":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=n(require("@babel/runtime/helpers/esm/inherits")),s=n(require("./point-light")),u=require("../../shaderlib/project/viewport-uniforms");function n(e){return e&&e.__esModule?e:{default:e}}var l=function(s){function n(){return(0,e.default)(this,n),(0,r.default)(this,(0,i.default)(n).apply(this,arguments))}return(0,o.default)(n,s),(0,t.default)(n,[{key:"getProjectedLight",value:function(e){var t=e.layer,r=t.context.viewport,i=t.props,o=i.coordinateSystem,s=i.coordinateOrigin,n=i.modelMatrix,l=(0,u.getUniformsFromViewport)({viewport:r,modelMatrix:n,coordinateSystem:o,coordinateOrigin:s}).project_uCameraPosition;return this.projectedLight.color=this.color,this.projectedLight.intensity=this.intensity,this.projectedLight.position=l,this.projectedLight}}]),n}(s.default);exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./point-light":"1yB/","../../shaderlib/project/viewport-uniforms":"7iWu"}],"EHE7":[function(require,module,exports) {
"use strict";function e(e,t){if(null==e)return{};var r,n,u={},f=Object.keys(e);for(n=0;n<f.length;n++)r=f[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"7FBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./objectWithoutPropertiesLoose"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(null==t)return{};var o,u,l=(0,e.default)(t,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(u=0;u<n.length;u++)o=n[u],r.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(l[o]=t[o])}return l}
},{"./objectWithoutPropertiesLoose":"EHE7"}],"Iz+z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSolarPosition=M,exports.getSunlightDirection=u;var t=Math.PI/180,n=864e5,a=2440588,i=2451545,r=23.4397*t,h=357.5291,s=.98560028,o=280.147,e=360.9856235;function M(n,a,i){var r=t*-i,h=t*a,s=f(n),o=I(s),e=P(s,r)-o.rightAscension;return{azimuth:d(e,h,o.declination),altitude:g(e,h,o.declination)}}function u(t,n,a){var i=M(t,n,a),r=i.azimuth,h=i.altitude,s=r+Math.PI;return[-Math.sin(s),Math.cos(s),-Math.sin(h)]}function c(t){return t/n-.5+a}function f(t){return c(t)-i}function v(t,n){var a=t;return Math.atan2(Math.sin(a)*Math.cos(r)-Math.tan(n)*Math.sin(r),Math.cos(a))}function l(t,n){var a=t;return Math.asin(Math.sin(n)*Math.cos(r)+Math.cos(n)*Math.sin(r)*Math.sin(a))}function d(t,n,a){var i=t,r=n,h=a;return Math.atan2(Math.sin(i),Math.cos(i)*Math.sin(r)-Math.tan(h)*Math.cos(r))}function g(t,n,a){var i=t,r=n,h=a;return Math.asin(Math.sin(r)*Math.sin(h)+Math.cos(r)*Math.cos(h)*Math.cos(i))}function P(n,a){return t*(o+e*n)-a}function p(n){return t*(h+s*n)}function x(n){var a=n;return a+t*(1.9148*Math.sin(a)+.02*Math.sin(2*a)+3e-4*Math.sin(3*a))+102.9372*t+Math.PI}function I(t){var n=x(p(t));return{declination:l(n,0),rightAscension:v(n,0)}}
},{}],"hMy0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/objectWithoutProperties")),t=n(require("@babel/runtime/helpers/esm/classCallCheck")),r=n(require("@babel/runtime/helpers/esm/createClass")),i=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=n(require("@babel/runtime/helpers/esm/inherits")),s=n(require("./directional-light")),a=require("./suncalc");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(s){function n(r){var l,s=r.timestamp,a=(0,e.default)(r,["timestamp"]);return(0,t.default)(this,n),(l=(0,i.default)(this,(0,u.default)(n).call(this,a))).timestamp=s,l}return(0,l.default)(n,s),(0,r.default)(n,[{key:"getProjectedLight",value:function(e){var t=e.layer.context.viewport,r=t.latitude,i=t.longitude;return this.direction=(0,a.getSunlightDirection)(this.timestamp,r,i),this}}]),n}(s.default);exports.default=o;
},{"@babel/runtime/helpers/esm/objectWithoutProperties":"7FBC","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./directional-light":"n3wt","./suncalc":"Iz+z"}],"/YqR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),r=a(require("@babel/runtime/helpers/esm/createClass")),t=a(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=a(require("@babel/runtime/helpers/esm/inherits")),s=require("@luma.gl/core"),i=a(require("./pass"));function a(e){return e&&e.__esModule?e:{default:e}}var n=function(i){function a(r){var l,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,e.default)(this,a),l=(0,t.default)(this,(0,u.default)(a).call(this,r,s));var i=s.module,n=s.fs,o=s.id,d=s.moduleProps;return l.model=l._getModel(r,i,n,o,d),l}return(0,l.default)(a,i),(0,r.default)(a,[{key:"render",value:function(e){var r=this,t=this.gl;(0,s.withParameters)(t,{framebuffer:e.outputBuffer,clearColor:[0,0,0,0]},function(){return r._renderPass(t,e)})}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_getModel",value:function(e,r,t,u,l){var i=new s.ClipSpace(e,{id:u,fs:t,modules:[r]}),a=Object.assign(r.getUniforms(),r.getUniforms(l));return i.setUniforms(a),i}},{key:"_renderPass",value:function(e,r){var t=r.inputBuffer;r.outputBuffer;(0,s.clear)(e,{color:!0}),this.model.draw({uniforms:{texture:t,texSize:[t.width,t.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),a}(i.default);exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@luma.gl/core":"iuAK","./pass":"2ay0"}],"9/Qg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("@babel/runtime/helpers/esm/inherits")),i=s(require("../lib/effect")),o=s(require("../passes/screen-pass")),a=require("@luma.gl/shadertools");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(i){function o(r){var u,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e.default)(this,o),(u=(0,t.default)(this,(0,n.default)(o).call(this,i))).id="".concat(r.name,"-pass"),(0,a.normalizeShaderModule)(r),u.module=r,u}return(0,u.default)(o,i),(0,r.default)(o,[{key:"prepare",value:function(e){this.passes||(this.passes=f(e,this.module,this.id,this.props))}},{key:"render",value:function(e){for(var r=e.target,t=void 0===r?null:r,n=!1,u=0;u<this.passes.length;u++){var i=n?e.outputBuffer:e.inputBuffer,o=n?e.inputBuffer:e.outputBuffer;t&&u===this.passes.length-1&&(o=t),this.passes[u].render({inputBuffer:i,outputBuffer:o}),n=!n}return{inputBuffer:n?e.outputBuffer:e.inputBuffer,outputBuffer:n?e.inputBuffer:e.outputBuffer}}},{key:"cleanup",value:function(){if(this.passes){var e=!0,r=!1,t=void 0;try{for(var n,u=this.passes[Symbol.iterator]();!(e=(n=u.next()).done);e=!0){n.value.delete()}}catch(i){r=!0,t=i}finally{try{e||null==u.return||u.return()}finally{if(r)throw t}}this.passes=null}}}]),o}(i.default);function f(e,r,t,n){if(r.filter||r.sampler){var u=d(r);return[new o.default(e,{id:t,module:r,fs:u,moduleProps:n})]}return(r.passes||[]).map(function(u,i){var a=d(r,u),s="".concat(t,"-").concat(i);return new o.default(e,{id:s,module:r,fs:a,moduleProps:n})})}exports.default=l;var p=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},c=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function d(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(r.filter){var t="string"==typeof r.filter?r.filter:"".concat(e.name,"_filterColor");return p(t)}if(r.sampler){var n="string"==typeof r.sampler?r.sampler:"".concat(e.name,"_sampleColor");return c(n)}return null}
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","../lib/effect":"Z10T","../passes/screen-pass":"/YqR","@luma.gl/shadertools":"Pzgo"}],"01KS":[function(require,module,exports) {
"use strict";function e(r,t){return r===t||Object.keys(r).every(function(s){return Array.isArray(r[s])&&Array.isArray(t[s])?e(r[s],t[s]):r[s]===t[s]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=e;
},{}],"MOmt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePosition=o,exports.getPosition=i;var e=t(require("@babel/runtime/helpers/esm/typeof"));function t(e){return e&&e.__esModule?e:{default:e}}var r=/([0-9]+\.?[0-9]*)(%|px)/;function o(t){switch((0,e.default)(t)){case"number":return{position:t,relative:!1};case"string":var o=t.match(r);if(o&&o.length>=3){var i="%"===o[2],n=parseFloat(o[1]);return{position:i?n/100:n,relative:i}}default:throw new Error("Could not parse position string ".concat(t))}}function i(e,t){return e.relative?Math.round(e.position*t):e.position}
},{"@babel/runtime/helpers/esm/typeof":"zsb/"}],"k6Eh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/typeof")),e=a(require("@babel/runtime/helpers/esm/classCallCheck")),i=a(require("@babel/runtime/helpers/esm/createClass")),s=a(require("../viewports/viewport")),r=require("../utils/positions"),o=require("../utils/deep-equal"),n=a(require("../utils/assert"));function a(t){return t&&t.__esModule?t:{default:t}}var h=function(){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,a);var i=t.id,r=void 0===i?null:i,o=t.x,h=void 0===o?0:o,u=t.y,p=void 0===u?0:u,l=t.width,v=void 0===l?"100%":l,d=t.height,c=void 0===d?"100%":d,w=t.projectionMatrix,f=void 0===w?null:w,g=t.fovy,y=void 0===g?50:g,_=t.near,b=void 0===_?.1:_,S=t.far,m=void 0===S?1e3:S,q=t.modelMatrix,x=void 0===q?null:q,j=t.viewportInstance,k=void 0===j?null:j,P=t.type,I=void 0===P?s.default:P;(0,n.default)(!k||k instanceof s.default),this.viewportInstance=k,this.id=r||this.constructor.displayName||"view",this.type=I,this.props=Object.assign({},t,{id:this.id,projectionMatrix:f,fovy:y,near:b,far:m,modelMatrix:x}),this._parseDimensions({x:h,y:p,width:v,height:c}),this.equals=this.equals.bind(this),Object.seal(this)}return(0,i.default)(a,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):(0,o.deepEqual)(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,i=t.height,s=t.viewState;if(this.viewportInstance)return this.viewportInstance;s=this.filterViewState(s);var r=this.getDimensions({width:e,height:i}),o=Object.assign({viewState:s},s,this.props,r);return this._getViewport(o)}},{key:"getViewStateId",value:function(){switch((0,t.default)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===(0,t.default)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var i=Object.assign({},e);for(var s in this.props.viewState)"id"!==s&&(i[s]=this.props.viewState[s]);return i}return e}},{key:"getDimensions",value:function(t){var e=t.width,i=t.height;return{x:(0,r.getPosition)(this._x,e),y:(0,r.getPosition)(this._y,i),width:(0,r.getPosition)(this._width,e),height:(0,r.getPosition)(this._height,i)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,i=t.y,s=t.width,o=t.height;this._x=(0,r.parsePosition)(e),this._y=(0,r.parsePosition)(i),this._width=(0,r.parsePosition)(s),this._height=(0,r.parsePosition)(o)}}]),a}();exports.default=h;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../viewports/viewport":"HjGN","../utils/positions":"MOmt","../utils/deep-equal":"01KS","../utils/assert":"Txat"}],"30H2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),i=o(require("../utils/assert")),n=require("../utils/deep-equal"),s=o(require("../views/view")),r=o(require("../viewports/viewport")),a=o(require("../utils/log")),h=require("../utils/flatten");function o(e){return e&&e.__esModule?e:{default:e}}var l=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,o),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractiveStateChange:t.onInteractiveStateChange},Object.seal(this),this.setProps(t)}return(0,t.default)(o,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("time"in e)for(var t in this.controllers){var i=this.controllers[t];i&&i.updateTransition(e.time)}}},{key:"getViewports",value:function(e){return e?this._viewports.filter(function(t){return t.containsPixel(e)}):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach(function(t){e[t.id]=t}),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find(function(t){return t.id===e}):e}},{key:"getViewState",value:function(e){var t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var i=this.getViewports(),n={x:e[0],y:e[1]},s=i.length-1;s>=0;--s){var r=i[s];if(r.containsPixel(n)){var a=e.slice();return a[0]-=r.x,a[1]-=r.y,r.unproject(a,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){(0,i.default)(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=(0,h.flatten)(e,{filter:Boolean}).map(function(e){return e instanceof r.default?new s.default({viewportInstance:e}):e}),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!(0,n.deepEqual)(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):a.default.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e){return new(0,e.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function(e,t,i,n){if(e.controller){var s=Object.assign({},e.controller,t,{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height});return n?n.setProps(s):n=this._createController(s),n}return null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,i=this.views,n=this.controllers;this._viewports=[],this.controllers={};for(var s=i.length;s--;){var r=i[s],a=this.getViewState(r),h=r.makeViewport({width:e,height:t,viewState:a});this.controllers[r.id]=this._updateController(r,a,h,n[r.id]),this._viewports.unshift(h)}for(var o in n)n[o]&&!this.controllers[o]&&n[o].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach(function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)})}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some(function(i,n){return!e[n].equals(t[n])})}}]),o}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/assert":"Txat","../utils/deep-equal":"01KS","../views/view":"k6Eh","../viewports/viewport":"HjGN","../utils/log":"GVus","../utils/flatten":"6gSV"}],"Rf6Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/esm/slicedToArray")),t=c(require("@babel/runtime/helpers/esm/classCallCheck")),r=c(require("@babel/runtime/helpers/esm/createClass")),i=c(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=c(require("@babel/runtime/helpers/esm/inherits")),n=c(require("@babel/runtime/helpers/esm/assertThisInitialized")),o=c(require("./viewport")),u=require("viewport-mercator-project"),s=h(require("gl-matrix/vec2")),d=c(require("../utils/assert"));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var g="Illegal argument to WebMercatorViewport",p=function(o){function h(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,h);var l=r.latitude,o=void 0===l?0:l,s=r.longitude,d=void 0===s?0:s,c=r.zoom,g=void 0===c?11:c,p=r.pitch,f=void 0===p?0:p,v=r.bearing,b=void 0===v?0:v,m=r.nearZMultiplier,L=void 0===m?.1:m,M=r.farZMultiplier,y=void 0===M?10:M,P=r.orthographic,w=void 0!==P&&P,j=r.width,x=r.height,O=r.altitude,T=void 0===O?1.5:O;j=j||1,x=x||1,T=Math.max(.75,T);var q=(0,u.getProjectionParameters)({width:j,height:x,pitch:f,altitude:T,nearZMultiplier:L,farZMultiplier:y}),D=q.fov,F=q.aspect,k=q.focalDistance,z=q.near,N=q.far,C=(0,u.getViewMatrix)({height:x,pitch:f,bearing:b,altitude:T}),_=Object.assign({},r,{width:j,height:x,viewMatrix:C,longitude:d,latitude:o,zoom:g,orthographic:w,fovyRadians:D,aspect:F,orthographicFocalDistance:k,near:z,far:N});return(e=(0,i.default)(this,(0,a.default)(h).call(this,_))).latitude=o,e.longitude=d,e.zoom=g,e.pitch=f,e.bearing=b,e.altitude=T,e.orthographic=w,e.metersToLngLatDelta=e.metersToLngLatDelta.bind((0,n.default)((0,n.default)(e))),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind((0,n.default)((0,n.default)(e))),e.addMetersToLngLat=e.addMetersToLngLat.bind((0,n.default)((0,n.default)(e))),Object.freeze((0,n.default)((0,n.default)(e))),e}return(0,l.default)(h,o),(0,r.default)(h,[{key:"metersToLngLatDelta",value:function(t){var r=(0,e.default)(t,3),i=r[0],a=r[1],l=r[2],n=void 0===l?0:l;(0,d.default)(Number.isFinite(i)&&Number.isFinite(a)&&Number.isFinite(n),g);var o=this.distanceScales,u=o.pixelsPerMeter,s=o.degreesPerPixel,h=i*u[0]*s[0],c=a*u[1]*s[1];return 2===t.length?[h,c]:[h,c,n]}},{key:"lngLatDeltaToMeters",value:function(t){var r=(0,e.default)(t,3),i=r[0],a=r[1],l=r[2],n=void 0===l?0:l;(0,d.default)(Number.isFinite(i)&&Number.isFinite(a)&&Number.isFinite(n),g);var o=this.distanceScales,u=o.pixelsPerDegree,s=o.metersPerPixel,h=i*u[0]*s[0],c=a*u[1]*s[1];return 2===t.length?[h,c]:[h,c,n]}},{key:"addMetersToLngLat",value:function(e,t){return(0,u.addMetersToLngLat)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,i=(0,u.pixelsToWorld)(r,this.pixelUnprojectionMatrix),a=this.projectFlat(t),l=s.add([],a,s.negate([],i)),n=s.add([],this.center,l);return this.unprojectFlat(n)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=(0,u.fitBounds)(Object.assign({width:r,height:i,bounds:e},t));return new h({width:r,height:i,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}}]),h}(o.default);exports.default=p,p.displayName="WebMercatorViewport";
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","@babel/runtime/helpers/esm/assertThisInitialized":"Rs9H","./viewport":"HjGN","viewport-mercator-project":"ZcHr","gl-matrix/vec2":"XSo1","../utils/assert":"Txat"}],"R8fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=i(require("@babel/runtime/helpers/esm/classCallCheck")),e=i(require("@babel/runtime/helpers/esm/createClass")),t=require("math.gl"),a=i(require("../utils/assert"));function i(r){return r&&r.__esModule?r:{default:r}}var o=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,i),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var t=e,a=t.compare,o=t.extract,s=t.required;this._propsToCompare=a,this._propsToExtract=o,this._requiredProps=s}return(0,e.default)(i,[{key:"arePropsEqual",value:function(r,e){var a=!0,i=!1,o=void 0;try{for(var s,u=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var n=s.value;if(!(0,t.equals)(r[n],e[n]))return!1}}catch(l){i=!0,o=l}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return!0}},{key:"initializeProps",value:function(r,e){var t;if(this._propsToExtract){var a={},i={},o=!0,s=!1,u=void 0;try{for(var n,l=this._propsToExtract[Symbol.iterator]();!(o=(n=l.next()).done);o=!0){var c=n.value;a[c]=r[c],i[c]=e[c]}}catch(p){s=!0,u=p}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}t={start:a,end:i}}else t={start:r,end:e};return this._checkRequiredProps(t.start),this._checkRequiredProps(t.end),t}},{key:"interpolateProps",value:function(r,e,t){(0,a.default)(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(r){this._requiredProps&&this._requiredProps.forEach(function(e){var t=r[e];(0,a.default)(Number.isFinite(t)||Array.isArray(t),"".concat(e," is required for transition"))})}}]),i}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"4xAa","../utils/assert":"Txat"}],"2bGR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=s(require("@babel/runtime/helpers/esm/inherits")),i=s(require("./transition-interpolator")),a=require("math.gl");function s(e){return e&&e.__esModule?e:{default:e}}var n=["longitude","latitude","zoom","bearing","pitch"],o=function(i){function s(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return(0,e.default)(this,s),(0,t.default)(this,(0,u.default)(s).call(this,r))}return(0,l.default)(s,i),(0,r.default)(s,[{key:"interpolateProps",value:function(e,r,t){var u={};for(var l in r)u[l]=(0,a.lerp)(e[l],r[l],t);return u}}]),s}(i.default);exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./transition-interpolator":"R8fo","math.gl":"4xAa"}],"awSe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_EVENTS=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),n=s(require("@babel/runtime/helpers/esm/createClass")),i=s(require("../transitions/linear-interpolator")),r=s(require("../transitions/transition")),e=s(require("../utils/assert"));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){},a={BREAK:1,SNAP_TO_END:2,IGNORE:3};exports.TRANSITION_EVENTS=a;var u={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new i.default,transitionInterruption:a.BREAK,onTransitionStart:o,onTransitionInterrupt:o,onTransitionEnd:o},p=function(){function i(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,i),(0,e.default)(n),this.ControllerState=n,this.props=Object.assign({},u,s),this.propsInTransition=null,this.time=0,this.transition=new r.default,this.onViewStateChange=s.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return(0,n.default)(i,[{key:"finalize",value:function(){}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var n=!1,i=this.props;if(t=Object.assign({},u,t),this.props=t,this._shouldIgnoreViewportChange(i,t))return n;if(this._isTransitionEnabled(t)){var r=Object.assign({},i,this.transition.interruption===a.SNAP_TO_END?this.transition.endProps:this.propsInTransition||i);this._triggerTransition(r,t),n=!0}else this.transition.cancel();return n}},{key:"updateTransition",value:function(t){this.time=t,this._updateTransition()}},{key:"_isTransitionEnabled",value:function(t){return t.transitionDuration>0&&t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,n){return this.transition.inProgress?this.transition.interruption===a.IGNORE||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(t,n)}},{key:"_triggerTransition",value:function(t,n){(0,e.default)(this._isTransitionEnabled(n),"Transition is not enabled");var i=new this.ControllerState(t),r=new this.ControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.transition.start({duration:n.transitionDuration,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startProps:s.start,endProps:s.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)}),this._updateTransition()}},{key:"_updateTransition",value:function(){this.transition.update(this.time)}},{key:"_onTransitionEnd",value:function(t){var n=this;return function(i){n.propsInTransition=null,t(i)}}},{key:"_onTransitionUpdate",value:function(t){var n=t.interpolator,i=t.startProps,r=t.endProps,e=t.time,s=n.interpolateProps(i,r,e);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,s)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),i}();exports.default=p,p.defaultProps=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../transitions/linear-interpolator":"2bGR","../transitions/transition":"yDoV","../utils/assert":"Txat"}],"7ugw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("@babel/runtime/helpers/esm/classCallCheck")),e=o(require("@babel/runtime/helpers/esm/createClass")),n=o(require("./transition-manager")),i=o(require("../utils/log")),a=o(require("../utils/assert"));function o(t){return t&&t.__esModule?t:{default:t}}var r={transitionDuration:0},s=.01,h={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},l=function(){function o(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,o),(0,a.default)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new n.default(e,i),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(i)}return(0,e.default)(o,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(Object.assign({},this.controllerStateProps,this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,i=e.y,a=t.offsetCenter;return[a.x-n,a.y-i]}},{key:"isPointInBounds",value:function(t,e){var n=this.controllerStateProps,i=n.width,a=n.height;if(e&&e.handled)return!1;var o=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=a;return o&&e&&e.stopPropagation(),o}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewportChange"in t&&i.default.removed("onViewportChange")(),"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,a=t.dragPan,o=void 0===a||a,r=t.dragRotate,s=void 0===r||r,l=t.doubleClickZoom,u=void 0===l||l,g=t.touchZoom,c=void 0===g||g,v=t.touchRotate,d=void 0!==v&&v,p=t.keyboard,f=void 0===p||p,P=Boolean(this.onViewStateChange);this.toggleEvents(h.WHEEL,P&&n),this.toggleEvents(h.PAN,P&&(o||s)),this.toggleEvents(h.PINCH,P&&(c||d)),this.toggleEvents(h.DOUBLE_TAP,P&&u),this.toggleEvents(h.KEYBOARD,P&&f),this.scrollZoom=n,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=u,this.touchZoom=c,this.touchRotate=d,this.keyboard=f}},{key:"updateTransition",value:function(t){this.transitionManager.updateTransition(t)}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"setOptions",value:function(t){return this.setProps(t)}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},t.getViewportProps(),e);if(this.controllerState!==t){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:n,oldViewState:a})}Object.assign(this._state,t.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,r,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){if(!this.isDragging())return!1;var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,r,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,i=this.controllerState.getViewportProps(),a=e/i.width,o=n/i.height,s=this.controllerState.rotate({deltaScaleX:a,deltaScaleY:o});return this.updateViewport(s,r,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=t.delta,i=2/(1+Math.exp(-Math.abs(n*s)));n<0&&0!==i&&(i=1/i);var a=this.controllerState.zoom({pos:e,scale:i});return this.updateViewport(a,r,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,r,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,i=this.getCenter(t);e=e.zoom({pos:i,scale:n})}if(this.touchRotate){var a=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(a-o)/180})}return this.updateViewport(e,r,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),i=this.controllerState,a={};switch(t.srcEvent.keyCode){case 189:e=n?i.zoomOut().zoomOut():i.zoomOut(),a.isZooming=!0;break;case 187:e=n?i.zoomIn().zoomIn():i.zoomIn(),a.isZooming=!0;break;case 37:n?(e=i.rotateLeft(),a.isRotating=!0):(e=i.moveLeft(),a.isPanning=!0);break;case 39:n?(e=i.rotateRight(),a.isRotating=!0):(e=i.moveRight(),a.isPanning=!0);break;case 38:n?(e=i.rotateUp(),a.isRotating=!0):(e=i.moveUp(),a.isPanning=!0);break;case 40:n?(e=i.rotateDown(),a.isRotating=!0):(e=i.moveDown(),a.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),a),!0}},{key:"_getTransitionProps",value:function(){return r}}]),o}();exports.default=l;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./transition-manager":"awSe","../utils/log":"GVus","../utils/assert":"Txat"}],"TfDO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),t=o(require("@babel/runtime/helpers/esm/createClass")),r=require("math.gl"),i=o(require("../utils/assert"));function o(e){return e&&e.__esModule?e:{default:e}}var n={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},s=function(){function o(t){(0,e.default)(this,o);var s=t.width,u=t.height,a=t.position,p=void 0===a?n.position:a;(0,i.default)(Number.isFinite(s),"`width` must be supplied"),(0,i.default)(Number.isFinite(u),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},t,{position:new r.Vector3(p)}))}return(0,t.default)(o,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new r._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(e){return new r._SphericalCoordinates({bearing:e,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),o}();exports.default=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","math.gl":"4xAa","../utils/assert":"Txat"}],"N44t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testExports=exports.default=exports.MAPBOX_LIMITS=void 0;var t=m(require("@babel/runtime/helpers/esm/slicedToArray")),e=m(require("@babel/runtime/helpers/esm/classCallCheck")),r=m(require("@babel/runtime/helpers/esm/createClass")),a=m(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=m(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=m(require("@babel/runtime/helpers/esm/inherits")),n=require("math.gl"),s=m(require("./controller")),u=m(require("./view-state")),l=d(require("viewport-mercator-project")),p=m(require("../utils/assert")),c=m(require("../transitions/linear-interpolator")),h=require("./transition-manager");function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};a.get||a.set?Object.defineProperty(e,r,a):e[r]=t[r]}return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}var v=5,g=1.2,f={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new c.default,transitionInterruption:h.TRANSITION_EVENTS.BREAK},_={transitionDuration:0},P={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60};exports.MAPBOX_LIMITS=P;var b={pitch:0,bearing:0,altitude:1.5},w=function(s){function u(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.width,n=r.height,s=r.latitude,l=r.longitude,c=r.zoom,h=r.bearing,d=void 0===h?b.bearing:h,m=r.pitch,v=void 0===m?b.pitch:m,g=r.altitude,f=void 0===g?b.altitude:g,_=r.maxZoom,w=void 0===_?P.maxZoom:_,y=r.minZoom,L=void 0===y?P.minZoom:y,S=r.maxPitch,k=void 0===S?P.maxPitch:S,Z=r.minPitch,x=void 0===Z?P.minPitch:Z,z=r.startPanLngLat,j=r.startZoomLngLat,O=r.startBearing,U=r.startPitch,C=r.startZoom;return(0,e.default)(this,u),(0,p.default)(Number.isFinite(l),"`longitude` must be supplied"),(0,p.default)(Number.isFinite(s),"`latitude` must be supplied"),(0,p.default)(Number.isFinite(c),"`zoom` must be supplied"),(t=(0,a.default)(this,(0,i.default)(u).call(this,{width:o,height:n,latitude:s,longitude:l,zoom:c,bearing:d,pitch:v,altitude:f,maxZoom:w,minZoom:L,maxPitch:k,minPitch:x})))._interactiveState={startPanLngLat:z,startZoomLngLat:j,startBearing:O,startPitch:U,startZoom:C},t}return(0,o.default)(u,s),(0,r.default)(u,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(e){var r=e.pos,a=e.startPos,i=this._interactiveState.startPanLngLat||this._unproject(a);if(!i)return this;var o=this._calculateNewLngLat({startPanLngLat:i,pos:r}),n=(0,t.default)(o,2),s=n[0],u=n[1];return this._getUpdatedState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=void 0===e?0:e,a=t.deltaScaleY,i=void 0===a?0:a,o=this._interactiveState,n=o.startBearing,s=o.startPitch;if(!Number.isFinite(n)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:i,startBearing:n,startPitch:s}),l=u.pitch,p=u.bearing;return this._getUpdatedState({bearing:p,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var r=e.pos,a=e.startPos,i=e.scale;(0,p.default)(i>0,"`scale` must be a positive number");var o=this._interactiveState,n=o.startZoom,s=o.startZoomLngLat;Number.isFinite(n)||(n=this._viewportProps.zoom,s=this._unproject(a)||this._unproject(r)),(0,p.default)(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var u=this._calculateNewZoom({scale:i,startZoom:n}),c=new l.default(Object.assign({},this._viewportProps,{zoom:u})).getLocationAtPoint({lngLat:s,pos:r}),h=(0,t.default)(c,2),d=h[0],m=h[1];return this._getUpdatedState({zoom:u,longitude:d,latitude:m})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),r=Object.assign({},this._viewportProps),a=r.bearing,i=r.longitude;return Math.abs(a-e.bearing)>180&&(r.bearing=a<0?a+360:a-360),Math.abs(i-e.longitude)>180&&(r.longitude=i<0?i+360:i-360),r}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,r=e.width,a=e.height;return this.zoom({pos:[r/2,a/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,r=e.width,a=e.height;return this.pan({startPos:[r/2,a/2],pos:[r/2+t[0],a/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new u(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,a=t.zoom;t.zoom=(0,n.clamp)(a,r,e);var i=t.maxPitch,o=t.minPitch,s=t.pitch;return t.pitch=(0,n.clamp)(s,o,i),Object.assign(t,(0,l.normalizeViewportProps)(t)),t}},{key:"_unproject",value:function(t){var e=new l.default(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,r=t.pos;return new l.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:r})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,a=this._viewportProps,i=a.maxZoom,o=a.minZoom,s=r+Math.log2(e);return(0,n.clamp)(s,o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,a=t.startBearing,i=t.startPitch;r=(0,n.clamp)(r,-1,1);var o=this._viewportProps,s=o.minPitch,u=o.maxPitch,l=i;return r>0?l=i+r*(u-i):r<0&&(l=i-r*(s-i)),{pitch:l,bearing:a+180*e}}}]),u}(u.default),y=function(n){function s(t){var r;return(0,e.default)(this,s),(r=(0,a.default)(this,(0,i.default)(s).call(this,w,t))).invertPan=!0,r}return(0,o.default)(s,n),(0,r.default)(s,[{key:"_getTransitionProps",value:function(){return f}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var r=e.deltaX,a=e.deltaY,i=this.getCenter(e),o=(0,t.default)(i,2)[1],n=o-a,s=this.controllerState.getViewportProps(),u=s.width,l=s.height,p=r/u,c=0;a>0?Math.abs(l-n)>v&&(c=a/(n-l)*g):a<0&&n>v&&(c=1-o/n),c=Math.min(1,Math.max(-1,c));var h=this.controllerState.rotate({deltaScaleX:p,deltaScaleY:c});return this.updateViewport(h,_,{isDragging:!0,isRotating:!0})}}]),s}(s.default);exports.default=y;var L={MapState:w};exports.testExports=L;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"4xAa","./controller":"7ugw","./view-state":"TfDO","viewport-mercator-project":"ZcHr","../utils/assert":"Txat","../transitions/linear-interpolator":"2bGR","./transition-manager":"awSe"}],"wD/M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/classCallCheck")),r=o(require("@babel/runtime/helpers/esm/createClass")),t=o(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=o(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=o(require("@babel/runtime/helpers/esm/inherits")),s=o(require("./view")),i=o(require("../viewports/web-mercator-viewport")),a=o(require("../controllers/map-controller"));function o(e){return e&&e.__esModule?e:{default:e}}var n=function(s){function o(r){return(0,e.default)(this,o),(0,t.default)(this,(0,l.default)(o).call(this,Object.assign({},r,{type:i.default})))}return(0,u.default)(o,s),(0,r.default)(o,[{key:"controller",get:function(){return this._getControllerProps({type:a.default})}}]),o}(s.default);exports.default=n,n.displayName="MapView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/web-mercator-viewport":"Rf6Y","../controllers/map-controller":"N44t"}],"sqcc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../utils/deep-equal"),f=s(require("../effects/lighting/lighting-effect"));function s(e){return e&&e.__esModule?e:{default:e}}var r=new f.default,i=function(){function s(){(0,e.default)(this,s),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return(0,t.default)(s,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&(0,n.deepEqual)(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var f,s=this.effects[Symbol.iterator]();!(e=(f=s.next()).done);e=!0){f.value.cleanup()}}catch(u){t=!0,n=u}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}var r=!0,i=!1,l=void 0;try{for(var a,c=this._internalEffects[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){a.value.cleanup()}}catch(u){i=!0,l=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw l}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some(function(e){return e instanceof f.default})||this._internalEffects.push(r)}}]),s}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/deep-equal":"01KS","../effects/lighting/lighting-effect":"MByF"}],"snJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),l=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=s(require("@babel/runtime/helpers/esm/get")),a=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("./layers-pass"));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function s(){return(0,e.default)(this,s),(0,t.default)(this,(0,l.default)(s).apply(this,arguments))}return(0,a.default)(s,u),(0,r.default)(s,[{key:"getModuleParameters",value:function(e,r,t){var a=(0,i.default)((0,l.default)(s.prototype),"getModuleParameters",this).call(this,e);Object.assign(a,this.getObjectHighlightParameters(e),t);var u=!0,n=!1,o=void 0;try{for(var h,c=r[Symbol.iterator]();!(u=(h=c.next()).done);u=!0){var d=h.value;Object.assign(a,d.getParameters(e))}}catch(g){n=!0,o=g}finally{try{u||null==c.return||c.return()}finally{if(n)throw o}}return a}},{key:"getObjectHighlightParameters",value:function(e){var r=e.props,t=r.highlightedObjectIndex,l=r.highlightColor,i={pickingHighlightColor:[l[0],l[1],l[2],l[3]||255]};return Number.isInteger(t)&&(i.pickingSelectedColor=t>=0?e.encodePickingColor(t):null),i}}]),s}(u.default);exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","./layers-pass":"7oM9"}],"WJJZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),r=n(require("@babel/runtime/helpers/esm/createClass")),t=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=n(require("@babel/runtime/helpers/esm/get")),a=n(require("@babel/runtime/helpers/esm/inherits")),l=n(require("./layers-pass")),o=require("@luma.gl/core");function n(e){return e&&e.__esModule?e:{default:e}}var u=function(l){function n(){return(0,e.default)(this,n),(0,t.default)(this,(0,i.default)(n).apply(this,arguments))}return(0,a.default)(n,l),(0,r.default)(n,[{key:"render",value:function(e){e.pickingFBO?this.drawPickingBuffer(e):(0,s.default)((0,i.default)(n.prototype),"render",this).call(this,e)}},{key:"drawPickingBuffer",value:function(e){var r=this,t=e.layers,i=e.viewports,s=e.onViewportActive,a=e.pickingFBO,l=e.effectProps,n=e.deviceRect,u=n.x,p=n.y,c=n.width,d=n.height,f=e.redrawReason,b=void 0===f?"":f,h=this.gl;return(0,o.withParameters)(h,{framebuffer:a,scissorTest:!0,scissor:[u,p,c,d],clearColor:[0,0,0,0]},function(){r.drawLayers({layers:t,viewports:i,onViewportActive:s,pass:"picking",redrawReason:b,effectProps:l,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})})}},{key:"shouldDrawLayer",value:function(e,r){var t=this.props.layerFilter,i=!e.isComposite&&e.props.visible&&e.props.pickable;return i&&t&&(i=t({layer:e,viewport:r,isPicking:!0})),i}},{key:"getModuleParameters",value:function(e,r,t){var i=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:1,devicePixelRatio:this.props.pixelRatio});return Object.assign(i,t),i}},{key:"getLayerParameters",value:function(e,r,t,i){var s=Object.assign({},e.props.parameters||{},i);return Object.assign(s,{viewport:t,blendColor:[0,0,0,(r+1)/255]}),s}}]),n}(l.default);exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","./layers-pass":"7oM9","@luma.gl/core":"iuAK"}],"nvd4":[function(require,module,exports) {
"use strict";function e(e){return e&&"undefined"!=typeof window?window.devicePixelRatio:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"J3c9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/createClass")),t=f(require("../utils/log")),s=f(require("../passes/draw-layers-pass")),a=f(require("../passes/pick-layers-pass")),i=f(require("../utils/get-pixel-ratio")),n=f(require("../effects/post-process-effect")),l=require("@luma.gl/core");function f(e){return e&&e.__esModule?e:{default:e}}var o=2,u=function(){function f(r){(0,e.default)(this,f),this.gl=r,this.pixelRatio=null,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new s.default(r),this.pickLayersPass=new a.default(r),this.renderCount=0,this._needsRedraw="Initial render",this.screenBuffer=null,this.offscreenBuffer=null,this.lastPostProcessEffect=null}return(0,r.default)(f,[{key:"setProps",value:function(e){"useDevicePixels"in e&&(this.pixelRatio=(0,i.default)(e.useDevicePixels)),"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed");var r=this.pixelRatio,t=this.layerFilter;this.drawLayersPass.setProps({pixelRatio:r,layerFilter:t}),this.pickLayersPass.setProps({pixelRatio:r,layerFilter:t})}},{key:"renderLayers",value:function(e){var r=this,s=e.layers,a=e.viewports,i=e.activateViewport,n=e.views,f=e.redrawReason,u=void 0===f?"unknown reason":f,c=e.clearCanvas,d=void 0===c||c,h=e.effects,p=void 0===h?[]:h,v=e.pass,y=e.stats,w=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,P=this.prepareEffects({layers:s,viewports:a,onViewportActive:i,views:n,effects:p,pixelRatio:this.pixelRatio}),g=this.lastPostProcessEffect?this.screenBuffer:l.Framebuffer.getDefaultFramebuffer(this.gl),R=w.render({layers:s,viewports:a,views:n,onViewportActive:i,redrawReason:u,clearCanvas:d,effects:p,effectProps:P,outputBuffer:g});this.postRender(p),this.renderCount++,t.default.priority>=o&&R.forEach(function(e){r.logRenderStats({status:e,pass:v,redrawReason:u,stats:y,renderStats:R})})}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}},{key:"finalize",value:function(){this.screenBuffer&&(this.screenBuffer.delete(),this.screenBuffer=null),this.offscreenBuffer&&(this.offscreenBuffer.delete(),this.offscreenBuffer=null)}},{key:"prepareEffects",value:function(e){var r=e.effects,t={};this.lastPostProcessEffect=null;var s=!0,a=!1,i=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var o=l.value;Object.assign(t,o.prepare(this.gl,e)),o instanceof n.default&&(this.lastPostProcessEffect=o)}}catch(u){a=!0,i=u}finally{try{s||null==f.return||f.return()}finally{if(a)throw i}}return this.lastPostProcessEffect&&this.prepareRenderBuffers(),t}},{key:"prepareRenderBuffers",value:function(){this.screenBuffer||(this.screenBuffer=new l.Framebuffer(this.gl)),this.screenBuffer.resize(),this.offscreenBuffer||(this.offscreenBuffer=new l.Framebuffer(this.gl)),this.offscreenBuffer.resize()}},{key:"postRender",value:function(e){var r={inputBuffer:this.screenBuffer,outputBuffer:this.offscreenBuffer,target:null},t=!0,s=!1,a=void 0;try{for(var i,f=e[Symbol.iterator]();!(t=(i=f.next()).done);t=!0){var o=i.value;if(o instanceof n.default){if(o===this.lastPostProcessEffect){Object.assign(r,{target:l.Framebuffer.getDefaultFramebuffer(this.gl)}),r=o.render(r);break}r=o.render(r)}}}catch(u){s=!0,a=u}finally{try{t||null==f.return||f.return()}finally{if(s)throw a}}}},{key:"logRenderStats",value:function(e){var r=e.renderStats,s=e.pass,a=e.redrawReason,i=e.stats,n=r.totalCount,l=r.visibleCount,f=r.compositeCount,u=r.pickableCount,c=n-f-l,d="";d+="RENDER #".concat(this.renderCount," ").concat(l," (of ").concat(n," layers) to ").concat(s," because ").concat(a," "),t.default.priority>o&&(d+="(".concat(c," hidden, ").concat(f," composite ").concat(u," pickable)")),t.default.log(o,d)(),i&&i.get("Redraw Layers").add(l)}}]),f}();exports.default=u;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/log":"GVus","../passes/draw-layers-pass":"snJ8","../passes/pick-layers-pass":"WJJZ","../utils/get-pixel-ratio":"nvd4","../effects/post-process-effect":"9/Qg","@luma.gl/core":"iuAK"}],"72Er":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getClosestObject=c,exports.getUniqueObjects=o;var e=r(require("../../utils/log"));function r(e){return e&&e.__esModule?e:{default:e}}var i={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function c(r){var c=r.pickedColors,o=r.layers,t=r.deviceX,d=r.deviceY,a=r.deviceRadius,n=r.deviceRect;if(c){for(var l=n.x,s=n.y,u=n.width,f=n.height,p=a*a,v=-1,k=0,y=0;y<f;y++){var g=y+s-d,x=g*g;if(x>p)k+=4*u;else for(var b=0;b<u;b++){if(c[k+3]-1>=0){var C=b+l-t,j=C*C+x;j<=p&&(p=j,v=k)}k+=4}}if(v>=0){var O=c[v+3]-1,h=c.slice(v,v+4),I=o[O];if(I){var P=I.decodePickingColor(h);return{pickedColor:h,pickedLayer:I,pickedObjectIndex:P}}e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return i}function o(r){var i=r.pickedColors,c=r.layers,o=new Map;if(i)for(var t=0;t<i.length;t+=4){var d=i[t+3]-1;if(d>=0){var a=i.slice(t,t+4),n=a.join(",");if(!o.has(n)){var l=c[d];l?o.set(n,{pickedColor:a,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(a)}):e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}
},{"../../utils/log":"GVus"}],"dX8M":[function(require,module,exports) {
"use strict";function e(e){var o=e.pickInfo,n=e.lastPickedInfo,t=e.mode,a=e.layers,l=e.viewports,c=e.x,d=e.y,p=e.deviceX,s=e.deviceY,f=e.pixelRatio,u=o.pickedColor,v=o.pickedLayer,y=o.pickedObjectIndex,x=v?[v]:[];if("hover"===t){var k=n.index,g=n.layerId,h=v&&v.props.id;if(h!==g||y!==k){if(h!==g){var I=a.find(function(e){return e.props.id===g});I&&x.unshift(I)}n.layerId=h,n.index=y,n.info=null}}var P=i({viewports:l}),m=P&&P.unproject([c,d]),w={color:null,layer:null,index:-1,picked:!1,x:c,y:d,pixel:[c,d],coordinate:m,lngLat:m,devicePixel:[p,s],pixelRatio:f},L=new Map;return L.set(null,w),x.forEach(function(e){var i=Object.assign({},w);if(e===v&&(i.color=u,i.index=y,i.picked=!0),i=r({layer:e,info:i,mode:t}),e===v&&"hover"===t&&(n.info=i),i&&L.set(i.layer.id,i),"hover"===t){var o=e.props.autoHighlight&&v===e?u:null;e.setModuleParameters({pickingSelectedColor:o}),e.setNeedsRedraw()}}),L}function r(e){for(var r=e.layer,i=e.info,o=e.mode;r&&i;){var n=i.layer||r;i.layer=r,i=r.pickLayer({info:i,mode:o,sourceLayer:n}),r=r.parent}return i}function i(e){return e.viewports[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.processPickInfo=e,exports.getLayerPickingInfo=r;
},{}],"G03o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/esm/classCallCheck")),i=l(require("@babel/runtime/helpers/esm/createClass")),t=require("@luma.gl/core"),r=l(require("../utils/get-pixel-ratio")),a=l(require("../utils/assert")),s=l(require("../passes/pick-layers-pass")),n=require("./picking/query-object"),c=require("./picking/pick-info");function l(e){return e&&e.__esModule?e:{default:e}}var o=function(){function l(i){(0,e.default)(this,l),this.gl=i,this.pickingFBO=null,this.pickLayersPass=new s.default(i),this.pixelRatio=null,this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return(0,i.default)(l,[{key:"setProps",value:function(e){"useDevicePixels"in e&&(this.pixelRatio=(0,r.default)(e.useDevicePixels)),"layerFilter"in e&&(this.layerFilter=e.layerFilter),this.pickLayersPass.setProps({pixelRatio:this.pixelRatio,layerFilter:this.layerFilter})}},{key:"pickObject",value:function(e){var i=e.x,t=e.y,r=e.mode,a=e.radius,s=void 0===a?0:a,n=e.layers,c=e.viewports,l=e.activateViewport,o=e.depth,u=void 0===o?1:o,h=e.event,d=void 0===h?null:h;this.pickingEvent=d;var p=this.pickClosestObject({x:i,y:t,radius:s,layers:n,mode:r,depth:u,viewports:c,onViewportActive:l});return this.pickingEvent=null,p}},{key:"pickObjects",value:function(e){var i=e.x,t=e.y,r=e.width,a=e.height,s=e.layers,n=e.viewports,c=e.activateViewport;return this.pickVisibleObjects({x:i,y:t,width:r,height:a,layers:s,mode:"pickObjects",viewports:n,onViewportActive:c})}},{key:"getLastPickedObject",value:function(e){var i=e.x,t=e.y,r=e.layers,a=e.viewports,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,n=s&&s.layer&&s.layer.id,c=n?r.find(function(e){return e.id===n}):null,l=a[0]&&a[0].unproject([i,t]),o={x:i,y:t,coordinate:l,lngLat:l,layer:c};return c?Object.assign({},s,o):Object.assign(o,{color:null,object:null,index:-1})}},{key:"updatePickingBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new t.Framebuffer(e)),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"pickClosestObject",value:function(e){var i=e.layers,t=e.viewports,r=e.x,a=e.y,s=e.radius,l=e.depth,o=void 0===l?1:l,u=e.mode,h=e.onViewportActive;this.updatePickingBuffer();for(var d,p=this.pixelRatio,v=Math.round(r*p),k=Math.round(this.gl.canvas.height-(a+1)*p),f=Math.round(s*p),y=this.pickingFBO,g=y.width,w=y.height,b=this.getPickingRect({deviceX:v,deviceY:k,deviceRadius:f,deviceWidth:g,deviceHeight:w}),x=[],P={},m=0;m<o;m++){var O=b&&this.drawAndSamplePickingBuffer({layers:i,viewports:t,onViewportActive:h,deviceRect:b,redrawReason:u}),R=(0,n.getClosestObject)({pickedColors:O,layers:i,deviceX:v,deviceY:k,deviceRadius:f,deviceRect:b});if(R.pickedColor&&m+1<o){var j=R.pickedColor[3]-1;P[j]||(P[j]=i[j].copyPickingColors()),i[j].clearPickingColor(R.pickedColor)}d=(0,c.processPickInfo)({pickInfo:R,lastPickedInfo:this.lastPickedInfo,mode:u,layers:i,viewports:t,x:r,y:a,deviceX:v,deviceY:k,pixelRatio:p});var C=this.callLayerPickingCallbacks(d,u);if(C&&C.forEach(function(e){return x.push(e)}),!R.pickedColor)break}return Object.keys(P).forEach(function(e){return i[e].restorePickingColors(P[e])}),{result:x,emptyInfo:d&&d.get(null)}}},{key:"pickVisibleObjects",value:function(e){var i=e.layers,t=e.viewports,r=e.x,a=e.y,s=e.width,l=e.height,o=e.mode,u=e.onViewportActive;this.updatePickingBuffer();var h=this.pixelRatio,d=Math.round(r*h),p=Math.round(this.gl.canvas.height-a*h),v=Math.round((r+s)*h),k=Math.round(this.gl.canvas.height-(a+l)*h),f={x:d,y:k,width:v-d,height:p-k},y=this.drawAndSamplePickingBuffer({layers:i,viewports:t,onViewportActive:u,deviceRect:f,redrawReason:o}),g=(0,n.getUniqueObjects)({pickedColors:y,layers:i}),w=new Map;return g.forEach(function(e){var i={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:a,width:s,height:l,pixelRatio:h};i=(0,c.getLayerPickingInfo)({layer:e.pickedLayer,info:i,mode:o}),w.has(i.object)||w.set(i.object,i)}),Array.from(w.values())}},{key:"drawAndSamplePickingBuffer",value:function(e){var i=e.layers,r=e.viewports,s=e.onViewportActive,n=e.deviceRect,c=e.redrawReason;if((0,a.default)(n),(0,a.default)(Number.isFinite(n.width)&&n.width>0,"`width` must be > 0"),(0,a.default)(Number.isFinite(n.height)&&n.height>0,"`height` must be > 0"),i.filter(function(e){return e.isPickable()}).length<1)return null;var l=this.pickingFBO;this.pickLayersPass.render({layers:i,viewports:r,onViewportActive:s,pickingFBO:l,deviceRect:n,redrawReason:c,effectProps:{lightSources:{}}});var o=n.x,u=n.y,h=n.width,d=n.height,p=new Uint8Array(h*d*4);return(0,t.readPixelsToArray)(l,{sourceX:o,sourceY:u,sourceWidth:h,sourceHeight:d,target:p}),p}},{key:"getPickingRect",value:function(e){var i=e.deviceX,t=e.deviceY,r=e.deviceRadius,a=e.deviceWidth,s=e.deviceHeight,n=Math.max(0,i-r),c=Math.max(0,t-r),l=Math.min(a,i+r+1)-n,o=Math.min(s,t+r+1)-c;return l<=0||o<=0?null:{x:n,y:c,width:l,height:o}}},{key:"callLayerPickingCallbacks",value:function(e,i){var t=[],r=this.pickingEvent;return e.forEach(function(e){if(e.layer){var a=!1;switch(i){case"hover":a=e.layer.onHover(e,r);break;case"query":break;default:throw new Error("unknown pick type")}a||t.push(e)}}),t}}]),l}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@luma.gl/core":"iuAK","../utils/get-pixel-ratio":"nvd4","../utils/assert":"Txat","../passes/pick-layers-pass":"WJJZ","./picking/query-object":"72Er","./picking/pick-info":"dX8M"}],"K0KY":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],"kXVE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enhancePointerEventInput=s,exports.enhanceMouseInput=i;var e=1,t=2,n=4,r={mousedown:e,mousemove:t,mouseup:n};function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function s(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(o(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function i(o){o.prototype.handler=function(o){var s=r[o.type];s&e&&o.button>=0&&(this.pressed=!0),s&t&&0===o.which&&(s=n),this.pressed&&(s&n&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:"mouse",srcEvent:o}))}}
},{}],"5MW4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Manager=void 0;var e=t(require("hammerjs")),r=require("./hammer-overrides");function t(e){return e&&e.__esModule?e:{default:e}}(0,r.enhancePointerEventInput)(e.default.PointerEventInput),(0,r.enhanceMouseInput)(e.default.MouseInput);var a=e.default.Manager;exports.Manager=a;var u=e.default;exports.default=u;
},{"hammerjs":"K0KY","./hammer-overrides":"kXVE"}],"jCzK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GESTURE_EVENT_ALIASES=exports.EVENT_RECOGNIZER_MAP=exports.INPUT_EVENT_TYPES=exports.BASIC_EVENT_ALIASES=exports.RECOGNIZER_FALLBACK_MAP=exports.RECOGNIZER_COMPATIBLE_MAP=exports.RECOGNIZERS=void 0;var e=p(require("./utils/hammer"));function p(e){return e&&e.__esModule?e:{default:e}}var t=e.default?[[e.default.Rotate,{enable:!1}],[e.default.Pinch,{enable:!1}],[e.default.Swipe,{enable:!1}],[e.default.Pan,{threshold:0,enable:!1}],[e.default.Press,{enable:!1}],[e.default.Tap,{event:"doubletap",taps:2,enable:!1}],[e.default.Tap,{event:"anytap",enable:!1}],[e.default.Tap,{enable:!1}]]:null;exports.RECOGNIZERS=t;var o={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]};exports.RECOGNIZER_COMPATIBLE_MAP=o;var a={doubletap:["tap"]};exports.RECOGNIZER_FALLBACK_MAP=a;var n={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"};exports.BASIC_EVENT_ALIASES=n;var r={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]};exports.INPUT_EVENT_TYPES=r;var s={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"};exports.EVENT_RECOGNIZER_MAP=s;var u={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};exports.GESTURE_EVENT_ALIASES=u;
},{"./utils/hammer":"5MW4"}],"1b2B":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.passiveSupported=exports.document=exports.global=exports.window=exports.userAgent=void 0;var t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"";exports.userAgent=t;var o="undefined"!=typeof window?window:e;exports.window=o;var r=void 0!==e?e:window;exports.global=r;var s="undefined"!=typeof document?document:{};exports.document=s;var n=!1;exports.passiveSupported=n;try{var p={get passive(){return exports.passiveSupported=n=!0,!0}};o.addEventListener("test",p,p),o.removeEventListener("test",p,p)}catch(a){}
},{}],"7k4W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants"),i=require("../utils/globals");function s(e){return e&&e.__esModule?e:{default:e}}var l=-1!==i.userAgent.indexOf("firefox"),a=n.INPUT_EVENT_TYPES.WHEEL_EVENTS,r="wheel",o=4.000244140625,u=40,h=.25,v=function(){function n(t,s){var l=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},r),this.events=a.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,l.handleEvent,!!i.passiveSupported&&{passive:!1})})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===r&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;i.window.WheelEvent&&(l&&e.deltaMode===i.window.WheelEvent.DOM_DELTA_PIXEL&&(t/=i.window.devicePixelRatio),e.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE&&(t*=u));var n={x:e.clientX,y:e.clientY};0!==t&&t%o==0&&(t=Math.floor(t/o)),e.shiftKey&&t&&(t*=h),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:r,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK","../utils/globals":"1b2B"}],"N73Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function s(e){return e&&e.__esModule?e:{default:e}}var a=n.INPUT_EVENT_TYPES.MOUSE_EVENTS,i="pointermove",v="pointerover",l="pointerout",r="pointerleave",o=function(){function n(t,s){var i=this,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.pressed=!1,this.options=Object.assign({enable:!0},v),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=a.concat(v.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableMoveEvent=t),e===v&&(this.enableOverEvent=t),e===l&&(this.enableOutEvent=t),e===r&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:v,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:l,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:r,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:i,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),n}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"PrTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function a(e){return e&&e.__esModule?e:{default:e}}var s=n.INPUT_EVENT_TYPES.KEY_EVENTS,i="keydown",l="keyup",r=function(){function n(t,a){var i=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=a,this.options=Object.assign({enable:!0},l),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=s.concat(l.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=1,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableDownEvent=t),e===l&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:i,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:l,srcEvent:e,key:e.key,target:e.target}))}}]),n}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"I4Fd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var s="contextmenu",i=function(){function n(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return(0,t.default)(n,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){e===s&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:s,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"sn9i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whichButtons=h,exports.getOffsetPosition=a;var e=1,t=2,n=4,o={pointerdown:e,pointermove:t,pointerup:n,mousedown:e,mousemove:t,mouseup:n},i=1,r=2,u=3,s=0,c=1,l=2,f=1,p=2,v=4;function h(h){var a=o[h.srcEvent.type];if(!a)return null;var d=h.srcEvent,m=d.buttons,B=d.button,g=d.which,x=!1,b=!1,w=!1;return a===n||a===t&&!Number.isFinite(m)?(x=g===i,b=g===r,w=g===u):a===t?(x=Boolean(m&f),b=Boolean(m&v),w=Boolean(m&p)):a===e&&(x=B===s,b=B===c,w=B===l),{leftButton:x,middleButton:b,rightButton:w}}function a(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var o=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),r=i.width/t.offsetWidth,u=i.height/t.offsetHeight;return{center:o,offsetCenter:{x:(o.x-i.left-t.clientLeft)/r,y:(o.y-i.top-t.clientTop)/u}}}
},{}],"e+1J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/esm/classCallCheck")),t=r(require("@babel/runtime/helpers/esm/createClass")),n=require("./event-utils");function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function r(t){(0,e.default)(this,r),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return(0,t.default)(r,[{key:"isEmpty",value:function(){return 0===this.handlers.length}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.handlers,i=this.handlersByElement;i.has(n)||i.set(n,[]);var s={type:e,handler:t,srcElement:n,once:r};a.push(s),i.get(n).push(s)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,a=n.length-1;a>=0;a--){var i=n[a];if(i.type===e&&i.handler===t){n.splice(a,1);var s=r.get(i.srcElement);s.splice(s.indexOf(i),1),0===s.length&&r.delete(i.srcElement)}}}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,a=function(){e.handled=!0},i=function(){e.handled=!0,r=!0},s=[],l=0;l<n.length;l++){var h=n[l],o=h.type,d=h.handler,u=h.once;if(d(Object.assign({},e,{type:o,stopPropagation:a,stopImmediatePropagation:i})),u&&s.push(n[l]),r)break}for(var v=0;v<s.length;v++){var f=s[v];o=f.type,d=f.handler;this.remove(o,d)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,(0,n.whichButtons)(e),(0,n.getOffsetPosition)(e,t),{handled:!1,rootElement:t})}}]),r}();exports.default=a;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./event-utils":"sn9i"}],"GjpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/slicedToArray")),t=h(require("@babel/runtime/helpers/esm/classCallCheck")),n=h(require("@babel/runtime/helpers/esm/createClass")),i=require("./utils/hammer"),r=h(require("./inputs/wheel-input")),a=h(require("./inputs/move-input")),s=h(require("./inputs/key-input")),o=h(require("./inputs/contextmenu-input")),u=h(require("./utils/event-registrar")),l=require("./constants");function h(e){return e&&e.__esModule?e:{default:e}}var v={events:null,recognizers:null,recognizerOptions:{},Manager:i.Manager,touchAction:"none"},c=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,i),this.options=Object.assign({},v,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return(0,n.default)(i,[{key:"setElement",value:function(t){var n=this;if(this.element&&this.destroy(),this.element=t,t){var i=this.options,u=i.Manager;for(var h in this.manager=new u(t,{touchAction:i.touchAction,recognizers:i.recognizers||l.RECOGNIZERS}).on("hammer.input",this._onBasicInput),i.recognizers||Object.keys(l.RECOGNIZER_COMPATIBLE_MAP).forEach(function(e){var t=n.manager.get(e);t&&l.RECOGNIZER_COMPATIBLE_MAP[e].forEach(function(e){t.recognizeWith(e)})}),i.recognizerOptions){var v=this.manager.get(h);if(v){var c=i.recognizerOptions[h];delete c.enable,v.set(c)}}this.wheelInput=new r.default(t,this._onOtherEvent,{enable:!1}),this.moveInput=new a.default(t,this._onOtherEvent,{enable:!1}),this.keyInput=new s.default(t,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new o.default(t,this._onOtherEvent,{enable:!1});var p=!0,E=!1,f=void 0;try{for(var d,m=this.events[Symbol.iterator]();!(p=(d=m.next()).done);p=!0){var g=(0,e.default)(d.value,2),y=g[0],_=g[1];_.isEmpty()||(this._toggleRecognizer(_.recognizerName,!0),this.manager.on(y,_.handleEvent))}}catch(I){E=!0,f=I}finally{try{p||null==m.return||m.return()}finally{if(E)throw f}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var i=n.get(e);if(i&&i.options.enable!==t){i.set({enable:t});var r=l.RECOGNIZER_FALLBACK_MAP[e];r&&!this.options.recognizers&&r.forEach(function(r){var a=n.get(r);t?(a.requireFailure(e),i.dropRequireFailure(r)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,i){if("string"==typeof e){var r=this.manager,a=this.events,s=l.GESTURE_EVENT_ALIASES[e]||e,o=a.get(s);o||(o=new u.default(this),a.set(s,o),o.recognizerName=l.EVENT_RECOGNIZER_MAP[s]||s,r&&r.on(s,o.handleEvent)),this._toggleRecognizer(o.recognizerName,!0),o.add(e,t,n,i)}else for(var h in n=t,e)this._addEventHandler(h,e[h],n,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,i=l.GESTURE_EVENT_ALIASES[e]||e,r=n.get(i);if(r&&(r.remove(e,t),r.isEmpty())){var a=r.recognizerName,s=!1,o=!0,u=!1,h=void 0;try{for(var v,c=n.values()[Symbol.iterator]();!(o=(v=c.next()).done);o=!0){var p=v.value;if(p.recognizerName===a&&!p.isEmpty()){s=!0;break}}}catch(f){u=!0,h=f}finally{try{o||null==c.return||c.return()}finally{if(u)throw h}}s||this._toggleRecognizer(a,!1)}}else for(var E in e)this._removeEventHandler(E,e[E])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=l.BASIC_EVENT_ALIASES[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),i}();exports.default=c;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./utils/hammer":"5MW4","./inputs/wheel-input":"7k4W","./inputs/move-input":"N73Z","./inputs/key-input":"PrTM","./inputs/contextmenu-input":"I4Fd","./utils/event-registrar":"e+1J","./constants":"jCzK"}],"sV/3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"EventManager",{enumerable:!0,get:function(){return e.default}});var e=r(require("./event-manager"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./event-manager":"GjpX"}],"ruUO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=w(require("@babel/runtime/helpers/esm/typeof")),t=w(require("@babel/runtime/helpers/esm/classCallCheck")),i=w(require("@babel/runtime/helpers/esm/createClass")),a=w(require("./layer-manager")),r=w(require("./view-manager")),n=w(require("../views/map-view")),s=w(require("./effect-manager")),o=w(require("./effect")),h=w(require("./deck-renderer")),c=w(require("./deck-picker")),l=w(require("../utils/log")),u=w(require("./init")),d=require("@luma.gl/core"),g=require("probe.gl"),p=require("mjolnir.js"),v=w(require("../utils/assert")),f=require("./constants");function w(e){return e&&e.__esModule?e:{default:e}}function m(){}var y=function(e){return e.isDragging?"grabbing":"grab"};function k(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(o.default)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.bool,touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_animate:e.bool}}var b={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_animate:!1,onWebGLInitialized:m,onResize:m,onViewStateChange:m,onBeforeRender:m,onAfterRender:m,onLoad:m,_onMetrics:null,getCursor:y,debug:!1,drawPickingColors:!1},M=function(){function e(i){(0,t.default)(this,e),i=Object.assign({},b,i),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=i.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),_()&&l.default.warn("IE 11 support will be deprecated in v8.0")(),i.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(i)),this.animationLoop=this._createAnimationLoop(i),this.stats=new g.Stats({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(i),this.animationLoop.start()}return(0,i.default)(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.eventManager&&this.eventManager.destroy(),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&l.default.removed("onLayerHover","onHover")(),"onLayerClick"in e&&l.default.removed("onLayerClick","onClick")(),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(this.props),width:this.width,height:this.height}),i=this._getViewState(e);i&&(t.viewState=i),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.effectManager&&this.effectManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.deckRenderer&&this.deckRenderer.setProps(t),this.deckPicker&&this.deckPicker.setProps(t),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var i=this.viewManager.needsRedraw(e),a=this.layerManager.needsRedraw(e),r=this.effectManager.needsRedraw(e),n=this.deckRenderer.needsRedraw(e);return t=t||i||a||r||n}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=e.x,i=e.y,a=e.radius,r=void 0===a?0:a,n=e.layerIds,s=void 0===n?null:n;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObject Time").timeStart();var o=this.layerManager.getLayers({layerIds:s}),h=this.layerManager.activateViewport,c=this.deckPicker.pickObject({x:t,y:i,radius:r,layers:o,viewports:this.getViewports({x:t,y:i}),activateViewport:h,mode:"query",depth:1}).result;return this.stats.get("pickObject Time").timeEnd(),c.length?c[0]:null}},{key:"pickMultipleObjects",value:function(e){var t=e.x,i=e.y,a=e.radius,r=void 0===a?0:a,n=e.layerIds,s=void 0===n?null:n,o=e.depth,h=void 0===o?10:o;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickMultipleObjects Time").timeStart();var c=this.layerManager.getLayers({layerIds:s}),l=this.layerManager.activateViewport,u=this.deckPicker.pickObject({x:t,y:i,radius:r,layers:c,viewports:this.getViewports({x:t,y:i}),activateViewport:l,mode:"query",depth:h}).result;return this.stats.get("pickMultipleObjects Time").timeEnd(),u}},{key:"pickObjects",value:function(e){var t=e.x,i=e.y,a=e.width,r=void 0===a?1:a,n=e.height,s=void 0===n?1:n,o=e.layerIds,h=void 0===o?null:o;this.stats.get("Pick Count").incrementCount(),this.stats.get("pickObjects Time").timeStart();var c=this.layerManager.getLayers({layerIds:h}),l=this.layerManager.activateViewport,u=this.deckPicker.pickObjects({x:t,y:i,width:r,height:s,layers:c,viewports:this.getViewports({x:t,y:i,width:r,height:s}),activateViewport:l});return this.stats.get("pickObjects Time").timeEnd(),u}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&(t=document.getElementById(t),(0,v.default)(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var i=e.id,a=e.style;return t.id=i,Object.assign(t.style,a),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,i=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,i=e.width,a=e.height,r=e.gl,n=e.glOptions,s=e.debug,o=e.useDevicePixels,h=e.autoResizeDrawingBuffer;return new d.AnimationLoop({width:i,height:a,useDevicePixels:o,autoResizeDrawingBuffer:h,gl:r,onCreateContext:function(e){return(0,d.createGLContext)(Object.assign({},n,e,{canvas:t.canvas,debug:s}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(e){return e.viewState||this.viewState}},{key:"_getViews",value:function(e){var t=e.views||[new n.default({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.callback=this.props.onHover,t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.mode){var t=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(e),activateViewport:this.layerManager.activateViewport,depth:1},e)),i=t.result,a=t.emptyInfo;if(e.callback){var r=i.find(function(e){return e.index>=0})||a;e.callback(r,e.event)}e.mode=null}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function(e){this.layerManager.context.animationProps=e}},{key:"_setGLContext",value:function(e){if(!this.layerManager){for(var t in this.canvas||(this.canvas=e.canvas,(0,d.trackContextState)(e,{enable:!0,copyState:!0})),(0,d.setParameters)(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e),this.eventManager=new p.EventManager(e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),f.EVENTS)this.eventManager.on(t,this._onEvent);this.viewManager=new r.default({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),(0,v.default)(this.viewManager);var i=this.viewManager.getViewports()[0];this.layerManager=new a.default(e,{deck:this,stats:this.stats,viewport:i}),this.effectManager=new s.default,this.deckRenderer=new h.default(e),this.deckPicker=new c.default(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var i=this.layerManager.context.gl;(0,d.setParameters)(i,this.props.parameters),this.props.onBeforeRender({gl:i});var a=this.layerManager.getLayers(),r=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:a,viewports:this.viewManager.getViewports(),activateViewport:r,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),l.default.table(3,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(e),this._updateAnimationProps(e),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates(e)}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState[e.viewId]=t,this.viewManager.setProps({viewState:t}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,i=void 0!==t&&t;i!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=i)}},{key:"_onEvent",value:function(e){var t=f.EVENTS[e.type],i=e.offsetCenter;if(t&&i){var a=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:a,viewports:this.getViewports(i)},this._lastPointerDownInfo),n=r.layer,s=n&&(n[t.handler]||n.props[t.handler]),o=this.props[t.handler],h=!1;s&&(h=s.call(n,r,e)),!h&&o&&o(r,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var i=d.lumaStats.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}]),e}();function _(){return void 0!==("undefined"==typeof window?"undefined":(0,e.default)(window))&&-1!==((window.navigator||{}).userAgent||"").indexOf("Trident/")}exports.default=M,M.getPropTypes=k,M.defaultProps=b,M.VERSION=u.default.VERSION;
},{"@babel/runtime/helpers/esm/typeof":"zsb/","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./layer-manager":"m8xf","./view-manager":"30H2","../views/map-view":"wD/M","./effect-manager":"sqcc","./effect":"Z10T","./deck-renderer":"J3c9","./deck-picker":"G03o","../utils/log":"GVus","./init":"N6pv","@luma.gl/core":"iuAK","probe.gl":"T+YN","mjolnir.js":"sV/3","../utils/assert":"Txat","./constants":"ysbg"}],"03Eg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("@babel/runtime/helpers/esm/slicedToArray")),e=l(require("@babel/runtime/helpers/esm/classCallCheck")),r=l(require("@babel/runtime/helpers/esm/createClass")),a=l(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=l(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=l(require("@babel/runtime/helpers/esm/inherits")),n=l(require("./controller")),s=l(require("./view-state")),u=require("math.gl");function l(t){return t&&t.__esModule?t:{default:t}}var p=1,d=2;function v(t,e){return Number.isFinite(t)?t:e}var h=function(n){function s(t){var r,i=t.width,n=t.height,u=t.position,l=t.bearing,p=t.pitch,d=t.longitude,v=t.latitude,h=t.zoom,c=(t.syncBearing,t.bounds,t.startPanEventPosition),m=t.startPanPosition,P=t.startRotateCenter,f=t.startRotateViewport,_=t.startZoomPos,g=t.startZoom;return(0,e.default)(this,s),(r=(0,a.default)(this,(0,o.default)(s).call(this,{width:i,height:n,position:u,bearing:l,pitch:p,longitude:d,latitude:v,zoom:h})))._interactiveState={startPanEventPosition:c,startPanPosition:m,startRotateCenter:P,startRotateViewport:f,startZoomPos:_,startZoom:g},r}return(0,i.default)(s,n),(0,r.default)(s,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,r=this._viewportProps,a=r.translationX,o=r.translationY;return this._getUpdatedState({startPanPosition:[a,o],startPanEventPosition:e})}},{key:"pan",value:function(e){var r=e.pos,a=e.startPos,o=this._interactiveState.startPanEventPosition||a;if(!o)return this;var i=this._interactiveState.startPanPosition||[],n=(0,t.default)(i,2),s=n[0],u=n[1];s=v(s,this._viewportProps.translationX),u=v(u,this._viewportProps.translationY);var l=r[0]-o[0],p=r[1]-o[1];return this._getUpdatedState({translationX:s+l,translationY:u-p})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var a=this._viewportProps,o=a.bearing,i=a.pitch;return this._getUpdatedState({bearing:o+10*e,pitch:i-10*r})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPos:e,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,a=t.scale,o=this._viewportProps,i=o.zoom,n=o.minZoom,s=o.maxZoom,l=o.width,p=o.height,d=(o.translationX,o.translationY,this._interactiveState.startZoomPos||r||e),v=(0,u.clamp)(i*a,n,s);e[0],d[0],e[1],d[1],d[0],d[1];return v/i<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=this._viewportProps.bearing-d;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var t=this._viewportProps.bearing+d;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),r=new u.Vector3(e).normalize().scale(p);return this._getUpdatedState({position:new u.Vector3(t).add(r)})}},{key:"moveBackward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),r=new u.Vector3(e).normalize().scale(-p);return this._getUpdatedState({position:new u.Vector3(t).add(r)})}},{key:"moveUp",value:function(){var t=this._viewportProps.position;return this._getUpdatedState({position:new u.Vector3(t).add([0,0,1])})}},{key:"moveDown",value:function(){var t=this._viewportProps.position,e=t[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new u.Vector3(t).add(e)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(t){return new s(Object.assign({},this._viewportProps,this._interactiveState,t))}}]),s}(s.default),c=function(t){function r(t){return(0,e.default)(this,r),(0,a.default)(this,(0,o.default)(r).call(this,h,t))}return(0,i.default)(r,t),r}(n.default);exports.default=c;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./controller":"7ugw","./view-state":"TfDO","math.gl":"4xAa"}],"3EN5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),l=s(require("@babel/runtime/helpers/esm/inherits")),n=s(require("./view")),u=s(require("../viewports/viewport")),o=require("math.gl"),a=s(require("../controllers/first-person-controller"));function s(e){return e&&e.__esModule?e:{default:e}}function p(e){var r=e.bearing,t=e.pitch;return new o._SphericalCoordinates({bearing:r,pitch:t}).toVector3().normalize()}var c=function(n){function s(){return(0,e.default)(this,s),(0,t.default)(this,(0,i.default)(s).apply(this,arguments))}return(0,l.default)(s,n),(0,r.default)(s,[{key:"_getViewport",value:function(e){var r=e.viewState,t=r.modelMatrix,i=void 0===t?null:t,l=r.bearing,n=r.up,a=void 0===n?[0,0,1]:n,s=p({bearing:l,pitch:89}),c=i?i.transformDirection(s):s,f=(new o.Matrix4).lookAt({eye:[0,0,0],center:c,up:a});return new u.default(Object.assign({},e,{zoom:null,viewMatrix:f}))}},{key:"controller",get:function(){return this._getControllerProps({type:a.default})}}]),s}(n.default);exports.default=c,c.displayName="FirstPersonView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"4xAa","../controllers/first-person-controller":"03Eg"}],"x15U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=s(require("@babel/runtime/helpers/esm/inherits")),a=s(require("./view")),l=s(require("../viewports/viewport")),n=require("math.gl");function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var r=e.bearing,t=e.pitch;return new n._SphericalCoordinates({bearing:r,pitch:t}).toVector3().normalize()}var p=function(a){function s(){return(0,e.default)(this,s),(0,t.default)(this,(0,i.default)(s).apply(this,arguments))}return(0,u.default)(s,a),(0,r.default)(s,[{key:"_getViewport",value:function(e){var r=e.viewState,t=r.bearing,i=r.pitch,u=r.position,a=r.up,s=50*r.zoom,p=o({bearing:t,pitch:i}).scale(-s).multiply(new n.Vector3(1,1,-1)),c=(new n.Matrix4).multiplyRight((new n.Matrix4).lookAt({eye:p,center:u,up:a}));return new l.default(Object.assign({},e,{id:this.id,zoom:null,viewMatrix:c}))}}]),s}(a.default);exports.default=p,p.displayName="ThirdPersonView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"4xAa"}],"o35a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.OrbitState=void 0;var t=p(require("@babel/runtime/helpers/esm/classCallCheck")),e=p(require("@babel/runtime/helpers/esm/createClass")),r=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=p(require("@babel/runtime/helpers/esm/inherits")),i=require("math.gl"),n=p(require("./controller")),s=p(require("./view-state")),u=p(require("../transitions/linear-interpolator")),l=require("./transition-manager");function p(t){return t&&t.__esModule?t:{default:t}}var v=50,c={orbitAxis:"Z",rotationX:0,rotationOrbit:0,fovy:50,zoom:0,target:[0,0,0],minZoom:-1/0,maxZoom:1/0},m={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new u.default(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:l.TRANSITION_EVENTS.BREAK},h=function(t){return Math.pow(2,t)},d=function(n){function s(e){var a,i=e.ViewportType,n=e.width,u=e.height,l=e.orbitAxis,p=void 0===l?c.orbitAxis:l,v=e.rotationX,m=void 0===v?c.rotationX:v,h=e.rotationOrbit,d=void 0===h?c.rotationOrbit:h,f=e.target,g=void 0===f?c.target:f,_=e.zoom,b=void 0===_?c.zoom:_,w=e.fovy,P=void 0===w?c.fovy:w,y=e.minZoom,S=void 0===y?c.minZoom:y,O=e.maxZoom,Z=void 0===O?c.maxZoom:O,k=e.startPanPosition,T=e.startTarget,x=e.startRotationX,z=e.startRotationOrbit,U=e.startZoomPosition,N=e.startZoom;return(0,t.default)(this,s),(a=(0,r.default)(this,(0,o.default)(s).call(this,{width:n,height:u,orbitAxis:p,rotationX:m,rotationOrbit:d,target:g,fovy:P,zoom:b,minZoom:S,maxZoom:Z})))._interactiveState={startPanPosition:k,startTarget:T,startRotationX:x,startRotationOrbit:z,startZoomPosition:U,startZoom:N},a.ViewportType=i,a}return(0,a.default)(s,n),(0,e.default)(s,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,r=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:r})}},{key:"pan",value:function(t){var e=t.pos,r=(t.startPos,this._interactiveState),o=r.startPanPosition,a=r.startTarget,n=new i.Vector2(e).subtract(o);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:a,pixelOffset:n})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,o=this._interactiveState,a=o.startRotationX,n=o.startRotationOrbit;if(!Number.isFinite(a)||!Number.isFinite(n))return this;var s=(0,i.clamp)(a+180*r,-89.999,89.999),u=(n+180*e)%360;return this._getUpdatedState({rotationX:s,rotationOrbit:u,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,o=t.scale,a=this._viewportProps,i=a.zoom,n=a.width,s=a.height,u=a.target,l=this._interactiveState,p=l.startZoom,v=l.startZoomPosition,c=l.startTarget;Number.isFinite(p)||(p=i,c=u,v=r||e);var m=this._calculateNewZoom({scale:o,startZoom:p}),d=h(p),f=h(m),g=(n/2-v[0])*(f/d-1),_=(s/2-v[1])*(f/d-1);return this._getUpdatedState({zoom:m,target:this._calculateNewTarget({startTarget:c,zoom:m,pixelOffset:[g,_]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var t=[-v,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveRight",value:function(){var t=[v,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveUp",value:function(){var t=[0,-v];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveDown",value:function(){var t=[0,v];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,o=this._viewportProps,a=o.maxZoom,n=o.minZoom;Number.isFinite(r)||(r=this._viewportProps.zoom);var s=r+Math.log2(e);return(0,i.clamp)(s,n,a)}},{key:"_calculateNewTarget",value:function(t){var e=t.startTarget,r=t.zoom,o=t.pixelOffset,a=Object.assign({},this._viewportProps);Number.isFinite(r)&&(a.zoom=r),e&&(a.target=e);var i=new this.ViewportType(a),n=i.project(a.target);return i.unproject([n[0]-o[0],n[1]-o[1],n[2]])}},{key:"_getUpdatedState",value:function(t){return new s(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,o=t.zoom;return t.zoom=o>e?e:o,t.zoom=o<r?r:o,t}}]),s}(s.default);exports.OrbitState=d;var f=function(i){function n(e){return(0,t.default)(this,n),(0,r.default)(this,(0,o.default)(n).call(this,d,e))}return(0,a.default)(n,i),(0,e.default)(n,[{key:"_getTransitionProps",value:function(){return m}}]),n}(n.default);exports.default=f;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","math.gl":"4xAa","./controller":"7ugw","./view-state":"TfDO","../transitions/linear-interpolator":"2bGR","./transition-manager":"awSe"}],"gGaz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=s(require("@babel/runtime/helpers/esm/inherits")),a=s(require("./view")),l=s(require("../viewports/viewport")),u=require("math.gl"),n=s(require("../controllers/orbit-controller"));function s(e){return e&&e.__esModule?e:{default:e}}var d=Math.PI/180;function f(e){var t=e.height,r=e.fovy,i=e.orbitAxis,o=e.rotationX,a=e.rotationOrbit,l=(e.zoom,.5/Math.tan(r*d/2)),n=(new u.Matrix4).lookAt({eye:[0,0,l]});n.rotateX(o*d),"Z"===i?n.rotateZ(a*d):n.rotateY(a*d);var s=1/(t||1);return n.scale([s,s,s]),n}var h=function(e){function a(e){(0,t.default)(this,a);var o=e.id,l=e.x,u=e.y,n=e.width,s=e.height,d=e.fovy,h=void 0===d?50:d,v=e.near,b=e.far,c=e.orbitAxis,p=void 0===c?"Z":c,m=e.target,y=void 0===m?[0,0,0]:m,g=e.rotationX,x=void 0===g?0:g,q=e.rotationOrbit,w=void 0===q?0:q,O=e.zoom,M=void 0===O?0:O;return(0,r.default)(this,(0,i.default)(a).call(this,{id:o,viewMatrix:f({height:s,fovy:h,orbitAxis:p,rotationX:x,rotationOrbit:w,zoom:M}),fovy:h,near:v,far:b,x:l,y:u,position:y,width:n,height:s,zoom:M}))}return(0,o.default)(a,e),a}(l.default),v=function(a){function l(e){return(0,t.default)(this,l),(0,r.default)(this,(0,i.default)(l).call(this,Object.assign({},e,{type:h})))}return(0,o.default)(l,a),(0,e.default)(l,[{key:"controller",get:function(){return this._getControllerProps({type:n.default,ViewportType:h})}}]),l}(a.default);exports.default=v,v.displayName="OrbitView";
},{"@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"4xAa","../controllers/orbit-controller":"o35a"}],"/IDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=n(require("@babel/runtime/helpers/esm/inherits")),a=n(require("./view")),o=n(require("../viewports/viewport")),s=l(require("gl-matrix/mat4"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var p=Math.PI/180,f=function(a){function l(){return(0,e.default)(this,l),(0,r.default)(this,(0,i.default)(l).apply(this,arguments))}return(0,u.default)(l,a),(0,t.default)(l,[{key:"_getViewport",value:function(e){var t=e.x,r=e.y,i=e.width,u=e.height,a=e.viewState,l=a.eye,n=a.lookAt,f=void 0===n?[0,0,0]:n,d=a.up,c=void 0===d?[0,1,0]:d,v=e.fovy||a.fovy||75,h=e.near||a.near||1,b=e.far||a.far||100,y=Number.isFinite(a.aspect)?a.aspect:i/u,m=v*p;return new o.default({id:this.id,x:t,y:r,width:i,height:u,viewMatrix:s.lookAt([],l,f,c),projectionMatrix:s.perspective([],m,y,h,b)})}}]),l}(a.default);exports.default=f,f.displayName="PerspectiveView";
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/viewport":"HjGN","gl-matrix/mat4":"w3aR"}],"os+B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),r=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),n=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),i=s(require("@babel/runtime/helpers/esm/inherits")),u=s(require("./controller")),a=require("./orbit-controller"),o=s(require("../transitions/linear-interpolator")),l=require("./transition-manager");function s(e){return e&&e.__esModule?e:{default:e}}var f={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new o.default(["target","zoom"]),transitionInterruption:l.TRANSITION_EVENTS.BREAK},c=function(u){function o(r){var i;return(0,e.default)(this,o),(i=(0,t.default)(this,(0,n.default)(o).call(this,a.OrbitState,r))).invertPan=!0,i}return(0,i.default)(o,u),(0,r.default)(o,[{key:"_onPanRotate",value:function(e){return!1}},{key:"_getTransitionProps",value:function(){return f}}]),o}(u.default);exports.default=c;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./controller":"7ugw","./orbit-controller":"o35a","../transitions/linear-interpolator":"2bGR","./transition-manager":"awSe"}],"d3vQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/createClass")),t=s(require("@babel/runtime/helpers/esm/getPrototypeOf")),r=s(require("@babel/runtime/helpers/esm/classCallCheck")),i=s(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),o=s(require("@babel/runtime/helpers/esm/inherits")),a=s(require("./view")),u=s(require("../viewports/viewport")),l=require("math.gl"),n=s(require("../controllers/orthographic-controller"));function s(e){return e&&e.__esModule?e:{default:e}}var d=(new l.Matrix4).lookAt({eye:[0,0,1]});function h(e){var t=e.width,r=e.height,i=e.near,o=e.far;return t=t||1,r=r||1,(new l.Matrix4).ortho({left:-t/2,right:t/2,bottom:r/2,top:-r/2,near:i,far:o})}var f=function(e){function t(e){var o=e.id,a=e.x,l=e.y,n=e.width,s=e.height,f=e.near,p=void 0===f?.1:f,c=e.far,v=void 0===c?1e3:c,m=e.zoom,b=void 0===m?0:m,g=e.target,w=void 0===g?[0,0,0]:g;return(0,r.default)(this,t),(0,i.default)(void 0,new u.default({id:o,x:a,y:l,width:n,height:s,position:w,viewMatrix:d,projectionMatrix:h({width:n,height:s,near:p,far:v}),zoom:b}))}return(0,o.default)(t,e),t}(u.default),p=function(a){function u(e){return(0,r.default)(this,u),(0,i.default)(this,(0,t.default)(u).call(this,Object.assign({},e,{type:f})))}return(0,o.default)(u,a),(0,e.default)(u,[{key:"controller",get:function(){return this._getControllerProps({type:n.default,ViewportType:f})}}]),u}(a.default);exports.default=p,p.displayName="OrthographicView";
},{"@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/inherits":"RnSb","./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"4xAa","../controllers/orthographic-controller":"os+B"}],"6T8B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass")),r=n(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=n(require("@babel/runtime/helpers/esm/getPrototypeOf")),u=n(require("@babel/runtime/helpers/esm/inherits")),l=n(require("./transition-interpolator")),a=require("math.gl"),o=require("viewport-mercator-project");function n(e){return e&&e.__esModule?e:{default:e}}var s=["bearing","pitch"],d=function(l){function n(){return(0,e.default)(this,n),(0,r.default)(this,(0,i.default)(n).call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}))}return(0,u.default)(n,l),(0,t.default)(n,[{key:"interpolateProps",value:function(e,t,r){for(var i=(0,o.flyToViewport)(e,t,r),u=0;u<s.length;u++){var l=s[u];i[l]=(0,a.lerp)(e[l]||0,t[l]||0,r)}return i}}]),n}(l.default);exports.default=d;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./transition-interpolator":"R8fo","math.gl":"4xAa","viewport-mercator-project":"ZcHr"}],"yiMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/classCallCheck")),e=i(require("@babel/runtime/helpers/esm/createClass")),r=require("./iterable-utils"),a=i(require("./typed-array-manager"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,t.default)(this,i);var r=e.attributes,o=void 0===r?{}:r;this.typedArrayManager=a.default,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=o,this.updateGeometry(e),Object.seal(this)}return(0,e.default)(i,[{key:"updateGeometry",value:function(t){var e=t.data,r=t.getGeometry,a=t.positionFormat,i=t.fp64,o=t.dataChanged;if(this.data=e,this.getGeometry=r,this.fp64=i,this.positionSize="XY"===a?2:3,Array.isArray(o)){var n=!0,u=!1,l=void 0;try{for(var s,y=o[Symbol.iterator]();!(n=(s=y.next()).done);n=!0){var d=s.value;this._rebuildGeometry(d)}}catch(f){u=!0,l=f}finally{try{n||null==y.return||y.return()}finally{if(u)throw l}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(t){var e=t.startRow,r=t.endRow;this._rebuildGeometry({startRow:e,endRow:r})}},{key:"updateGeometryAttributes",value:function(t,e,r){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(t){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function(t,e,a){var i=this.data,o=this.getGeometry,n=(0,r.createIterable)(i,e,a),u=n.iterable,l=n.objectInfo,s=!0,y=!1,d=void 0;try{for(var f,h=u[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var v=f.value;l.index++,t(o(v,l),l.index)}}catch(m){y=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(y)throw d}}}},{key:"_rebuildGeometry",value:function(t){var e=this;if(this.data&&this.getGeometry){var r=this.indexLayout,a=this.bufferLayout;t||(r=[],a=[]);var i=t||{},o=i.startRow,n=void 0===o?0:o,u=i.endRow,l=void 0===u?1/0:u;this._forEachGeometry(function(t,r){a[r]=e.getGeometrySize(t)},n,l);var s=0,y=!0,d=!1,f=void 0;try{for(var h,v=a[Symbol.iterator]();!(y=(h=v.next()).done);y=!0){s+=h.value}}catch(C){d=!0,f=C}finally{try{y||null==v.return||v.return()}finally{if(d)throw f}}var m=this.attributes,c=this._attributeDefs,b=this.typedArrayManager,p=this.fp64;for(var x in c){var G=c[x];G.copy=Boolean(t),G.fp64Only&&!p||(m[x]=b.allocate(m[x],s,G))}this.indexLayout=r,this.bufferLayout=a,this.instanceCount=s;for(var g={vertexStart:0,indexStart:0},S=0;S<n;S++)g.vertexStart+=a[S],g.indexStart+=r[S]||0;this._forEachGeometry(function(t,i){var o=a[i];g.geometryIndex=i,g.geometrySize=o,e.updateGeometryAttributes(t,g),g.vertexStart+=o,g.indexStart+=r[i]||0},n,l);for(var w=g.indexStart,_=l;_<r.length;_++)w+=r[_];this.vertexCount=w}}}]),i}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./iterable-utils":"kai7","./typed-array-manager":"yeLJ"}],"TXTo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayerExtension=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=require("../utils/deep-equal");function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,e.default)(this,u),this.opts=t}return(0,t.default)(u,[{key:"equals",value:function(e){return this===e||this.constructor===e.constructor&&(0,r.deepEqual)(this.opts,e.opts)}},{key:"getShaders",value:function(e){return null}},{key:"getSubLayerProps",value:function(e){var t=e.constructor.defaultProps,r=void 0===t?{}:t,u={updateTriggers:{}};for(var s in r)if(s in this.props){var i=r[s],a=this.props[s];u[s]=a,i&&"accessor"===i.type&&(u.updateTriggers[s]=this.props.updateTriggers[s],"function"==typeof a&&(u[s]=this.getSubLayerAccessor(a,!0)))}return u}},{key:"initializeState",value:function(e,t){}},{key:"updateState",value:function(e,t){}},{key:"finalizeState",value:function(e){}}]),u}();exports.LayerExtension=s;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../utils/deep-equal":"01KS"}],"vvxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"LightingEffect",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"_CameraLight",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"_SunLight",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"PostProcessEffect",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"_LayersPass",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"project64",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"ThirdPersonView",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"PerspectiveView",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"Controller",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"_FirstPersonController",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"_OrbitController",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"_OrthographicController",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return I.TRANSITION_EVENTS}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"createIterable",{enumerable:!0,get:function(){return N.createIterable}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return D.fp64LowPart}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return z.AmbientLight}}),Object.defineProperty(exports,"LayerExtension",{enumerable:!0,get:function(){return Y.LayerExtension}}),exports.experimental=void 0,require("./lib/init"),require("./shaderlib");var e=require("./lib/constants"),r=W(require("./effects/lighting/lighting-effect")),t=W(require("./effects/lighting/point-light")),n=W(require("./effects/lighting/directional-light")),i=W(require("./effects/lighting/camera-light")),o=W(require("./effects/lighting/sun-light")),u=W(require("./effects/post-process-effect")),l=W(require("./passes/layers-pass")),a=W(require("./lib/deck")),f=W(require("./lib/layer-manager")),c=W(require("./lib/attribute-manager")),s=W(require("./lib/layer")),p=W(require("./lib/composite-layer")),b=W(require("./lib/deck-renderer")),d=W(require("./viewports/viewport")),g=W(require("./viewports/web-mercator-viewport")),m=W(require("./shaderlib/project/project")),y=W(require("./shaderlib/project64/project64")),O=W(require("./views/view")),P=W(require("./views/map-view")),x=W(require("./views/first-person-view")),j=W(require("./views/third-person-view")),q=W(require("./views/orbit-view")),h=W(require("./views/perspective-view")),w=W(require("./views/orthographic-view")),v=W(require("./controllers/controller")),L=W(require("./controllers/map-controller")),_=W(require("./controllers/first-person-controller")),E=W(require("./controllers/orbit-controller")),T=W(require("./controllers/orthographic-controller")),V=W(require("./lib/effect")),I=require("./controllers/transition-manager"),A=W(require("./transitions/linear-interpolator")),C=W(require("./transitions/viewport-fly-to-interpolator")),M=W(require("./utils/log")),S=require("./utils/flatten"),N=require("./utils/iterable-utils"),D=require("./utils/math-utils"),R=W(require("./utils/tesselator")),k=require("./utils/count"),F=W(require("./utils/memoize")),z=require("@luma.gl/core"),Y=require("./lib/layer-extension");function W(e){return e&&e.__esModule?e:{default:e}}var B={Tesselator:R.default,flattenVertices:S.flattenVertices,fillArray:S.fillArray,count:k.count,memoize:F.default};exports.experimental=B;
},{"./lib/init":"N6pv","./shaderlib":"vZnx","./lib/constants":"ysbg","./effects/lighting/lighting-effect":"MByF","./effects/lighting/point-light":"1yB/","./effects/lighting/directional-light":"n3wt","./effects/lighting/camera-light":"xYso","./effects/lighting/sun-light":"hMy0","./effects/post-process-effect":"9/Qg","./passes/layers-pass":"7oM9","./lib/deck":"ruUO","./lib/layer-manager":"m8xf","./lib/attribute-manager":"RHD2","./lib/layer":"xVVm","./lib/composite-layer":"dK5R","./lib/deck-renderer":"J3c9","./viewports/viewport":"HjGN","./viewports/web-mercator-viewport":"Rf6Y","./shaderlib/project/project":"9NVO","./shaderlib/project64/project64":"ifoR","./views/view":"k6Eh","./views/map-view":"wD/M","./views/first-person-view":"3EN5","./views/third-person-view":"x15U","./views/orbit-view":"gGaz","./views/perspective-view":"/IDf","./views/orthographic-view":"d3vQ","./controllers/controller":"7ugw","./controllers/map-controller":"N44t","./controllers/first-person-controller":"03Eg","./controllers/orbit-controller":"o35a","./controllers/orthographic-controller":"os+B","./lib/effect":"Z10T","./controllers/transition-manager":"awSe","./transitions/linear-interpolator":"2bGR","./transitions/viewport-fly-to-interpolator":"6T8B","./utils/log":"GVus","./utils/flatten":"6gSV","./utils/iterable-utils":"kai7","./utils/math-utils":"ki6G","./utils/tesselator":"yiMu","./utils/count":"4nzk","./utils/memoize":"9uXG","@luma.gl/core":"iuAK","./lib/layer-extension":"TXTo"}],"jPrh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDeckInstance=r,exports.addLayer=t,exports.removeLayer=a,exports.updateLayer=n,exports.drawLayer=i;var e=require("@deck.gl/core");function r(r){var t=r.map,a=r.gl,n=r.deck;if(t.__deck)return t.__deck;var i=n&&n.props._customRender,s={useDevicePixels:!0,_customRender:function(){t.triggerRepaint(),i&&i()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[770,771,1,771],blendEquation:32774},userData:{isExternal:!1,mapboxLayers:new Set}};return n?(n.setProps(s),n.props.userData.isExternal=!0):(Object.assign(s,{gl:a,width:!1,height:!1,viewState:o(t)}),n=new e.Deck(s),t.on("move",function(){return p(n,t)}),t.on("remove",function(){n.finalize(),t.__deck=null})),t.__deck=n,t.on("render",function(){return u(n,t)}),n}function t(e,r){e.props.userData.mapboxLayers.add(r),d(e)}function a(e,r){e.props.userData.mapboxLayers.delete(r),d(e)}function n(e,r){d(e)}function i(e,r,t){var a=e.props.userData.currentViewport;a||(a=s(e,r,!0),e.props.userData.currentViewport=a),e._drawLayers("mapbox-repaint",{viewports:[a],layers:c(e,function(e){return l(t.id,e)}),clearCanvas:!1})}function o(e){var r=e.getCenter();return{longitude:r.lng,latitude:r.lat,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}function s(r,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new e.WebMercatorViewport(Object.assign({x:0,y:0,width:r.width,height:r.height},o(t),a?{nearZMultiplier:r.height?1/r.height:1,farZMultiplier:1}:{nearZMultiplier:.1,farZMultiplier:10}))}function u(e,r){var t=e.props.userData,a=t.mapboxLayers;if(t.isExternal){var n=Array.from(a,function(e){return e.id}),i=c(e,function(e){for(var r=0;r<n.length;r++){if(l(n[r],e))return!1}return!0});i.length>0&&e._drawLayers("mapbox-repaint",{viewports:[s(e,r,!1)],layers:i,clearCanvas:!1})}e.props.userData.currentViewport=null}function p(e,r){e.setProps({viewState:o(r)}),e.needsRedraw({clearRedrawFlags:!0})}function c(e,r){return e.layerManager.getLayers().filter(r)}function l(e,r){for(var t=r;t;){if(t.id===e)return!0;t=t.parent}return!1}function d(e){if(!e.props.userData.isExternal){var r=[];e.props.userData.mapboxLayers.forEach(function(e){var t=new(0,e.props.type)(e.props);r.push(t)}),e.setProps({layers:r})}}
},{"@deck.gl/core":"vvxL"}],"OaWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),i=require("./deck-utils");function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){function s(t){if((0,e.default)(this,s),!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}return(0,t.default)(s,[{key:"onAdd",value:function(e,t){this.map=e,this.deck=(0,i.getDeckInstance)({map:e,gl:t,deck:this.props.deck}),(0,i.addLayer)(this.deck,this)}},{key:"onRemove",value:function(){(0,i.removeLayer)(this.deck,this)}},{key:"setProps",value:function(e){Object.assign(this.props,e,{id:this.id}),this.deck&&(0,i.updateLayer)(this.deck,this)}},{key:"render",value:function(e,t){(0,i.drawLayer)(this.deck,this.map,this)}}]),s}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./deck-utils":"jPrh"}],"cDzh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  float outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n  picking_setPickingColor(instancePickingColors);\n}\n";exports.default=i;
},{}],"8YtW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"s9mM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/esm/classCallCheck")),t=d(require("@babel/runtime/helpers/esm/createClass")),i=d(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),s=d(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=d(require("@babel/runtime/helpers/esm/get")),r=d(require("@babel/runtime/helpers/esm/inherits")),l=require("@deck.gl/core"),n=require("@luma.gl/core"),o=d(require("./scatterplot-layer-vertex.glsl")),u=d(require("./scatterplot-layer-fragment.glsl"));function d(e){return e&&e.__esModule?e:{default:e}}var c=[0,0,0,255],p={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:c},getLineColor:{type:"accessor",value:c},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},h=function(d){function c(){return(0,e.default)(this,c),(0,i.default)(this,(0,s.default)(c).apply(this,arguments))}return(0,r.default)(c,d),(0,t.default)(c,[{key:"getShaders",value:function(e){return(0,a.default)((0,s.default)(c.prototype),"getShaders",this).call(this,{vs:o.default,fs:u.default,modules:["project32","picking"]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,i=e.oldProps,r=e.changeFlags;if((0,a.default)((0,s.default)(c.prototype),"updateState",this).call(this,{props:t,oldProps:i,changeFlags:r}),r.extensionsChanged){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,i=this.context.viewport,s=this.props,a=s.radiusScale,r=s.radiusMinPixels,l=s.radiusMaxPixels,n=s.stroked,o=s.filled,u=s.lineWidthUnits,d=s.lineWidthScale,c=s.lineWidthMinPixels,p=s.lineWidthMaxPixels,h="pixels"===u?i.distanceScales.metersPerPixel[2]:1;this.state.model.setUniforms(Object.assign({},t,{stroked:n?1:0,filled:o,radiusScale:a,radiusMinPixels:r,radiusMaxPixels:l,lineWidthScale:d*h,lineWidthMinPixels:c,lineWidthMaxPixels:p})).draw()}},{key:"_getModel",value:function(e){return new n.Model(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new n.Geometry({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var i=t.startRow,s=t.endRow,a=this.use64bitPositions();if(e.constant=!a,a){var r=this.props,n=r.data,o=r.getPosition,u=e.value,d=i*e.size,c=(0,l.createIterable)(n,i,s),p=c.iterable,h=c.objectInfo,f=!0,m=!1,g=void 0;try{for(var y,v=p[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var x=y.value;h.index++;var b=o(x,h);u[d++]=(0,l.fp64LowPart)(b[0]),u[d++]=(0,l.fp64LowPart)(b[1])}}catch(P){m=!0,g=P}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}}else e.value=new Float32Array(2)}}]),c}(l.Layer);exports.default=h,h.layerName="ScatterplotLayer",h.defaultProps=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./scatterplot-layer-vertex.glsl":"cDzh","./scatterplot-layer-fragment.glsl":"8YtW"}],"d3f1":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,y,o,p,l,a=t&&t.length,h=a?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s)return c;if(a&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=y=e[1];for(var Z=x;Z<h;Z+=x)(o=e[Z])<i&&(i=o),(p=e[Z+1])<u&&(u=p),o>v&&(v=o),p>y&&(y=p);l=0!==(l=Math.max(v-i,y-u))?1/l:0}return r(s,c,x,i,u,l),c}function n(e,n,t,r,x){var i,u;if(x===A(e,n,t,r)>0)for(i=n;i<t;i+=r)u=k(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=k(i,e[i],e[i+1],u);return u&&g(u,u.next)&&(j(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!g(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(j(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,y,o,p,a){if(e){!a&&p&&l(e,y,o,p);for(var h,s,c=e;e.prev!==e.next;)if(h=e.prev,s=e.next,p?i(e,y,o,p):x(e))n.push(h.i/f),n.push(e.i/f),n.push(s.i/f),j(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(e,n,f),n,f,y,o,p,2):2===a&&v(e,n,f,y,o,p):r(t(e),n,f,y,o,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(d(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(c(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(d(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,y=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,o=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=h(v,f,n,t,r),l=h(y,o,n,t,r),a=e.prevZ,s=e.nextZ;a&&a.z>=p&&s&&s.z<=l;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&d(a.prev,a,a.next)>=0)return!1;if(a=a.prevZ,s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&d(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;a&&a.z>=p;){if(a!==e.prev&&a!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&d(a.prev,a,a.next)>=0)return!1;a=a.prevZ}for(;s&&s.z<=l;){if(s!==e.prev&&s!==e.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,s.x,s.y)&&d(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function u(e,n,t){var r=e;do{var x=r.prev,i=r.next.next;!g(x,i)&&w(x,r,r.next,i)&&b(x,i)&&b(i,x)&&(n.push(x.i/t),n.push(r.i/t),n.push(i.i/t),j(r),j(r.next),r=e=i),r=r.next}while(r!==e);return r}function v(e,n,x,i,u,v){var f=e;do{for(var y=f.next.next;y!==f.prev;){if(f.i!==y.i&&Z(f,y)){var o=m(f,y);return f=t(f,f.next),o=t(o,o.next),r(f,n,x,i,u,v),void r(o,n,x,i,u,v)}y=y.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,p=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),p.push(s(f));for(p.sort(y),u=0;u<p.length;u++)o(p[u],x),x=t(x,x.next);return x}function y(e,n){return e.x-n.x}function o(e,n){if(n=p(e,n)){var r=m(n,e);t(r,r.next)}}function p(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t.prev;var f,y=t,o=t.x,p=t.y,l=1/0;for(r=t.next;r!==y;)x>=r.x&&r.x>=o&&x!==r.x&&c(i<p?x:u,i,o,p,i<p?u:x,i,r.x,r.y)&&((f=Math.abs(i-r.y)/(x-r.x))<l||f===l&&r.x>t.x)&&b(r,e)&&(t=r,l=f),r=r.next;return t}function l(e,n,t,r){var x=e;do{null===x.z&&(x.z=h(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,a(x)}function a(e){var n,t,r,x,i,u,v,f,y=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<y&&(v++,r=r.nextZ);n++);for(f=y;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,y*=2}while(u>1);return e}function h(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function s(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function c(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function Z(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!z(e,n)&&b(e,n)&&b(n,e)&&M(e,n)}function d(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function g(e,n){return e.x===n.x&&e.y===n.y}function w(e,n,t,r){return!!(g(e,n)&&g(t,r)||g(e,r)&&g(t,n))||d(e,n,t)>0!=d(e,n,r)>0&&d(t,r,e)>0!=d(t,r,n)>0}function z(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&w(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function b(e,n){return d(e.prev,e,e.next)<0?d(e,n,e.next)>=0&&d(e,e.prev,n)>=0:d(e,n,e.prev)<0||d(e,e.next,n)<0}function M(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function m(e,n){var t=new q(e.i,e.x,e.y),r=new q(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function k(e,n,t,r){var x=new q(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function j(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function q(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(A(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var y=n[v]*t,o=v<f-1?n[v+1]*t:e.length;u-=Math.abs(A(e,y,o,t))}var p=0;for(v=0;v<r.length;v+=3){var l=r[v]*t,a=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[l]-e[h])*(e[a+1]-e[l+1])-(e[l]-e[a])*(e[h+1]-e[l+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"dIsy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVertexCount=a,exports.normalize=c,exports.getSurfaceIndices=v;var r=n(require("earcut"));function n(r){return r&&r.__esModule?r:{default:r}}function e(r){if(r=r&&r.positions||r,!Array.isArray(r)&&!ArrayBuffer.isView(r))throw new Error("invalid polygon")}function t(r){return r.length>=1&&r[0].length>=2&&Number.isFinite(r[0][0])}function i(r){var n=r[0],e=r[r.length-1];return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}function o(r,n,e,t){for(var i=0;i<n;i++)if(r[e+i]!==r[t-n+i])return!1;return!0}function u(r,n,e,t){for(var o=n,u=e.length,l=0;l<u;l++)for(var f=0;f<t;f++)r[o++]=e[l][f]||0;if(!i(e))for(var s=0;s<t;s++)r[o++]=e[0][s]||0;return o}function l(r,n,e,t){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5?arguments[5]:void 0,l=(u=u||e.length)-i;if(l<=0)return n;for(var f=n,s=0;s<l;s++)r[f++]=e[i+s];if(!o(e,t,i,u))for(var a=0;a<t;a++)r[f++]=e[i+a];return f}function f(r){return(i(r)?0:1)+r.length}function s(r,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=arguments.length>3?arguments[3]:void 0;return e>=(t=t||r.length)?0:(o(r,n,e,t)?0:1)+(t-e)/n}function a(r,n){if(e(r),r.positions){var i=r,o=i.positions,u=i.holeIndices;if(u){for(var l=0,a=0;a<=u.length;a++)l+=s(r.positions,n,u[a-1],u[a]);return l}r=o}if(Number.isFinite(r[0]))return s(r,n);if(!t(r)){var c=0,v=!0,h=!1,p=void 0;try{for(var d,g=r[Symbol.iterator]();!(v=(d=g.next()).done);v=!0){c+=f(d.value)}}catch(y){h=!0,p=y}finally{try{v||null==g.return||g.return()}finally{if(h)throw p}}return c}return f(r)}function c(r,n,i){e(r),i=i||a(r,n);var o=new Float64Array(i*n),f=[];if(r.positions){var s=r,c=s.positions,v=s.holeIndices;if(v){for(var h=0,p=0;p<=v.length;p++)h=l(o,h,c,n,v[p-1],v[p]),f.push(h);return f.pop(),{positions:o,holeIndices:f}}r=c}if(Number.isFinite(r[0]))return l(o,0,r,n),{positions:o,holeIndices:null};if(!t(r)){var d=0,g=!0,y=!1,I=void 0;try{for(var m,x=r[Symbol.iterator]();!(g=(m=x.next()).done);g=!0){d=u(o,d,m.value,n),f.push(d)}}catch(b){y=!0,I=b}finally{try{g||null==x.return||x.return()}finally{if(y)throw I}}return f.pop(),{positions:o,holeIndices:f}}return u(o,0,r,n),{positions:o,holeIndices:null}}function v(n,e){var t=null;return n.holeIndices&&(t=n.holeIndices.map(function(r){return r/e})),(0,r.default)(n.positions,t,e)}
},{"earcut":"d3f1"}],"XYVo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/esm/classCallCheck")),t=u(require("@babel/runtime/helpers/esm/createClass")),r=u(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=u(require("@babel/runtime/helpers/esm/getPrototypeOf")),s=u(require("@babel/runtime/helpers/esm/inherits")),o=a(require("./polygon")),n=require("@deck.gl/core");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var l=n.experimental.Tesselator,p=function(a){function u(t){var s=t.data,o=t.getGeometry,n=t.fp64,a=t.positionFormat,l=t.IndexType,p=void 0===l?Uint32Array:l;return(0,e.default)(this,u),(0,r.default)(this,(0,i.default)(u).call(this,{data:s,getGeometry:o,fp64:n,positionFormat:a,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:p,size:1}}}))}return(0,s.default)(u,a),(0,t.default)(u,[{key:"get",value:function(e){return"indices"===e?this.attributes.indices.subarray(0,this.vertexCount):this.attributes[e]}},{key:"getGeometrySize",value:function(e){return o.getVertexCount(e,this.positionSize)}},{key:"updateGeometryAttributes",value:function(e,t){e=o.normalize(e,this.positionSize,t.geometrySize),this._updateIndices(e,t),this._updatePositions(e,t)}},{key:"_updateIndices",value:function(e,t){var r=t.geometryIndex,i=t.vertexStart,s=t.indexStart,n=this.attributes,a=this.indexLayout,u=this.typedArrayManager,l=n.indices,p=s,d=o.getSurfaceIndices(e,this.positionSize);l=u.allocate(l,s+d.length,{copy:!0});for(var c=0;c<d.length;c++)l[p++]=d[c]+i;a[r]=d.length,n.indices=l}},{key:"_updatePositions",value:function(e,t){for(var r=t.vertexStart,i=t.geometrySize,s=this.attributes,o=s.positions,a=s.positions64xyLow,u=s.vertexValid,l=this.fp64,p=this.positionSize,d=r,c=e.positions,f=e.holeIndices,y=0;y<i;y++){var h=c[y*p],b=c[y*p+1],v=p>2?c[y*p+2]:0;o[3*d]=h,o[3*d+1]=b,o[3*d+2]=v,l&&(a[2*d]=(0,n.fp64LowPart)(h),a[2*d+1]=(0,n.fp64LowPart)(b)),u[d]=1,d++}if(f)for(var m=0;m<f.length;m++)u[r+f[m]/p-1]=0;u[r+i-1]=0}}]),u}(l);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/inherits":"RnSb","./polygon":"dIsy","@deck.gl/core":"vvxL"}],"aSKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec2 positions64xyLow;\n  vec2 nextPositions64xyLow;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64xyLow = mix(props.positions64xyLow, props.nextPositions64xyLow, vertexPositions.x);\n  isValid = vertexValid;\n#else\n  pos = props.positions;\n  pos64xyLow = props.positions64xyLow;\n  isValid = 1.0;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n    \n#ifdef IS_SIDE_VERTEX\n    normal = vec3(props.positions.y - props.nextPositions.y, props.nextPositions.x - props.positions.x, 0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n  picking_setPickingColor(props.pickingColors);\n}\n";exports.default=o;
},{}],"mAGb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=e(require("./solid-polygon-layer-vertex-main.glsl"));function e(o){return o&&o.__esModule?o:{default:o}}var n="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(o.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64xyLow = positions64xyLow;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n");exports.default=n;
},{"./solid-polygon-layer-vertex-main.glsl":"aSKL"}],"XZyr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=o(require("./solid-polygon-layer-vertex-main.glsl"));function o(n){return n&&n.__esModule?n:{default:n}}var t="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(n.default,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = instancePositions;\n  props.positions64xyLow = instancePositions64xyLow;\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n  props.nextPositions = nextPositions;\n  props.nextPositions64xyLow = nextPositions64xyLow;\n\n  calculatePosition(props);\n}\n");exports.default=t;
},{"./solid-polygon-layer-vertex-main.glsl":"aSKL"}],"mYK0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=n;
},{}],"KN28":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("@babel/runtime/helpers/esm/classCallCheck")),t=g(require("@babel/runtime/helpers/esm/createClass")),s=g(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=g(require("@babel/runtime/helpers/esm/getPrototypeOf")),o=g(require("@babel/runtime/helpers/esm/get")),a=g(require("@babel/runtime/helpers/esm/inherits")),r=require("@deck.gl/core"),l=require("@luma.gl/core"),n=g(require("./polygon-tesselator")),u=g(require("./solid-polygon-layer-vertex-top.glsl")),d=g(require("./solid-polygon-layer-vertex-side.glsl")),c=g(require("./solid-polygon-layer-fragment.glsl"));function g(e){return e&&e.__esModule?e:{default:e}}var f=[0,0,0,255],h=new l.PhongMaterial,p={filled:!0,extruded:!1,wireframe:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:f},getLineColor:{type:"accessor",value:f},material:h},v={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},y=function(r){function g(){return(0,e.default)(this,g),(0,s.default)(this,(0,i.default)(g).apply(this,arguments))}return(0,a.default)(g,r),(0,t.default)(g,[{key:"getShaders",value:function(e){return(0,o.default)((0,i.default)(g.prototype),"getShaders",this).call(this,{vs:e,fs:c.default,defines:{},modules:["project32","gouraud-lighting","picking"]})}},{key:"initializeState",value:function(){var e=this,t=this.context.gl;this.setState({numInstances:0,polygonTesselator:new n.default({IndexType:!t||(0,l.hasFeature)(t,l.FEATURES.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var s=this.getAttributeManager();s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:v,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{offset:0,divisor:0},instancePositions:{offset:0,divisor:1},nextPositions:{offset:12,divisor:1}}},positions64xyLow:{size:2,update:this.calculatePositionsLow,noAlloc:!0,shaderAttributes:{positions64xyLow:{offset:0,divisor:0},instancePositions64xyLow:{offset:0,divisor:1},nextPositions64xyLow:{offset:8,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:v,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:v,accessor:"getFillColor",defaultValue:f,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:v,accessor:"getLineColor",defaultValue:f,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(t,s){var i=s.index,o=s.target;return e.encodePickingColor(i,o)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"draw",value:function(e){var t=e.uniforms,s=this.props,i=s.extruded,o=s.filled,a=s.wireframe,r=s.elevationScale,l=this.state,n=l.topModel,u=l.sideModel,d=l.polygonTesselator,c=Object.assign({},t,{extruded:Boolean(i),elevationScale:r});u&&(u.setInstanceCount(d.instanceCount-1),u.setUniforms(c),a&&(u.setDrawMode(3),u.setUniforms({isWireframe:!0}).draw()),o&&(u.setDrawMode(6),u.setUniforms({isWireframe:!1}).draw())),n&&(n.setVertexCount(d.get("indices").length),n.setUniforms(c).draw())}},{key:"updateState",value:function(e){(0,o.default)((0,i.default)(g.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,s=e.oldProps,a=e.changeFlags,r=this.getAttributeManager();(a.extensionsChanged||t.filled!==s.filled||t.extruded!==s.extruded)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}},{key:"updateGeometry",value:function(e){var t=e.props,s=(e.oldProps,e.changeFlags);if(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getPolygon)){var i=this.state.polygonTesselator;i.updateGeometry({data:t.data,getGeometry:t.getPolygon,positionFormat:t.positionFormat,fp64:this.use64bitPositions(),dataChanged:s.dataChanged}),this.setState({numInstances:i.instanceCount,bufferLayout:i.bufferLayout}),s.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(e){var t,s,i=this.props,o=i.id,a=i.filled,r=i.extruded;if(a){var n=this.getShaders(u.default);n.defines.NON_INSTANCED_MODEL=1,t=new l.Model(e,Object.assign({},n,{id:"".concat(o,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))}return r&&((s=new l.Model(e,Object.assign({},this.getShaders(d.default),{id:"".concat(o,"-side"),geometry:new l.Geometry({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),instanceCount:0,isInstanced:1,shaderCache:this.context.shaderCache}))).userData.excludeAttributes={indices:!0}),{models:[s,t].filter(Boolean),topModel:t,sideModel:s}}},{key:"calculateIndices",value:function(e){var t=this.state.polygonTesselator;e.bufferLayout=t.indexLayout,e.value=t.get("indices")}},{key:"calculatePositions",value:function(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("positions")}},{key:"calculatePositionsLow",value:function(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"clearPickingColor",value:function(e){for(var t=this.decodePickingColor(e),s=this.state.polygonTesselator.bufferLayout,i=s[t],o=0,a=0;a<t;a++)o+=s[a];var r=this.getAttributeManager().attributes.pickingColors,l=r.value,n=o+i;l.fill(0,3*o,3*n),r.update({value:l})}}]),g}(r.Layer);exports.default=y,y.layerName="SolidPolygonLayer",y.defaultProps=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","./polygon-tesselator":"XYVo","./solid-polygon-layer-vertex-top.glsl":"mAGb","./solid-polygon-layer-vertex-side.glsl":"XZyr","./solid-polygon-layer-fragment.glsl":"mYK0"}],"WkxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MATRIX_ATTRIBUTES=void 0;var e=require("@deck.gl/core"),t=Math.PI/180,r=new Float32Array(16),a=new Float32Array(12);function s(e,r,a){var s=r[0]*t,i=r[1]*t,n=r[2]*t,o=Math.sin(n),l=Math.sin(s),c=Math.sin(i),f=Math.cos(n),d=Math.cos(s),A=Math.cos(i),y=a[0],M=a[1],u=a[2];e[0]=y*A*d,e[1]=y*c*d,e[2]=y*-l,e[3]=M*(-c*f+A*l*o),e[4]=M*(A*f+c*l*o),e[5]=M*d*o,e[6]=u*(c*o+A*l*f),e[7]=u*(-A*o+c*l*f),e[8]=u*d*f}function i(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}var n={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,stride:48,offset:0},instanceModelMatrix__LOCATION_1:{size:3,stride:48,offset:12},instanceModelMatrix__LOCATION_2:{size:3,stride:48,offset:24},instanceTranslation:{size:3,stride:48,offset:36}},update:function(t,n){var o=n.startRow,l=n.endRow,c=this.props,f=c.data,d=c.getOrientation,A=c.getScale,y=c.getTranslation,M=c.getTransformMatrix,u=Array.isArray(M),v=u&&16===M.length,T=Array.isArray(A),_=Array.isArray(d),h=Array.isArray(y),g=v||!u&&Boolean(M(f[0]));t.constant=g?v:_&&T&&h;var x=t.value;if(t.constant){var I;if(g)r.set(M),I=i(r);else s(I=a,d,A),I.set(y,9);t.value=new Float32Array(I)}else{var O=o*t.size,b=(0,e.createIterable)(f,o,l),p=b.iterable,w=b.objectInfo,z=!0,R=!1,S=void 0;try{for(var m,B=p[Symbol.iterator]();!(z=(m=B.next()).done);z=!0){var C=m.value;w.index++;var F=void 0;if(g)r.set(v?M:M(C,w)),F=i(r);else s(F=a,_?d:d(C,w),T?A:A(C,w)),F.set(h?y:y(C,w),9);x[O++]=F[0],x[O++]=F[1],x[O++]=F[2],x[O++]=F[3],x[O++]=F[4],x[O++]=F[5],x[O++]=F[6],x[O++]=F[7],x[O++]=F[8],x[O++]=F[9],x[O++]=F[10],x[O++]=F[11]}}catch(L){R=!0,S=L}finally{try{z||null==B.return||B.return()}finally{if(R)throw S}}}}};exports.MATRIX_ATTRIBUTES=n;
},{"@deck.gl/core":"vvxL"}],"BeDh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\n\n// Primitive attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\n\n// Instance attributes\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xy;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute mat3 instanceModelMatrix;\nattribute vec3 instanceTranslation;\n\n// Outputs to fragment shader\nvarying vec2 vTexCoord;\nvarying vec3 cameraPosition;\nvarying vec3 normals_commonspace;\nvarying vec4 position_commonspace;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = instanceColors;\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n  pos = project_size(pos);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xy, pos, position_commonspace);\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  picking_setPickingColor(instancePickingColors);\n}\n";exports.default=n;
},{}],"QI60":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#define SHADER_NAME simple-mesh-layer-fs\n\n// Note(Tarek): headless-gl supports derivatives, but doesn't report it via getExtension. Awesome!\n#ifdef DERIVATIVES\n#define FLAT_SHADE_NORMAL normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)))\n#else\n#define FLAT_SHADE_NORMAL vec3(0.0, 0.0, 1.0)\n#endif\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\n\nvarying vec2 vTexCoord;\nvarying vec3 cameraPosition;\nvarying vec3 normals_commonspace;\nvarying vec4 position_commonspace;\nvarying vec4 vColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n    normal = FLAT_SHADE_NORMAL;\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture2D(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  gl_FragColor = vec4(lightColor, color.a);\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n";exports.default=o;
},{}],"NMSJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nin vec3 positions;\nin vec3 normals;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec2 instancePositions64xy;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = instanceColors;\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n  pos = project_size(pos);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xy, pos, position_commonspace);\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  picking_setPickingColor(instancePickingColors);\n}\n";exports.default=n;
},{}],"5/yo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n";exports.default=o;
},{}],"twBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/esm/classCallCheck")),t=p(require("@babel/runtime/helpers/esm/createClass")),s=p(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),r=p(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=p(require("@babel/runtime/helpers/esm/get")),i=p(require("@babel/runtime/helpers/esm/inherits")),l=require("@deck.gl/core"),o=require("@luma.gl/core"),n=require("../utils/matrix"),u=p(require("./simple-mesh-layer-vertex.glsl1")),h=p(require("./simple-mesh-layer-fragment.glsl1")),c=p(require("./simple-mesh-layer-vertex.glsl")),d=p(require("./simple-mesh-layer-fragment.glsl"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new Error("deck.gl: ".concat(t))}function f(e,t,s){return t instanceof o.Texture2D?t:new o.Texture2D(e,Object.assign({data:t},s))}function y(e){m(e.positions||e.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function g(e){if(e.attributes)return y(e.attributes),e instanceof o.Geometry?e:new o.Geometry(e);if(e.positions||e.POSITION)return y(e),new o.Geometry({attributes:e});throw Error("Invalid mesh")}var v=[0,0,0,255],x=new o.PhongMaterial,b={mesh:{value:null,type:"object",async:!0},texture:null,sizeScale:{type:"number",value:1,min:0},parameters:{depthTest:!0,depthFunc:515},wireframe:!1,material:x,getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:v},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},w=function(p){function m(){return(0,e.default)(this,m),(0,s.default)(this,(0,r.default)(m).apply(this,arguments))}return(0,i.default)(m,p),(0,t.default)(m,[{key:"getShaders",value:function(){var e=(0,o.isWebGL2)(this.context.gl),t=e?c.default:u.default,s=e?d.default:h.default;return(0,a.default)((0,r.default)(m.prototype),"getShaders",this).call(this,{vs:t,fs:s,modules:["project32","phong-lighting","picking"]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,size:3,accessor:"getPosition"},instancePositions64xy:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:n.MATRIX_ATTRIBUTES}),this.setState({emptyTexture:new o.Texture2D(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(e){var t=e.props,s=e.oldProps,i=e.changeFlags;if((0,a.default)((0,r.default)(m.prototype),"updateState",this).call(this,{props:t,oldProps:s,changeFlags:i}),t.mesh!==s.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),t.mesh){this.setState({model:this.getModel(t.mesh)});var l=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(l.NORMAL||l.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==s.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){(0,a.default)((0,r.default)(m.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete(),this.state.texture&&this.state.texture.delete()}},{key:"draw",value:function(e){var t=e.uniforms;if(this.state.model){var s=this.props.sizeScale;this.state.model.draw({uniforms:Object.assign({},t,{sizeScale:s,flatShade:!this.state.hasNormals})})}}},{key:"getModel",value:function(e){var t=new o.Model(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:g(e),isInstanced:!0,shaderCache:this.context.shaderCache})),s=this.state,r=s.texture,a=s.emptyTexture;return t.setUniforms({sampler:r||a,hasTexture:Boolean(r)}),t}},{key:"setTexture",value:function(e){var t=this.context.gl,s=this.state,r=s.emptyTexture,a=s.model;this.state.texture&&this.state.texture.delete();var i=e?f(t,e):null;this.setState({texture:i}),a&&a.setUniforms({sampler:i||r,hasTexture:Boolean(i)})}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var s=t.startRow,r=t.endRow,a=this.use64bitPositions();if(e.constant=!a,a){var i=this.props,o=i.data,n=i.getPosition,u=e.value,h=s*e.size,c=(0,l.createIterable)(o,s,r),d=c.iterable,p=c.objectInfo,m=!0,f=!1,y=void 0;try{for(var g,v=d[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var x=g.value;p.index++;var b=n(x,p);u[h++]=(0,l.fp64LowPart)(b[0]),u[h++]=(0,l.fp64LowPart)(b[1])}}catch(w){f=!0,y=w}finally{try{m||null==v.return||v.return()}finally{if(f)throw y}}}else e.value=new Float32Array(2)}}]),m}(l.Layer);exports.default=w,w.layerName="SimpleMeshLayer",w.defaultProps=b;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","@babel/runtime/helpers/esm/possibleConstructorReturn":"LwjW","@babel/runtime/helpers/esm/getPrototypeOf":"cYjN","@babel/runtime/helpers/esm/get":"9KGq","@babel/runtime/helpers/esm/inherits":"RnSb","@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","../utils/matrix":"WkxE","./simple-mesh-layer-vertex.glsl1":"BeDh","./simple-mesh-layer-fragment.glsl1":"QI60","./simple-mesh-layer-vertex.glsl":"NMSJ","./simple-mesh-layer-fragment.glsl":"5/yo"}],"S7t8":[function(require,module,exports) {
!function(){"use strict";function e(e){const t=4294967296;let r,n,i=new Uint8Array(128),o=0;return f(e),i.subarray(0,o);function f(e){switch(typeof e){case"undefined":a(e);break;case"boolean":!function(e){u(e?195:194)}(e);break;case"number":!function(e){if(isFinite(e)&&Math.floor(e)===e)if(e>=0&&e<=127)u(e);else if(e<0&&e>=-32)u(e);else if(e>0&&e<=255)c([204,e]);else if(e>=-128&&e<=127)c([208,e]);else if(e>0&&e<=65535)c([205,e>>>8,e]);else if(e>=-32768&&e<=32767)c([209,e>>>8,e]);else if(e>0&&e<=4294967295)c([206,e>>>24,e>>>16,e>>>8,e]);else if(e>=-2147483648&&e<=2147483647)c([210,e>>>24,e>>>16,e>>>8,e]);else if(e>0&&e<=0x10000000000000000){let r=e/t,n=e%t;c([211,r>>>24,r>>>16,r>>>8,r,n>>>24,n>>>16,n>>>8,n])}else e>=-0x8000000000000000&&e<=0x8000000000000000?(u(211),s(e)):c(e<0?[211,128,0,0,0,0,0,0,0]:[207,255,255,255,255,255,255,255,255]);else n||(r=new ArrayBuffer(8),n=new DataView(r)),n.setFloat64(0,e),u(203),c(new Uint8Array(r))}(e);break;case"string":!function(e){let t=function(e){let t=!0,r=e.length;for(let o=0;o<r;o++)if(e.charCodeAt(o)>127){t=!1;break}let n=0,i=new Uint8Array(e.length*(t?1:4));for(let o=0;o!==r;o++){let t=e.charCodeAt(o);if(t<128)i[n++]=t;else{if(t<2048)i[n++]=t>>6|192;else{if(t>55295&&t<56320){if(++o>=r)throw new Error("UTF-8 encode: incomplete surrogate pair");let f=e.charCodeAt(o);if(f<56320||f>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+f.toString(16)+" at index "+o+" out of range");t=65536+((1023&t)<<10)+(1023&f),i[n++]=t>>18|240,i[n++]=t>>12&63|128}else i[n++]=t>>12|224;i[n++]=t>>6&63|128}i[n++]=63&t|128}}return t?i:i.subarray(0,n)}(e),r=t.length;r<=31?u(160+r):c(r<=255?[217,r]:r<=65535?[218,r>>>8,r]:[219,r>>>24,r>>>16,r>>>8,r]);c(t)}(e);break;case"object":null===e?a(e):e instanceof Date?function(e){let r=e.getTime()/1e3;if(0===e.getMilliseconds()&&r>=0&&r<4294967296)c([214,255,r>>>24,r>>>16,r>>>8,r]);else if(r>=0&&r<17179869184){let n=1e6*e.getMilliseconds();c([215,255,n>>>22,n>>>14,n>>>6,n<<2>>>0|r/t,r>>>24,r>>>16,r>>>8,r])}else{let t=1e6*e.getMilliseconds();c([199,12,255,t>>>24,t>>>16,t>>>8,t]),s(r)}}(e):Array.isArray(e)?l(e):e instanceof Uint8Array||e instanceof Uint8ClampedArray?function(e){let t=e.length;c(t<=15?[196,t]:t<=65535?[197,t>>>8,t]:[198,t>>>24,t>>>16,t>>>8,t]);c(e)}(e):e instanceof Int8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?l(e):function(e){let t=0;for(let r in e)t++;t<=15?u(128+t):c(t<=65535?[222,t>>>8,t]:[223,t>>>24,t>>>16,t>>>8,t]);for(let r in e)f(r),f(e[r])}(e)}}function a(e){u(192)}function l(e){let t=e.length;t<=15?u(144+t):c(t<=65535?[220,t>>>8,t]:[221,t>>>24,t>>>16,t>>>8,t]);for(let r=0;r<t;r++)f(e[r])}function u(e){if(i.length<o+1){let e=2*i.length;for(;e<o+1;)e*=2;let t=new Uint8Array(e);t.set(i),i=t}i[o]=e,o++}function c(e){if(i.length<o+e.length){let t=2*i.length;for(;t<o+e.length;)t*=2;let r=new Uint8Array(t);r.set(i),i=r}i.set(e,o),o+=e.length}function s(e){let r,n;e>=0?(r=e/t,n=e%t):(e++,r=~(r=Math.abs(e)/t),n=~(n=Math.abs(e)%t)),c([r>>>24,r>>>16,r>>>8,r,n>>>24,n>>>16,n>>>8,n])}}function t(e){const t=4294967296;let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),"object"!=typeof e||void 0===e.length)throw new Error("Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize.");if(!e.length)throw new Error("Invalid argument: The byte array to deserialize is empty.");e instanceof Uint8Array||(e=new Uint8Array(e));let n=i();return e.length,n;function i(){const t=e[r++];if(t>=0&&t<=127)return t;if(t>=128&&t<=143)return u(t-128);if(t>=144&&t<=159)return c(t-144);if(t>=160&&t<=191)return s(t-160);if(192===t)return null;if(193===t)throw new Error("Invalid byte code 0xc1 found.");if(194===t)return!1;if(195===t)return!0;if(196===t)return l(-1,1);if(197===t)return l(-1,2);if(198===t)return l(-1,4);if(199===t)return d(-1,1);if(200===t)return d(-1,2);if(201===t)return d(-1,4);if(202===t)return a(4);if(203===t)return a(8);if(204===t)return f(1);if(205===t)return f(2);if(206===t)return f(4);if(207===t)return f(8);if(208===t)return o(1);if(209===t)return o(2);if(210===t)return o(4);if(211===t)return o(8);if(212===t)return d(1);if(213===t)return d(2);if(214===t)return d(4);if(215===t)return d(8);if(216===t)return d(16);if(217===t)return s(-1,1);if(218===t)return s(-1,2);if(219===t)return s(-1,4);if(220===t)return c(-1,2);if(221===t)return c(-1,4);if(222===t)return u(-1,2);if(223===t)return u(-1,4);if(t>=224&&t<=255)return t-256;throw console.debug("msgpack array:",e),new Error("Invalid byte value '"+t+"' at index "+(r-1)+" in the MessagePack binary data (length "+e.length+"): Expecting a range of 0 to 255. This is not a byte array.")}function o(t){let n=0,i=!0;for(;t-- >0;)if(i){let t=e[r++];n+=127&t,128&t&&(n-=128),i=!1}else n*=256,n+=e[r++];return n}function f(t){let n=0;for(;t-- >0;)n*=256,n+=e[r++];return n}function a(t){let n=new DataView(e.buffer,r,t);return r+=t,4===t?n.getFloat32(0,!1):8===t?n.getFloat64(0,!1):void 0}function l(t,n){t<0&&(t=f(n));let i=e.subarray(r,r+t);return r+=t,i}function u(e,t){e<0&&(e=f(t));let r={};for(;e-- >0;){r[i()]=i()}return r}function c(e,t){e<0&&(e=f(t));let r=[];for(;e-- >0;)r.push(i());return r}function s(t,n){t<0&&(t=f(n));let i=r;return r+=t,function(e,t,r){let n=t,i="";r+=t;for(;n<r;){let t=e[n++];if(t>127)if(t>191&&t<224){if(n>=r)throw new Error("UTF-8 decode: incomplete 2-byte sequence");t=(31&t)<<6|63&e[n++]}else if(t>223&&t<240){if(n+1>=r)throw new Error("UTF-8 decode: incomplete 3-byte sequence");t=(15&t)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(t>239&&t<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+t.toString(16)+" at index "+(n-1));if(n+2>=r)throw new Error("UTF-8 decode: incomplete 4-byte sequence");t=(7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(t<=65535)i+=String.fromCharCode(t);else{if(!(t<=1114111))throw new Error("UTF-8 decode: code point 0x"+t.toString(16)+" exceeds UTF-16 reach");t-=65536,i+=String.fromCharCode(t>>10|55296),i+=String.fromCharCode(1023&t|56320)}}return i}(e,i,t)}function d(e,n){e<0&&(e=f(n));let i=f(1),a=l(e);switch(i){case 255:return function(e){if(4===e.length){let t=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];return new Date(1e3*t)}if(8===e.length){let r=(e[0]<<22>>>0)+(e[1]<<14>>>0)+(e[2]<<6>>>0)+(e[3]>>>2),n=(3&e[3])*t+(e[4]<<24>>>0)+(e[5]<<16>>>0)+(e[6]<<8>>>0)+e[7];return new Date(1e3*n+r/1e6)}if(12===e.length){let t=(e[0]<<24>>>0)+(e[1]<<16>>>0)+(e[2]<<8>>>0)+e[3];r-=8;let n=o(8);return new Date(1e3*n+t/1e6)}throw new Error("Invalid data length for a date value.")}(a)}return{type:i,data:a}}}let r={serialize:e,deserialize:t,encode:e,decode:t};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:window[window.msgpackJsName||"msgpack"]=r}();
},{}],"yI9m":[function(require,module,exports) {
"use strict";var e={};function r(e){return Math.floor(Math.abs(e)+.5)*(e>=0?1:-1)}function t(e,t,o){var n=(e=r(e*o))-(t=r(t*o));n<<=1,e-t<0&&(n=~n);for(var u="";n>=32;)u+=String.fromCharCode(63+(32|31&n)),n>>=5;return u+=String.fromCharCode(n+63)}function o(e){for(var r=[],t=0;t<e.length;t++)r.push(e[t].slice().reverse());return r}e.decode=function(e,r){for(var t,o=0,n=0,u=0,i=[],a=0,c=0,f=null,d=Math.pow(10,Number.isInteger(r)?r:5);o<e.length;){f=null,a=0,c=0;do{c|=(31&(f=e.charCodeAt(o++)-63))<<a,a+=5}while(f>=32);t=1&c?~(c>>1):c>>1,a=c=0;do{c|=(31&(f=e.charCodeAt(o++)-63))<<a,a+=5}while(f>=32);n+=t,u+=1&c?~(c>>1):c>>1,i.push([n/d,u/d])}return i},e.encode=function(e,r){if(!e.length)return"";for(var o=Math.pow(10,Number.isInteger(r)?r:5),n=t(e[0][0],0,o)+t(e[0][1],0,o),u=1;u<e.length;u++){var i=e[u],a=e[u-1];n+=t(i[0],a[0],o),n+=t(i[1],a[1],o)}return n},e.fromGeoJSON=function(r,t){if(r&&"Feature"===r.type&&(r=r.geometry),!r||"LineString"!==r.type)throw new Error("Input must be a GeoJSON LineString");return e.encode(o(r.coordinates),t)},e.toGeoJSON=function(r,t){return{type:"LineString",coordinates:o(e.decode(r,t))}},"object"==typeof module&&module.exports&&(module.exports=e);
},{}],"wf9g":[function(require,module,exports) {
"use strict";function t(n,e,f,r,a,c){if(a-r<=f)return;const s=r+a>>1;o(n,e,s,r,a,c%2),t(n,e,f,r,s-1,c+1),t(n,e,f,s+1,a,c+1)}function o(t,e,f,r,a,c){for(;a>r;){if(a-r>600){const n=a-r+1,s=f-r+1,i=Math.log(n),u=.5*Math.exp(2*i/3),M=.5*Math.sqrt(i*u*(n-u)/n)*(s-n/2<0?-1:1);o(t,e,f,Math.max(r,Math.floor(f-s*u/n+M)),Math.min(a,Math.floor(f+(n-s)*u/n+M)),c)}const s=e[2*f+c];let i=r,u=a;for(n(t,e,r,f),e[2*a+c]>s&&n(t,e,r,a);i<u;){for(n(t,e,i,u),i++,u--;e[2*i+c]<s;)i++;for(;e[2*u+c]>s;)u--}e[2*r+c]===s?n(t,e,r,u):n(t,e,++u,a),u<=f&&(r=u+1),f<=u&&(a=u-1)}}function n(t,o,n,f){e(t,n,f),e(o,2*n,2*f),e(o,2*n+1,2*f+1)}function e(t,o,n){const e=t[o];t[o]=t[n],t[n]=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"Lt1f":[function(require,module,exports) {
"use strict";function t(t,e,o,p,s,u,n){const h=[0,t.length-1,0],r=[];let c,l;for(;h.length;){const f=h.pop(),i=h.pop(),a=h.pop();if(i-a<=n){for(let n=a;n<=i;n++)c=e[2*n],l=e[2*n+1],c>=o&&c<=s&&l>=p&&l<=u&&r.push(t[n]);continue}const d=Math.floor((a+i)/2);c=e[2*d],l=e[2*d+1],c>=o&&c<=s&&l>=p&&l<=u&&r.push(t[d]);const g=(f+1)%2;(0===f?o<=c:p<=l)&&(h.push(a),h.push(d-1),h.push(g)),(0===f?s>=c:u>=l)&&(h.push(d+1),h.push(i),h.push(g))}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"nULD":[function(require,module,exports) {
"use strict";function t(t,s,e,p,u,n){const r=[0,t.length-1,0],h=[],c=u*u;for(;r.length;){const f=r.pop(),l=r.pop(),i=r.pop();if(l-i<=n){for(let u=i;u<=l;u++)o(s[2*u],s[2*u+1],e,p)<=c&&h.push(t[u]);continue}const a=Math.floor((i+l)/2),d=s[2*a],g=s[2*a+1];o(d,g,e,p)<=c&&h.push(t[a]);const x=(f+1)%2;(0===f?e-u<=d:p-u<=g)&&(r.push(i),r.push(a-1),r.push(x)),(0===f?e+u>=d:p+u>=g)&&(r.push(a+1),r.push(l),r.push(x))}return h}function o(t,o,s,e){const p=t-s,u=o-e;return p*p+u*u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"oliW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./sort")),t=i(require("./range")),r=i(require("./within"));function i(e){return e&&e.__esModule?e:{default:e}}const s=e=>e[0],n=e=>e[1];class o{constructor(t,r=s,i=n,o=64,d=Float64Array){this.nodeSize=o,this.points=t;const u=t.length<65536?Uint16Array:Uint32Array,h=this.ids=new u(t.length),l=this.coords=new d(2*t.length);for(let e=0;e<t.length;e++)h[e]=e,l[2*e]=r(t[e]),l[2*e+1]=i(t[e]);(0,e.default)(h,l,o,0,h.length-1,0)}range(e,r,i,s){return(0,t.default)(this.ids,this.coords,e,r,i,s,this.nodeSize)}within(e,t,i){return(0,r.default)(this.ids,this.coords,e,t,i,this.nodeSize)}}exports.default=o;
},{"./sort":"wf9g","./range":"Lt1f","./within":"nULD"}],"s4g9":[function(require,module,exports) {
"use strict";function t(i,n){if(!(this instanceof t))return new t(i,n);if(this.data=i||[],this.length=this.data.length,this.compare=n||h,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)}function h(t,h){return t<h?-1:t>h?1:0}module.exports=t,module.exports.default=t,t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var h=this.data,i=this.compare,n=h[t];t>0;){var s=t-1>>1,a=h[s];if(i(n,a)>=0)break;h[t]=a,t=s}h[t]=n},_down:function(t){for(var h=this.data,i=this.compare,n=this.length>>1,s=h[t];t<n;){var a=1+(t<<1),e=a+1,r=h[a];if(e<this.length&&i(h[e],r)<0&&(a=e,r=h[e]),i(r,s)>=0)break;h[t]=r,t=a}h[t]=s}};
},{}],"1npN":[function(require,module,exports) {
"use strict";var t=require("tinyqueue");exports.around=r,exports.distance=h;var a=6371,i=40007,n=Math.PI/180;function r(a,i,r,m,h,u){var x=[];void 0===m&&(m=1/0),void 0===h&&(h=1/0);for(var L=Math.cos(r*n),d=Math.sin(r*n),c=t(null,e),g={left:0,right:a.ids.length-1,axis:0,dist:0,minLng:-180,minLat:-90,maxLng:180,maxLat:90};g;){var f=g.right,v=g.left;if(f-v<=a.nodeSize)for(var M=v;M<=f;M++){var p=a.points[a.ids[M]];u&&!u(p)||c.push({item:p,dist:o(i,r,a.coords[2*M],a.coords[2*M+1],L,d)})}else{var l=v+f>>1,q=a.coords[2*l],k=a.coords[2*l+1];p=a.points[a.ids[l]],u&&!u(p)||c.push({item:p,dist:o(i,r,q,k,L,d)});var y=(g.axis+1)%2,z={left:v,right:l-1,axis:y,minLng:g.minLng,minLat:g.minLat,maxLng:0===g.axis?q:g.maxLng,maxLat:1===g.axis?k:g.maxLat,dist:0},I={left:l+1,right:f,axis:y,minLng:0===g.axis?q:g.minLng,minLat:1===g.axis?k:g.minLat,maxLng:g.maxLng,maxLat:g.maxLat,dist:0};z.dist=s(i,r,z,L,d),I.dist=s(i,r,I,L,d),c.push(z),c.push(I)}for(;c.length&&c.peek().item;){var P=c.pop();if(P.dist>h)return x;if(x.push(P.item),x.length===m)return x}g=c.pop()}return x}function s(t,r,s,e,o){var h=s.minLng,u=s.maxLng,x=s.minLat,L=s.maxLat;if(t>=h&&t<=u)return r<=x?i*(x-r)/360:r>=L?i*(r-L)/360:0;var d=(h-t+360)%360<=(t-u+360)%360?h:u,c=Math.cos((d-t)*n),g=Math.atan(o/(e*c))/n,f=Math.max(m(x,e,o,c),m(L,e,o,c));return g>x&&g<L&&(f=Math.max(f,m(g,e,o,c))),a*Math.acos(f)}function e(t,a){return t.dist-a.dist}function o(t,i,r,s,e,o){var h=Math.cos((r-t)*n);return a*Math.acos(m(s,e,o,h))}function m(t,a,i,r){var s=i*Math.sin(t*n)+a*Math.cos(t*n)*r;return Math.min(s,1)}function h(t,a,i,r){return o(t,a,i,r,Math.cos(a*n),Math.sin(a*n))}
},{"tinyqueue":"s4g9"}],"Mprz":[function(require,module,exports) {
"use strict";function e(e,r,t){void 0===t&&(t={});var o={type:"Feature"};return(0===t.id||t.id)&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.properties=r||{},o.geometry=e,o}function r(e,r,o){switch(void 0===o&&(o={}),e){case"Point":return t(r).geometry;case"LineString":return s(r).geometry;case"Polygon":return n(r).geometry;case"MultiPoint":return m(r).geometry;case"MultiLineString":return d(r).geometry;case"MultiPolygon":return c(r).geometry;default:throw new Error(e+" is invalid")}}function t(r,t,o){return void 0===o&&(o={}),e({type:"Point",coordinates:r},t,o)}function o(e,r,o){return void 0===o&&(o={}),u(e.map(function(e){return t(e,r)}),o)}function n(r,t,o){void 0===o&&(o={});for(var n=0,i=r;n<i.length;n++){var s=i[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:r},t,o)}function i(e,r,t){return void 0===t&&(t={}),u(e.map(function(e){return n(e,r)}),t)}function s(r,t,o){if(void 0===o&&(o={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:r},t,o)}function a(e,r,t){return void 0===t&&(t={}),u(e.map(function(e){return s(e,r)}),t)}function u(e,r){void 0===r&&(r={});var t={type:"FeatureCollection"};return r.id&&(t.id=r.id),r.bbox&&(t.bbox=r.bbox),t.features=e,t}function d(r,t,o){return void 0===o&&(o={}),e({type:"MultiLineString",coordinates:r},t,o)}function m(r,t,o){return void 0===o&&(o={}),e({type:"MultiPoint",coordinates:r},t,o)}function c(r,t,o){return void 0===o&&(o={}),e({type:"MultiPolygon",coordinates:r},t,o)}function l(r,t,o){return void 0===o&&(o={}),e({type:"GeometryCollection",geometries:r},t,o)}function h(e,r){if(void 0===r&&(r=0),r&&!(r>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,r||0);return Math.round(e*t)/t}function p(e,r){void 0===r&&(r="kilometers");var t=exports.factors[r];if(!t)throw new Error(r+" units is invalid");return e*t}function f(e,r){void 0===r&&(r="kilometers");var t=exports.factors[r];if(!t)throw new Error(r+" units is invalid");return e/t}function x(e,r){return w(f(e,r))}function g(e){var r=e%360;return r<0&&(r+=360),r}function w(e){return 180*(e%(2*Math.PI))/Math.PI}function b(e){return e%360*Math.PI/180}function v(e,r,t){if(void 0===r&&(r="kilometers"),void 0===t&&(t="kilometers"),!(e>=0))throw new Error("length must be a positive number");return p(f(e,r),t)}function y(e,r,t){if(void 0===r&&(r="meters"),void 0===t&&(t="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=exports.areaFactors[r];if(!o)throw new Error("invalid original units");var n=exports.areaFactors[t];if(!n)throw new Error("invalid final units");return e/o*n}function E(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}function R(e){return!!e&&e.constructor===Object}function P(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!E(e))throw new Error("bbox must only contain numbers")})}function T(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function M(){throw new Error("method has been renamed to `radiansToDegrees`")}function k(){throw new Error("method has been renamed to `degreesToRadians`")}function A(){throw new Error("method has been renamed to `lengthToDegrees`")}function L(){throw new Error("method has been renamed to `lengthToRadians`")}function D(){throw new Error("method has been renamed to `radiansToLength`")}function F(){throw new Error("method has been renamed to `bearingToAzimuth`")}function S(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.earthRadius=6371008.8,exports.factors={centimeters:100*exports.earthRadius,centimetres:100*exports.earthRadius,degrees:exports.earthRadius/111325,feet:3.28084*exports.earthRadius,inches:39.37*exports.earthRadius,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:1e3*exports.earthRadius,millimetres:1e3*exports.earthRadius,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius/1.0936},exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1/1.0936},exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},exports.feature=e,exports.geometry=r,exports.point=t,exports.points=o,exports.polygon=n,exports.polygons=i,exports.lineString=s,exports.lineStrings=a,exports.featureCollection=u,exports.multiLineString=d,exports.multiPoint=m,exports.multiPolygon=c,exports.geometryCollection=l,exports.round=h,exports.radiansToLength=p,exports.lengthToRadians=f,exports.lengthToDegrees=x,exports.bearingToAzimuth=g,exports.radiansToDegrees=w,exports.degreesToRadians=b,exports.convertLength=v,exports.convertArea=y,exports.isNumber=E,exports.isObject=R,exports.validateBBox=P,exports.validateId=T,exports.radians2degrees=M,exports.degrees2radians=k,exports.distanceToDegrees=A,exports.distanceToRadians=L,exports.radiansToDistance=D,exports.bearingToAngle=F,exports.convertDistance=S;
},{}],"kJNe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@turf/helpers");function r(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function t(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(r){if(r.length>1&&e.isNumber(r[0])&&e.isNumber(r[1]))return!0;if(Array.isArray(r[0])&&r[0].length)return o(r[0]);throw new Error("coordinates must only contain numbers")}function n(e,r,t){if(!r||!t)throw new Error("type and name required");if(!e||e.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.type)}function i(e,r,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.geometry.type)}function u(e,r,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0,n=e.features;o<n.length;o++){var i=n[o];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+i.geometry.type)}}function a(e){return"Feature"===e.type?e.geometry:e}function y(e,r){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}exports.getCoord=r,exports.getCoords=t,exports.containsNumber=o,exports.geojsonType=n,exports.featureOf=i,exports.collectionOf=u,exports.getGeom=a,exports.getType=y;
},{"@turf/helpers":"Mprz"}],"+plg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@turf/helpers"),a=require("@turf/invariant");function s(s,t,r,i){void 0===i&&(i={});var n=a.getCoord(s),o=e.degreesToRadians(n[0]),h=e.degreesToRadians(n[1]),d=e.degreesToRadians(r),M=e.lengthToRadians(t,i.units),u=Math.asin(Math.sin(h)*Math.cos(M)+Math.cos(h)*Math.sin(M)*Math.cos(d)),c=o+Math.atan2(Math.sin(d)*Math.sin(M)*Math.cos(h),Math.cos(M)-Math.sin(h)*Math.sin(u)),g=e.radiansToDegrees(c),p=e.radiansToDegrees(u);return e.point([g,p],i.properties)}exports.default=s;
},{"@turf/helpers":"Mprz","@turf/invariant":"kJNe"}],"okRu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@turf/destination"),r=require("@turf/helpers");function t(t,o,p){void 0===p&&(p={});for(var s=p.steps||64,i=p.properties?p.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},u=[],a=0;a<s;a++)u.push(e.default(t,o,-360*a/s,p).geometry.coordinates);return u.push(u[0]),r.polygon([u],i)}exports.default=t;
},{"@turf/destination":"+plg","@turf/helpers":"Mprz"}],"6EuF":[function(require,module,exports) {
function t(t,n,r){var i=!1,u=!1;return function(){u=r&&!i;var e=this,o=arguments;if(i||(i=!0,setTimeout(function(){if(i=!1,!r)return t.apply(e,o)},n)),u)return u=!1,t.apply(this,arguments)}}module.exports=t;
},{}],"xNT/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MapboxLayer",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return r.AmbientLight}}),Object.defineProperty(exports,"SunLight",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LightingEffect",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"ScatterplotLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"SolidPolygonLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"SimpleMeshLayer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"msgpack",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"polyline",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"KDBush",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"geokdbush",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"circle",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"throttle",{enumerable:!0,get:function(){return p.default}});var e=g(require("@deck.gl/mapbox/dist/esm/mapbox-layer")),r=require("@luma.gl/core/dist/esm/lighting/light-source"),t=g(require("@deck.gl/core/dist/esm/effects/lighting/sun-light")),n=g(require("@deck.gl/core/dist/esm/effects/lighting/lighting-effect")),u=g(require("@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer")),i=g(require("@deck.gl/layers/dist/esm/solid-polygon-layer/solid-polygon-layer")),o=g(require("@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer")),l=g(require("@luma.gl/core/dist/esm/geometries/sphere-geometry")),s=g(require("@ygoe/msgpack")),a=g(require("@mapbox/polyline")),c=g(require("kdbush")),f=g(require("geokdbush")),d=g(require("@turf/circle")),p=g(require("just-throttle"));function g(e){return e&&e.__esModule?e:{default:e}}
},{"@deck.gl/mapbox/dist/esm/mapbox-layer":"OaWZ","@luma.gl/core/dist/esm/lighting/light-source":"Ubhm","@deck.gl/core/dist/esm/effects/lighting/sun-light":"hMy0","@deck.gl/core/dist/esm/effects/lighting/lighting-effect":"MByF","@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer":"s9mM","@deck.gl/layers/dist/esm/solid-polygon-layer/solid-polygon-layer":"KN28","@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer":"twBb","@luma.gl/core/dist/esm/geometries/sphere-geometry":"JAr1","@ygoe/msgpack":"S7t8","@mapbox/polyline":"yI9m","kdbush":"oliW","geokdbush":"1npN","@turf/circle":"okRu","just-throttle":"6EuF"}]},{},[], null)
//# sourceMappingURL=/hq.bundle.a809ad45.js.map