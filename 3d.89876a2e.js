parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"E2ik":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"loader assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=e;
},{}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"TqKA":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var o=arguments[3],e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeVersion=exports.isWorker=exports.isBrowser=exports.document=exports.global=exports.window=exports.self=void 0;const s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document},t=s.self||s.window||s.global||{};exports.self=t;const r=s.window||s.self||s.global||{};exports.window=r;const n=s.global||s.self||s.window||{};exports.global=n;const i=s.document||{};exports.document=i;const d="object"!=typeof e||"[object process]"!==String(e)||!0;exports.isBrowser=d;const p="function"==typeof importScripts;exports.isWorker=p;const l=void 0!==e&&e.version&&/v([0-9]*)/.exec(e.version),c=l&&parseFloat(l[1])||0;exports.nodeVersion=c;
},{"process":"g5IB"}],"CHrA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0;const e="beta",t="3.0.12";exports.VERSION=t;
},{}],"g1DB":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=e;
},{}],"YRRp":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var o=arguments[3],e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeVersion=exports.isMobile=exports.isWorker=exports.isBrowser=exports.document=exports.global=exports.window=exports.self=void 0;const s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document},t=s.self||s.window||s.global||{};exports.self=t;const n=s.window||s.self||s.global||{};exports.window=n;const r=s.global||s.self||s.window||{};exports.global=r;const i=s.document||{};exports.document=i;const d="object"!=typeof e||"[object process]"!==String(e)||!0;exports.isBrowser=d;const p="function"==typeof importScripts;exports.isWorker=p;const l="undefined"!=typeof window&&void 0!==window.orientation;exports.isMobile=l;const c=void 0!==e&&e.version&&/v([0-9]*)/.exec(e.version),w=c&&parseFloat(c[1])||0;exports.nodeVersion=w;
},{"process":"g5IB"}],"iDM3":[function(require,module,exports) {
"use strict";function e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"UKPw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/defineProperty")),s=require("../env-utils/assert");function t(e){return e&&e.__esModule?e:{default:e}}class i{constructor(s,t){(0,e.default)(this,"name",void 0),(0,e.default)(this,"workerThread",void 0),(0,e.default)(this,"isRunning",void 0),(0,e.default)(this,"result",void 0),(0,e.default)(this,"_resolve",void 0),(0,e.default)(this,"_reject",void 0),this.name=s,this.workerThread=t,this.isRunning=!0,this._resolve=(()=>{}),this._reject=(()=>{}),this.result=new Promise((e,s)=>{this._resolve=e,this._reject=s})}postMessage(e,s){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:s})}done(e){(0,s.assert)(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){(0,s.assert)(this.isRunning),this.isRunning=!1,this._reject(e)}}exports.default=i;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../env-utils/assert":"g1DB"}],"sL87":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoadableWorkerURL=t;var r=require("../env-utils/assert");const e=new Map;function t(t){(0,r.assert)(t.source&&!t.url||!t.source&&t.url);let n=e.get(t.source||t.url);return n||(t.url&&(n=o(t.url),e.set(t.url,n)),t.source&&(n=s(t.source),e.set(t.source,n))),(0,r.assert)(n),n}function o(r){if(!r.startsWith("http"))return r;return s(n(r))}function s(r){const e=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(e)}function n(r){return`try {\n  importScripts('${r}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}
},{"../env-utils/assert":"g1DB"}],"eDdz":[function(require,module,exports) {
"use strict";function e(n,t=!0,r){const s=r||new Set;if(n){if(f(n))s.add(n);else if(f(n.buffer))s.add(n.buffer);else if(ArrayBuffer.isView(n));else if(t&&"object"==typeof n)for(const f in n)e(n[f],t,s)}else;return void 0===r?Array.from(s):[]}function f(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTransferList=e;
},{}],"IPZA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),r=require("../env-utils/assert"),t=require("../worker-utils/get-loadable-worker-url"),s=require("../worker-utils/get-transfer-list");function o(e){return e&&e.__esModule?e:{default:e}}const i=()=>{};class a{static isSupported(){return"undefined"!=typeof Worker}constructor(t){(0,e.default)(this,"name",void 0),(0,e.default)(this,"source",void 0),(0,e.default)(this,"url",void 0),(0,e.default)(this,"terminated",!1),(0,e.default)(this,"worker",void 0),(0,e.default)(this,"onMessage",void 0),(0,e.default)(this,"onError",void 0),(0,e.default)(this,"_loadableURL","");const{name:s,source:o,url:a}=t;(0,r.assert)(o||a),this.name=s,this.source=o,this.url=a,this.onMessage=i,this.onError=(e=>console.log(e)),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=i,this.onError=i,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,r){r=r||(0,s.getTransferList)(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+=`worker ${this.name}. `,e.message&&(r+=`${e.message} in `),e.lineno&&(r+=`:${e.lineno}:${e.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=(0,t.getLoadableWorkerURL)({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=(e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))}),e.onerror=(e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0}),e.onmessageerror=(e=>console.error(e)),e}}exports.default=a;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../env-utils/assert":"g1DB","../worker-utils/get-loadable-worker-url":"sL87","../worker-utils/get-transfer-list":"eDdz"}],"Twrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@babel/runtime/helpers/esm/defineProperty")),r=require("../env-utils/globals"),t=o(require("./worker-thread")),s=o(require("./worker-job"));function o(e){return e&&e.__esModule?e:{default:e}}class u{constructor(r){(0,e.default)(this,"name","unnamed"),(0,e.default)(this,"source",void 0),(0,e.default)(this,"url",void 0),(0,e.default)(this,"maxConcurrency",1),(0,e.default)(this,"maxMobileConcurrency",1),(0,e.default)(this,"onDebug",()=>{}),(0,e.default)(this,"reuseWorkers",!0),(0,e.default)(this,"props",{}),(0,e.default)(this,"jobQueue",[]),(0,e.default)(this,"idleQueue",[]),(0,e.default)(this,"count",0),(0,e.default)(this,"isDestroyed",!1),this.source=r.source,this.url=r.url,this.setProps(r)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,r=((e,r,t)=>e.done(t)),t=((e,r)=>e.error(r))){const s=new Promise(s=>(this.jobQueue.push({name:e,onMessage:r,onError:t,onStart:s}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});const t=new s.default(r.name,e);e.onMessage=(e=>r.onMessage(t,e.type,e.payload)),e.onError=(e=>r.onError(t,e)),r.onStart(t);try{await t.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new t.default({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return r.isMobile?this.maxMobileConcurrency:this.maxConcurrency}}exports.default=u;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../env-utils/globals":"YRRp","./worker-thread":"IPZA","./worker-job":"UKPw"}],"K9DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=s(require("@babel/runtime/helpers/esm/defineProperty")),e=s(require("./worker-pool")),o=s(require("./worker-thread"));function s(r){return r&&r.__esModule?r:{default:r}}const t={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class u{static isSupported(){return o.default.isSupported()}static getWorkerFarm(r={}){return u._workerFarm=u._workerFarm||new u({}),u._workerFarm.setProps(r),u._workerFarm}constructor(e){(0,r.default)(this,"props",void 0),(0,r.default)(this,"workerPools",new Map),this.props={...t},this.setProps(e),this.workerPools=new Map}destroy(){for(const r of this.workerPools.values())r.destroy()}setProps(r){this.props={...this.props,...r};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(r){const{name:o,source:s,url:t}=r;let u=this.workerPools.get(o);return u||((u=new e.default({name:o,source:s,url:t})).setProps(this._getWorkerPoolProps()),this.workerPools.set(o,u)),u}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}exports.default=u,(0,r.default)(u,"_workerFarm",void 0);
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./worker-pool":"Twrx","./worker-thread":"IPZA"}],"iJjo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../worker-utils/get-transfer-list");const t=new Map;class s{static set onmessage(e){self.onmessage=(t=>{if(!a(t))return;const{type:s,payload:r}=t.data;e(s,r)})}static addEventListener(e){let s=t.get(e);s||(s=(t=>{if(!a(t))return;const{type:s,payload:r}=t.data;e(s,r)})),self.addEventListener("message",s)}static removeEventListener(e){const s=t.get(e);t.delete(e),self.removeEventListener("message",s)}static postMessage(t,s){if(self){const a={source:"loaders.gl",type:t,payload:s},r=(0,e.getTransferList)(s);self.postMessage(a,r)}}}function a(e){const{type:t,data:s}=e;return"message"===t&&s&&"string"==typeof s.source&&s.source.startsWith("loaders.gl")}exports.default=s;
},{"../worker-utils/get-transfer-list":"eDdz"}],"Cqon":[function(require,module,exports) {
"use strict";function e(e){return JSON.parse(r(e))}function r(e){const r=new Set;return JSON.stringify(e,(e,t)=>{if("object"==typeof t&&null!==t){if(r.has(t))try{return JSON.parse(JSON.stringify(t))}catch(n){return}r.add(t)}return t})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNontransferableOptions=e;
},{}],"wzlZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorkerName=o,exports.getWorkerURL=n;var e=require("../env-utils/assert"),r=require("../env-utils/version");const t="latest",s="3.0.12";function o(e){const r=e.version!==s?` (worker-utils@${s})`:"";return`${e.name}@${e.version}${r}`}function n(r,s={}){const o=s[r.id]||{},n=`${r.id}-worker.js`;let i=o.workerUrl;if("test"===s._workerType&&(i=`modules/${r.module}/dist/${n}`),!i){let e=r.version;"latest"===e&&(e=t);const s=e?`@${e}`:"";i=`https://unpkg.com/@loaders.gl/${r.module}${s}/dist/${n}`}return(0,e.assert)(i),i}
},{"../env-utils/assert":"g1DB","../env-utils/version":"CHrA"}],"Zax5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canProcessOnWorker=t,exports.processOnWorker=n;var r=s(require("../worker-farm/worker-farm")),e=require("../worker-utils/remove-nontransferable-options"),o=require("./get-worker-url");function s(r){return r&&r.__esModule?r:{default:r}}function t(e,o){return!!r.default.isSupported()&&(e.worker&&(null==o?void 0:o.worker))}async function n(s,t,n={},u={}){const i=(0,o.getWorkerName)(s),c=(0,o.getWorkerURL)(s,n),p=r.default.getWorkerFarm(n).getWorkerPool({name:i,url:c}),l=n.jobName||s.name,d=await p.startJob(l,a.bind(null,u)),k=(0,e.removeNontransferableOptions)(n);return d.postMessage("process",{input:t,options:k}),(await d.result).result}async function a(r,e,o,s){switch(o){case"done":e.done(s);break;case"error":e.error(s.error);break;case"process":const{id:n,input:a,options:u}=s;try{if(!r.process)return void e.postMessage("error",{id:n,error:"Worker not set up to process on main thread"});const o=await r.process(a,u);e.postMessage("done",{id:n,result:o})}catch(t){const r=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:n,error:r})}break;default:console.warn(`process-on-worker: unknown message ${o}`)}}
},{"../worker-farm/worker-farm":"K9DQ","../worker-utils/remove-nontransferable-options":"Cqon","./get-worker-url":"wzlZ"}],"vJnt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}let s;s=Symbol.asyncIterator;class r{constructor(){(0,e.default)(this,"_values",void 0),(0,e.default)(this,"_settlers",void 0),(0,e.default)(this,"_closed",void 0),this._values=[],this._settlers=[],this._closed=!1}[s](){return this}push(e){return this.enqueue(e)}enqueue(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const t=this._settlers.shift();e instanceof Error?t.reject(e):t.resolve({value:e})}else this._values.push(e)}close(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0}next(){if(this._values.length>0){const e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((e,t)=>{this._settlers.push({resolve:e,reject:t})})}}exports.default=r;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"iNgB":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWorker=a;var e=t(require("../async-queue/async-queue")),s=t(require("../worker-farm/worker-body"));function t(e){return e&&e.__esModule?e:{default:e}}let r,o,n=0;function a(t,n){if("undefined"==typeof self)return;const a={process:u};s.default.onmessage=(async(u,c)=>{try{switch(u){case"process":if(!t)throw new Error("Worker does not support atomic processing");const i=await t(c.input,c.options||{},a);s.default.postMessage("done",{result:i});break;case"process-in-batches":if(!n)throw new Error("Worker does not support batched processing");r=new e.default,o=c.options||{};const p=n(r,o,null==a?void 0:a.processInBatches);for await(const e of p)s.default.postMessage("output-batch",{result:e});s.default.postMessage("done",{});break;case"input-batch":r.push(c.input);break;case"input-done":r.close()}}catch(i){const e=i instanceof Error?i.message:"";s.default.postMessage("error",{error:e})}})}function u(e,t={}){return new Promise((r,o)=>{const a=n++,u=(e,t)=>{if(t.id===a)switch(e){case"done":s.default.removeEventListener(u),r(t.result);break;case"error":s.default.removeEventListener(u),o(t.error)}};s.default.addEventListener(u);const c={id:a,input:e,options:t};s.default.postMessage("process",c)})}
},{"../async-queue/async-queue":"vJnt","../worker-farm/worker-body":"iJjo"}],"Vopd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateWorkerVersion=t;var e=require("../env-utils/assert"),r=require("../env-utils/version");function t(t,o=r.VERSION){(0,e.assert)(t,"no worker provided");const s=t.version;return!(!o||!s)}function o(e){const r=e.split(".").map(Number);return{major:r[0],minor:r[1]}}
},{"../env-utils/assert":"g1DB","../env-utils/version":"CHrA"}],"sC8V":[function(require,module,exports) {

},{}],"fzhg":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadLibrary=l,exports.getLibraryUrl=c;var e=require("../env-utils/globals"),r=o(require("../node/require-utils.node")),t=require("../env-utils/assert"),i=require("../env-utils/version");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const s="beta",u="3.0.12",a={};async function l(e,r=null,t={}){return r&&(e=c(e,r,t)),a[e]=a[e]||f(e),await a[e]}function c(r,i,n){if(r.startsWith("http"))return r;const o=n.modules||{};return o[r]?o[r]:e.isBrowser?n.CDN?((0,t.assert)(n.CDN.startsWith("http")),`${n.CDN}/${i}@${u}/dist/libs/${r}`):e.isWorker?`../src/libs/${r}`:`modules/${i}/src/libs/${r}`:`modules/${i}/dist/libs/${r}`}async function f(t){if(t.endsWith("wasm")){const e=await fetch(t);return await e.arrayBuffer()}if(!e.isBrowser)return r.requireFromFile&&await r.requireFromFile(t);if(e.isWorker)return importScripts(t);const i=await fetch(t);return p(await i.text(),t)}function p(t,i){if(!e.isBrowser)return r.requireFromString&&r.requireFromString(t,i);if(e.isWorker)return eval.call(e.global,t),null;const n=document.createElement("script");n.id=i;try{n.appendChild(document.createTextNode(t))}catch(o){n.text=t}return document.body.appendChild(n),null}
},{"../env-utils/globals":"YRRp","../node/require-utils.node":"sC8V","../env-utils/assert":"g1DB","../env-utils/version":"CHrA"}],"gqfu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return r.assert}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return t.isBrowser}}),Object.defineProperty(exports,"isWorker",{enumerable:!0,get:function(){return t.isWorker}}),Object.defineProperty(exports,"WorkerJob",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"WorkerThread",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"WorkerFarm",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"WorkerPool",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"WorkerBody",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"processOnWorker",{enumerable:!0,get:function(){return s.processOnWorker}}),Object.defineProperty(exports,"canProcessOnWorker",{enumerable:!0,get:function(){return s.canProcessOnWorker}}),Object.defineProperty(exports,"createWorker",{enumerable:!0,get:function(){return a.createWorker}}),Object.defineProperty(exports,"getWorkerURL",{enumerable:!0,get:function(){return b.getWorkerURL}}),Object.defineProperty(exports,"validateWorkerVersion",{enumerable:!0,get:function(){return c.validateWorkerVersion}}),Object.defineProperty(exports,"getTransferList",{enumerable:!0,get:function(){return f.getTransferList}}),Object.defineProperty(exports,"getLibraryUrl",{enumerable:!0,get:function(){return p.getLibraryUrl}}),Object.defineProperty(exports,"loadLibrary",{enumerable:!0,get:function(){return p.loadLibrary}}),Object.defineProperty(exports,"AsyncQueue",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"ChildProcessProxy",{enumerable:!0,get:function(){return k.default}}),exports.NullWorker=void 0;var e=require("./lib/env-utils/version"),r=require("./lib/env-utils/assert"),t=require("./lib/env-utils/globals"),o=y(require("./lib/worker-farm/worker-job")),n=y(require("./lib/worker-farm/worker-thread")),i=y(require("./lib/worker-farm/worker-farm")),u=y(require("./lib/worker-farm/worker-pool")),l=y(require("./lib/worker-farm/worker-body")),s=require("./lib/worker-api/process-on-worker"),a=require("./lib/worker-api/create-worker"),b=require("./lib/worker-api/get-worker-url"),c=require("./lib/worker-api/validate-worker-version"),f=require("./lib/worker-utils/get-transfer-list"),p=require("./lib/library-utils/library-utils"),d=y(require("./lib/async-queue/async-queue")),k=y(require("./lib/process-utils/child-process-proxy"));function y(e){return e&&e.__esModule?e:{default:e}}const g={id:"null",name:"null",module:"worker-utils",version:e.VERSION,options:{null:{}}};exports.NullWorker=g;
},{"./lib/env-utils/version":"CHrA","./lib/env-utils/assert":"g1DB","./lib/env-utils/globals":"YRRp","./lib/worker-farm/worker-job":"UKPw","./lib/worker-farm/worker-thread":"IPZA","./lib/worker-farm/worker-farm":"K9DQ","./lib/worker-farm/worker-pool":"Twrx","./lib/worker-farm/worker-body":"iJjo","./lib/worker-api/process-on-worker":"Zax5","./lib/worker-api/create-worker":"iNgB","./lib/worker-api/get-worker-url":"wzlZ","./lib/worker-api/validate-worker-version":"Vopd","./lib/worker-utils/get-transfer-list":"eDdz","./lib/library-utils/library-utils":"fzhg","./lib/async-queue/async-queue":"vJnt","./lib/process-utils/child-process-proxy":"sC8V"}],"jOTJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLoaderWorker=o;var e=require("@loaders.gl/worker-utils");let r=0;function o(r){"undefined"!=typeof self&&(e.WorkerBody.onmessage=(async(o,n)=>{switch(o){case"process":try{const{input:o,options:i={}}=n,c=await t({loader:r,arrayBuffer:o,options:i,context:{parse:s}});e.WorkerBody.postMessage("done",{result:c})}catch(a){const r=a instanceof Error?a.message:"";e.WorkerBody.postMessage("error",{error:r})}}}))}function s(o,s){return new Promise((t,n)=>{const a=r++,i=(r,o)=>{if(o.id===a)switch(r){case"done":e.WorkerBody.removeEventListener(i),t(o.result);break;case"error":e.WorkerBody.removeEventListener(i),n(o.error)}};e.WorkerBody.addEventListener(i);const c={id:a,input:o,options:s};e.WorkerBody.postMessage("process",c)})}async function t({loader:e,arrayBuffer:r,options:o,context:s}){let t,n;if(e.parseSync||e.parse)t=r,n=e.parseSync||e.parse;else{if(!e.parseTextSync)throw new Error(`Could not load data with ${e.name} loader`);t=(new TextDecoder).decode(r),n=e.parseTextSync}return o={...o,modules:e&&e.options&&e.options.modules||{},worker:!1},await n(t,{...o},s,e)}
},{"@loaders.gl/worker-utils":"gqfu"}],"xrMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canParseWithWorker=e,exports.parseWithWorker=o;var r=require("@loaders.gl/worker-utils");function e(e,o){return!!r.WorkerFarm.isSupported()&&(e.worker&&(null==o?void 0:o.worker))}async function o(e,o,t,n,a){const i=e.id,c=(0,r.getWorkerURL)(e,t),u=r.WorkerFarm.getWorkerFarm(t).getWorkerPool({name:i,url:c});t=JSON.parse(JSON.stringify(t));const p=await u.startJob("process-on-worker",s.bind(null,a));p.postMessage("process",{input:o,options:t});const k=await p.result;return await k.result}async function s(r,e,o,s){switch(o){case"done":e.done(s);break;case"error":e.error(s.error);break;case"process":const{id:n,input:a,options:i}=s;try{const o=await r(a,i);e.postMessage("done",{id:n,result:o})}catch(t){const r=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:n,error:r})}break;default:console.warn(`parse-with-worker unknown message ${o}`)}}
},{"@loaders.gl/worker-utils":"gqfu"}],"BEhU":[function(require,module,exports) {
"use strict";function e(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return r(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return r(e,0,t)}return""}function r(e,r,t){if(e.byteLength<=r+t)return"";const n=new DataView(e);let f="";for(let i=0;i<t;i++)f+=String.fromCharCode(n.getUint8(r+i));return f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFirstCharacters=e,exports.getMagicString=r;
},{}],"icoB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseJSON=t;var r=require("../binary-utils/get-first-characters");function t(t){try{return JSON.parse(t)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${(0,r.getFirstCharacters)(t)}"`)}}
},{"../binary-utils/get-first-characters":"BEhU"}],"Euni":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBuffer=f,exports.toBuffer=n,exports.bufferToArrayBuffer=o;var e=t(require("../node/buffer"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var f={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(f,o,u):f[o]=e[o]}return f.default=e,t&&t.set(e,f),f}function f(e){return e&&"object"==typeof e&&e.isBuffer}function n(r){return e.toBuffer?e.toBuffer(r):r}function o(r){return e.toArrayBuffer?e.toArrayBuffer(r):r}
},{"../node/buffer":"sC8V"}],"nOgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toArrayBuffer=n,exports.compareArrayBuffers=f,exports.concatenateArrayBuffers=o,exports.concatenateTypedArrays=u,exports.sliceArrayBuffer=a;var e=t(require("./buffer-utils"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=f?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function n(r){if(e.isBuffer(r)&&(r=e.bufferToArrayBuffer(r)),r instanceof ArrayBuffer)return r;if(ArrayBuffer.isView(r))return 0===r.byteOffset&&r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);if("string"==typeof r){const e=r;return(new TextEncoder).encode(e).buffer}if(r&&"object"==typeof r&&r._toArrayBuffer)return r._toArrayBuffer();throw new Error("toArrayBuffer")}function f(e,r,t){if(t=t||e.byteLength,e.byteLength<t||r.byteLength<t)return!1;const n=new Uint8Array(e),f=new Uint8Array(r);for(let o=0;o<n.length;++o)if(n[o]!==f[o])return!1;return!0}function o(...e){const r=e.map(e=>e instanceof ArrayBuffer?new Uint8Array(e):e),t=r.reduce((e,r)=>e+r.byteLength,0),n=new Uint8Array(t);let f=0;for(const o of r)n.set(o,f),f+=o.byteLength;return n.buffer}function u(...e){const r=e,t=r&&r.length>1&&r[0].constructor||null;if(!t)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');const n=new t(r.reduce((e,r)=>e+r.length,0));let f=0;for(const o of r)n.set(o,f),f+=o.length;return n}function a(e,r,t){const n=void 0!==t?new Uint8Array(e).subarray(r,r+t):new Uint8Array(e).subarray(r);return new Uint8Array(n).buffer}
},{"./buffer-utils":"Euni"}],"FUVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padToNBytes=r,exports.copyArrayBuffer=t,exports.copyToArray=n;var e=require("../env-utils/assert");function r(r,t){return(0,e.assert)(r>=0),(0,e.assert)(t>0),r+(t-1)&~(t-1)}function t(e,r,t,n=r.byteLength){const s=new Uint8Array(e,t,n),a=new Uint8Array(r);return s.set(a),e}function n(e,t,n){let s;if(e instanceof ArrayBuffer)s=new Uint8Array(e);else{const r=e.byteOffset,t=e.byteLength;s=new Uint8Array(e.buffer||e.arrayBuffer,r,t)}return t.set(s,n),n+r(s.byteLength,4)}
},{"../env-utils/assert":"E2ik"}],"R2Fl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyPaddedArrayBufferToDataView=t,exports.copyPaddedStringToDataView=r;var e=require("./memory-copy-utils");function t(t,r,n,o){const y=(0,e.padToNBytes)(n.byteLength,o),i=y-n.byteLength;if(t){const e=new Uint8Array(t.buffer,t.byteOffset+r,n.byteLength),o=new Uint8Array(n);e.set(o);for(let y=0;y<i;++y)t.setUint8(r+n.byteLength+y,32)}return r+=y}function r(e,r,n,o){return r=t(e,r,(new TextEncoder).encode(n),o)}
},{"./memory-copy-utils":"FUVZ"}],"WMJ2":[function(require,module,exports) {
"use strict";function t(t,e){const r=t.length,n=Math.ceil(r/e)*e-r;let o="";for(let i=0;i<n;++i)o+=" ";return t+o}function e(t,e,r,n){if(t)for(let o=0;o<n;o++)t.setUint8(e+o,r.charCodeAt(o));return e+n}function r(t,e,r,n){if(t)for(let o=0;o<n;o++)t.setUint8(e+o,r[o]);return e+n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padStringToByteAlignment=t,exports.copyStringToDataView=e,exports.copyBinaryToDataView=r;
},{}],"c4AR":[function(require,module,exports) {
"use strict";async function*e(e,t={}){const o=new TextDecoder(void 0,t);for await(const n of e)yield"string"==typeof n?n:o.decode(n,{stream:!0})}async function*t(e){const t=new TextEncoder;for await(const o of e)yield"string"==typeof o?t.encode(o):o}async function*o(e){let t="";for await(const o of e){let e;for(t+=o;(e=t.indexOf("\n"))>=0;){const o=t.slice(0,e+1);t=t.slice(e+1),yield o}}t.length>0&&(yield t)}async function*n(e){let t=1;for await(const o of e)yield{counter:t,line:o},t++}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTextDecoderIterator=e,exports.makeTextEncoderIterator=t,exports.makeLineIterator=o,exports.makeNumberedLineIterator=n;
},{}],"T0TF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=t,exports.concatenateArrayBuffersAsync=n,exports.concatenateStringsAsync=e;var r=require("../binary-utils/array-buffer-utils");async function t(r,t){for(;;){const{done:n,value:e}=await r.next();if(n)return void r.return();if(t(e))return}}async function n(t){const n=[];for await(const r of t)n.push(r);return(0,r.concatenateArrayBuffers)(...n)}async function e(r){const t=[];for await(const n of r)t.push(n);return t.join("")}
},{"../binary-utils/array-buffer-utils":"nOgr"}],"Fw0K":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){let o;if("undefined"!=typeof window&&window.performance)o=window.performance.now();else if(void 0!==e&&e.hrtime){const r=e.hrtime();o=1e3*r[0]+r[1]/1e6}else o=Date.now();return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{"process":"g5IB"}],"unm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../utils/hi-res-timestamp"));function e(t){return t&&t.__esModule?t:{default:t}}class s{constructor(t,e){this.name=t,this.type=e,this.sampleSize=1,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=(0,t.default)(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime((0,t.default)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}exports.default=s;
},{"../utils/hi-res-timestamp":"Fw0K"}],"LxIK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./stat"));function e(t){return t&&t.__esModule?t:{default:t}}class s{constructor({id:t,stats:e}){this.id=t,this.stats={},this._initializeStats(e),Object.seal(this)}get(t,e="count"){return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(t=[]){t.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:s,type:a}=e;return this.stats[s]||(e instanceof t.default?this.stats[s]=e:this.stats[s]=new t.default(s,a)),this.stats[s]}}exports.default=s;
},{"./stat":"unm0"}],"SZdt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"_getHiResTimestamp",{enumerable:!0,get:function(){return r.default}});var e=u(require("./lib/stats")),t=u(require("./lib/stat")),r=u(require("./utils/hi-res-timestamp"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/stats":"LxIK","./lib/stat":"unm0","./utils/hi-res-timestamp":"Fw0K"}],"tWMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/defineProperty")),t=require("@probe.gl/stats");function s(e){return e&&e.__esModule?e:{default:e}}const u="Queued Requests",i="Active Requests",r="Cancelled Requests",o="Queued Requests Ever",a="Active Requests Ever",h={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class d{constructor(s={}){(0,e.default)(this,"props",void 0),(0,e.default)(this,"stats",void 0),(0,e.default)(this,"activeRequestCount",0),(0,e.default)(this,"requestQueue",[]),(0,e.default)(this,"requestMap",new Map),(0,e.default)(this,"deferredUpdate",null),this.props={...h,...s},this.stats=new t.Stats({id:this.props.id}),this.stats.get(u),this.stats.get(i),this.stats.get(r),this.stats.get(o),this.stats.get(a)}scheduleRequest(e,t=(()=>0)){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const s={handle:e,priority:0,getPriority:t},u=new Promise(e=>(s.resolve=e,s));return this.requestQueue.push(s),this.requestMap.set(e,u),this._issueNewRequests(),u}_issueRequest(e){const{handle:t,resolve:s}=e;let u=!1;const i=()=>{u||(u=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,s?s({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const s=e[t];this._updateRequest(s)||(e.splice(t,1),this.requestMap.delete(s.handle),t--)}e.sort((e,t)=>e.priority-t.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}exports.default=d;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@probe.gl/stats":"SZdt"}],"WQDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=s,exports.getPathPrefix=r,exports.addAliases=n,exports.resolvePath=o;let t="";const e={};function s(e){t=e}function r(){return t}function n(t){Object.assign(e,t)}function o(s){for(const t in e)if(s.startsWith(t)){const r=e[t];s=s.replace(t,r)}return s.startsWith("http://")||s.startsWith("https://")||(s=`${t}${s}`),s}
},{}],"LFHS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._typecheckJSONLoader=exports.JSONLoader=void 0;const e="3.0.12",o={name:"JSON",id:"json",module:"json",version:e,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:s,parse:async e=>s((new TextDecoder).decode(e)),options:{}};function s(e){return JSON.parse(e)}exports.JSONLoader=o;const t=o;exports._typecheckJSONLoader=t;
},{}],"hewW":[function(require,module,exports) {
"use strict";function e(e){const n=e&&e.lastIndexOf("/");return n>=0?e.substr(0,n):""}function n(...e){return(e=e.map((n,t)=>(t&&(n=n.replace(new RegExp("^/"),"")),t!==e.length-1&&(n=n.replace(new RegExp("/$"),"")),n))).join("/")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dirname=e,exports.join=n;
},{}],"Oou1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../node/fs"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}class n{constructor(e){this.fetch=e._fetch}async readdir(t=".",r){return await e.readdir(t,r)}async stat(t,r){const n=await e.stat(t,r);return{size:Number(n.size),isDirectory:()=>!1,info:n}}async fetch(e,t){return(t.fetch||this.fetch)(e,t)}async open(t,r,n){return await e.open(t,r)}async close(t){return await e.close(t)}async fstat(t){return await e.fstat(t)}async read(t,{buffer:r=null,offset:n=0,length:a=r.byteLength,position:o=null}){let s=0;for(;s<a;){const{bytesRead:f}=await e.read(t,r,n+s,a-s,o+s);s+=f}return{bytesRead:s,buffer:r}}}exports.default=n;
},{"../node/fs":"sC8V"}],"oHIH":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return r.assert}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return t.isBrowser}}),Object.defineProperty(exports,"isWorker",{enumerable:!0,get:function(){return t.isWorker}}),Object.defineProperty(exports,"nodeVersion",{enumerable:!0,get:function(){return t.nodeVersion}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}}),Object.defineProperty(exports,"createLoaderWorker",{enumerable:!0,get:function(){return n.createLoaderWorker}}),Object.defineProperty(exports,"parseWithWorker",{enumerable:!0,get:function(){return o.parseWithWorker}}),Object.defineProperty(exports,"canParseWithWorker",{enumerable:!0,get:function(){return o.canParseWithWorker}}),Object.defineProperty(exports,"parseJSON",{enumerable:!0,get:function(){return i.parseJSON}}),Object.defineProperty(exports,"toArrayBuffer",{enumerable:!0,get:function(){return u.toArrayBuffer}}),Object.defineProperty(exports,"sliceArrayBuffer",{enumerable:!0,get:function(){return u.sliceArrayBuffer}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return u.concatenateArrayBuffers}}),Object.defineProperty(exports,"concatenateTypedArrays",{enumerable:!0,get:function(){return u.concatenateTypedArrays}}),Object.defineProperty(exports,"compareArrayBuffers",{enumerable:!0,get:function(){return u.compareArrayBuffers}}),Object.defineProperty(exports,"padToNBytes",{enumerable:!0,get:function(){return a.padToNBytes}}),Object.defineProperty(exports,"copyToArray",{enumerable:!0,get:function(){return a.copyToArray}}),Object.defineProperty(exports,"copyArrayBuffer",{enumerable:!0,get:function(){return a.copyArrayBuffer}}),Object.defineProperty(exports,"copyPaddedArrayBufferToDataView",{enumerable:!0,get:function(){return f.copyPaddedArrayBufferToDataView}}),Object.defineProperty(exports,"copyPaddedStringToDataView",{enumerable:!0,get:function(){return f.copyPaddedStringToDataView}}),Object.defineProperty(exports,"padStringToByteAlignment",{enumerable:!0,get:function(){return c.padStringToByteAlignment}}),Object.defineProperty(exports,"copyStringToDataView",{enumerable:!0,get:function(){return c.copyStringToDataView}}),Object.defineProperty(exports,"copyBinaryToDataView",{enumerable:!0,get:function(){return c.copyBinaryToDataView}}),Object.defineProperty(exports,"getFirstCharacters",{enumerable:!0,get:function(){return s.getFirstCharacters}}),Object.defineProperty(exports,"getMagicString",{enumerable:!0,get:function(){return s.getMagicString}}),Object.defineProperty(exports,"makeTextEncoderIterator",{enumerable:!0,get:function(){return p.makeTextEncoderIterator}}),Object.defineProperty(exports,"makeTextDecoderIterator",{enumerable:!0,get:function(){return p.makeTextDecoderIterator}}),Object.defineProperty(exports,"makeLineIterator",{enumerable:!0,get:function(){return p.makeLineIterator}}),Object.defineProperty(exports,"makeNumberedLineIterator",{enumerable:!0,get:function(){return p.makeNumberedLineIterator}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return b.forEach}}),Object.defineProperty(exports,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return b.concatenateArrayBuffersAsync}}),Object.defineProperty(exports,"RequestScheduler",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return y.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return y.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return y.resolvePath}}),Object.defineProperty(exports,"_addAliases",{enumerable:!0,get:function(){return y.addAliases}}),Object.defineProperty(exports,"JSONLoader",{enumerable:!0,get:function(){return d.JSONLoader}}),Object.defineProperty(exports,"isBuffer",{enumerable:!0,get:function(){return m.isBuffer}}),Object.defineProperty(exports,"toBuffer",{enumerable:!0,get:function(){return m.toBuffer}}),Object.defineProperty(exports,"bufferToArrayBuffer",{enumerable:!0,get:function(){return m.bufferToArrayBuffer}}),Object.defineProperty(exports,"promisify",{enumerable:!0,get:function(){return P.promisify}}),Object.defineProperty(exports,"_NodeFileSystem",{enumerable:!0,get:function(){return O.default}}),exports.fs=exports.util=exports.path=void 0;var r=require("./lib/env-utils/assert"),t=require("./lib/env-utils/globals"),n=require("./lib/worker-loader-utils/create-loader-worker"),o=require("./lib/worker-loader-utils/parse-with-worker"),i=require("./lib/parser-utils/parse-json"),u=require("./lib/binary-utils/array-buffer-utils"),a=require("./lib/binary-utils/memory-copy-utils"),f=require("./lib/binary-utils/binary-copy-utils"),c=require("./lib/binary-utils/encode-utils"),s=require("./lib/binary-utils/get-first-characters"),p=require("./lib/iterators/text-iterators"),b=require("./lib/iterators/async-iteration"),l=A(require("./lib/request-utils/request-scheduler")),y=require("./lib/path-utils/file-aliases"),d=require("./json-loader"),g=B(require("./lib/path-utils/path"));exports.path=g;var m=require("./lib/binary-utils/buffer-utils"),P=B(require("./lib/node/util"));exports.util=P;var x=B(require("./lib/node/fs"));exports.fs=x;var O=A(require("./lib/filesystems/node-filesystem"));function j(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return j=function(){return e},e}function B(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=j();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function A(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/env-utils/assert":"E2ik","./lib/env-utils/globals":"TqKA","./lib/worker-loader-utils/create-loader-worker":"jOTJ","./lib/worker-loader-utils/parse-with-worker":"xrMV","./lib/parser-utils/parse-json":"icoB","./lib/binary-utils/array-buffer-utils":"nOgr","./lib/binary-utils/memory-copy-utils":"FUVZ","./lib/binary-utils/binary-copy-utils":"R2Fl","./lib/binary-utils/encode-utils":"WMJ2","./lib/binary-utils/get-first-characters":"BEhU","./lib/iterators/text-iterators":"c4AR","./lib/iterators/async-iteration":"T0TF","./lib/request-utils/request-scheduler":"tWMk","./lib/path-utils/file-aliases":"WQDH","./json-loader":"LFHS","./lib/path-utils/path":"hewW","./lib/binary-utils/buffer-utils":"Euni","./lib/node/util":"sC8V","./lib/node/fs":"sC8V","./lib/filesystems/node-filesystem":"Oou1"}],"Oy8e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWritableStream=exports.isReadableStream=exports.isReadableNodeStream=exports.isWritableNodeStream=exports.isBuffer=exports.isReadableDOMStream=exports.isWritableDOMStream=exports.isBlob=exports.isFile=exports.isResponse=exports.isIterator=exports.isAsyncIterable=exports.isIterable=exports.isPromise=exports.isPureObject=exports.isObject=void 0;const e=e=>"boolean"==typeof e,t=e=>"function"==typeof e,s=e=>null!==e&&"object"==typeof e;exports.isObject=s;const o=e=>s(e)&&e.constructor==={}.constructor;exports.isPureObject=o;const r=e=>s(e)&&t(e.then);exports.isPromise=r;const i=e=>e&&"function"==typeof e[Symbol.iterator];exports.isIterable=i;const a=e=>e&&"function"==typeof e[Symbol.asyncIterator];exports.isAsyncIterable=a;const n=e=>e&&t(e.next);exports.isIterator=n;const p=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json;exports.isResponse=p;const c=e=>"undefined"!=typeof File&&e instanceof File;exports.isFile=c;const l=e=>"undefined"!=typeof Blob&&e instanceof Blob;exports.isBlob=l;const b=e=>s(e)&&t(e.abort)&&t(e.getWriter);exports.isWritableDOMStream=b;const x=e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||s(e)&&t(e.tee)&&t(e.cancel)&&t(e.getReader);exports.isReadableDOMStream=x;const f=e=>e&&"object"==typeof e&&e.isBuffer;exports.isBuffer=f;const d=o=>s(o)&&t(o.end)&&t(o.write)&&e(o.writable);exports.isWritableNodeStream=d;const u=o=>s(o)&&t(o.read)&&t(o.pipe)&&e(o.readable);exports.isReadableNodeStream=u;const m=e=>x(e)||u(e);exports.isReadableStream=m;const y=e=>b(e)||d(e);exports.isWritableStream=y;
},{}],"P8kQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseMIMEType=r,exports.parseMIMETypeFromURL=o;const e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,t=/^([-\w.]+\/[-\w.+]+)/;function r(e){const r=t.exec(e);return r?r[1]:e}function o(t){const r=e.exec(t);return r?r[1]:""}
},{}],"ABhg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getResourceUrlAndType=n,exports.getResourceContentLength=s;var e=require("../../javascript-utils/is-type"),t=require("./mime-type-utils");const r=/\?.*/;function n(r){if((0,e.isResponse)(r)){const e=p(r.url||""),n=r.headers.get("content-type")||"";return{url:e,type:(0,t.parseMIMEType)(n)||(0,t.parseMIMETypeFromURL)(e)}}return(0,e.isBlob)(r)?{url:p(r.name||""),type:r.type||""}:"string"==typeof r?{url:p(r),type:(0,t.parseMIMETypeFromURL)(r)}:{url:"",type:""}}function s(t){return(0,e.isResponse)(t)?t.headers["content-length"]||-1:(0,e.isBlob)(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer?t.byteLength:ArrayBuffer.isView(t)?t.byteLength:-1}function p(e){return e.replace(r,"")}
},{"../../javascript-utils/is-type":"Oy8e","./mime-type-utils":"P8kQ"}],"KNrZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeResponse=n,exports.checkResponse=r,exports.checkResponseSync=s;var e=require("../../javascript-utils/is-type"),t=require("./resource-utils");async function n(n){if((0,e.isResponse)(n))return n;const r={},s=(0,t.getResourceContentLength)(n);s>=0&&(r["content-length"]=String(s));const{url:o,type:i}=(0,t.getResourceUrlAndType)(n);i&&(r["content-type"]=i);const a=await c(n);a&&(r["x-first-bytes"]=a),"string"==typeof n&&(n=(new TextEncoder).encode(n));const u=new Response(n,{headers:r});return Object.defineProperty(u,"url",{value:o}),u}async function r(e){if(!e.ok){const t=await o(e);throw new Error(t)}}function s(e){if(!e.ok){let t=`${e.status} ${e.statusText}`;throw t=t.length>60?`${t.slice(60)}...`:t,new Error(t)}}async function o(e){let t=`Failed to fetch resource ${e.url} (${e.status}): `;try{const r=e.headers.get("Content-Type");let s=e.statusText;r.includes("application/json")&&(s+=` ${await e.text()}`),t=(t+=s).length>60?`${t.slice(60)}...`:t}catch(n){}return t}async function c(e){if("string"==typeof e)return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise(e=>{const n=new FileReader;n.onload=(t=>{var n;return e(null==t?void 0:null===(n=t.target)||void 0===n?void 0:n.result)}),n.readAsDataURL(t)})}if(e instanceof ArrayBuffer){return`data:base64,${i(e.slice(0,5))}`}return null}function i(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}
},{"../../javascript-utils/is-type":"Oy8e","./resource-utils":"ABhg"}],"b40H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchFile=r;var e=require("@loaders.gl/loader-utils"),t=require("../utils/response-utils");async function r(r,s){if("string"==typeof r){r=(0,e.resolvePath)(r);let t=s;return null!=s&&s.fetch&&"function"!=typeof(null==s?void 0:s.fetch)&&(t=s.fetch),await fetch(r,t)}return await(0,t.makeResponse)(r)}
},{"@loaders.gl/loader-utils":"oHIH","../utils/response-utils":"KNrZ"}],"Q1FV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readArrayBuffer=e,exports.readBlob=o;var r=require("@loaders.gl/loader-utils");async function e(e,a,t){if("number"==typeof e)return await r.fs._readToArrayBuffer(e,a,t);e instanceof Blob||(e=new Blob([e]));const n=e.slice(a,a+t);return await o(n)}async function o(r){return await new Promise((e,o)=>{const a=new FileReader;a.onload=(r=>{var o;return e(null==r?void 0:null===(o=r.target)||void 0===o?void 0:o.result)}),a.onerror=(r=>o(r)),a.readAsArrayBuffer(r)})}
},{"@loaders.gl/loader-utils":"oHIH"}],"WRQd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readFileSync=r;var e=require("@loaders.gl/loader-utils");function r(r,t={}){if(r=(0,e.resolvePath)(r),!e.isBrowser){const s=e.fs.readFileSync(r,t);return"string"!=typeof s?(0,e.toArrayBuffer)(s):s}return t.nothrow||(0,e.assert)(!1),null}
},{"@loaders.gl/loader-utils":"oHIH"}],"YW6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeFile=r,exports.writeFileSync=s;var e=require("@loaders.gl/loader-utils");async function r(r,s,t){r=(0,e.resolvePath)(r),e.isBrowser||await e.fs.writeFile(r,(0,e.toBuffer)(s),{flag:"w"}),(0,e.assert)(!1)}function s(r,s,t){r=(0,e.resolvePath)(r),e.isBrowser||e.fs.writeFileSync(r,(0,e.toBuffer)(s),{flag:"w"}),(0,e.assert)(!1)}
},{"@loaders.gl/loader-utils":"oHIH"}],"jqgb":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(o){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"==typeof e.versions&&Boolean(e.versions.electron))return!0;const r="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=o||r;return!!(t&&t.indexOf("Electron")>=0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{"process":"g5IB"}],"KFSy":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.isBrowserMainThread=n;var r=t(require("./is-electron"));function t(e){return e&&e.__esModule?e:{default:e}}function o(){return!("object"==typeof e&&"[object process]"===String(e)&&!1)||(0,r.default)()}function n(){return o()&&"undefined"!=typeof document}
},{"./is-electron":"jqgb","process":"g5IB"}],"N1St":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var o=arguments[3],e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;const s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document,process:"object"==typeof e&&e},t=s.self||s.window||s.global;exports.self=t;const n=s.window||s.self||s.global;exports.window=n;const l=s.global||s.self||s.window;exports.global=l;const d=s.document||{};exports.document=d;const r=s.process||{};exports.process=r;const p=console;exports.console=p;
},{"process":"g5IB"}],"bKlm":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return n.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return n.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return n.console}}),exports.isBrowser=exports.VERSION=void 0;var t=o(require("../env/is-browser")),n=require("../env/globals");function o(e){return e&&e.__esModule?e:{default:e}}const s="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";exports.VERSION=s;const u=(0,t.default)();exports.isBrowser=u;
},{"../env/is-browser":"KFSy","../env/globals":"N1St","process":"g5IB"}],"hsjt":[function(require,module,exports) {

"use strict";var l=require("./utils/globals");l.global.probe={};
},{"./utils/globals":"bKlm"}],"wGF4":[function(require,module,exports) {
"use strict";function t(t){try{const s=window[t],e="__storage_test__";return s.setItem(e,e),s.removeItem(e),s}catch(i){return null}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class i{constructor(i,s,e="sessionStorage"){this.storage=t(e),this.id=i,this.config={},Object.assign(this.config,s),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let t={};if(this.storage){const i=this.storage.getItem(this.id);t=i?JSON.parse(i):{}}return Object.assign(this.config,t),this}}exports.default=i;
},{}],"jG5g":[function(require,module,exports) {
"use strict";function t(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function e(t,e=8){const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function n(t,e=8){const n=Math.max(e-t.length,0);return"".concat(t).concat(" ".repeat(n))}function o(t,e={}){const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return c(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const o=t.toPrecision(2);return o.indexOf(".0")===o.length-2?o.slice(0,-1):o}function c(t,e){const{maxElts:n=16,size:c=1}=e;let r="[";for(let i=0;i<t.length&&i<n;++i)i>0&&(r+=",".concat(i%c==0?" ":"")),r+=o(t[i],e);const a=t.length>n?"...":"]";return"".concat(r).concat(a)}function r(t,e,n,o=600){const c=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>o&&(n=Math.min(n,o/t.width));const r=t.width*n,a=t.height*n,i=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(r/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(c,");"),"background-size:".concat(r,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=t,exports.leftPad=e,exports.rightPad=n,exports.formatValue=o,exports.formatImage=r;
},{}],"FJWv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addColor=r,exports.COLOR=void 0;var t=require("./globals");const e={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function o(t){return"string"==typeof t?e[t.toUpperCase()]||e.WHITE:t}function r(e,r,E){return t.isBrowser||"string"!=typeof e||(r&&(r=o(r),e="[".concat(r,"m").concat(e,"[39m")),E&&(r=o(E),e="[".concat(E+10,"m").concat(e,"[49m"))),e}exports.COLOR=e;
},{"./globals":"bKlm"}],"ANz0":[function(require,module,exports) {
"use strict";function t(t,e=["constructor"]){const o=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(o);for(const r of n)"function"==typeof t[r]&&(e.find(t=>r===t)||(t[r]=t[r].bind(t)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=t;
},{}],"zNKz":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"Assertion failed")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dous":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){let r;if(e.isBrowser&&e.window.performance)r=e.window.performance.now();else if(e.process.hrtime){const o=e.process.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}
},{"./globals":"bKlm"}],"oukZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArguments=p,exports.default=void 0;var e=require("../utils/globals"),t=a(require("../utils/local-storage")),o=require("../utils/formatters"),s=require("../utils/color"),r=require("../utils/autobind"),n=a(require("../utils/assert")),i=a(require("../utils/hi-res-timestamp"));function a(e){return e&&e.__esModule?e:{default:e}}const l={debug:e.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},c={enabled:!0,level:0};function u(){}const g={},d={once:!0};function f(e){for(const t in e)for(const o in e[t])return o||"untitled";return"empty"}class h{constructor({id:o}={id:""}){this.id=o,this.VERSION=e.VERSION,this._startTs=(0,i.default)(),this._deltaTs=(0,i.default)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new t.default("__probe-".concat(this.id,"__"),c),this.userData={},this.timeStamp("".concat(this.id," started")),(0,r.autobind)(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number(((0,i.default)()-this._startTs).toPrecision(10))}getDelta(){return Number(((0,i.default)()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,t){(0,n.default)(e,t)}warn(e){return this._getLogFunction(0,e,l.warn,arguments,d)}error(e){return this._getLogFunction(0,e,l.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,l.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,l.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,l.debug||l.info,arguments,d)}table(e,t,o){return t?this._getLogFunction(e,t,console.table||u,o&&[o],{tag:f(t)}):u}image({logLevel:t,priority:o,image:s,message:r="",scale:n=1}){return this._shouldLog(t||o)?e.isBrowser?L({image:s,message:r,scale:n}):b({image:s,message:r,scale:n}):u}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||u)}group(e,t,o={collapsed:!1}){o=p({logLevel:e,message:t,opts:o});const{collapsed:s}=o;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(e,t,o={}){return this.group(e,t,Object.assign({},o,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||u)}withGroup(e,t,o){this.group(e,t)();try{o()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=m(e)}_getLogFunction(e,t,o,s=[],r){if(this._shouldLog(e)){r=p({logLevel:e,message:t,args:s,opts:r}),o=o||r.method,(0,n.default)(o),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=(0,i.default)();const a=r.tag||r.message;if(r.once){if(g[a])return u;g[a]=(0,i.default)()}return t=_(this.id,r.message,r),o.bind(console,t,...r.args)}return u}}function m(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return(0,n.default)(Number.isFinite(t)&&t>=0),t}function p(e){const{logLevel:t,message:o}=e;e.logLevel=m(t);const s=e.args?Array.from(e.args):[];for(;s.length&&s.shift()!==o;);switch(e.args=s,typeof t){case"string":case"function":void 0!==o&&s.unshift(o),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const r=typeof e.message;return(0,n.default)("string"===r||"object"===r),Object.assign(e,e.opts)}function _(e,t,r){if("string"==typeof t){const n=r.time?(0,o.leftPad)((0,o.formatTime)(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=(0,s.addColor)(t,r.color,r.background)}return t}function b({image:e,message:t="",scale:o=1}){let s=null;try{s=module.require("asciify-image")}catch(r){}return s?()=>s(e,{fit:"box",width:"".concat(Math.round(80*o),"%")}).then(e=>console.log(e)):u}function L({image:e,message:t="",scale:s=1}){if("string"==typeof e){const r=new Image;return r.onload=(()=>{const e=(0,o.formatImage)(r,t,s);console.log(...e)}),r.src=e,u}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...(0,o.formatImage)(e,t,s)),u;if("canvas"===r.toLowerCase()){const r=new Image;return r.onload=(()=>console.log(...(0,o.formatImage)(r,t,s))),r.src=e.toDataURL(),u}return u}exports.default=h,h.VERSION=e.VERSION;
},{"../utils/globals":"bKlm","../utils/local-storage":"wGF4","../utils/formatters":"jG5g","../utils/color":"FJWv","../utils/autobind":"ANz0","../utils/assert":"zNKz","../utils/hi-res-timestamp":"dous"}],"WSiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var e=require("./globals"),r=i(require("./is-browser")),n=i(require("./is-electron"));function i(e){return e&&e.__esModule?e:{default:e}}function o(){return void 0!==e.window.orientation}function t(i){if(!i&&!(0,r.default)())return"Node";if((0,n.default)(i))return"Electron";const o="undefined"!=typeof navigator?navigator:{},t=i||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const u=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return u||d?"IE":e.window.chrome?"Chrome":e.window.safari?"Safari":e.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"./globals":"N1St","./is-browser":"KFSy","./is-electron":"jqgb"}],"TYNK":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return n.VERSION}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return o.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return o.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return o.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return o.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return o.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return u.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return i.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return s.COLOR}}),Object.defineProperty(exports,"addColor",{enumerable:!0,get:function(){return s.addColor}}),Object.defineProperty(exports,"leftPad",{enumerable:!0,get:function(){return f.leftPad}}),Object.defineProperty(exports,"rightPad",{enumerable:!0,get:function(){return f.rightPad}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return c.autobind}}),Object.defineProperty(exports,"LocalStorage",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"getHiResTimestamp",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return d.Stats}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return d.Stat}}),exports.default=void 0,require("./init");var t=y(require("./lib/log")),n=require("./utils/globals"),o=require("./env/globals"),u=O(require("./env/is-browser")),i=O(require("./env/get-browser")),a=y(require("./env/is-electron")),l=y(require("./utils/assert")),s=require("./utils/color"),f=require("./utils/formatters"),c=require("./utils/autobind"),p=y(require("./utils/local-storage")),b=y(require("./utils/hi-res-timestamp")),d=require("@probe.gl/stats");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function y(e){return e&&e.__esModule?e:{default:e}}var P=new t.default({id:"probe.gl"});exports.default=P;
},{"./init":"hsjt","./lib/log":"oukZ","./utils/globals":"bKlm","./env/globals":"N1St","./env/is-browser":"KFSy","./env/get-browser":"WSiT","./env/is-electron":"jqgb","./utils/assert":"zNKz","./utils/color":"FJWv","./utils/formatters":"jG5g","./utils/autobind":"ANz0","./utils/local-storage":"wGF4","./utils/hi-res-timestamp":"dous","@probe.gl/stats":"SZdt","process":"g5IB"}],"yfwR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConsoleLog=exports.NullLog=exports.probeLog=void 0;var o=r(require("@babel/runtime/helpers/esm/defineProperty")),e=require("probe.gl");function r(o){return o&&o.__esModule?o:{default:o}}const s=new e.Log({id:"loaders.gl"});exports.probeLog=s;class n{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}exports.NullLog=n;class t{constructor(){(0,o.default)(this,"console",void 0),this.console=console}log(...o){return this.console.log.bind(this.console,...o)}info(...o){return this.console.info.bind(this.console,...o)}warn(...o){return this.console.warn.bind(this.console,...o)}error(...o){return this.console.error.bind(this.console,...o)}}exports.ConsoleLog=t;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","probe.gl":"TYNK"}],"tLzt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.REMOVED_LOADER_OPTIONS=exports.DEFAULT_LOADER_OPTIONS=void 0;var e=require("./loggers");const r={fetch:null,mimeType:void 0,nothrow:!1,log:new e.ConsoleLog,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]};exports.DEFAULT_LOADER_OPTIONS=r;const t={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};exports.REMOVED_LOADER_OPTIONS=t;
},{"./loggers":"yfwR"}],"Go4L":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobalLoaderState=r,exports.setGlobalOptions=l,exports.normalizeOptions=c,exports.getFetchFunction=a;var o=require("@loaders.gl/loader-utils"),t=require("../../javascript-utils/is-type"),e=require("../fetch/fetch-file"),n=require("./loggers"),i=require("./option-defaults");function r(){o.global.loaders=o.global.loaders||{};const{loaders:t}=o.global;return t._state=t._state||{},t._state}const s=()=>{const o=r();return o.globalOptions=o.globalOptions||{...i.DEFAULT_LOADER_OPTIONS},o.globalOptions};function l(o){const t=r(),e=s();t.globalOptions=d(e,o)}function c(o,t,e,n){return e=e||[],u(o,e=Array.isArray(e)?e:[e]),d(t,o,n)}function a(o,n){const i=s(),r=o||i;return"function"==typeof r.fetch?r.fetch:(0,t.isObject)(r.fetch)?o=>(0,e.fetchFile)(o,r):null!=n&&n.fetch?null==n?void 0:n.fetch:e.fetchFile}function u(o,t){f(o,null,i.DEFAULT_LOADER_OPTIONS,i.REMOVED_LOADER_OPTIONS,t);for(const e of t){const n=o&&o[e.id]||{},i=e.options&&e.options[e.id]||{},r=e.deprecatedOptions&&e.deprecatedOptions[e.id]||{};f(n,e.id,i,r,t)}}function f(o,e,i,r,s){const l=e||"Top level",c=e?`${e}.`:"";for(const a in o){const u=!e&&(0,t.isObject)(o[a]),f="baseUri"===a&&!e,d="workerUrl"===a&&e;if(!(a in i||f||d))if(a in r)n.probeLog.warn(`${l} loader option '${c}${a}' no longer supported, use '${r[a]}'`)();else if(!u){const o=p(a,s);n.probeLog.warn(`${l} loader option '${c}${a}' not recognized. ${o}`)()}}}function p(o,t){const e=o.toLowerCase();let n="";for(const i of t)for(const t in i.options){if(o===t)return`Did you mean '${i.id}.${t}'?`;const r=t.toLowerCase();(e.startsWith(r)||r.startsWith(e))&&(n=n||`Did you mean '${i.id}.${t}'?`)}return n}function d(o,t,e){const i={...o.options||{}};return b(i,e),null===i.log&&(i.log=new n.NullLog),O(i,s()),O(i,t),i}function O(o,e){for(const n in e)if(n in e){const i=e[n];(0,t.isPureObject)(i)&&(0,t.isPureObject)(o[n])?o[n]={...o[n],...e[n]}:o[n]=e[n]}}function b(o,t){!t||"baseUri"in o||(o.baseUri=t)}
},{"@loaders.gl/loader-utils":"oHIH","../../javascript-utils/is-type":"Oy8e","../fetch/fetch-file":"b40H","./loggers":"yfwR","./option-defaults":"tLzt"}],"dAxI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLoaderOptions=t;var e=require("../loader-utils/option-utils");function t(t){(0,e.setGlobalOptions)(t)}
},{"../loader-utils/option-utils":"Go4L"}],"iWwL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLoaderObject=e,exports.normalizeLoader=t;var r=require("@loaders.gl/loader-utils");function e(r){var e;if(!r)return!1;return Array.isArray(r)&&(r=r[0]),Array.isArray(null===(e=r)||void 0===e?void 0:e.extensions)}function t(t){var a,o;let i;return(0,r.assert)(t,"null loader"),(0,r.assert)(e(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(a=t)&&void 0!==a&&a.parseTextSync||null!==(o=t)&&void 0!==o&&o.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}
},{"@loaders.gl/loader-utils":"oHIH"}],"k3wd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerLoaders=o,exports.getRegisteredLoaders=s,exports._unregisterLoaders=a;var e=require("../loader-utils/normalize-loader"),r=require("../loader-utils/option-utils");const t=()=>{const e=(0,r.getGlobalLoaderState)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function o(r){const o=t();r=Array.isArray(r)?r:[r];for(const t of r){const r=(0,e.normalizeLoader)(t);o.find(e=>r===e)||o.unshift(r)}}function s(){return t()}function a(){(0,r.getGlobalLoaderState)().loaderRegistry=[]}
},{"../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L"}],"W9BO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectLoader=i,exports.selectLoaderSync=s;var e=require("@loaders.gl/loader-utils"),r=require("../loader-utils/normalize-loader"),t=require("../utils/resource-utils"),n=require("./register-loaders"),o=require("../../javascript-utils/is-type");const u=/\.([^.]+)$/;async function i(e,r=[],t,n){if(!l(e))return null;let u=s(e,r,{...t,nothrow:!0},n);if(u)return u;if((0,o.isBlob)(e)&&(u=s(e=await e.slice(0,10).arrayBuffer(),r,t,n)),!(u||null!=t&&t.nothrow))throw new Error(a(e));return u}function s(e,t=[],o,u){if(!l(e))return null;if(t&&!Array.isArray(t))return(0,r.normalizeLoader)(t);let i=[];t&&(i=i.concat(t)),null!=o&&o.ignoreRegisteredLoaders||i.push(...(0,n.getRegisteredLoaders)()),c(i);const s=f(e,i,o,u);if(!(s||null!=o&&o.nothrow))throw new Error(a(e));return s}function f(e,r,n,o){const{url:u,type:i}=(0,t.getResourceUrlAndType)(e),s=u||(null==o?void 0:o.url);let f=null;return null!=n&&n.mimeType&&(f=p(r,null==n?void 0:n.mimeType)),f=(f=(f=(f=f||y(r,s))||p(r,i))||g(r,e))||p(r,null==n?void 0:n.fallbackMimeType)}function l(e){return!(e instanceof Response&&204===e.status)}function a(e){const{url:r,type:n}=(0,t.getResourceUrlAndType)(e);let o="No valid loader found";return e&&(o+=` data: "${h(e)}", contentType: "${n}"`),r&&(o+=` url: ${r}`),o}function c(e){for(const t of e)(0,r.normalizeLoader)(t)}function y(e,r){const t=r&&u.exec(r),n=t&&t[1];return n?d(e,n):null}function d(e,r){r=r.toLowerCase();for(const t of e)for(const e of t.extensions)if(e.toLowerCase()===r)return t;return null}function p(e,r){for(const t of e){if(t.mimeTypes&&t.mimeTypes.includes(r))return t;if(r===`application/x.${t.id}`)return t}return null}function g(e,r){if(!r)return null;for(const t of e)if("string"==typeof r){if(m(r,t))return t}else if(ArrayBuffer.isView(r)){if(w(r.buffer,r.byteOffset,t))return t}else if(r instanceof ArrayBuffer){if(w(r,0,t))return t}return null}function m(e,r){if(r.testText)return r.testText(e);return(Array.isArray(r.tests)?r.tests:[r.tests]).some(r=>e.startsWith(r))}function w(e,r,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>A(e,r,t,n))}function A(r,t,n,o){if(o instanceof ArrayBuffer)return(0,e.compareArrayBuffers)(o,r,o.byteLength);switch(typeof o){case"function":return o(r,n);case"string":return o===L(r,t,o.length);default:return!1}}function h(e,r=5){if("string"==typeof e)return e.slice(0,r);if(ArrayBuffer.isView(e))return L(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){return L(e,0,r)}return""}function L(e,r,t){if(e.byteLength<r+t)return"";const n=new DataView(e);let o="";for(let u=0;u<t;u++)o+=String.fromCharCode(n.getUint8(r+u));return o}
},{"@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../utils/resource-utils":"ABhg","./register-loaders":"k3wd","../../javascript-utils/is-type":"Oy8e"}],"tqSD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStringIterator=t;const e=262144;function*t(t,n){const o=(null==n?void 0:n.chunkSize)||e;let c=0;const r=new TextEncoder;for(;c<t.length;){const e=Math.min(t.length-c,o),n=t.slice(c,c+e);c+=e,yield r.encode(n)}}
},{}],"xsAN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeArrayBufferIterator=t;const e=262144;function*t(t,r={}){const{chunkSize:n=e}=r;let o=0;for(;o<t.byteLength;){const e=Math.min(t.byteLength-o,n),r=new ArrayBuffer(e),s=new Uint8Array(t,o,e);new Uint8Array(r).set(s),o+=e,yield r}}
},{}],"MI6f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeBlobIterator=t;const e=1048576;async function*t(t,o){const r=(null==o?void 0:o.chunkSize)||e;let s=0;for(;s<t.size;){const e=s+r,o=await t.slice(s,e).arrayBuffer();s=e,yield o}}
},{}],"a7BU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStreamIterator=r;var e=require("@loaders.gl/loader-utils");function r(r,o){return e.isBrowser?t(r,o):a(r,o)}async function*t(r,t){const a=r.getReader();let o;try{for(;;){const r=o||a.read();null!=t&&t._streamReadAhead&&(o=a.read());const{done:n,value:s}=await r;if(n)return;yield(0,e.toArrayBuffer)(s)}}catch(n){a.releaseLock()}}async function*a(r,t){for await(const a of r)yield(0,e.toArrayBuffer)(a)}
},{"@loaders.gl/loader-utils":"oHIH"}],"wlle":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeIterator=o;var r=require("./make-string-iterator"),e=require("./make-array-buffer-iterator"),t=require("./make-blob-iterator"),a=require("./make-stream-iterator"),i=require("../../javascript-utils/is-type");function o(o,s){if("string"==typeof o)return(0,r.makeStringIterator)(o,s);if(o instanceof ArrayBuffer)return(0,e.makeArrayBufferIterator)(o,s);if((0,i.isBlob)(o))return(0,t.makeBlobIterator)(o,s);if((0,i.isReadableStream)(o))return(0,a.makeStreamIterator)(o,s);if((0,i.isResponse)(o)){const r=o;return(0,a.makeStreamIterator)(r.body,s)}throw new Error("makeIterator")}
},{"./make-string-iterator":"tqSD","./make-array-buffer-iterator":"xsAN","./make-blob-iterator":"MI6f","./make-stream-iterator":"a7BU","../../javascript-utils/is-type":"Oy8e"}],"IWzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArrayBufferOrStringFromDataSync=i,exports.getArrayBufferOrStringFromData=s,exports.getAsyncIterableFromData=o,exports.getReadableStream=f;var e=require("@loaders.gl/loader-utils"),r=require("../../javascript-utils/is-type"),t=require("../../iterators/make-iterator/make-iterator"),a=require("../utils/response-utils");const n="Cannot convert supplied data type";function i(e,t,a){if(t.text&&"string"==typeof e)return e;if((0,r.isBuffer)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;if(t.text&&!t.binary){return new TextDecoder("utf8").decode(r)}return r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary){return new TextDecoder("utf8").decode(e)}let r=e.buffer;const a=e.byteLength||e.length;return 0===e.byteOffset&&a===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+a)),r}throw new Error(n)}async function s(s,o,f){const u=s instanceof ArrayBuffer||ArrayBuffer.isView(s);if("string"==typeof s||u)return i(s,o,f);if((0,r.isBlob)(s)&&(s=await(0,a.makeResponse)(s)),(0,r.isResponse)(s)){const e=s;return await(0,a.checkResponse)(e),o.binary?await e.arrayBuffer():await e.text()}if((0,r.isReadableStream)(s)&&(s=(0,t.makeIterator)(s,f)),(0,r.isIterable)(s)||(0,r.isAsyncIterable)(s))return(0,e.concatenateArrayBuffersAsync)(s);throw new Error(n)}async function o(e,n){if((0,r.isIterator)(e))return e;if((0,r.isResponse)(e)){const r=e;await(0,a.checkResponse)(r);const i=await r.body;return(0,t.makeIterator)(i,n)}return(0,r.isBlob)(e)||(0,r.isReadableStream)(e)?(0,t.makeIterator)(e,n):(0,r.isAsyncIterable)(e)?e[Symbol.asyncIterator]():u(e)}async function f(e){if((0,r.isReadableStream)(e))return e;if((0,r.isResponse)(e))return e.body;return(await(0,a.makeResponse)(e)).body}function u(e){if(ArrayBuffer.isView(e))return function*(){yield e.buffer}();if(e instanceof ArrayBuffer)return function*(){yield e}();if((0,r.isIterator)(e))return e;if((0,r.isIterable)(e))return e[Symbol.iterator]();throw new Error(n)}
},{"@loaders.gl/loader-utils":"oHIH","../../javascript-utils/is-type":"Oy8e","../../iterators/make-iterator/make-iterator":"wlle","../utils/response-utils":"KNrZ"}],"cO8m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoaderContext=e,exports.getLoadersFromContext=t;var r=require("./option-utils");function e(e,t,o=null){if(o)return o;const n={fetch:(0,r.getFetchFunction)(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function t(r,e){if(!e&&r&&!Array.isArray(r))return r;let t;if(r&&(t=Array.isArray(r)?r:[r]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...r]:r}return t&&t.length?t:null}
},{"./option-utils":"Go4L"}],"t8Kj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=n;var e=require("@loaders.gl/worker-utils"),r=require("@loaders.gl/loader-utils"),t=require("../loader-utils/normalize-loader"),a=require("../loader-utils/option-utils"),o=require("../loader-utils/get-data"),i=require("../loader-utils/loader-context"),s=require("../utils/resource-utils"),l=require("./select-loader");async function n(r,o,d,p){(0,e.assert)(!p||"object"==typeof p),!o||Array.isArray(o)||(0,t.isLoaderObject)(o)||(p=void 0,d=o,o=void 0),r=await r,d=d||{};const{url:c}=(0,s.getResourceUrlAndType)(r),y=o,f=(0,i.getLoadersFromContext)(y,p),w=await(0,l.selectLoader)(r,f,d);return w?(d=(0,a.normalizeOptions)(d,w,f,c),p=(0,i.getLoaderContext)({url:c,parse:n,loaders:f},d,p),await u(w,r,d,p)):null}async function u(t,a,i,s){if((0,e.validateWorkerVersion)(t),a=await(0,o.getArrayBufferOrStringFromData)(a,t,i),t.parseTextSync&&"string"==typeof a)return i.dataType="text",t.parseTextSync(a,i,s,t);if((0,r.canParseWithWorker)(t,i))return await(0,r.parseWithWorker)(t,a,i,s,n);if(t.parseText&&"string"==typeof a)return await t.parseText(a,i,s,t);if(t.parse)return await t.parse(a,i,s,t);throw(0,e.assert)(!t.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}
},{"@loaders.gl/worker-utils":"gqfu","@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/get-data":"IWzS","../loader-utils/loader-context":"cO8m","../utils/resource-utils":"ABhg","./select-loader":"W9BO"}],"PAJp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseSync=i;var e=require("@loaders.gl/loader-utils"),r=require("./select-loader"),t=require("../loader-utils/normalize-loader"),o=require("../loader-utils/option-utils"),a=require("../loader-utils/get-data"),s=require("../loader-utils/loader-context"),n=require("../utils/resource-utils");function i(a,u,c,d){(0,e.assert)(!d||"object"==typeof d),Array.isArray(u)||(0,t.isLoaderObject)(u)||(d=void 0,c=u,u=void 0),c=c||{};const p=u,y=(0,s.getLoadersFromContext)(p,d),f=(0,r.selectLoaderSync)(a,y,c);if(!f)return null;c=(0,o.normalizeOptions)(c,f,y);const{url:S}=(0,n.getResourceUrlAndType)(a);return l(f,a,c,d=(0,s.getLoaderContext)({url:S,parseSync:i,parse:()=>{throw new Error("parseSync called parse")},loaders:u},c))}function l(e,r,t,o){if(r=(0,a.getArrayBufferOrStringFromDataSync)(r,e,t),e.parseTextSync&&"string"==typeof r)return e.parseTextSync(r,t);if(e.parseSync&&r instanceof ArrayBuffer)return e.parseSync(r,t,o);throw new Error(`${e.name} loader: 'parseSync' not supported by this loader, use 'parse' instead. ${o.url||""}`)}
},{"@loaders.gl/loader-utils":"oHIH","./select-loader":"W9BO","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/get-data":"IWzS","../loader-utils/loader-context":"cO8m","../utils/resource-utils":"ABhg"}],"tR2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseInBatches=l;var e=require("@loaders.gl/loader-utils"),a=require("../loader-utils/normalize-loader"),r=require("../loader-utils/option-utils"),t=require("../loader-utils/loader-context"),s=require("../loader-utils/get-data"),n=require("../utils/resource-utils"),i=require("./select-loader"),o=require("./parse");async function l(s,c,d,y){(0,e.assert)(!y||"object"==typeof y),Array.isArray(c)||(0,a.isLoaderObject)(c)||(y=void 0,d=c,c=void 0),s=await s,d=d||{};const{url:p}=(0,n.getResourceUrlAndType)(s),f=await(0,i.selectLoader)(s,c,d);return f?(d=(0,r.normalizeOptions)(d,f,c,p),y=(0,t.getLoaderContext)({url:p,parseInBatches:l,parse:o.parse,loaders:c},d,y),await u(f,s,d,y)):null}async function u(e,a,r,t){const s=await c(e,a,r,t);if(!r.metadata)return s;const n={batchType:"metadata",metadata:{_loader:e,_context:t},data:[],bytesUsed:0};return async function*(e){yield n,yield*e}(s)}async function c(a,r,t,n){const i=await(0,s.getAsyncIterableFromData)(r,t),l=await d(i,(null==t?void 0:t.transforms)||[]);if(a.parseInBatches)return a.parseInBatches(l,t,n);return async function*(){const r=await(0,e.concatenateArrayBuffersAsync)(l),s=await(0,o.parse)(r,a,{...t,mimeType:a.mimeTypes[0]},n),i={mimeType:a.mimeTypes[0],shape:Array.isArray(s)?"row-table":"unknown",batchType:"data",data:s,length:Array.isArray(s)?s.length:1};yield i}()}async function d(e,a=[]){let r=e;for await(const t of a)r=t(r);return r}
},{"@loaders.gl/loader-utils":"oHIH","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","../loader-utils/loader-context":"cO8m","../loader-utils/get-data":"IWzS","../utils/resource-utils":"ABhg","./select-loader":"W9BO","./parse":"t8Kj"}],"CA4j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.load=a;var e=require("../../javascript-utils/is-type"),r=require("../loader-utils/normalize-loader"),t=require("../loader-utils/option-utils"),i=require("./parse");async function a(a,o,s,u){Array.isArray(o)||(0,r.isLoaderObject)(o)||(void 0,s=o,o=void 0);const l=(0,t.getFetchFunction)(s);let n=a;return"string"==typeof a&&(n=await l(a)),(0,e.isBlob)(a)&&(n=await l(a)),await(0,i.parse)(n,o,s)}
},{"../../javascript-utils/is-type":"Oy8e","../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","./parse":"t8Kj"}],"C8HI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadInBatches=a;var e=require("../loader-utils/normalize-loader"),r=require("../loader-utils/option-utils"),t=require("./parse-in-batches");function a(t,a,s,n){Array.isArray(a)||(0,e.isLoaderObject)(a)||(void 0,s=a,a=null);const o=(0,r.getFetchFunction)(s||{});return Array.isArray(t)?t.map(e=>i(e,a,s,o)):i(t,a,s,o)}async function i(e,r,a,i){if("string"==typeof e){const s=e,n=await i(s);return await(0,t.parseInBatches)(n,r,a)}return await(0,t.parseInBatches)(e,r,a)}
},{"../loader-utils/normalize-loader":"iWwL","../loader-utils/option-utils":"Go4L","./parse-in-batches":"tR2z"}],"SWoI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=r,exports.encodeSync=o,exports.encodeText=c,exports.encodeInBatches=a,exports.encodeURLtoURL=i;var e=require("@loaders.gl/loader-utils"),t=require("../fetch/write-file"),n=require("../fetch/fetch-file");async function r(r,o,c){if(o.encode)return await o.encode(r,c);if(o.encodeSync)return o.encodeSync(r,c);if(o.encodeText)return(new TextEncoder).encode(await o.encodeText(r,c));if(o.encodeInBatches){const t=a(r,o,c),n=[];for await(const e of t)n.push(e);return(0,e.concatenateArrayBuffers)(...n)}if(!e.isBrowser&&o.encodeURLtoURL){const e=s("input");await(0,t.writeFile)(e,r);const a=s("output"),d=await i(e,a,o,c);return(await(0,n.fetchFile)(d)).arrayBuffer()}throw new Error("Writer could not encode data")}function o(e,t,n){if(t.encodeSync)return t.encodeSync(e,n);throw new Error("Writer could not synchronously encode data")}async function c(e,t,n){if(t.text&&t.encodeText)return await t.encodeText(e,n);if(t.text&&(t.encode||t.encodeInBatches)){const o=await r(e,t,n);return(new TextDecoder).decode(o)}throw new Error("Writer could not encode data as text")}function a(e,t,n){if(t.encodeInBatches){const r=d(e);return t.encodeInBatches(r,n)}throw new Error("Writer could not encode data in batches")}async function i(t,n,r,o){if(t=(0,e.resolvePath)(t),n=(0,e.resolvePath)(n),e.isBrowser||!r.encodeURLtoURL)throw new Error;return await r.encodeURLtoURL(t,n,o)}function d(e){return[{table:e,start:0,end:e.length}]}function s(e){return`/tmp/${e}`}
},{"@loaders.gl/loader-utils":"oHIH","../fetch/write-file":"YW6i","../fetch/fetch-file":"b40H"}],"DUKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.save=r,exports.saveSync=n;var e=require("./encode"),t=require("../fetch/write-file");async function r(r,n,c,i){const o=await(0,e.encode)(r,c,i);return await(0,t.writeFile)(n,o)}function n(r,n,c,i){const o=(0,e.encodeSync)(r,c,i);return(0,t.writeFileSync)(n,o)}
},{"./encode":"SWoI","../fetch/write-file":"YW6i"}],"PyjH":[function(require,module,exports) {
"use strict";function e(e,t){const r=e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]();return new ReadableStream({type:"bytes",async pull(e){try{const{done:a,value:n}=await r.next();a?e.close():e.enqueue(new Uint8Array(n))}catch(t){e.error(t)}},async cancel(){var e;await(null==r?void 0:null===(e=r.return)||void 0===e?void 0:e.call(r))}},{highWaterMark:2**24,...t})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDOMStream=e;
},{}],"QeuK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeStream=u;var e=require("@loaders.gl/loader-utils"),r=require("./make-dom-stream"),t=a(require("./make-node-stream"));function a(e){return e&&e.__esModule?e:{default:e}}function u(a,u){return e.isBrowser?(0,r.makeDOMStream)(a,u):(0,t.default)(a,u)}
},{"@loaders.gl/loader-utils":"oHIH","./make-dom-stream":"PyjH","./make-node-stream":"sC8V"}],"aJIU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NullLoader=exports.NullWorkerLoader=void 0;const e="3.0.12",o={name:"Null loader",id:"null",module:"core",version:e,worker:!0,mimeTypes:["application/x.empty"],extensions:["null"],tests:[()=>!1],options:{null:{}}};exports.NullWorkerLoader=o;const l={name:"Null loader",id:"null",module:"core",version:e,mimeTypes:["application/x.empty"],extensions:["null"],parse:async e=>e,parseSync:e=>e,parseInBatches:async function*(e){for await(const o of e)yield o},tests:[()=>!1],options:{null:{}}};exports.NullLoader=l;
},{}],"HD9x":[function(require,module,exports) {
"use strict";async function e(e,n,a=(()=>{}),r=(()=>{})){if(!(e=await e).ok)return e;const o=e.body;if(!o)return e;const s=e.headers.get("content-length")||0,d=s&&parseInt(s);if(!(s>0))return e;if("undefined"==typeof ReadableStream||!o.getReader)return e;const u=new ReadableStream({async start(e){const s=o.getReader();await t(e,s,0,d,n,a,r)}});return new Response(u)}async function t(e,n,a,r,o,s,d){try{const{done:c,value:i}=await n.read();if(c)return s(),void e.close();a+=i.byteLength,o(Math.round(a/r*100),{loadedBytes:a,totalBytes:r}),e.enqueue(i),await t(e,n,a,r,o,s,d)}catch(u){e.error(u),d(u)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"EeUV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/defineProperty"));function s(e){return e&&e.__esModule?e:{default:e}}class t{constructor(s,t){(0,e.default)(this,"_fetch",void 0),(0,e.default)(this,"files",{}),(0,e.default)(this,"lowerCaseFiles",{}),(0,e.default)(this,"usedFiles",{}),this._fetch=(null==t?void 0:t.fetch)||fetch;for(let e=0;e<s.length;++e){const t=s[e];this.files[t.name]=t,this.lowerCaseFiles[t.name.toLowerCase()]=t,this.usedFiles[t.name]=!1}this.fetch=this.fetch.bind(this)}async fetch(e,s){if(e.includes("://"))return this._fetch(e,s);const t=this.files[e];if(!t)return new Response(e,{status:400,statusText:"NOT FOUND"});const i=new Headers(null==s?void 0:s.headers).get("Range"),r=i&&/bytes=($1)-($2)/.exec(i);if(r){const s=parseInt(r[1]),i=parseInt(r[2]),n=await t.slice(s,i).arrayBuffer(),l=new Response(n);return Object.defineProperty(l,"url",{value:e}),l}const n=new Response(t);return Object.defineProperty(n,"url",{value:e}),n}async readdir(e){const s=[];for(const t in this.files)s.push(t);return s}async stat(e,s){const t=this.files[e];if(!t)throw new Error(e);return{size:t.size}}async unlink(e){delete this.files[e],delete this.lowerCaseFiles[e],this.usedFiles[e]=!0}async open(e,s,t){return this.files[e]}async read(e,s,t=0,i=s.byteLength,r=null){const n=e;return{bytesRead:i,buffer:await n.slice(0,0+i).arrayBuffer()}}async close(e){}_getFile(e,s){const t=this.files[e]||this.lowerCaseFiles[e];return t&&s&&(this.usedFiles[e]=!0),t}}exports.default=t;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"ikKD":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function(){return r.fetchFile}}),Object.defineProperty(exports,"readArrayBuffer",{enumerable:!0,get:function(){return t.readArrayBuffer}}),Object.defineProperty(exports,"readFileSync",{enumerable:!0,get:function(){return n.readFileSync}}),Object.defineProperty(exports,"writeFile",{enumerable:!0,get:function(){return o.writeFile}}),Object.defineProperty(exports,"writeFileSync",{enumerable:!0,get:function(){return o.writeFileSync}}),Object.defineProperty(exports,"setLoaderOptions",{enumerable:!0,get:function(){return i.setLoaderOptions}}),Object.defineProperty(exports,"registerLoaders",{enumerable:!0,get:function(){return u.registerLoaders}}),Object.defineProperty(exports,"_unregisterLoaders",{enumerable:!0,get:function(){return u._unregisterLoaders}}),Object.defineProperty(exports,"selectLoader",{enumerable:!0,get:function(){return a.selectLoader}}),Object.defineProperty(exports,"selectLoaderSync",{enumerable:!0,get:function(){return a.selectLoaderSync}}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return c.parse}}),Object.defineProperty(exports,"parseSync",{enumerable:!0,get:function(){return s.parseSync}}),Object.defineProperty(exports,"parseInBatches",{enumerable:!0,get:function(){return f.parseInBatches}}),Object.defineProperty(exports,"load",{enumerable:!0,get:function(){return b.load}}),Object.defineProperty(exports,"loadInBatches",{enumerable:!0,get:function(){return p.loadInBatches}}),Object.defineProperty(exports,"encode",{enumerable:!0,get:function(){return l.encode}}),Object.defineProperty(exports,"encodeSync",{enumerable:!0,get:function(){return l.encodeSync}}),Object.defineProperty(exports,"encodeInBatches",{enumerable:!0,get:function(){return l.encodeInBatches}}),Object.defineProperty(exports,"encodeText",{enumerable:!0,get:function(){return l.encodeText}}),Object.defineProperty(exports,"encodeURLtoURL",{enumerable:!0,get:function(){return l.encodeURLtoURL}}),Object.defineProperty(exports,"save",{enumerable:!0,get:function(){return d.save}}),Object.defineProperty(exports,"saveSync",{enumerable:!0,get:function(){return d.saveSync}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return m.setPathPrefix}}),Object.defineProperty(exports,"getPathPrefix",{enumerable:!0,get:function(){return m.getPathPrefix}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return m.resolvePath}}),Object.defineProperty(exports,"RequestScheduler",{enumerable:!0,get:function(){return m.RequestScheduler}}),Object.defineProperty(exports,"JSONLoader",{enumerable:!0,get:function(){return m.JSONLoader}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return m.isBrowser}}),Object.defineProperty(exports,"isWorker",{enumerable:!0,get:function(){return m.isWorker}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return m.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return m.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return m.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return m.document}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return m.assert}}),Object.defineProperty(exports,"forEach",{enumerable:!0,get:function(){return m.forEach}}),Object.defineProperty(exports,"concatenateArrayBuffersAsync",{enumerable:!0,get:function(){return m.concatenateArrayBuffersAsync}}),Object.defineProperty(exports,"makeTextDecoderIterator",{enumerable:!0,get:function(){return m.makeTextDecoderIterator}}),Object.defineProperty(exports,"makeTextEncoderIterator",{enumerable:!0,get:function(){return m.makeTextEncoderIterator}}),Object.defineProperty(exports,"makeLineIterator",{enumerable:!0,get:function(){return m.makeLineIterator}}),Object.defineProperty(exports,"makeNumberedLineIterator",{enumerable:!0,get:function(){return m.makeNumberedLineIterator}}),Object.defineProperty(exports,"makeIterator",{enumerable:!0,get:function(){return y.makeIterator}}),Object.defineProperty(exports,"makeStream",{enumerable:!0,get:function(){return P.makeStream}}),Object.defineProperty(exports,"makeDOMStream",{enumerable:!0,get:function(){return g.makeDOMStream}}),Object.defineProperty(exports,"makeNodeStream",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"NullWorkerLoader",{enumerable:!0,get:function(){return O.NullWorkerLoader}}),Object.defineProperty(exports,"NullLoader",{enumerable:!0,get:function(){return O.NullLoader}}),Object.defineProperty(exports,"_fetchProgress",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"_BrowserFileSystem",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"isPureObject",{enumerable:!0,get:function(){return k.isPureObject}}),Object.defineProperty(exports,"isPromise",{enumerable:!0,get:function(){return k.isPromise}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return k.isIterable}}),Object.defineProperty(exports,"isAsyncIterable",{enumerable:!0,get:function(){return k.isAsyncIterable}}),Object.defineProperty(exports,"isIterator",{enumerable:!0,get:function(){return k.isIterator}}),Object.defineProperty(exports,"isResponse",{enumerable:!0,get:function(){return k.isResponse}}),Object.defineProperty(exports,"isReadableStream",{enumerable:!0,get:function(){return k.isReadableStream}}),Object.defineProperty(exports,"isWritableStream",{enumerable:!0,get:function(){return k.isWritableStream}});var r=require("./lib/fetch/fetch-file"),t=require("./lib/fetch/read-array-buffer"),n=require("./lib/fetch/read-file"),o=require("./lib/fetch/write-file"),i=require("./lib/api/set-loader-options"),u=require("./lib/api/register-loaders"),a=require("./lib/api/select-loader"),c=require("./lib/api/parse"),s=require("./lib/api/parse-sync"),f=require("./lib/api/parse-in-batches"),b=require("./lib/api/load"),p=require("./lib/api/load-in-batches"),l=require("./lib/api/encode"),d=require("./lib/api/save"),m=require("@loaders.gl/loader-utils"),y=require("./iterators/make-iterator/make-iterator"),P=require("./iterators/make-stream/make-stream"),g=require("./iterators/make-stream/make-dom-stream"),x=S(require("./iterators/make-stream/make-node-stream")),O=require("./null-loader"),j=S(require("./lib/progress/fetch-progress")),h=S(require("./lib/filesystems/browser-filesystem")),k=require("./javascript-utils/is-type");function S(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/fetch/fetch-file":"b40H","./lib/fetch/read-array-buffer":"Q1FV","./lib/fetch/read-file":"WRQd","./lib/fetch/write-file":"YW6i","./lib/api/set-loader-options":"dAxI","./lib/api/register-loaders":"k3wd","./lib/api/select-loader":"W9BO","./lib/api/parse":"t8Kj","./lib/api/parse-sync":"PAJp","./lib/api/parse-in-batches":"tR2z","./lib/api/load":"CA4j","./lib/api/load-in-batches":"C8HI","./lib/api/encode":"SWoI","./lib/api/save":"DUKs","@loaders.gl/loader-utils":"oHIH","./iterators/make-iterator/make-iterator":"wlle","./iterators/make-stream/make-stream":"QeuK","./iterators/make-stream/make-dom-stream":"PyjH","./iterators/make-stream/make-node-stream":"sC8V","./null-loader":"aJIU","./lib/progress/fetch-progress":"HD9x","./lib/filesystems/browser-filesystem":"EeUV","./javascript-utils/is-type":"Oy8e"}],"pSqu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0;const e="3.0.12";exports.VERSION=e;
},{}],"tUCp":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=e;
},{}],"TrlH":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var o=arguments[3],e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeVersion=exports.isWorker=exports.isBrowser=exports.document=exports.global=exports.window=exports.self=void 0;const s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o&&o,document:"undefined"!=typeof document&&document},t=s.self||s.window||s.global;exports.self=t;const r=s.window||s.self||s.global;exports.window=r;const n=s.global||s.self||s.window;exports.global=n;const i=s.document||{};exports.document=i;const d="object"!=typeof e||"[object process]"!==String(e)||!0;exports.isBrowser=d;const p="function"==typeof importScripts;exports.isWorker=p;const l=void 0!==e&&e.version&&/v([0-9]*)/.exec(e.version),c=l&&parseFloat(l[1])||0;exports.nodeVersion=c;
},{"process":"g5IB"}],"xUsy":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImageTypeSupported=s,exports.getDefaultImageType=n;var e=require("../utils/globals");const{_parseImageNode:r}=e.global,t="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,o=Boolean(r),i=!!e.isBrowser||o;function s(e){switch(e){case"auto":return a||t||i;case"imagebitmap":return a;case"image":return t;case"data":return i;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}function n(){if(a)return"imagebitmap";if(t)return"image";if(i)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}
},{"../utils/globals":"TrlH"}],"fZkF":[function(require,module,exports) {
"use strict";function e(e){return Boolean(r(e))}function t(e){switch(a(e)){case"imagebitmap":e.close()}}function a(e){const t=r(e);if(!t)throw new Error("Not an image");return t}function n(e){return i(e)}function i(e){switch(a(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function r(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isImage=e,exports.deleteImage=t,exports.getImageType=a,exports.getImageSize=n,exports.getImageData=i;
},{}],"xgTF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSVG=n,exports.getBlobOrSVGDataUrl=o,exports.getBlob=r;const e=/^data:image\/svg\+xml/,t=/\.svg((\?|#).*)?$/;function n(n){return n&&(e.test(n)||t.test(n))}function o(e,t){if(n(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(o){throw new Error(o.message)}return`data:image/svg+xml;base64,${btoa(t)}`}return r(e,t)}function r(e,t){if(n(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}
},{}],"ZjNq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.loadToImage=r;var e=require("./svg-utils");async function t(t,o,a){const n=(0,e.getBlobOrSVGDataUrl)(t,a),c=self.URL||self.webkitURL,s="string"!=typeof n&&c.createObjectURL(n);try{return await r(s||n,o)}finally{s&&c.revokeObjectURL(s)}}async function r(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((t,o)=>{try{r.onload=(()=>t(r)),r.onerror=(t=>o(new Error(`Could not load image ${e}: ${t}`)))}catch(a){o(a)}})}
},{"./svg-utils":"xgTF"}],"Mwvl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("./svg-utils"),t=r(require("./parse-to-image"));function r(e){return e&&e.__esModule?e:{default:e}}const a={};let n=!0;async function i(r,a,n){let i;if((0,e.isSVG)(n)){i=await(0,t.default)(r,a,n)}else i=(0,e.getBlob)(r,n);const o=a&&a.imagebitmap;return await u(i,o)}async function u(e,t=null){if(!o(t)&&n||(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),n=!1}return await createImageBitmap(e)}function o(e){for(const t in e||a)return!1;return!0}
},{"./svg-utils":"xgTF","./parse-to-image":"ZjNq"}],"XFGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBinaryImageMetadata=n,exports.getBmpMetadata=g;const t=!1,e=!0;function n(t){const e=o(t);return i(e)||a(e)||r(e)||g(e)}function i(e){const n=o(e);return n.byteLength>=24&&2303741511===n.getUint32(0,t)?{mimeType:"image/png",width:n.getUint32(16,t),height:n.getUint32(20,t)}:null}function r(n){const i=o(n);return i.byteLength>=10&&1195984440===i.getUint32(0,t)?{mimeType:"image/gif",width:i.getUint16(6,e),height:i.getUint16(8,e)}:null}function g(n){const i=o(n);return i.byteLength>=14&&16973===i.getUint16(0,t)&&i.getUint32(2,e)===i.byteLength?{mimeType:"image/bmp",width:i.getUint32(18,e),height:i.getUint32(22,e)}:null}function a(e){const n=o(e);if(!(n.byteLength>=3&&65496===n.getUint16(0,t)&&255===n.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=u();let g=2;for(;g+9<n.byteLength;){const e=n.getUint16(g,t);if(r.has(e))return{mimeType:"image/jpeg",height:n.getUint16(g+5,t),width:n.getUint16(g+7,t)};if(!i.has(e))return null;g+=2,g+=n.getUint16(g,t)}return null}function u(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function o(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}
},{}],"wlvc":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../utils/globals"),r=require("../utils/assert"),a=require("../category-api/binary-image-api");function t(t,i){const{mimeType:s}=(0,a.getBinaryImageMetadata)(t)||{},{_parseImageNode:u}=e.global;return(0,r.assert)(u),u(t,s,i)}
},{"../utils/globals":"TrlH","../utils/assert":"tUCp","../category-api/binary-image-api":"XFGE"}],"acKO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../utils/assert"),a=require("../category-api/image-type"),t=require("../category-api/parsed-image-api"),r=s(require("./parse-to-image")),i=s(require("./parse-to-image-bitmap")),u=s(require("./parse-to-node-image"));function s(e){return e&&e.__esModule?e:{default:e}}async function o(a,s,o){const c=((s=s||{}).image||{}).type||"auto",{url:d}=o||{};let g;switch(p(c)){case"imagebitmap":g=await(0,i.default)(a,s,d);break;case"image":g=await(0,r.default)(a,s,d);break;case"data":g=await(0,u.default)(a,s);break;default:(0,e.assert)(!1)}return"data"===c&&(g=(0,t.getImageData)(g)),g}function p(e){switch(e){case"auto":case"data":return(0,a.getDefaultImageType)();default:return(0,a.isImageTypeSupported)(e),e}}
},{"../utils/assert":"tUCp","../category-api/image-type":"xUsy","../category-api/parsed-image-api":"fZkF","./parse-to-image":"ZjNq","./parse-to-image-bitmap":"Mwvl","./parse-to-node-image":"wlvc"}],"Aq3y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._typecheckImageLoader=exports.ImageLoader=void 0;var e=require("./lib/utils/version"),a=o(require("./lib/parsers/parse-image")),i=require("./lib/category-api/binary-image-api");function o(e){return e&&e.__esModule?e:{default:e}}const r=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],t=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],g={id:"image",module:"images",name:"Images",version:e.VERSION,mimeTypes:t,extensions:r,parse:a.default,tests:[e=>Boolean((0,i.getBinaryImageMetadata)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};exports.ImageLoader=g;const s=g;exports._typecheckImageLoader=s;
},{"./lib/utils/version":"pSqu","./lib/parsers/parse-image":"acKO","./lib/category-api/binary-image-api":"XFGE"}],"I3ae":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeImage=i;var e=require("../utils/globals"),t=require("../category-api/parsed-image-api");const{_encodeImageNode:a}=e.global;async function i(e,t){return(t=t||{}).image=t.image||{},a?a(e,{type:t.image.mimeType}):n(e,t)}let r=!0;async function n(e,a){const{mimeType:i,jpegQuality:n}=a.image,{width:m,height:g}=(0,t.getImageSize)(e),c=document.createElement("canvas");c.width=m,c.height=g,o(e,c);const d=await new Promise(e=>{if(n&&r)try{return void c.toBlob(e,i,n)}catch(t){r=!1}c.toBlob(e,i)});if(!d)throw new Error("image encoding failed");return await d.arrayBuffer()}function o(e,t,a=0,i=0){if(0===a&&0===i&&"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const a=t.getContext("bitmaprenderer");if(a)return a.transferFromImageBitmap(e),t}const r=t.getContext("2d");if(e.data){const a=new Uint8ClampedArray(e.data),i=new ImageData(a,e.width,e.height);return r.putImageData(i,0,0),t}return r.drawImage(e,0,0),t}
},{"../utils/globals":"TrlH","../category-api/parsed-image-api":"fZkF"}],"iXQV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageWriter=void 0;var e=require("./lib/utils/version"),i=require("./lib/encoders/encode-image");const r={name:"Images",id:"image",module:"images",version:e.VERSION,extensions:["jpeg"],options:{image:{mimeType:"image/png",jpegQuality:null}},encode:i.encodeImage};exports.ImageWriter=r;
},{"./lib/utils/version":"pSqu","./lib/encoders/encode-image":"I3ae"}],"kCQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateUrl=t;var e=require("@loaders.gl/loader-utils"),r=require("../utils/assert");function t(t,s,l){let o=t;"function"==typeof t&&(o=t({...s,...l})),(0,r.assert)("string"==typeof o);const{baseUrl:n}=s;return n&&(o="/"===n[n.length-1]?`${n}${o}`:`${n}/${o}`),(0,e.resolvePath)(o)}
},{"@loaders.gl/loader-utils":"oHIH","../utils/assert":"tUCp"}],"tUfq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncDeepMap=n,exports.mapSubtree=e;const t=t=>t&&"object"==typeof t;async function n(t,n,r={}){return await e(t,n,r)}async function e(n,e,s){if(Array.isArray(n))return await a(n,e,s);if(t(n))return await r(n,e,s);const o=n;return await e(o,s)}async function r(t,n,r){const a=[],s={};for(const o in t){const c=e(t[o],n,r).then(t=>{s[o]=t});a.push(c)}return await Promise.all(a),s}async function a(t,n,r={}){const a=t.map(t=>e(t,n,r));return await Promise.all(a)}
},{}],"qUEG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepLoad=a,exports.shallowLoad=t;var e=require("./async-deep-map");async function a(a,r,n){return await(0,e.asyncDeepMap)(a,e=>t(e,r,n))}async function t(e,a,t){const r=await fetch(e,t.fetch),n=await r.arrayBuffer();return await a(n,t)}
},{"./async-deep-map":"tUfq"}],"qXUM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadImage=o,exports.getImageUrls=n,exports.getMipLevels=l;var e=require("../utils/assert"),t=s(require("../parsers/parse-image")),r=require("../category-api/parsed-image-api"),a=require("./generate-url"),i=require("./deep-load");function s(e){return e&&e.__esModule?e:{default:e}}async function o(e,r={}){const a=await n(e,r);return await(0,i.deepLoad)(a,t.default,r)}async function n(e,t,r={}){const i=t&&t.image&&t.image.mipLevels||0;return 0!==i?await u(e,i,t,r):(0,a.generateUrl)(e,t,r)}async function u(s,o,n,u){const g=[];if("auto"===o){const e=(0,a.generateUrl)(s,n,{...u,lod:0}),d=await(0,i.shallowLoad)(e,t.default,n),{width:c,height:h}=(0,r.getImageSize)(d);o=l({width:c,height:h}),g.push(e)}(0,e.assert)(o>0);for(let e=g.length;e<o;++e){const t=(0,a.generateUrl)(s,n,{...u,lod:e});g.push(t)}return g}function l({width:e,height:t}){return 1+Math.floor(Math.log2(Math.max(e,t)))}
},{"../utils/assert":"tUCp","../parsers/parse-image":"acKO","../category-api/parsed-image-api":"fZkF","./generate-url":"kCQP","./deep-load":"qUEG"}],"DNDh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ImageLoader",{enumerable:!0,get:function(){return e.ImageLoader}}),Object.defineProperty(exports,"ImageWriter",{enumerable:!0,get:function(){return r.ImageWriter}}),Object.defineProperty(exports,"getBinaryImageMetadata",{enumerable:!0,get:function(){return t.getBinaryImageMetadata}}),Object.defineProperty(exports,"isImageTypeSupported",{enumerable:!0,get:function(){return a.isImageTypeSupported}}),Object.defineProperty(exports,"getDefaultImageType",{enumerable:!0,get:function(){return a.getDefaultImageType}}),Object.defineProperty(exports,"isImage",{enumerable:!0,get:function(){return i.isImage}}),Object.defineProperty(exports,"getImageType",{enumerable:!0,get:function(){return i.getImageType}}),Object.defineProperty(exports,"getImageSize",{enumerable:!0,get:function(){return i.getImageSize}}),Object.defineProperty(exports,"getImageData",{enumerable:!0,get:function(){return i.getImageData}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return n.loadImage}});var e=require("./image-loader"),r=require("./image-writer"),t=require("./lib/category-api/binary-image-api"),a=require("./lib/category-api/image-type"),i=require("./lib/category-api/parsed-image-api"),n=require("./lib/texture-api/load-image");
},{"./image-loader":"Aq3y","./image-writer":"iXQV","./lib/category-api/binary-image-api":"XFGE","./lib/category-api/image-type":"xUsy","./lib/category-api/parsed-image-api":"fZkF","./lib/texture-api/load-image":"qXUM"}],"kvRt":[function(require,module,exports) {
function e(e){return e&&e.__esModule?e:{default:e}}module.exports=e,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"LNzP":[function(require,module,exports) {
function o(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(module.exports=o=function(o){return typeof o},module.exports.default=module.exports,module.exports.__esModule=!0):(module.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},module.exports.default=module.exports,module.exports.__esModule=!0),o(e)}module.exports=o,module.exports.default=module.exports,module.exports.__esModule=!0;
},{}],"hdG6":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var s=r(require("@babel/runtime/helpers/typeof")),t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===o?"undefined":(0,s.default)(o))&&o},l=t.self||t.window||t.global;exports.self=l;var n=t.window||t.self||t.global;exports.window=n;var d=t.global||t.self||t.window;exports.global=d;var p=t.document||{};exports.document=p;var i=t.process||{};exports.process=i;var u=console;exports.console=u;
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","process":"g5IB"}],"ym7l":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=r(require("@babel/runtime/helpers/typeof"));function n(r){if("undefined"!=typeof window&&"object"===(0,t.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,t.default)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":(0,t.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=r||n;return!!(o&&o.indexOf("Electron")>=0)}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","process":"g5IB"}],"rXmJ":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.isBrowserMainThread=n;var t=r(require("@babel/runtime/helpers/typeof")),u=r(require("./is-electron"));function i(){return!("object"===(void 0===e?"undefined":(0,t.default)(e))&&"[object process]"===String(e)&&!1)||(0,u.default)()}function n(){return i()&&"undefined"!=typeof document}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","./is-electron":"ym7l","process":"g5IB"}],"Vu5l":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var r=require("./globals"),i=e(require("./is-browser")),n=e(require("./is-electron"));function o(){return void 0!==r.window.orientation}function t(e){if(!e&&!(0,i.default)())return"Node";if((0,n.default)(e))return"Electron";var o="undefined"!=typeof navigator?navigator:{},t=e||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";var u=-1!==t.indexOf("MSIE "),a=-1!==t.indexOf("Trident/");return u||a?"IE":r.window.chrome?"Chrome":r.window.safari?"Safari":r.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","./globals":"hdG6","./is-browser":"rXmJ","./is-electron":"ym7l"}],"f0YS":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),r=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return t.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return t.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return t.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return t.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return t.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return t.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return n.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return o.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return u.default}});var t=require("./globals"),n=f(require("./is-browser")),o=f(require("./get-browser")),u=e(require("./is-electron"));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&Object.prototype.hasOwnProperty.call(e,f)){var l=u?Object.getOwnPropertyDescriptor(e,f):null;l&&(l.get||l.set)?Object.defineProperty(o,f,l):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o}
},{"@babel/runtime/helpers/interopRequireDefault":"kvRt","@babel/runtime/helpers/typeof":"LNzP","./globals":"hdG6","./is-browser":"rXmJ","./get-browser":"Vu5l","./is-electron":"ym7l"}],"d3vq":[function(require,module,exports) {
module.exports=require("./dist/es5/env");
},{"./dist/es5/env":"f0YS"}],"GVus":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("probe.gl"),r=new e.Log({id:"deck"});exports.default=r;
},{"probe.gl":"TYNK"}],"Bw3o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoggers=void 0;const t={attributeUpdateMessages:[]},a=1,e=2,o=3,n=4,c=2,r=a=>({"layer.changeFlag":(t,e,o)=>{a.log(3,"".concat(t.id," ").concat(e,": "),o[e])()},"layer.initialize":t=>{a.log(1,"Initializing ".concat(t))()},"layer.update":(t,e)=>{if(e){const e=t.getChangeFlags();a.log(2,"Updating ".concat(t," because: ").concat(Object.keys(e).filter(t=>e[t]).join(", ")))()}else a.log(4,"".concat(t," does not need update"))()},"layer.matched":(t,e)=>{e&&a.log(4,"Matched ".concat(t,", state transfered"))()},"layer.finalize":t=>{a.log(1,"Finalizing ".concat(t))()},"compositeLayer.renderLayers":(t,e,o)=>{e?a.log(2,"Composite layer rendered new subLayers ".concat(t),o)():a.log(4,"Composite layer reused subLayers ".concat(t),o)()},"layerManager.setLayers":(t,e,o)=>{e&&a.log(2,"Updating ".concat(o.length," deck layers"))()},"layerManager.activateViewport":(t,e)=>{a.log(3,"Viewport changed",e)()},"attributeManager.invalidate":(t,e,o)=>{a.log(1,o?"invalidated attributes ".concat(o," (").concat(e,") for ").concat(t.id):"invalidated all attributes for ".concat(t.id))()},"attributeManager.updateStart":a=>{t.attributeUpdateMessages.length=0,t.attributeManagerUpdateStart=Date.now()},"attributeManager.updateEnd":(e,o)=>{const n=Math.round(Date.now()-t.attributeManagerUpdateStart);a.groupCollapsed(2,"Updated attributes for ".concat(o," instances in ").concat(e.id," in ").concat(n,"ms"))();for(const c of t.attributeUpdateMessages)a.log(3,c)();a.groupEnd(2)()},"attribute.updateStart":a=>{t.attributeUpdateStart=Date.now()},"attribute.allocate":(a,e)=>{const o="".concat(a.id," allocated ").concat(e);t.attributeUpdateMessages.push(o)},"attribute.updateEnd":(a,e)=>{const o=Math.round(Date.now()-t.attributeUpdateStart),n="".concat(a.id," updated ").concat(e," in ").concat(o,"ms");t.attributeUpdateMessages.push(n)},"deckRenderer.renderLayers":(t,e,o)=>{const{pass:n,redrawReason:c,stats:r}=o;for(const s of e){const{totalCount:e,visibleCount:o,compositeCount:i,pickableCount:d}=s,l=e-i-o;a.log(2,"RENDER #".concat(t.renderCount,"   ").concat(o," (of ").concat(e," layers) to ").concat(n," because ").concat(c,"   (").concat(l," hidden, ").concat(i," composite ").concat(d," pickable)"))(),r&&r.get("Redraw Layers").add(o)}}});exports.getLoggers=r;
},{}],"EEoF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=u,exports.default=o;var e=r(require("../utils/log")),t=require("./loggers");function r(e){return e&&e.__esModule?e:{default:e}}let l={};function u(e){l=e}function o(t){e.default.level>0&&l[t]&&l[t].call(...arguments)}
},{"../utils/log":"GVus","./loggers":"Bw3o"}],"DDDc":[function(require,module,exports) {
"use strict";function e(e){const t=e[0],o=e[e.length-1];return"{"===t&&"}"===o||"["===t&&"]"===o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:e,parseTextSync:JSON.parse};exports.default=t;
},{}],"N6pv":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@loaders.gl/core"),r=require("@loaders.gl/images"),l=require("probe.gl/env"),o=d(require("../utils/log")),t=require("../debug"),a=d(require("../utils/json-loader"));function d(e){return e&&e.__esModule?e:{default:e}}const s="8.5.10",i=l.global.deck&&l.global.deck.VERSION;if(i&&i!==s)throw new Error("deck.gl - multiple versions detected: ".concat(i," vs ").concat(s));i||(o.default.log(1,"deck.gl ".concat(s))(),l.global.deck=Object.assign(l.global.deck||{},{VERSION:s,version:s,log:o.default,_registerLoggers:t.register}),(0,e.registerLoaders)([a.default,[r.ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]]));var g=l.global.deck;exports.default=g;
},{"@loaders.gl/core":"ikKD","@loaders.gl/images":"DNDh","probe.gl/env":"d3vq","../utils/log":"GVus","../debug":"EEoF","../utils/json-loader":"DDDc"}],"Wd6X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("probe.gl");const o=new e.Log({id:"luma.gl"});exports.log=o;
},{"probe.gl":"TYNK"}],"uPB9":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=e;
},{}],"E5mh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebGL=r,exports.isWebGL2=s,exports.getWebGL2Context=i,exports.assertWebGLContext=u,exports.assertWebGL2Context=x,exports.ERR_WEBGL2=exports.ERR_WEBGL=void 0;var e=require("./assert");const n="Invalid WebGLRenderingContext",t=n;exports.ERR_WEBGL=t;const o="Requires WebGL2";function r(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&Number.isFinite(e._version)))}function s(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function i(e){return s(e)?e:null}function u(t){return(0,e.assert)(r(t),n),t}function x(n){return(0,e.assert)(s(n),o),n}exports.ERR_WEBGL2=o;
},{"./assert":"uPB9"}],"RzJJ":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyfillVertexArrayObject=o;var t=require("probe.gl/env");const e={};function r(e){t.global.console&&t.global.console.error&&t.global.console.error(e)}function i(e){t.global.console&&t.global.console.log&&t.global.console.log(e)}function n(t,i){e[t]=!0,void 0!==i&&r(i)}function a(t){const r=t.getError;t.getError=function(){let i;do{0!==(i=r.apply(t))&&(e[i]=!0)}while(0!==i);for(i in e)if(e[i])return delete e[i],parseInt(i,10);return 0}}const s=function t(e){const r=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const e=new t.VertexAttrib(r);this.attribs[i]=e}this.maxAttrib=0};(s.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const c=function(t){const e=this;this.gl=t,a(t);const r=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:r.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const i=e.currentVertexArrayObject;return i.maxAttrib=Math.max(i.maxAttrib,t),i.attribs[t].enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const i=e.currentVertexArrayObject;return i.maxAttrib=Math.max(i.maxAttrib,t),i.attribs[t].enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,i){switch(t){case 34962:e.currentArrayBuffer=i;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=i}return r.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,i){const n=e.currentVertexArrayObject.attribs[t];switch(i){case 34975:return n.buffer;case 34338:return n.enabled;case 34339:return n.size;case 34340:return n.stride;case 34341:return n.type;case 34922:return n.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,i,n,a,s,c){const o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,t);const l=o.attribs[t];return l.buffer=e.currentArrayBuffer,l.size=i,l.type=n,l.normalized=a,l.stride=s,l.offset=c,l.recache(),r.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{i("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};function o(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const r=t.getExtension;t.getExtension=function(e){const i=r.call(this,e);return i||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new c(this)),this.__OESVertexArrayObject))}}c.prototype.VERTEX_ARRAY_BINDING_OES=34229,c.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new s(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},c.prototype.createVertexArrayOES=function(){const t=new s(this);return this.vertexArrayObjects.push(t),t},c.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},c.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof s&&t.hasBeenBound&&t.ext===this)},c.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void n(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const a=this.currentVertexArrayObject;if(i===a)return;i&&a.elementArrayBuffer===i.elementArrayBuffer||r.bindBuffer.call(e,34963,a.elementArrayBuffer);let s=this.currentArrayBuffer;const c=Math.max(i?i.maxAttrib:0,a.maxAttrib);for(let n=0;n<=c;n++){const t=a.attribs[n],c=i?i.attribs[n]:null;if(i&&t.enabled===c.enabled||(t.enabled?r.enableVertexAttribArray.call(e,n):r.disableVertexAttribArray.call(e,n)),t.enabled){let a=!1;i&&t.buffer===c.buffer||(s!==t.buffer&&(r.bindBuffer.call(e,34962,t.buffer),s=t.buffer),a=!0),(a||t.cached!==c.cached)&&r.vertexAttribPointer.call(e,n,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(e,34962,this.currentArrayBuffer)};
},{"probe.gl/env":"d3vq"}],"pXPX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParameterPolyfill=W;var e=require("../utils/webgl-checks");const t="OES_element_index",n="WEBGL_draw_buffers",i="EXT_disjoint_timer_query",_="EXT_disjoint_timer_query_webgl2",r="EXT_texture_filter_anisotropic",o="WEBGL_debug_renderer_info",s=35723,E=4352,u=36795,c=34047,T=37445,x=37446,G=t=>(0,e.isWebGL2)(t)?void 0:0,L={3074:t=>(0,e.isWebGL2)(t)?void 0:36064,35723:t=>(0,e.isWebGL2)(t)?void 0:4352,35977:G,32937:G,36795:(t,n)=>{const r=(0,e.isWebGL2)(t)?t.getExtension(_):t.getExtension(i);return r&&r.GPU_DISJOINT_EXT?n(r.GPU_DISJOINT_EXT):0},37445:(e,t)=>{const n=e.getExtension(o);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(e,t)=>{const n=e.getExtension(o);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(e,t)=>{const n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:G,35071:G,37447:G,36063:(t,i)=>{if(!(0,e.isWebGL2)(t)){const e=t.getExtension(n);return e?i(e.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:G,35374:G,35377:G,34852:t=>{if(!(0,e.isWebGL2)(t)){const e=t.getExtension(n);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:e=>e.getExtension(t)?2147483647:65535,33001:e=>e.getExtension(t)?16777216:65535,33e3:e=>16777216,37157:G,35373:G,35657:G,36183:G,37137:G,34045:G,35978:G,35979:G,35968:G,35376:G,35375:G,35659:G,37154:G,35371:G,35658:G,35076:G,35077:G,35380:G};function W(e,t,n){const i=L[n],_="function"==typeof i?i(e,t,n):i;return void 0!==_?_:t(n)}
},{"../utils/webgl-checks":"E5mh"}],"tsyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WEBGL2_CONTEXT_OVERRIDES=exports.WEBGL2_CONTEXT_POLYFILLS=void 0;var e=require("../utils/assert"),r=require("../utils/webgl-checks"),t=require("./get-parameter-polyfill");const s="OES_vertex_array_object",a="ANGLE_instanced_arrays",i="WEBGL_draw_buffers",n="EXT_disjoint_timer_query",u="EXT_texture_filter_anisotropic",o="VertexArray requires WebGL2 or OES_vertex_array_object extension";function c(e,t){return{webgl2:(0,r.isWebGL2)(e),ext:e.getExtension(t)}}const _={[s]:{meta:{suffix:"OES"},createVertexArray:()=>{(0,e.assert)(!1,o)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[a]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(r,t){(0,e.assert)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[i]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{(0,e.assert)(!1)}},[n]:{meta:{suffix:"EXT"},createQuery:()=>{(0,e.assert)(!1)},deleteQuery:()=>{(0,e.assert)(!1)},beginQuery:()=>{(0,e.assert)(!1)},endQuery:()=>{},getQuery(e,r){return this.getQueryObject(e,r)},getQueryParameter(e,r){return this.getQueryObject(e,r)},getQueryObject:()=>{}}};exports.WEBGL2_CONTEXT_POLYFILLS=_;const E={readBuffer:(e,t,s)=>{(0,r.isWebGL2)(e)&&t(s)},getVertexAttrib:(e,r,t,s)=>{const{webgl2:i,ext:n}=c(e,a);let u;switch(s){case 35069:u=!!i&&void 0;break;case 35070:u=i||n?void 0:0}return void 0!==u?u:r(t,s)},getProgramParameter:(e,t,s,a)=>{if(!(0,r.isWebGL2)(e))switch(a){case 35967:return 35981;case 35971:case 35382:return 0}return t(s,a)},getInternalformatParameter:(e,t,s,a,i)=>{if(!(0,r.isWebGL2)(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(s,a,i)},getTexParameter(e,r,t,s){switch(s){case 34046:const{extensions:r}=e.luma,t=r.EXT_texture_filter_anisotropic;s=t&&t.TEXTURE_MAX_ANISOTROPY_EXT||34046}return r(t,s)},getParameter:t.getParameterPolyfill,hint:(e,r,t,s)=>r(t,s)};exports.WEBGL2_CONTEXT_OVERRIDES=E;
},{"../utils/assert":"uPB9","../utils/webgl-checks":"E5mh","./get-parameter-polyfill":"pXPX"}],"FLAS":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyfillContext=r;var e=require("./polyfill-vertex-array-object"),o=require("../utils/assert"),n=require("./polyfill-table");function r(t){t.luma=t.luma||{};const{luma:o}=t;return o.polyfilled||((0,e.polyfillVertexArrayObject)(t),i(t),f(t,n.WEBGL2_CONTEXT_POLYFILLS),s(t,{target:o,target2:t}),o.polyfilled=!0),t}const l=void 0!==t?t:window;function i(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const o of e)t.luma[o]=t.getExtension(o)}function s(t,{target:e,target2:o}){Object.keys(n.WEBGL2_CONTEXT_OVERRIDES).forEach(r=>{if("function"==typeof n.WEBGL2_CONTEXT_OVERRIDES[r]){const l=t[r]?t[r].bind(t):()=>{},i=n.WEBGL2_CONTEXT_OVERRIDES[r].bind(null,t,l);e[r]=i,o[r]=i}})}function f(t,e){for(const o of Object.getOwnPropertyNames(e))"overrides"!==o&&a(t,{extension:o,target:t.luma,target2:t})}function a(t,{extension:e,target:r,target2:l}){const i=n.WEBGL2_CONTEXT_POLYFILLS[e];(0,o.assert)(i);const{meta:s={}}=i,{suffix:f=""}=s,a=t.getExtension(e);for(const o of Object.keys(i)){const e=`${o}${f}`;let n=null;"meta"===o||"function"==typeof t[o]||(a&&"function"==typeof a[e]?n=((...t)=>a[e](...t)):"function"==typeof i[o]&&(n=i[o].bind(r))),n&&(r[o]=n,l[o]=n)}}l.polyfillContext=r;
},{"./polyfill-vertex-array-object":"RzJJ","../utils/assert":"uPB9","./polyfill-table":"tsyS"}],"tvxq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GL_PARAMETER_GETTERS=exports.GL_HOOKED_SETTERS=exports.GL_COMPOSITE_PARAMETER_SETTERS=exports.GL_PARAMETER_SETTERS=exports.GL_PARAMETER_DEFAULTS=void 0;var e=require("../utils/webgl-checks");const n={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0};exports.GL_PARAMETER_DEFAULTS=n;const t=(e,n,t)=>n?e.enable(t):e.disable(t),l=(e,n,t)=>e.hint(t,n),a=(e,n,t)=>e.pixelStorei(t,n),r=(n,t)=>{const l=(0,e.isWebGL2)(n)?36009:36160;return n.bindFramebuffer(l,t)},c=(e,n)=>e.bindFramebuffer(36008,n);function s(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const o={3042:t,32773:(e,n)=>e.blendColor(...n),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,n)=>e.clearColor(...n),3107:(e,n)=>e.colorMask(...n),2884:t,2885:(e,n)=>e.cullFace(n),2929:t,2931:(e,n)=>e.clearDepth(n),2932:(e,n)=>e.depthFunc(n),2928:(e,n)=>e.depthRange(...n),2930:(e,n)=>e.depthMask(n),3024:t,35723:l,36006:r,2886:(e,n)=>e.frontFace(n),33170:l,2849:(e,n)=>e.lineWidth(n),32823:t,32824:"polygonOffset",10752:"polygonOffset",35977:t,32938:"sampleCoverage",32939:"sampleCoverage",3089:t,3088:(e,n)=>e.scissor(...n),2960:t,2961:(e,n)=>e.clearStencil(n),2968:(e,n)=>e.stencilMaskSeparate(1028,n),36005:(e,n)=>e.stencilMaskSeparate(1029,n),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,n)=>e.viewport(...n),3333:a,3317:a,37440:a,37441:a,37443:a,3330:a,3332:a,3331:a,36010:c,3314:a,32878:a,3316:a,3315:a,32877:a,framebuffer:(e,n)=>{const t=n&&"handle"in n?n.handle:n;return e.bindFramebuffer(36160,t)},blend:(e,n)=>n?e.enable(3042):e.disable(3042),blendColor:(e,n)=>e.blendColor(...n),blendEquation:(e,n)=>{n=s(n)?n:[n,n],e.blendEquationSeparate(...n)},blendFunc:(e,n)=>{n=s(n)&&2===n.length?[...n,...n]:n,e.blendFuncSeparate(...n)},clearColor:(e,n)=>e.clearColor(...n),clearDepth:(e,n)=>e.clearDepth(n),clearStencil:(e,n)=>e.clearStencil(n),colorMask:(e,n)=>e.colorMask(...n),cull:(e,n)=>n?e.enable(2884):e.disable(2884),cullFace:(e,n)=>e.cullFace(n),depthTest:(e,n)=>n?e.enable(2929):e.disable(2929),depthFunc:(e,n)=>e.depthFunc(n),depthMask:(e,n)=>e.depthMask(n),depthRange:(e,n)=>e.depthRange(...n),dither:(e,n)=>n?e.enable(3024):e.disable(3024),derivativeHint:(e,n)=>{e.hint(35723,n)},frontFace:(e,n)=>e.frontFace(n),mipmapHint:(e,n)=>e.hint(33170,n),lineWidth:(e,n)=>e.lineWidth(n),polygonOffsetFill:(e,n)=>n?e.enable(32823):e.disable(32823),polygonOffset:(e,n)=>e.polygonOffset(...n),sampleCoverage:(e,n)=>e.sampleCoverage(...n),scissorTest:(e,n)=>n?e.enable(3089):e.disable(3089),scissor:(e,n)=>e.scissor(...n),stencilTest:(e,n)=>n?e.enable(2960):e.disable(2960),stencilMask:(e,n)=>{n=s(n)?n:[n,n];const[t,l]=n;e.stencilMaskSeparate(1028,t),e.stencilMaskSeparate(1029,l)},stencilFunc:(e,n)=>{n=s(n)&&3===n.length?[...n,...n]:n;const[t,l,a,r,c,o]=n;e.stencilFuncSeparate(1028,t,l,a),e.stencilFuncSeparate(1029,r,c,o)},stencilOp:(e,n)=>{n=s(n)&&3===n.length?[...n,...n]:n;const[t,l,a,r,c,o]=n;e.stencilOpSeparate(1028,t,l,a),e.stencilOpSeparate(1029,r,c,o)},viewport:(e,n)=>e.viewport(...n)};function i(e,n,t){return void 0!==n[e]?n[e]:t[e]}exports.GL_PARAMETER_SETTERS=o;const p={blendEquation:(e,n,t)=>e.blendEquationSeparate(i(32777,n,t),i(34877,n,t)),blendFunc:(e,n,t)=>e.blendFuncSeparate(i(32969,n,t),i(32968,n,t),i(32971,n,t),i(32970,n,t)),polygonOffset:(e,n,t)=>e.polygonOffset(i(32824,n,t),i(10752,n,t)),sampleCoverage:(e,n,t)=>e.sampleCoverage(i(32938,n,t),i(32939,n,t)),stencilFuncFront:(e,n,t)=>e.stencilFuncSeparate(1028,i(2962,n,t),i(2967,n,t),i(2963,n,t)),stencilFuncBack:(e,n,t)=>e.stencilFuncSeparate(1029,i(34816,n,t),i(36003,n,t),i(36004,n,t)),stencilOpFront:(e,n,t)=>e.stencilOpSeparate(1028,i(2964,n,t),i(2965,n,t),i(2966,n,t)),stencilOpBack:(e,n,t)=>e.stencilOpSeparate(1029,i(34817,n,t),i(34818,n,t),i(34819,n,t))};exports.GL_COMPOSITE_PARAMETER_SETTERS=p;const u={enable:(e,n)=>e({[n]:!0}),disable:(e,n)=>e({[n]:!1}),pixelStorei:(e,n,t)=>e({[n]:t}),hint:(e,n,t)=>e({[n]:t}),bindFramebuffer:(e,n,t)=>{switch(n){case 36160:return e({36006:t,36010:t});case 36009:return e({36006:t});case 36008:return e({36010:t});default:return null}},blendColor:(e,n,t,l,a)=>e({32773:new Float32Array([n,t,l,a])}),blendEquation:(e,n)=>e({32777:n,34877:n}),blendEquationSeparate:(e,n,t)=>e({32777:n,34877:t}),blendFunc:(e,n,t)=>e({32969:n,32968:t,32971:n,32970:t}),blendFuncSeparate:(e,n,t,l,a)=>e({32969:n,32968:t,32971:l,32970:a}),clearColor:(e,n,t,l,a)=>e({3106:new Float32Array([n,t,l,a])}),clearDepth:(e,n)=>e({2931:n}),clearStencil:(e,n)=>e({2961:n}),colorMask:(e,n,t,l,a)=>e({3107:[n,t,l,a]}),cullFace:(e,n)=>e({2885:n}),depthFunc:(e,n)=>e({2932:n}),depthRange:(e,n,t)=>e({2928:new Float32Array([n,t])}),depthMask:(e,n)=>e({2930:n}),frontFace:(e,n)=>e({2886:n}),lineWidth:(e,n)=>e({2849:n}),polygonOffset:(e,n,t)=>e({32824:n,10752:t}),sampleCoverage:(e,n,t)=>e({32938:n,32939:t}),scissor:(e,n,t,l,a)=>e({3088:new Int32Array([n,t,l,a])}),stencilMask:(e,n)=>e({2968:n,36005:n}),stencilMaskSeparate:(e,n,t)=>e({[1028===n?2968:36005]:t}),stencilFunc:(e,n,t,l)=>e({2962:n,2967:t,2963:l,34816:n,36003:t,36004:l}),stencilFuncSeparate:(e,n,t,l,a)=>e({[1028===n?2962:34816]:t,[1028===n?2967:36003]:l,[1028===n?2963:36004]:a}),stencilOp:(e,n,t,l)=>e({2964:n,2965:t,2966:l,34817:n,34818:t,34819:l}),stencilOpSeparate:(e,n,t,l,a)=>e({[1028===n?2964:34817]:t,[1028===n?2965:34818]:l,[1028===n?2966:34819]:a}),viewport:(e,n,t,l,a)=>e({2978:[n,t,l,a]})};exports.GL_HOOKED_SETTERS=u;const d=(e,n)=>e.isEnabled(n),F={3042:d,2884:d,2929:d,3024:d,32823:d,32926:d,32928:d,3089:d,2960:d,35977:d};exports.GL_PARAMETER_GETTERS=F;
},{"../utils/webgl-checks":"E5mh"}],"sNqS":[function(require,module,exports) {
"use strict";function r(r){for(const e in r)return!1;return!0}function e(r,e){if(r===e)return!0;const t=Array.isArray(r)||ArrayBuffer.isView(r),n=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&n&&r.length===e.length){for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isObjectEmpty=r,exports.deepArrayEqual=e;
},{}],"XIFr":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackContextState=u,exports.pushContextState=h,exports.popContextState=l;var e=require("./webgl-parameter-tables"),a=require("./unified-parameter-api"),s=require("../utils/assert"),n=require("../utils/utils");function c(t,e){const a=t[e].bind(t);t[e]=function(...e){const s=e[0];return s in t.state.cache||(t.state.cache[s]=a(...e)),t.state.enable?t.state.cache[s]:a(...e)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function r(t,e,a){const s=t[e].bind(t);t[e]=function(...e){const{valueChanged:n,oldValue:c}=a(t.state._updateCache,...e);return n&&s(...e),c},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function o(t){const e=t.useProgram.bind(t);t.useProgram=function(a){t.state.program!==a&&(e(a),t.state.program=a)}}class i{constructor(t,{copyState:s=!1,log:n=(()=>{})}={}){this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=s?(0,a.getParameters)(t):Object.assign({},e.GL_PARAMETER_DEFAULTS),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(t={}){this.stateStack.push({})}pop(){(0,s.assert)(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];(0,a.setParameters)(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,a=!1;const c=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const r in t){(0,s.assert)(void 0!==r);const o=t[r],i=this.cache[r];(0,n.deepArrayEqual)(o,i)||(a=!0,e=i,!c||r in c||(c[r]=i),this.cache[r]=o)}return{valueChanged:a,oldValue:e}}}function u(a,n={}){const{enable:u=!0,copyState:h}=n;if((0,s.assert)(void 0!==h),!a.state){const s=void 0!==t?t:window,{polyfillContext:n}=s;n&&n(a),a.state=new i(a,{copyState:h}),o(a);for(const t in e.GL_HOOKED_SETTERS){r(a,t,e.GL_HOOKED_SETTERS[t])}c(a,"getParameter"),c(a,"isEnabled")}return a.state.enable=u,a}function h(t){t.state||u(t,{copyState:!1}),t.state.push()}function l(t){(0,s.assert)(t.state),t.state.pop()}
},{"./webgl-parameter-tables":"tvxq","./unified-parameter-api":"TZJt","../utils/assert":"uPB9","../utils/utils":"sNqS"}],"TZJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setParameters=o,exports.getParameters=a,exports.resetParameters=i,exports.withParameters=c;var e=require("./webgl-parameter-tables"),t=require("./track-context-state"),r=require("../utils/assert"),s=require("../utils/webgl-checks"),n=require("../utils/utils");function o(t,o){if((0,r.assert)((0,s.isWebGL)(t),"setParameters requires a WebGL context"),(0,n.isObjectEmpty)(o))return;const a={};for(const r in o){const s=Number(r),n=e.GL_PARAMETER_SETTERS[r];n&&("string"==typeof n?a[n]=!0:n(t,o[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in a){(0,e.GL_COMPOSITE_PARAMETER_SETTERS[r])(t,o,i)}}function a(t,r){if("number"==typeof(r=r||e.GL_PARAMETER_DEFAULTS)){const s=r,n=e.GL_PARAMETER_GETTERS[s];return n?n(t,s):t.getParameter(s)}const s=Array.isArray(r)?r:Object.keys(r),n={};for(const o of s){const r=e.GL_PARAMETER_GETTERS[o];n[o]=r?r(t,Number(o)):t.getParameter(Number(o))}return n}function i(t){o(t,e.GL_PARAMETER_DEFAULTS)}function c(e,r,s){if((0,n.isObjectEmpty)(r))return s(e);const{nocatch:a=!0}=r;let i;if((0,t.pushContextState)(e),o(e,r),a)i=s(e),(0,t.popContextState)(e);else try{i=s(e)}finally{(0,t.popContextState)(e)}return i}
},{"./webgl-parameter-tables":"tvxq","./track-context-state":"XIFr","../utils/assert":"uPB9","../utils/webgl-checks":"E5mh","../utils/utils":"sNqS"}],"LoQn":[function(require,module,exports) {
"use strict";function t(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function e(e,n,r=!0){return i(n,t(e),e.drawingBufferWidth,e.drawingBufferHeight,r)}function n(t){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function i(t,e,n,i,u){const a=r(t[0],e,n);let c=o(t[1],e,i,u),s=r(t[0]+1,e,n);const d=s===n-1?s:s-1;let f;return s=o(t[1]+1,e,i,u),u?(f=c,c=s=0===s?s:s+1):f=s===i-1?s:s-1,{x:a,y:c,width:Math.max(d-a+1,1),height:Math.max(f-c+1,1)}}function r(t,e,n){return Math.min(Math.round(t*e),n-1)}function o(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cssToDeviceRatio=t,exports.cssToDevicePixels=e,exports.getDevicePixelRatio=n;
},{}],"Ijug":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGLContext=c,exports.instrumentGLContext=g,exports.getContextDebugInfo=d,exports.resizeGLContext=u;var e=require("probe.gl/env"),t=require("../state-tracker/track-context-state"),n=require("../utils/log"),r=require("../utils/assert"),o=require("../utils/device-pixels"),i=require("../utils/webgl-checks");const a=(0,e.isBrowser)(),s=a&&"undefined"!=typeof document,l={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function c(e={}){(0,r.assert)(a,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),e=Object.assign({},l,e);const{width:t,height:n}=e;function o(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}let i;e.onError=o;const{canvas:s}=e;return(i=h(f({canvas:s,width:t,height:n,onError:o}),e))?(v(i=g(i,e)),i):null}function g(r,o={}){if(!r||r._instrumented)return r;r._version=r._version||b(r),r.luma=r.luma||{},r.luma.canvasSizeInfo=r.luma.canvasSizeInfo||{},o=Object.assign({},l,o);const{manageState:i,debug:s}=o;return i&&(0,t.trackContextState)(r,{copyState:!1,log:(...e)=>n.log.log(1,...e)()}),a&&s&&(e.global.makeDebugContext?(r=e.global.makeDebugContext(r,o),n.log.level=Math.max(n.log.level,1)):n.log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),r._instrumented=!0,r}function d(e){const t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function u(e,t={}){if(e.canvas){return void m(e,(0,o.getDevicePixelRatio)(t.useDevicePixels),t)}const n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}function h(e,t){const{onError:n}=t;let r=null;const o=e=>r=e.statusMessage||r;e.addEventListener("webglcontextcreationerror",o,!1);const{webgl1:i=!0,webgl2:a=!0}=t;let s=null;return a&&(s=(s=s||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),i&&(s=(s=s||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",o,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):n(`Failed to create ${a&&!i?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`)}function f({canvas:e,width:t=800,height:n=600,onError:r}){let o;if("string"==typeof e){s&&"complete"===document.readyState||r(`createGLContext called on canvas '${e}' before page was loaded`),o=document.getElementById(e)}else e?o=e:((o=document.createElement("canvas")).id="lumagl-canvas",o.style.width=Number.isFinite(t)?`${t}px`:"100%",o.style.height=Number.isFinite(n)?`${n}px`:"100%",document.body.insertBefore(o,document.body.firstChild));return o}function v(e){const t=(0,i.isWebGL2)(e)?"WebGL2":"WebGL1",r=d(e),o=r?`(${r.vendor},${r.renderer})`:"",a=e.debug?" debug":"";n.log.info(1,`${t}${a} context ${o}`)()}function b(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function m(e,t,r){let o="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;o&&i||(n.log.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,o=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const a=e.luma.canvasSizeInfo;if(a.clientWidth!==o||a.clientHeight!==i||a.devicePixelRatio!==t){let r=t;const a=Math.floor(o*r),s=Math.floor(i*r);e.canvas.width=a,e.canvas.height=s,e.drawingBufferWidth===a&&e.drawingBufferHeight===s||(n.log.warn("Device pixel ratio clamped")(),r=Math.min(e.drawingBufferWidth/o,e.drawingBufferHeight/i),e.canvas.width=Math.floor(o*r),e.canvas.height=Math.floor(i*r)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:o,clientHeight:i,devicePixelRatio:t})}}
},{"probe.gl/env":"d3vq","../state-tracker/track-context-state":"XIFr","../utils/log":"Wd6X","../utils/assert":"uPB9","../utils/device-pixels":"LoQn","../utils/webgl-checks":"E5mh"}],"lAom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return e.log}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return t.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return t.isWebGL2}}),Object.defineProperty(exports,"getWebGL2Context",{enumerable:!0,get:function(){return t.getWebGL2Context}}),Object.defineProperty(exports,"assertWebGLContext",{enumerable:!0,get:function(){return t.assertWebGLContext}}),Object.defineProperty(exports,"assertWebGL2Context",{enumerable:!0,get:function(){return t.assertWebGL2Context}}),Object.defineProperty(exports,"polyfillContext",{enumerable:!0,get:function(){return r.polyfillContext}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return n.getParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return n.setParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return n.resetParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return n.withParameters}}),Object.defineProperty(exports,"trackContextState",{enumerable:!0,get:function(){return o.trackContextState}}),Object.defineProperty(exports,"pushContextState",{enumerable:!0,get:function(){return o.pushContextState}}),Object.defineProperty(exports,"popContextState",{enumerable:!0,get:function(){return o.popContextState}}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return u.createGLContext}}),Object.defineProperty(exports,"resizeGLContext",{enumerable:!0,get:function(){return u.resizeGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return u.instrumentGLContext}}),Object.defineProperty(exports,"getContextDebugInfo",{enumerable:!0,get:function(){return u.getContextDebugInfo}}),Object.defineProperty(exports,"cssToDeviceRatio",{enumerable:!0,get:function(){return i.cssToDeviceRatio}}),Object.defineProperty(exports,"cssToDevicePixels",{enumerable:!0,get:function(){return i.cssToDevicePixels}});var e=require("./utils/log"),t=require("./utils/webgl-checks"),r=require("./polyfill/polyfill-context"),n=require("./state-tracker/unified-parameter-api"),o=require("./state-tracker/track-context-state"),u=require("./context/context"),i=require("./utils/device-pixels");
},{"./utils/log":"Wd6X","./utils/webgl-checks":"E5mh","./polyfill/polyfill-context":"FLAS","./state-tracker/unified-parameter-api":"TZJt","./state-tracker/track-context-state":"XIFr","./context/context":"Ijug","./utils/device-pixels":"LoQn"}],"HGnm":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.lumaStats=void 0;var l=require("@luma.gl/gltools"),e=require("probe.gl"),t=require("probe.gl/env");const s="8.5.7",a="set luma.log.level=1 (or higher) to trace rendering";class o{constructor(){this.stats=new Map}get(l){return this.stats.has(l)||this.stats.set(l,new e.Stats({id:l})),this.stats.get(l)}}const r=new o;if(exports.lumaStats=r,t.global.luma&&"8.5.7"!==t.global.luma.VERSION)throw new Error(`luma.gl - multiple VERSIONs detected: ${t.global.luma.VERSION} vs 8.5.7`);t.global.luma||((0,t.isBrowser)()&&l.log.log(1,`luma.gl 8.5.7 - ${a}`)(),t.global.luma=t.global.luma||{VERSION:"8.5.7",version:"8.5.7",log:l.log,stats:r,globals:{modules:{},nodeIO:{}}});var u=t.global.luma;exports.default=u;
},{"@luma.gl/gltools":"lAom","probe.gl":"TYNK","probe.gl/env":"d3vq"}],"AGkC":[function(require,module,exports) {
"use strict";function e(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function n(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestAnimationFrame=e,exports.cancelAnimationFrame=n;
},{}],"UyRF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKeyValue=r,exports.getKey=t,exports.getKeyType=n;var e=require("../utils/assert");function r(r,t){if("string"!=typeof t)return t;const n=Number(t);if(!isNaN(n))return n;const s=r[t=t.replace(/^.*\./,"")];return(0,e.assert)(void 0!==s,`Accessing undefined constant GL.${t}`),s}function t(e,r){r=Number(r);for(const t in e)if(e[t]===r)return`GL.${t}`;return String(r)}function n(r,t){(0,e.assert)(void 0!==t,"undefined key"),t=Number(t);for(const e in r)if(r[e]===t)return`GL.${e}`;return String(t)}
},{"../utils/assert":"uPB9"}],"OhKi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uid=r,exports.isPowerOfTwo=n,exports.isObjectEmpty=s;var e=require("./assert");const t={};function r(e="id"){return t[e]=t[e]||1,`${e}-${t[e]++}`}function n(t){return(0,e.assert)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function s(e){let t=!0;for(const r in e){t=!1;break}return t}
},{"./assert":"uPB9"}],"EgC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stubRemovedMethods=o;var e=require("@luma.gl/gltools");function o(o,t,r,d){const l=`See luma.gl ${r} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,u=Object.getPrototypeOf(o);d.forEach(o=>{u.methodName||(u[o]=(()=>{throw e.log.removed(`Calling removed method ${t}.${o}: `,l)(),new Error(o)}))})}
},{"@luma.gl/gltools":"lAom"}],"DwD3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/gltools"),e=require("../init"),s=require("../webgl-utils/constants-to-keys"),r=require("../utils/assert"),n=require("../utils/utils"),i=require("../utils/stub-methods");const o="Resource subclass must define virtual methods";class a{constructor(e,s={}){(0,t.assertWebGLContext)(e);const{id:r,userData:i={}}=s;this.gl=e,this.gl2=e,this.id=r||(0,n.uid)(this.constructor.name),this.userData=i,this._bound=!1,this._handle=s.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:t=!1}={}){const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(t=>t.delete()),this}bind(t=this.handle){if("function"!=typeof t)return this._bindHandle(t),this;let e;return this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e}unbind(){this.bind(null)}getParameter(e,n={}){e=(0,s.getKeyValue)(this.gl,e),(0,r.assert)(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const e=(0,t.isWebGL2)(this.gl);if(!((!("webgl2"in i)||e)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const t=i.webgl1,s="webgl2"in i?i.webgl2:i.webgl1;return e?s:t}}return this._getParameter(e,n)}getParameters(e={}){const{parameters:r,keys:n}=e,i=this.constructor.PARAMETERS||{},o=(0,t.isWebGL2)(this.gl),a={},h=r||Object.keys(i);for(const t of h){const r=i[t];if(r&&(!("webgl2"in r)||o)&&(!("extension"in r)||this.gl.getExtension(r.extension))){const i=n?(0,s.getKey)(this.gl,t):t;a[i]=this.getParameter(t,e),n&&"GLenum"===r.type&&(a[i]=(0,s.getKey)(this.gl,a[i]))}}return a}setParameter(e,n){e=(0,s.getKeyValue)(this.gl,e),(0,r.assert)(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const e=(0,t.isWebGL2)(this.gl);if(!((!("webgl2"in i)||e)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(n=(0,s.getKeyValue)(n))}return this._setParameter(e,n),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,s){return(0,i.stubRemovedMethods)(this,t,e,s)}initialize(t){}_createHandle(){throw new Error(o)}_deleteHandle(){throw new Error(o)}_bindHandle(t){throw new Error(o)}_getOptsFromHandle(){throw new Error(o)}_getParameter(t,e){throw new Error(o)}_setParameter(t,e){throw new Error(o)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this.constructor.name,s=e.lumaStats.get("Resource Counts");s.get("Resources Created").incrementCount(),s.get(`${t}s Created`).incrementCount(),s.get(`${t}s Active`).incrementCount()}_removeStats(){const t=this.constructor.name;e.lumaStats.get("Resource Counts").get(`${t}s Active`).decrementCount()}_trackAllocatedMemory(t,s=this.constructor.name){const r=e.lumaStats.get("Memory Usage");r.get("GPU Memory").addCount(t),r.get(`${s} Memory`).addCount(t),this.byteLength=t}_trackDeallocatedMemory(t=this.constructor.name){const s=e.lumaStats.get("Memory Usage");s.get("GPU Memory").subtractCount(this.byteLength),s.get(`${t} Memory`).subtractCount(this.byteLength),this.byteLength=0}}exports.default=a;
},{"@luma.gl/gltools":"lAom","../init":"HGnm","../webgl-utils/constants-to-keys":"UyRF","../utils/assert":"uPB9","../utils/utils":"OhKi","../utils/stub-methods":"EgC4"}],"MBUn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGLTypeFromTypedArray=t,exports.getTypedArrayFromGLType=e,exports.flipRows=a,exports.scalePixels=n;const r="Failed to deduce GL constant from typed array";function t(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function e(r,{clamped:t=!0}={}){switch(r){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a({data:r,width:t,height:e,bytesPerPixel:a=4,temp:n}){const s=t*a;n=n||new Uint8Array(s);for(let c=0;c<e/2;++c){const t=c*s,a=(e-c-1)*s;n.set(r.subarray(t,t+s)),r.copyWithin(t,a,a+s),r.set(n,a)}}function n({data:r,width:t,height:e}){const a=Math.round(t/2),n=Math.round(e/2),s=new Uint8Array(a*n*4);for(let c=0;c<n;c++)for(let e=0;e<a;e++)for(let n=0;n<4;n++)s[4*(c*a+e)+n]=r[4*(2*c*t+2*e)+n];return{data:s,width:a,height:n}}
},{}],"vBG1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkProps=o;var e=require("@luma.gl/gltools");function o(o,r,t){const{removedProps:n={},deprecatedProps:s={},replacedProps:c={}}=t;for(const l in n)if(l in r){const r=n[l]?`${o}.${n[l]}`:"N/A";e.log.removed(`${o}.${l}`,r)()}for(const l in s)if(l in r){const r=s[l];e.log.deprecated(`${o}.${l}`,`${o}.${r}`)()}let i=null;for(const l in c)if(l in r){const t=c[l];e.log.deprecated(`${o}.${l}`,`${o}.${t}`)(),(i=i||Object.assign({},r))[t]=r[l],delete i[l]}return i||r}
},{"@luma.gl/gltools":"lAom"}],"OEzr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ACCESSOR_VALUES=exports.default=void 0;var e=require("../webgl-utils/typed-array-utils"),t=require("../utils/assert"),i=require("../utils/check-props");const s={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1};exports.DEFAULT_ACCESSOR_VALUES=s;const r={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class o{static getBytesPerElement(t){return(0,e.getTypedArrayFromGLType)(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(i){return(0,t.assert)(i.size),(0,e.getTypedArrayFromGLType)(i.type||5126).BYTES_PER_ELEMENT*i.size}static resolve(...e){return new o(...[s,...e])}constructor(...e){e.forEach(e=>this._assign(e)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return o.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return o.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=(0,i.checkProps)("Accessor",e,r)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}exports.default=o;
},{"../webgl-utils/typed-array-utils":"MBUn","../utils/assert":"uPB9","../utils/check-props":"vBG1"}],"d4ii":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("./resource")),t=h(require("./accessor")),s=require("../webgl-utils/typed-array-utils"),r=require("@luma.gl/gltools"),a=require("../utils/assert"),i=require("../utils/check-props");function h(e){return e&&e.__esModule?e:{default:e}}const n=10,l={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},u={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:l},c={removedProps:l};class d extends e.default{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/t.default.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/t.default.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=(0,i.checkProps)("Buffer",e,u),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=(0,i.checkProps)("Buffer",e,c))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new t.default(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:s=0,srcOffset:i=0}=e,h=e.byteLength||e.length;(0,a.assert)(t);const n=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(n,this.handle),0!==i||void 0!==h?((0,r.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,s,t,i,h)):this.gl.bufferSubData(n,s,t),this.gl.bindBuffer(n,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:s=0,size:a}){const{gl:i}=this;return(0,r.assertWebGL2Context)(i),i.bindBuffer(36662,e.handle),i.bindBuffer(36663,this.handle),i.copyBufferSubData(36662,36663,t,s,a),i.bindBuffer(36662,null),i.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:h=0}={}){(0,r.assertWebGL2Context)(this.gl);const n=(0,s.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),l=this._getAvailableElementCount(t),u=i;let c,d;e?c=(d=e.length)-u:d=u+(c=Math.min(l,h||l));const o=Math.min(l,c);return h=h||o,(0,a.assert)(h<=o),e=e||new n(d),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,h),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:s=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,s,r):((0,a.assert)(0===s),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(n,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,r=0,i=e.byteLength+r){(0,a.assert)(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const h=this._getTarget();this.gl.bindBuffer(h,this.handle),this.gl.bufferData(h,i,this.usage),this.gl.bufferSubData(h,r,e),this.gl.bindBuffer(h,null),this.debugData=e.slice(0,n),this.bytesUsed=i,this._trackAllocatedMemory(i);const l=(0,s.getGLTypeFromTypedArray)(e);return(0,a.assert)(l),this.setAccessor(new t.default(this.accessor,{type:l})),this}_setByteLength(e,t=this.usage){(0,a.assert)(e>=0),this._trackDeallocatedMemory();let s=e;0===e&&(s=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,s,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=e/(0,s.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}_inferType(e){this.accessor.type||this.setAccessor(new t.default(this.accessor,{type:(0,s.getGLTypeFromTypedArray)(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return r.log.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return r.log.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return r.log.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return r.log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new t.default(this.accessor,e),this}}exports.default=d;
},{"./resource":"DwD3","./accessor":"OEzr","../webgl-utils/typed-array-utils":"MBUn","@luma.gl/gltools":"lAom","../utils/assert":"uPB9","../utils/check-props":"vBG1"}],"PH5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFormatSupported=a,exports.isLinearFilteringSupported=s,exports.TYPE_SIZES=exports.DATA_FORMAT_CHANNELS=exports.TEXTURE_FORMATS=void 0;var t=require("@luma.gl/gltools");const e={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}};exports.TEXTURE_FORMATS=e;const r={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2};exports.DATA_FORMAT_CHANNELS=r;const o={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function a(r,o){const a=e[o];if(!a)return!1;if(void 0===a.gl1&&void 0===a.gl2)return!0;const s=(0,t.isWebGL2)(r)&&a.gl2||a.gl1;return"string"==typeof s?r.getExtension(s):s}function s(t,r){const o=e[r];switch(o&&o.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}exports.TYPE_SIZES=o;
},{"@luma.gl/gltools":"lAom"}],"GqKp":[function(require,module,exports) {


"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/gltools"),e=require("probe.gl/env"),i=d(require("./resource")),a=d(require("./buffer")),s=require("./texture-formats"),r=require("../utils/assert"),h=require("../utils/utils");function d(t){return t&&t.__esModule?t:{default:t}}const o=[9729,9728],n=e.global.WebGLBuffer||function(){};class l extends i.default{static isSupported(t,e={}){const{format:i,linearFiltering:a}=e;let r=!0;return i&&(r=(r=r&&(0,s.isFormatSupported)(t,i))&&(!a||(0,s.isLinearFilteringSupported)(t,i))),r}constructor(t,e){const{id:i=(0,h.uid)("texture"),handle:a,target:s}=e;super(t,{id:i,handle:a}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let i=e.data;if(i instanceof Promise)return i.then(t=>this.initialize(Object.assign({},e,{pixels:t,data:t}))),this;const a="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement;if(a&&i.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,i.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:s=null,format:r=6408,border:h=0,recreate:d=!1,parameters:o={},pixelStore:n={},textureUnit:l}=e;i||(i=s);let{width:u,height:m,dataFormat:g,type:p,compressed:c=!1,mipmaps:f=!0}=e;const{depth:T=0}=e;return({width:u,height:m,compressed:c,dataFormat:g,type:p}=this._deduceParameters({format:r,type:p,dataFormat:g,compressed:c,data:i,width:u,height:m})),this.width=u,this.height=m,this.depth=T,this.format=r,this.type=p,this.dataFormat=g,this.border=h,this.textureUnit=l,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),f&&this._isNPOT()&&(t.log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),f=!1,this._updateForNPOT(o)),this.mipmaps=f,this.setImageData({data:i,width:u,height:m,depth:T,format:r,type:p,dataFormat:g,border:h,mipmaps:f,parameters:n,compressed:c}),f&&this.generateMipmap(),this.setParameters(o),d&&(this.data=i),a&&(this._video={video:i,parameters:o,lastTime:i.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?i.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:i}=this._video;if(i===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize({height:t,width:e,mipmaps:i=!1}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(e={}){return this._isNPOT()?(t.log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,t.withParameters)(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:i=this.target,pixels:a=null,level:h=0,format:d=this.format,border:o=this.border,offset:n=0,parameters:l={}}=e;let{data:u=null,type:m=this.type,width:g=this.width,height:p=this.height,dataFormat:c=this.dataFormat,compressed:f=!1}=e;u||(u=a),({type:m,dataFormat:c,compressed:f,width:g,height:p}=this._deduceParameters({format:d,type:m,dataFormat:c,compressed:f,data:u,width:g,height:p}));const{gl:T}=this;T.bindTexture(this.target,this.handle);let x,b=null;if(({data:u,dataType:b}=this._getDataType({data:u,compressed:f})),(0,t.withParameters)(this.gl,l,()=>{switch(b){case"null":T.texImage2D(i,h,d,g,p,o,c,m,u);break;case"typed-array":T.texImage2D(i,h,d,g,p,o,c,m,u,n);break;case"buffer":(x=(0,t.assertWebGL2Context)(T)).bindBuffer(35052,u.handle||u),x.texImage2D(i,h,d,g,p,o,c,m,n),x.bindBuffer(35052,null);break;case"browser-object":(0,t.isWebGL2)(T)?T.texImage2D(i,h,d,g,p,o,c,m,u):T.texImage2D(i,h,d,c,m,u);break;case"compressed":for(const[t,e]of u.entries())T.compressedTexImage2D(i,t,e.format,e.width,e.height,o,e.data);break;default:(0,r.assert)(!1,"Unknown image data type")}}),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=s.DATA_FORMAT_CHANNELS[this.dataFormat]||4,e=s.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:i=null,data:s=null,x:h=0,y:d=0,width:o=this.width,height:l=this.height,level:u=0,format:m=this.format,type:g=this.type,dataFormat:p=this.dataFormat,compressed:c=!1,offset:f=0,border:T=this.border,parameters:x={}}){if(({type:g,dataFormat:p,compressed:c,width:o,height:l}=this._deduceParameters({format:m,type:g,dataFormat:p,compressed:c,data:s,width:o,height:l})),(0,r.assert)(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=i),s&&s.data){const t=s;s=t.data,o=t.shape[0],l=t.shape[1]}s instanceof a.default&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),(0,t.withParameters)(this.gl,x,()=>{if(c)this.gl.compressedTexSubImage2D(e,u,h,d,o,l,m,s);else if(null===s)this.gl.texSubImage2D(e,u,h,d,o,l,p,g,null);else if(ArrayBuffer.isView(s))this.gl.texSubImage2D(e,u,h,d,o,l,p,g,s,f);else if(s instanceof n){const i=(0,t.assertWebGL2Context)(this.gl);i.bindBuffer(35052,s),i.texSubImage2D(e,u,h,d,o,l,p,g,f),i.bindBuffer(35052,null)}else if((0,t.isWebGL2)(this.gl)){(0,t.assertWebGL2Context)(this.gl).texSubImage2D(e,u,h,d,o,l,p,g,s)}else this.gl.texSubImage2D(e,u,h,d,p,g,s)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return t.log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType({data:t,compressed:e=!1}){return e?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof a.default?{data:t.handle,dataType:"buffer"}:t instanceof n?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:i}=t;let{width:a,height:r,dataFormat:h,type:d,compressed:o}=t;const n=s.TEXTURE_FORMATS[e];return h=h||n&&n.dataFormat,d=d||n&&n.types[0],o=o||n&&n.compressed,({width:a,height:r}=this._deduceImageSize(i,a,r)),{dataFormat:h,type:d,compressed:o,width:a,height:r,format:e,data:i}}_deduceImageSize(t,e,i){let a;return a="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?{width:t.width,height:t.height}:"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:i}:{width:e>=0?e:1,height:i>=0?i:1},(0,r.assert)(a,"Could not deduced texture size"),(0,r.assert)(void 0===e||a.width===e,"Deduced texture width does not match supplied width"),(0,r.assert)(void 0===i||a.height===i,"Deduced texture height does not match supplied height"),a}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:(0,r.assert)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(0,t.isWebGL2)(this.gl)&&(!(!this.width||!this.height)&&(!(0,h.isPowerOfTwo)(this.width)||!(0,h.isPowerOfTwo)(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===o.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}exports.default=l;
},{"@luma.gl/gltools":"lAom","probe.gl/env":"d3vq","./resource":"DwD3","./buffer":"d4ii","./texture-formats":"PH5D","../utils/assert":"uPB9","../utils/utils":"OhKi"}],"QQ37":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setPathPrefix=r,exports.loadFile=o,exports.loadImage=s;var e=require("../utils/assert");let t="";function r(e){t=e}function o(r,o={}){(0,e.assert)("string"==typeof r),r=t+r;const s=o.dataType||"text";return fetch(r,o).then(e=>e[s]())}function s(r,o){return(0,e.assert)("string"==typeof r),r=t+r,new Promise((e,t)=>{try{const n=new Image;n.onload=(()=>e(n)),n.onerror=(()=>t(new Error(`Could not load image ${r}.`))),n.crossOrigin=o&&o.crossOrigin||"anonymous",n.src=r}catch(s){t(s)}})}
},{"../utils/assert":"uPB9"}],"YE27":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/gltools"),t=a(require("./texture")),s=require("../utils/load-file");function a(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{static isSupported(e,s){return t.default.isSupported(e,s)}constructor(t,a={}){(0,e.assertWebGLContext)(t),(a instanceof Promise||"string"==typeof a)&&(a={data:a}),"string"==typeof a.data&&(a=Object.assign({},a,{data:(0,s.loadImage)(a.data)})),super(t,Object.assign({},a,{target:3553})),this.initialize(a),Object.seal(this)}}exports.default=r;
},{"@luma.gl/gltools":"lAom","./texture":"GqKp","../utils/load-file":"QQ37"}],"eOjF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/gltools"),e=a(require("./texture"));function a(t){return t&&t.__esModule?t:{default:t}}const s=[34069,34070,34071,34072,34073,34074];class i extends e.default{constructor(e,a={}){(0,t.assertWebGLContext)(e),super(e,Object.assign({},a,{target:34067})),this.initialize(a),Object.seal(this)}initialize(t={}){const{mipmaps:e=!0,parameters:a={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(a)}),this}subImage({face:t,data:e,x:a=0,y:s=0,mipmapLevel:i=0}){return this._subImage({target:t,data:e,x:a,y:s,mipmapLevel:i})}async setCubeMapImageData({width:e,height:a,pixels:i,data:r,border:h=0,format:o=6408,type:n=5121}){const{gl:l}=this,m=i||r,p=await Promise.all(s.map(t=>{const e=m[t];return Promise.all(Array.isArray(e)?e:[e])}));this.bind(),s.forEach((s,i)=>{p[i].length>1&&!1!==this.opts.mipmaps&&t.log.warn(`${this.id} has mipmap and multiple LODs.`)(),p[i].forEach((t,i)=>{e&&a?l.texImage2D(s,i,o,e,a,h,o,n,t):l.texImage2D(s,i,o,o,n,t)})}),this.unbind()}setImageDataForFace(t){const{face:e,width:a,height:s,pixels:i,data:r,border:h=0,format:o=6408,type:n=5121}=t,{gl:l}=this,m=i||r;return this.bind(),m instanceof Promise?m.then(a=>this.setImageDataForFace(Object.assign({},t,{face:e,data:a,pixels:a}))):this.width||this.height?l.texImage2D(e,0,o,a,s,h,o,n,m):l.texImage2D(e,0,o,o,n,m),this}}exports.default=i,i.FACES=s;
},{"@luma.gl/gltools":"lAom","./texture":"GqKp"}],"mmMI":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/gltools"),e=a(require("./texture")),r=require("./texture-formats"),s=a(require("./buffer"));function a(t){return t&&t.__esModule?t:{default:t}}class i extends e.default{static isSupported(e){return(0,t.isWebGL2)(e)}constructor(e,r={}){(0,t.assertWebGL2Context)(e),super(e,r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1})),this.initialize(r),Object.seal(this)}setImageData({level:e=0,dataFormat:a=6408,width:i,height:h,depth:l=1,border:u=0,format:d,type:o=5121,offset:n=0,data:f,parameters:g={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,t.withParameters)(this.gl,g,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,e,a,i,h,l,u,d,o,f),f instanceof s.default&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,e,a,i,h,l,u,d,o,n))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const t=r.DATA_FORMAT_CHANNELS[this.dataFormat]||4,e=r.TYPE_SIZES[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}exports.default=i;
},{"@luma.gl/gltools":"lAom","./texture":"GqKp","./texture-formats":"PH5D","./buffer":"d4ii"}],"miHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const p="EXT_color_buffer_float";var b={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:p,bpp:2},33327:{gl2:p,bpp:4},34842:{gl2:p,bpp:8},33326:{gl2:p,bpp:4},33328:{gl2:p,bpp:8},34836:{gl2:p,bpp:16},35898:{gl2:p,bpp:4}};exports.default=b;
},{}],"baET":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./resource")),t=s(require("./renderbuffer-formats")),r=require("@luma.gl/gltools"),i=require("../utils/assert");function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i){const s=i[t];if(!s)return!1;const a=(0,r.isWebGL2)(e)&&s.gl2||s.gl1;return"string"==typeof a?e.getExtension(a):a}class h extends e.default{static isSupported(e,{format:r}={format:null}){return!r||a(e,r,t.default)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:s=1,height:a=1,samples:h=0}){return(0,i.assert)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==h&&(0,r.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,h,e,s,a):this.gl.renderbufferStorage(36161,e,s,a),this.format=e,this.width=s,this.height=a,this.samples=h,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*t.default[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}exports.default=h;
},{"./resource":"DwD3","./renderbuffer-formats":"miHD","@luma.gl/gltools":"lAom","../utils/assert":"uPB9"}],"ztYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=o,exports.clearBuffer=i;var e=require("@luma.gl/gltools"),r=require("../utils/assert");const a=256,l=1024,t=16384,f=6144,c=6145,s=6146,u=34041,n="clear: bad arguments";function o(f,{framebuffer:c=null,color:s=null,depth:u=null,stencil:o=null}={}){const i={};c&&(i.framebuffer=c);let b=0;s&&(b|=t,!0!==s&&(i.clearColor=s)),u&&(b|=a,!0!==u&&(i.clearDepth=u)),o&&(b|=l,!0!==u&&(i.clearStencil=u)),(0,r.assert)(0!==b,n),(0,e.withParameters)(f,i,()=>{f.clear(b)})}function i(a,{framebuffer:l=null,buffer:t=f,drawBuffer:o=0,value:i=[0,0,0,0]}={}){(0,e.assertWebGL2Context)(a),(0,e.withParameters)(a,{framebuffer:l},()=>{switch(t){case f:switch(i.constructor){case Int32Array:a.clearBufferiv(t,o,i);break;case Uint32Array:a.clearBufferuiv(t,o,i);break;case Float32Array:default:a.clearBufferfv(t,o,i)}break;case c:a.clearBufferfv(c,0,[i]);break;case s:a.clearBufferiv(s,0,[i]);break;case u:const[e,l]=i;a.clearBufferfi(u,0,e,l);break;default:(0,r.assert)(!1,n)}})}
},{"@luma.gl/gltools":"lAom","../utils/assert":"uPB9"}],"BCIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.glFormatToComponents=r,exports.glTypeToBytes=s;var e=require("../utils/assert");function r(r){switch(r){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,e.assert)(!1),0}}function s(r){switch(r){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,e.assert)(!1),0}}
},{"../utils/assert":"uPB9"}],"DmZq":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPixelsToArray=f,exports.readPixelsToBuffer=l,exports.copyToDataUrl=c,exports.copyToImage=d,exports.copyToTexture=m,exports.blit=g;var e=i(require("./buffer")),t=i(require("./framebuffer")),r=i(require("./texture")),a=require("@luma.gl/gltools"),u=require("../webgl-utils/typed-array-utils"),o=require("../webgl-utils/format-utils"),s=require("../webgl-utils/texture-utils"),n=require("../utils/assert");function i(e){return e&&e.__esModule?e:{default:e}}function f(e,t={}){const{sourceX:r=0,sourceY:a=0,sourceFormat:o=6408}=t;let{sourceAttachment:s=36064,target:i=null,sourceWidth:f,sourceHeight:l,sourceType:c}=t;const{framebuffer:d,deleteFramebuffer:m}=b(e);(0,n.assert)(d);const{gl:g,handle:p,attachments:F}=d;f=f||d.width,l=l||d.height,36064===s&&null===p&&(s=1028),(0,n.assert)(F[s]),i=h(i,c=c||F[s].type,o,f,l),c=c||(0,u.getGLTypeFromTypedArray)(i);const y=g.bindFramebuffer(36160,p);return g.readPixels(r,a,f,l,o,c,i),g.bindFramebuffer(36160,y||null),m&&d.delete(),i}function l(t,{sourceX:r=0,sourceY:u=0,sourceFormat:s=6408,target:i=null,targetByteOffset:f=0,sourceWidth:l,sourceHeight:c,sourceType:d}){const{framebuffer:m,deleteFramebuffer:g}=b(t);(0,n.assert)(m),l=l||m.width,c=c||m.height;const h=(0,a.assertWebGL2Context)(m.gl);if(d=d||(i?i.type:5121),!i){const t=(0,o.glFormatToComponents)(s),r=(0,o.glTypeToBytes)(d),a=f+l*c*t*r;i=new e.default(h,{byteLength:a,accessor:{type:d,size:t}})}return i.bind({target:35051}),(0,a.withParameters)(h,{framebuffer:m},()=>{h.readPixels(r,u,l,c,s,d,f)}),i.unbind({target:35051}),g&&m.delete(),i}function c(e,{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}={}){let a=f(e,{sourceAttachment:t}),{width:o,height:s}=e;for(;s>r;)({data:a,width:o,height:s}=(0,u.scalePixels)({data:a,width:o,height:s}));(0,u.flipRows)({data:a,width:o,height:s});const n=document.createElement("canvas");n.width=o,n.height=s;const i=n.getContext("2d"),l=i.createImageData(o,s);return l.data.set(a),i.putImageData(l,0,0),n.toDataURL()}function d(e,{sourceAttachment:t=36064,targetImage:r=null}={}){const a=c(e,{sourceAttachment:t});return(r=r||new Image).src=a,r}function m(e,t,u={}){const{sourceX:o=0,sourceY:s=0,targetMipmaplevel:i=0,targetInternalFormat:f=6408}=u;let{targetX:l,targetY:c,targetZ:d,width:m,height:g}=u;const{framebuffer:h,deleteFramebuffer:p}=b(e);(0,n.assert)(h);const{gl:F,handle:y}=h,x=void 0!==l||void 0!==c||void 0!==d;l=l||0,c=c||0,d=d||0;const T=F.bindFramebuffer(36160,y);(0,n.assert)(t);let w=null;if(t instanceof r.default&&(w=t,m=Number.isFinite(m)?m:w.width,g=Number.isFinite(g)?g:w.height,w.bind(0),t=w.target),x)switch(t){case 3553:case 34067:F.copyTexSubImage2D(t,i,l,c,o,s,m,g);break;case 35866:case 32879:(0,a.assertWebGL2Context)(F).copyTexSubImage3D(t,i,l,c,d,o,s,m,g)}else F.copyTexImage2D(t,i,f,o,s,m,g,0);return w&&w.unbind(),F.bindFramebuffer(36160,T||null),p&&h.delete(),w}function g(e,t,r={}){const{sourceX0:u=0,sourceY0:o=0,targetX0:s=0,targetY0:i=0,color:f=!0,depth:l=!1,stencil:c=!1,filter:d=9728}=r;let{sourceX1:m,sourceY1:g,targetX1:h,targetY1:p,sourceAttachment:F=36064,mask:y=0}=r;const{framebuffer:x,deleteFramebuffer:T}=b(e),{framebuffer:w,deleteFramebuffer:v}=b(t);(0,n.assert)(x),(0,n.assert)(w);const{gl:A,handle:I,width:B,height:L,readBuffer:X}=w,q=(0,a.assertWebGL2Context)(A);x.handle||36064!==F||(F=1028),f&&(y|=16384),l&&(y|=256),c&&(y|=1024),(T||v)&&1280&y&&(y=16384,a.log.warn("Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT")()),(0,n.assert)(y),m=void 0===m?x.width:m,g=void 0===g?x.height:g,h=void 0===h?B:h,p=void 0===p?L:p;const Y=A.bindFramebuffer(36009,I),_=A.bindFramebuffer(36008,x.handle);return q.readBuffer(F),q.blitFramebuffer(u,o,m,g,s,i,h,p,y,d),q.readBuffer(X),q.bindFramebuffer(36008,_||null),q.bindFramebuffer(36009,Y||null),T&&x.delete(),v&&w.delete(),w}function b(e){return e instanceof t.default?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(0,s.toFramebuffer)(e),deleteFramebuffer:!0}}function h(e,t,r,a,s){if(e)return e;return t=t||5121,new((0,u.getTypedArrayFromGLType)(t,{clamped:!1}))(a*s*(0,o.glFormatToComponents)(r))}
},{"./buffer":"d4ii","./framebuffer":"QRT8","./texture":"GqKp","@luma.gl/gltools":"lAom","../webgl-utils/typed-array-utils":"MBUn","../webgl-utils/format-utils":"BCIn","../webgl-utils/texture-utils":"oR6C","../utils/assert":"uPB9"}],"IlXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l={33902:{gl1:new Float32Array([1,1])},33901:{gl1:new Float32Array([1,1])},3379:{gl1:64,gl2:2048},34076:{gl1:16},34930:{gl1:8},35661:{gl1:8},35660:{gl1:0},34024:{gl1:1},36348:{gl1:8},34921:{gl1:8},36347:{gl1:128},36349:{gl1:16},3386:{gl1:new Int32Array([0,0])},32883:{gl1:0,gl2:256},35071:{gl1:0,gl2:256},37447:{gl1:0,gl2:0},36063:{gl1:0,gl2:4},35379:{gl1:0,gl2:0},35374:{gl1:0,gl2:0},35377:{gl1:0,gl2:0},34852:{gl1:0,gl2:4},36203:{gl1:0,gl2:0},33001:{gl1:0,gl2:0},33e3:{gl1:0,gl2:0},37157:{gl1:0,gl2:0},35373:{gl1:0,gl2:0},35657:{gl1:0,gl2:0},36183:{gl1:0,gl2:0},37137:{gl1:0,gl2:0},34045:{gl1:0,gl2:0},35978:{gl1:0,gl2:0},35979:{gl1:0,gl2:0},35968:{gl1:0,gl2:0},35376:{gl1:0,gl2:0},35375:{gl1:0,gl2:0},35659:{gl1:0,gl2:0},37154:{gl1:0,gl2:0},35371:{gl1:0,gl2:0},35658:{gl1:0,gl2:0},35076:{gl1:0,gl2:-8,negative:!0},35077:{gl1:0,gl2:7},35380:{gl1:0,gl2:0}};exports.default=l;
},{}],"JRcT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextLimits=n,exports.getGLContextInfo=l,exports.getContextInfo=s;var e=t(require("./webgl-limits-table")),i=require("@luma.gl/gltools");function t(e){return e&&e.__esModule?e:{default:e}}function n(t){if(t.luma=t.luma||{},!t.luma.limits){t.luma.limits={},t.luma.webgl1MinLimits={},t.luma.webgl2MinLimits={};const n=(0,i.isWebGL2)(t);for(const i in e.default){const l=e.default[i],s=l.gl1,o="gl2"in l?l.gl2:l.gl1,u=n?o:s,m="gl2"in l&&!n||"extension"in l&&!t.getExtension(l.extension)?u:t.getParameter(i);t.luma.limits[i]=m,t.luma.webgl1MinLimits[i]=s,t.luma.webgl2MinLimits[i]=o}}return t.luma.limits}function l(e){e.luma=e.luma||{};const t=(0,i.getContextDebugInfo)(e);return e.luma.info||(e.luma.info={37445:t.vendor,37446:t.renderer,7936:t.vendorMasked,7937:t.rendererMasked,7938:t.version,35724:t.shadingLanguageVersion}),e.luma.info}function s(e){return Object.assign((0,i.getContextDebugInfo)(e),{limits:n(e),info:l(e),webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits})}
},{"./webgl-limits-table":"IlXB","@luma.gl/gltools":"lAom"}],"UMAV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.FEATURES=void 0;var _=T(require("../classes/framebuffer")),E=T(require("../classes/texture-2d"));function T(_){return _&&_.__esModule?_:{default:_}}const L={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function R(T){const L=new E.default(T,{format:6408,type:5126,dataFormat:6408}),R=new _.default(T,{id:"test-framebuffer",check:!1,attachments:{36064:L}}),A=R.getStatus();return L.delete(),R.delete(),36053===A}exports.FEATURES=L;var A={[L.WEBGL2]:[!1,!0],[L.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[L.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[L.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[L.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[L.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[L.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[L.FLOAT_BLEND]:["EXT_float_blend"],[L.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[L.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[L.TEXTURE_FLOAT]:["OES_texture_float",!0],[L.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[L.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[L.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[L.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[L.COLOR_ATTACHMENT_RGBA32F]:[R,"EXT_color_buffer_float"],[L.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[L.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[L.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[L.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[L.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[L.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};exports.default=A;
},{"../classes/framebuffer":"QRT8","../classes/texture-2d":"YE27"}],"qa8S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasFeature=u,exports.hasFeatures=o,exports.getFeatures=l;var e=r(require("./webgl-features-table")),t=require("@luma.gl/gltools"),a=require("../utils/assert");function r(e){return e&&e.__esModule?e:{default:e}}const s=2;function u(e,t){return o(e,t)}function o(e,t){return(t=Array.isArray(t)?t:[t]).every(t=>n(e,t))}function l(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const a in e.default)void 0===t.luma.caps[a]&&(t.luma.caps[a]=n(t,a));return t.luma.caps}function n(e,a){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[a]&&(e.luma.caps[a]=c(e,a)),e.luma.caps[a]||t.log.log(s,`Feature: ${a} not supported`)(),e.luma.caps[a]}function c(r,s){const u=e.default[s];let o;(0,a.assert)(u,s);const l=(0,t.isWebGL2)(r)&&u[1]||u[0];if("function"==typeof l)o=l(r);else if(Array.isArray(l)){o=!0;for(const e of l)o=o&&Boolean(r.getExtension(e))}else"string"==typeof l?o=Boolean(r.getExtension(l)):"boolean"==typeof l?o=l:(0,a.assert)(!1);return o}
},{"./webgl-features-table":"UMAV","@luma.gl/gltools":"lAom","../utils/assert":"uPB9"}],"tGta":[function(require,module,exports) {
"use strict";function e(e={}){const n="undefined"!=typeof window&&window.navigator||{},t=e.userAgent||n.userAgent||"",r=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return r||d}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CuwP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=a(require("./check-old-ie")),r=a(require("./webgl-features-table")),t=require("../utils/assert");function a(e){return e&&e.__esModule?e:{default:e}}const u={};function n(a,n,s={}){const i=r.default[n];if((0,t.assert)(i,n),!(0,e.default)(s))return!0;if(n in u)return u[n];const o=`#extension GL_${i[0]} : enable\nvoid main(void) {}`,d=a.createShader(35633);a.shaderSource(d,o),a.compileShader(d);const l=a.getShaderParameter(d,35713);return a.deleteShader(d),u[n]=l,l}
},{"./check-old-ie":"tGta","./webgl-features-table":"UMAV","../utils/assert":"uPB9"}],"QnT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return e.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return e.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return e.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return r.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return r.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return r.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return n.default}});var e=require("./limits"),t=require("./webgl-features-table"),r=require("./features"),n=u(require("./check-glsl-extension"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./limits":"JRcT","./webgl-features-table":"UMAV","./features":"qa8S","./check-glsl-extension":"CuwP"}],"QRT8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=exports.default=void 0;var e=require("@luma.gl/gltools"),t=h(require("./resource")),r=h(require("./texture-2d")),s=h(require("./renderbuffer")),a=require("./clear"),i=require("./copy-and-blit.js"),n=require("../features"),l=require("../webgl-utils/constants-to-keys"),u=require("../utils/assert");function h(e){return e&&e.__esModule?e:{default:e}}const f="Multiple render targets not supported";class o extends t.default{static isSupported(e,t={}){const{colorBufferFloat:r,colorBufferHalfFloat:s}=t;let a=!0;return r&&(a=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),s&&(a=a&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),a}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new o(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=(0,e.assertWebGL2Context)(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=(0,e.assertWebGL2Context)(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:r=null,color:s=!0,depth:a=!0,stencil:i=!1,check:n=!0,readBuffer:l,drawBuffers:h}){if((0,u.assert)(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,r)for(const u in r){const s=r[u];(Array.isArray(s)?s[0]:s).resize({width:e,height:t})}else r=this._createDefaultAttachments(s,a,i,e,t);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:h}),r&&n&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:a=!0}){this.attach(e,{clearAttachments:s,resizeAttachments:a});const{gl:i}=this,n=i.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),r&&this._setDrawBuffers(r),i.bindFramebuffer(36160,n||null),this}resize(t={}){let{width:r,height:s}=t;if(null===this.handle)return(0,u.assert)(void 0===r&&void 0===s),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===r&&(r=this.gl.drawingBufferWidth),void 0===s&&(s=this.gl.drawingBufferHeight),r!==this.width&&s!==this.height&&e.log.log(2,`Resizing framebuffer ${this.id} to ${r}x${s}`)();for(const e in this.attachments)this.attachments[e].resize({width:r,height:s});return this.width=r,this.height=s,this}attach(e,{clearAttachments:t=!1,resizeAttachments:r=!0}={}){const a={};t&&Object.keys(this.attachments).forEach(e=>{a[e]=null}),Object.assign(a,e);const i=this.gl.bindFramebuffer(36160,this.handle);for(const n in a){(0,u.assert)(void 0!==n,"Misspelled framebuffer binding point?");const e=Number(n),t=a[e];let i=t;if(i)if(i instanceof s.default)this._attachRenderbuffer({attachment:e,renderbuffer:i});else if(Array.isArray(t)){const[r,s=0,a=0]=t;i=r,this._attachTexture({attachment:e,texture:r,layer:s,level:a})}else this._attachTexture({attachment:e,texture:i,layer:0,level:0});else this._unattach(e);r&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(e=>!this.attachments[e]).forEach(e=>{delete this.attachments[e]})}checkStatus(){const{gl:e}=this,t=this.getStatus();if(36053!==t)throw new Error(d(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}clear(e={}){const{color:t,depth:r,stencil:s,drawBuffers:i=[]}=e,n=this.gl.bindFramebuffer(36160,this.handle);return(t||r||s)&&(0,a.clear)(this.gl,{color:t,depth:r,stencil:s}),i.forEach((e,t)=>{(0,a.clearBuffer)(this.gl,{drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,n||null),this}readPixels(t={}){return e.log.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(t={}){return e.log.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(t={}){return e.log.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(t={}){return e.log.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(t={}){return e.log.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(t={}){return e.log.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:t=[],x:r=0,y:s=0,width:a,height:i}){const n=(0,e.assertWebGL2Context)(this.gl),l=n.bindFramebuffer(36008,this.handle);return 0===r&&0===s&&void 0===a&&void 0===i?n.invalidateFramebuffer(36008,t):n.invalidateFramebuffer(36008,t,r,s,a,i),n.bindFramebuffer(36008,l),this}getAttachmentParameter(e,t,r){let s=this._getAttachmentParameterFallback(t);return null===s&&(this.gl.bindFramebuffer(36160,this.handle),s=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&s>1e3&&(s=(0,l.getKey)(this.gl,s)),s}getAttachmentParameters(e=36064,t,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const s={};for(const a of r){s[t?(0,l.getKey)(this.gl,a):a]=this.getAttachmentParameter(e,a,t)}return s}getParameters(e=!0){const t=Object.keys(this.attachments),r={};for(const s of t){const t=Number(s);r[e?(0,l.getKey)(this.gl,t):t]=this.getAttachmentParameters(t,e)}return r}show(){return"undefined"!=typeof window&&window.open((0,i.copyToDataUrl)(this),"luma-debug-texture"),this}log(t=0,r=""){if(t>e.log.level||"undefined"==typeof window)return this;r=r||`Framebuffer ${this.id}`;const s=(0,i.copyToDataUrl)(this,{targetMaxHeight:100});return e.log.image({logLevel:t,message:r,image:s},r)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,a,i,n){let l=null;return e&&((l=l||{})[36064]=new r.default(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:n,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(l[36064])),t&&a?((l=l||{})[33306]=new s.default(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(l[33306])):t?((l=l||{})[36096]=new s.default(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:n}),this.ownResources.push(l[36096])):a&&(0,u.assert)(!1),l}_unattach(e){const t=this.attachments[e];t&&(t instanceof s.default?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:t=36064,texture:r,layer:s,level:a}){const{gl:i}=this;switch(i.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:(0,e.assertWebGL2Context)(i).framebufferTextureLayer(36160,t,r.target,a,s);break;case 34067:const n=c(s);i.framebufferTexture2D(36160,t,n,r.handle,a);break;case 3553:i.framebufferTexture2D(36160,t,3553,r.handle,a);break;default:(0,u.assert)(!1,"Illegal texture type")}i.bindTexture(r.target,null),this.attachments[t]=r}_setReadBuffer(t){const r=(0,e.getWebGL2Context)(this.gl);r?r.readBuffer(t):(0,u.assert)(36064===t||1029===t,f),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,s=(0,e.assertWebGL2Context)(r);if(s)s.drawBuffers(t);else{const e=r.getExtension("WEBGL_draw_buffers");e?e.drawBuffersWEBGL(t):(0,u.assert)(1===t.length&&(36064===t[0]||1029===t[0]),f)}this.drawBuffers=t}_getAttachmentParameterFallback(e){const t=(0,n.getFeatures)(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function c(e){return e<34069?e+34069:e}function d(e){return(o.STATUS||{})[e]||`Framebuffer error ${e}`}exports.default=o;const g=[36049,36048,33296,33298,33299,33300,33301,33302,33303];exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS=g,o.ATTACHMENT_PARAMETERS=g;
},{"@luma.gl/gltools":"lAom","./resource":"DwD3","./texture-2d":"YE27","./renderbuffer":"baET","./clear":"ztYM","./copy-and-blit.js":"DmZq","../features":"QnT2","../webgl-utils/constants-to-keys":"UyRF","../utils/assert":"uPB9"}],"oR6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTextureFrom=i,exports.toFramebuffer=o;var e=u(require("../classes/texture-2d")),t=u(require("../classes/texture-cube")),r=u(require("../classes/texture-3d")),s=u(require("../classes/framebuffer")),a=require("../utils/assert");function u(e){return e&&e.__esModule?e:{default:e}}function i(s,u){(0,a.assert)(s instanceof e.default||s instanceof t.default||s instanceof r.default);const i=s.constructor,{gl:o,width:n,height:f,format:c,type:d,dataFormat:l,border:h,mipmaps:m}=s;return new i(o,Object.assign({width:n,height:f,format:c,type:d,dataFormat:l,border:h,mipmaps:m},u))}function o(e,t){const{gl:r,width:a,height:u,id:i}=e;return new s.default(r,Object.assign({},t,{id:`framebuffer-for-${i}`,width:a,height:u,attachments:{36064:e}}))}
},{"../classes/texture-2d":"YE27","../classes/texture-cube":"eOjF","../classes/texture-3d":"mmMI","../classes/framebuffer":"QRT8","../utils/assert":"uPB9"}],"WHl0":[function(require,module,exports) {
"use strict";function e(e,t="unnamed"){const s=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return s?s[1]:t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"OBvR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;const e=35632,t=35633;function r(r){switch(r){case e:return"fragment";case t:return"vertex";default:return"unknown type"}}
},{}],"fowk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.parseGLSLCompilerError=o;var n=e(require("./get-shader-name")),r=e(require("./get-shader-type-name"));function e(n){return n&&n.__esModule?n:{default:n}}function t(n,r,e){const{shaderName:t,errors:s,warnings:i}=o(n,r,e);return`GLSL compilation error in ${t}\n\n${s}\n${i}`}function o(e,t,o,l){const u=e.split(/\r?\n/),a={},c={},f=l||(0,n.default)(t)||"(unnamed)",p=`${(0,r.default)(o)} shader ${f}`;for(let n=0;n<u.length;n++){const r=u[n];if(r.length<=1)continue;const t=r.split(":"),o=t[0],s=parseInt(t[2],10);if(isNaN(s))throw new Error(`GLSL compilation error in ${p}: ${e}`);"WARNING"!==o?a[s]=r:c[s]=r}const g=i(t);return{shaderName:p,errors:s(a,g),warnings:s(c,g)}}function s(n,r){let e="";for(let t=0;t<r.length;t++){const o=r[t];if((n[t+3]||n[t+2]||n[t+1])&&(e+=`${o}\n`,n[t+1])){const r=n[t+1],o=r.split(":",3),s=o[0],i=parseInt(o[1],10)||0;e+=l(`^^^ ${s}: ${r.substring(o.join(":").length+1).trim()}\n\n`,i)}}return e}function i(n,r=1,e=": "){const t=n.split(/\r?\n/),o=String(t.length+r-1).length;return t.map((n,t)=>{const s=String(t+r),i=s.length;return l(s,o-i)+e+n})}function l(n,r){let e="";for(let t=0;t<r;++t)e+=" ";return`${e}${n}`}
},{"./get-shader-name":"WHl0","./get-shader-type-name":"OBvR"}],"ZDha":[function(require,module,exports) {
"use strict";function e(e){let t=100;const s=e.match(/[^\s]+/g);if(s.length>=2&&"#version"===s[0]){const e=parseInt(s[1],10);Number.isFinite(e)&&(t=e)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bJJz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatGLSLCompilerError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"parseGLSLCompilerError",{enumerable:!0,get:function(){return e.parseGLSLCompilerError}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"getShaderTypeName",{enumerable:!0,get:function(){return n.default}});var e=a(require("./format-glsl-error")),r=o(require("./get-shader-name")),t=o(require("./get-shader-version")),n=o(require("./get-shader-type-name"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./format-glsl-error":"fowk","./get-shader-name":"WHl0","./get-shader-version":"ZDha","./get-shader-type-name":"OBvR"}],"Mfxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var e=require("@luma.gl/gltools"),r=require("../glsl-utils"),t=require("../utils/assert"),s=require("../utils/utils"),a=i(require("./resource"));function i(e){return e&&e.__esModule?e:{default:e}}const n="Shader: GLSL source code must be a JavaScript string";class o extends a.default{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,t.assert)(!1),"unknown"}}constructor(a,i){(0,e.assertWebGLContext)(a),(0,t.assert)("string"==typeof i.source,n),super(a,{id:(0,r.getShaderName)(i.source,null)||i.id||(0,s.uid)(`unnamed ${o.getTypeName(i.shaderType)}`)}),this.shaderType=i.shaderType,this.source=i.source,this.initialize(i)}initialize({source:e}){const t=(0,r.getShaderName)(e,null);t&&(this.id=(0,s.uid)(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${o.getTypeName(this.shaderType)}:${this.id}`}getName(){return(0,r.getShaderName)(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(t=this.source){if(t.startsWith("#version ")||(t=`#version 100\n${t}`),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:s,errors:a,warnings:i}=(0,r.parseGLSLCompilerError)(t,this.source,this.shaderType,this.id);throw e.log.error(`GLSL compilation errors in ${s}\n${a}`)(),e.log.warn(`GLSL compilation warnings in ${s}\n${i}`)(),new Error(`GLSL compilation errors in ${s}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}exports.Shader=o;class h extends o{constructor(e,r){"string"==typeof r&&(r={source:r}),super(e,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}exports.VertexShader=h;class d extends o{constructor(e,r){"string"==typeof r&&(r={source:r}),super(e,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}exports.FragmentShader=d;
},{"@luma.gl/gltools":"lAom","../glsl-utils":"bJJz","../utils/assert":"uPB9","../utils/utils":"OhKi","./resource":"DwD3"}],"DC0O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformSetter=v,exports.parseUniformName=x,exports.checkUniformValues=h,exports.copyUniform=g;var n=require("@luma.gl/gltools"),r=t(require("./framebuffer")),i=t(require("./renderbuffer")),e=t(require("./texture")),u=require("../utils/assert");function t(n){return n&&n.__esModule?n:{default:n}}const l={5126:A.bind(null,"uniform1fv",c,1,M),35664:A.bind(null,"uniform2fv",c,2,M),35665:A.bind(null,"uniform3fv",c,3,M),35666:A.bind(null,"uniform4fv",c,4,M),5124:A.bind(null,"uniform1iv",d,1,M),35667:A.bind(null,"uniform2iv",d,2,M),35668:A.bind(null,"uniform3iv",d,3,M),35669:A.bind(null,"uniform4iv",d,4,M),35670:A.bind(null,"uniform1iv",d,1,M),35671:A.bind(null,"uniform2iv",d,2,M),35672:A.bind(null,"uniform3iv",d,3,M),35673:A.bind(null,"uniform4iv",d,4,M),35674:A.bind(null,"uniformMatrix2fv",c,4,U),35675:A.bind(null,"uniformMatrix3fv",c,9,U),35676:A.bind(null,"uniformMatrix4fv",c,16,U),35678:w,35680:w,5125:A.bind(null,"uniform1uiv",b,1,M),36294:A.bind(null,"uniform2uiv",b,2,M),36295:A.bind(null,"uniform3uiv",b,3,M),36296:A.bind(null,"uniform4uiv",b,4,M),35685:A.bind(null,"uniformMatrix2x3fv",c,6,U),35686:A.bind(null,"uniformMatrix2x4fv",c,8,U),35687:A.bind(null,"uniformMatrix3x2fv",c,6,U),35688:A.bind(null,"uniformMatrix3x4fv",c,12,U),35689:A.bind(null,"uniformMatrix4x2fv",c,8,U),35690:A.bind(null,"uniformMatrix4x3fv",c,12,U),35678:w,35680:w,35679:w,35682:w,36289:w,36292:w,36293:w,36298:w,36299:w,36300:w,36303:w,36306:w,36307:w,36308:w,36311:w},o={},f={},a={},s=[0];function m(r,i,e,u){1===i&&"boolean"==typeof r&&(r=r?1:0),Number.isFinite(r)&&(s[0]=r,r=s);const t=r.length;if(t%i&&n.log.warn(`Uniform size should be multiples of ${i}`,r)(),r instanceof e)return r;let l=u[t];l||(l=new e(t),u[t]=l);for(let n=0;n<t;n++)l[n]=r[n];return l}function c(n,r){return m(n,r,Float32Array,o)}function d(n,r){return m(n,r,Int32Array,f)}function b(n,r){return m(n,r,Uint32Array,a)}function v(n,r,i){const e=l[i.type];if(!e)throw new Error(`Unknown GLSL uniform type ${i.type}`);return e().bind(null,n,r)}function x(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const r=n.match(/([^[]*)(\[[0-9]+\])?/);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function h(n,r,i){for(const e in n){const u=n[e];if((!i||Boolean(i[e]))&&!y(u))throw r=r?`${r} `:"",console.error(`${r} Bad uniform ${e}`,u),new Error(`${r} Bad uniform ${e}`)}return!0}function y(n){return Array.isArray(n)||ArrayBuffer.isView(n)?p(n):!!isFinite(n)||(!0===n||!1===n||(n instanceof e.default||(n instanceof i.default||n instanceof r.default&&Boolean(n.texture))))}function g(n,r,i){if(Array.isArray(i)||ArrayBuffer.isView(i))if(n[r]){const e=n[r];for(let n=0,r=i.length;n<r;++n)e[n]=i[n]}else n[r]=i.slice();else n[r]=i}function p(n){if(0===n.length)return!1;const r=Math.min(n.length,16);for(let i=0;i<r;++i)if(!Number.isFinite(n[i]))return!1;return!0}function w(){let n=null;return(r,i,e)=>{const u=n!==e;return u&&(r.uniform1i(i,e),n=e),u}}function A(n,r,i,e){let t=null,l=null;return(o,f,a)=>{const s=r(a,i),m=s.length;let c=!1;if(null===t)t=new Float32Array(m),l=m,c=!0;else{(0,u.assert)(l===m,"Uniform length cannot change.");for(let n=0;n<m;++n)if(s[n]!==t[n]){c=!0;break}}return c&&(e(o,n,f,s),t.set(s)),c}}function M(n,r,i,e){n[r](i,e)}function U(n,r,i,e){n[r](i,!1,e)}
},{"@luma.gl/gltools":"lAom","./framebuffer":"QRT8","./renderbuffer":"baET","./texture":"GqKp","../utils/assert":"uPB9"}],"r3DH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrimitiveDrawMode=E,exports.getPrimitiveCount=F,exports.getVertexCount=H,exports.decomposeCompositeGLType=I,exports.getCompositeGLType=J;var e=require("../utils/assert");const t=5120,r=5121,s=5122,c=5123,n=0,a=1,u=2,o=3,i=4,v=5,m=6,x=5126,p=35664,d=35665,f=35666,l=5124,w=35667,C=35668,b=35669,g=5125,y=36294,M=36295,h=36296,P=35670,T=35671,G=35672,L=35673,_=35674,j=35675,q=35676,D=35685,O=35686,V=35687,k=35688,z=35689,A=35690,B={[x]:[x,1,"float"],35664:[x,2,"vec2"],35665:[x,3,"vec3"],35666:[x,4,"vec4"],5124:[5124,1,"int"],35667:[5124,2,"ivec2"],35668:[5124,3,"ivec3"],35669:[5124,4,"ivec4"],5125:[5125,1,"uint"],36294:[5125,2,"uvec2"],36295:[5125,3,"uvec3"],36296:[5125,4,"uvec4"],35670:[x,1,"bool"],35671:[x,2,"bvec2"],35672:[x,3,"bvec3"],35673:[x,4,"bvec4"],35674:[x,8,"mat2"],35685:[x,8,"mat2x3"],35686:[x,8,"mat2x4"],35675:[x,12,"mat3"],35687:[x,12,"mat3x2"],35688:[x,12,"mat3x4"],35676:[x,16,"mat4"],35689:[x,16,"mat4x2"],35690:[x,16,"mat4x3"]};function E(t){switch(t){case n:return n;case a:case o:case u:return a;case i:case v:case m:return i;default:return(0,e.assert)(!1),0}}function F({drawMode:t,vertexCount:r}){switch(t){case n:case u:return r;case a:return r/2;case o:return r-1;case i:return r/3;case v:case m:return r-2;default:return(0,e.assert)(!1),0}}function H({drawMode:t,vertexCount:r}){const s=F({drawMode:t,vertexCount:r});switch(E(t)){case n:return s;case a:return 2*s;case i:return 3*s;default:return(0,e.assert)(!1),0}}function I(e){const t=B[e];if(!t)return null;const[r,s]=t;return{type:r,components:s}}function J(e,n){switch(e){case t:case r:case s:case c:e=x}for(const t in B){const[r,s,c]=B[t];if(r===e&&s===n)return{glType:t,name:c}}return null}
},{"../utils/assert":"uPB9"}],"MOlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./accessor")),e=require("@luma.gl/gltools"),r=require("../webgl-utils/attribute-utils");function i(t){return t&&t.__esModule?t:{default:t}}class s{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,r=e.getProgramParameter(t.handle,35721);for(let i=0;i<r;i++){const{name:r,type:s,size:o}=e.getActiveAttrib(t.handle,i),n=e.getAttribLocation(t.handle,r);n>=0&&this._addAttribute(n,r,s,o)}this.attributeInfos.sort((t,e)=>t.location-e.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!(0,e.isWebGL2)(r))return;const i=r.getProgramParameter(t.handle,35971);for(let e=0;e<i;e++){const{name:i,type:s,size:o}=r.getTransformFeedbackVarying(t.handle,e);this._addVarying(e,i,s,o)}this.varyingInfos.sort((t,e)=>t.location-e.location)}_addAttribute(e,i,s,o){const{type:n,components:a}=(0,r.decomposeCompositeGLType)(s),c={type:n,size:o*a};this._inferProperties(e,i,c);const u={location:e,name:i,accessor:new t.default(c)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}_inferProperties(t,e,r){/instance/i.test(e)&&(r.divisor=1)}_addVarying(e,i,s,o){const{type:n,components:a}=(0,r.decomposeCompositeGLType)(s),c={location:e,name:i,accessor:new t.default({type:n,size:o*a})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}exports.default=s;
},{"./accessor":"OEzr","@luma.gl/gltools":"lAom","../webgl-utils/attribute-utils":"r3DH"}],"mrLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=g(require("./resource")),t=g(require("./texture")),r=g(require("./framebuffer")),i=require("./uniforms"),s=require("./shader"),n=g(require("./program-configuration")),a=require("@luma.gl/gltools"),o=require("../webgl-utils/constants-to-keys"),h=require("../webgl-utils/attribute-utils"),d=require("../utils/assert"),l=require("../utils/utils");function g(e){return e&&e.__esModule?e:{default:e}}const u=4,f=35981,m=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class c extends e.default{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",m),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:r,fs:i,varyings:o,bufferMode:h=f}=e;return this.hash=t||"",this.vs="string"==typeof r?new s.VertexShader(this.gl,{id:`${e.id}-vs`,source:r}):r,this.fs="string"==typeof i?new s.FragmentShader(this.gl,{id:`${e.id}-fs`,source:i}):i,(0,d.assert)(this.vs instanceof s.VertexShader),(0,d.assert)(this.fs instanceof s.FragmentShader),this.uniforms={},this._textureUniforms={},o&&o.length>0&&((0,a.assertWebGL2Context)(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,h)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new n.default(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:r,offset:i=0,start:s,end:n,isIndexed:l=!1,indexType:g=5123,instanceCount:u=0,isInstanced:f=u>0,vertexArray:m=null,transformFeedback:c,framebuffer:x,parameters:_={},uniforms:P,samplers:U}){if((P||U)&&(a.log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(P||{})),a.log.priority>=e){const i=x?x.id:"default",s=`mode=${(0,o.getKey)(this.gl,t)} verts=${r} `+`instances=${u} indexType=${(0,o.getKey)(this.gl,g)} `+`isInstanced=${f} isIndexed=${l} `+`Framebuffer=${i}`;a.log.log(e,s)()}return(0,d.assert)(m),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||f&&0===u)&&(m.bindForDraw(r,u,()=>{if(void 0!==x&&(_=Object.assign({},_,{framebuffer:x})),c){const e=(0,h.getPrimitiveDrawMode)(t);c.begin(e)}this._bindTextures(),(0,a.withParameters)(this.gl,_,()=>{l&&f?this.gl2.drawElementsInstanced(t,r,g,i,u):l&&(0,a.isWebGL2)(this.gl)&&!isNaN(s)&&!isNaN(n)?this.gl2.drawRangeElements(t,s,n,r,g,i):l?this.gl.drawElements(t,r,g,i):f?this.gl2.drawArraysInstanced(t,i,r,u):this.gl.drawArrays(t,i,r)}),c&&c.end()}),!0)}setUniforms(e={}){a.log.priority>=2&&(0,i.checkUniformValues)(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const s in e){const n=e[s],a=this._uniformSetters[s];if(a){let e=n,o=!1;if(e instanceof r.default&&(e=e.texture),e instanceof t.default)if(o=this.uniforms[s]!==n){void 0===a.textureIndex&&(a.textureIndex=this._textureIndexCounter++);const t=e,{textureIndex:r}=a;t.bind(r),e=r,this._textureUniforms[s]=t}else e=a.textureIndex;else this._textureUniforms[s]&&delete this._textureUniforms[s];(a(e)||o)&&(0,i.copyUniform)(this.uniforms,s,n)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const r=this._textureUniforms[t];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),r={};for(const i of t){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new s.VertexShader({handle:i});break;case 35632:r.fs=new s.FragmentShader({handle:i})}}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const e=this._getName();this.id=(0,l.uid)(e)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?`${e}-program`:"program"}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),a.log.time(u,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),a.log.timeEnd(u,`linkProgram for ${this._getName()}`)(),e.debug||a.log.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const r=this.gl.getActiveUniform(this.handle,t),{name:s}=(0,i.parseUniformName)(r.name);let n=e.getUniformLocation(this.handle,s);if(this._uniformSetters[s]=(0,i.getUniformSetter)(e,n,r),r.size>1)for(let t=0;t<r.size;t++)n=e.getUniformLocation(this.handle,`${s}[${t}]`),this._uniformSetters[`${s}[${t}]`]=(0,i.getUniformSetter)(e,n,r)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}exports.default=c;
},{"./resource":"DwD3","./texture":"GqKp","./framebuffer":"QRT8","./uniforms":"DC0O","./shader":"Mfxg","./program-configuration":"MOlP","@luma.gl/gltools":"lAom","../webgl-utils/constants-to-keys":"UyRF","../webgl-utils/attribute-utils":"r3DH","../utils/assert":"uPB9","../utils/utils":"OhKi"}],"utYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./resource")),t=require("../features"),r=require("@luma.gl/gltools"),i=require("../utils/assert");function s(e){return e&&e.__esModule?e:{default:e}}const n=34918,l=34919,u=35007,a=36795,h=35976,o=35887,g=36202;class d extends e.default{static isSupported(e,s=[]){const n=(0,r.isWebGL2)(e),l=(0,t.hasFeatures)(e,t.FEATURES.TIMER_QUERY);let u=n||l;for(const t of s)switch(t){case"queries":u=u&&n;break;case"timers":u=u&&l;break;default:(0,i.assert)(!1)}return u}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(u)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?g:o)}beginTransformFeedbackQuery(){return this.begin(h)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,l);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(a)}getResult(){return this.gl2.getQueryParameter(this.handle,n)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return d.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}exports.default=d;
},{"./resource":"DwD3","../features":"QnT2","@luma.gl/gltools":"lAom","../utils/assert":"uPB9"}],"us29":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/gltools"),t=r(require("./resource")),i=r(require("./buffer")),s=require("../utils/utils");function r(e){return e&&e.__esModule?e:{default:e}}class n extends t.default{static isSupported(t){return(0,e.isWebGL2)(t)}constructor(t,i={}){(0,e.assertWebGL2Context)(t),super(t,i),this.initialize(i),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,s.isObjectEmpty)(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(t,i){const s=this._getVaryingIndex(t),{buffer:r,byteSize:n,byteOffset:f}=this._getBufferParams(i);return s<0?(this.unused[t]=r,e.log.warn(()=>`${this.id} unused varying buffer ${t}`)(),this):(this.buffers[s]=i,this.bindOnUse||this._bindBuffer(s,r,f,n),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,s,r;return e instanceof i.default==!1?(r=e.buffer,s=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===s||(t=t||0,s=s||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:s}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:s}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,s,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,i=0,s){const r=t&&t.handle;return r&&void 0!==s?this.gl.bindBufferRange(35982,e,r,i,s):this.gl.bindBufferBase(35982,e,r),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}exports.default=n;
},{"@luma.gl/gltools":"lAom","./resource":"DwD3","./buffer":"d4ii","../utils/utils":"OhKi"}],"vUP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScratchArrayBuffer=r,exports.getScratchArray=e,exports.fillArray=n;let t=null;function r(r){return(!t||t.byteLength<r)&&(t=new ArrayBuffer(r)),t}function e(t,e){return new t(r(t.BYTES_PER_ELEMENT*e),0,e)}function n({target:t,source:r,start:e=0,count:n=1}){const o=r.length,c=n*o;let u=0;for(let f=e;u<o;u++)t[f++]=r[u];for(;u<c;)u<c-u?(t.copyWithin(e+u,e,e+u),u*=2):(t.copyWithin(e+u,e,e+c-u),u=c);return t}
},{}],"R2V4":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./resource")),e=n(require("./buffer")),r=require("@luma.gl/gltools"),s=require("../utils/array-utils-flat"),a=require("../utils/assert"),i=require("probe.gl");function n(t){return t&&t.__esModule?t:{default:t}}const u="elements must be GL.ELEMENT_ARRAY_BUFFER";class l extends t.default{static isSupported(t,e={}){return!e.constantAttributeZero||((0,r.isWebGL2)(t)||"Chrome"===(0,i.getBrowser)())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new l(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return l.MAX_ATTRIBUTES=l.MAX_ATTRIBUTES||t.getParameter(34921),l.MAX_ATTRIBUTES}static setConstant(t,e,r){switch(r.constructor){case Float32Array:l._setConstantFloatArray(t,e,r);break;case Int32Array:l._setConstantIntArray(t,e,r);break;case Uint32Array:l._setConstantUintArray(t,e,r);break;default:(0,a.assert)(!1)}}constructor(t,e={}){const r=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return l.getMaxAttributes(this.gl)}initialize(t={}){return this.setProps(t)}setProps(t){return this}setElementBuffer(t=null,e={}){return(0,a.assert)(!t||34963===t.target,u),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,e,s){if(34963===e.target)return this.setElementBuffer(e,s);const{size:i,type:n,stride:u,offset:l,normalized:b,integer:f,divisor:o}=s,{gl:A,gl2:c}=this;return t=Number(t),this.bind(()=>{A.bindBuffer(34962,e.handle),f?((0,a.assert)((0,r.isWebGL2)(A)),c.vertexAttribIPointer(t,i,n,u,l)):A.vertexAttribPointer(t,i,n,b,u,l),A.enableVertexAttribArray(t),c.vertexAttribDivisor(t,o||0)}),this}enable(t,e=!0){return!e&&0===t&&!l.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const a=this._normalizeConstantArrayValue(r),i=a.byteLength*t,n=a.length*t;let u=!this.buffer;if(this.buffer=this.buffer||new e.default(this.gl,i),u=(u=u||this.buffer.reallocate(i))||!this._compareConstantArrayValues(a,this.bufferValue)){const t=(0,s.getScratchArray)(r.constructor,n);(0,s.fillArray)({target:t,source:a,start:0,count:n}),this.buffer.subData(t),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static _setConstantFloatArray(t,e,r){switch(r.length){case 1:t.vertexAttrib1fv(e,r);break;case 2:t.vertexAttrib2fv(e,r);break;case 3:t.vertexAttrib3fv(e,r);break;case 4:t.vertexAttrib4fv(e,r);break;default:(0,a.assert)(!1)}}static _setConstantIntArray(t,e,s){switch((0,a.assert)((0,r.isWebGL2)(t)),s.length){case 1:t.vertexAttribI1iv(e,s);break;case 2:t.vertexAttribI2iv(e,s);break;case 3:t.vertexAttribI3iv(e,s);break;case 4:t.vertexAttribI4iv(e,s);break;default:(0,a.assert)(!1)}}static _setConstantUintArray(t,e,s){switch((0,a.assert)((0,r.isWebGL2)(t)),s.length){case 1:t.vertexAttribI1uiv(e,s);break;case 2:t.vertexAttribI2uiv(e,s);break;case 3:t.vertexAttribI3uiv(e,s);break;case 4:t.vertexAttribI4uiv(e,s);break;default:(0,a.assert)(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,{location:e}){return(0,a.assert)(Number.isFinite(e)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(e,t);default:return this.gl.getVertexAttrib(e,t)}})}}exports.default=l;
},{"./resource":"DwD3","./buffer":"d4ii","@luma.gl/gltools":"lAom","../utils/array-utils-flat":"vUP6","../utils/assert":"uPB9","probe.gl":"TYNK"}],"uoYk":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/gltools"),e=a(require("./accessor")),s=a(require("./buffer")),r=a(require("./vertex-array-object")),i=require("../utils/assert"),n=require("../utils/stub-methods");function a(t){return t&&t.__esModule?t:{default:t}}const o="VertexArray: attributes must be Buffers or constants (i.e. typed array)",u=/^(.+)__LOCATION_([0-9]+)$/,l=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class c{constructor(t,e={}){const s=e.id||e.program&&e.program.id;this.id=s,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new r.default(t),(0,n.stubRemovedMethods)(this,"VertexArray","v6.0",l),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(t={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const e in t){const s=t[e];this._setAttribute(e,s)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(t=null,e={}){return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e,s={}){if(34963===e.target)return this.setElementBuffer(e,s);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,s);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e,s={}){const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},s));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new s.default(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof s.default&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof s.default&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,s){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),r=s()}),r}_resolveLocationAndAccessor(s,r,n,a){const o={location:-1,accessor:null},{location:u,name:l}=this._getAttributeIndex(s);if(!Number.isFinite(u)||u<0)return this.unused[s]=r,t.log.once(3,()=>`unused value ${s} in ${this.id}`)(),o;const c=this._getAttributeInfo(l||u);if(!c)return o;const h=this.accessors[u]||{},f=e.default.resolve(c.accessor,h,n,a),{size:b,type:d}=f;return(0,i.assert)(Number.isFinite(b)&&Number.isFinite(d)),{location:u,accessor:f}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const s=u.exec(t),r=s?s[1]:t,i=s?Number(s[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof s.default)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s.default){const s=e[0],r=e[1];this.setBuffer(t,s,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const s=e;this.setConstant(t,s)}else{if(!(e.buffer instanceof s.default))throw new Error(o);{const s=e;this.setBuffer(t,s.buffer,s)}}}_setConstantAttributes(t,e){const s=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,s);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(t,e){if(r.default.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const s=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,s,this.accessors[0])}_setConstantAttribute(t,e){r.default.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const r=this.values[e],i=this.accessors[e];if(!r)return;const{divisor:n}=i,a=n>0;if(t.isInstanced=t.isInstanced||a,r instanceof s.default){const e=r;if(a){const s=e.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,s)}else{const s=e.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,s)}}}setElements(e=null,s={}){return t.log.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,s)}}exports.default=c;
},{"@luma.gl/gltools":"lAom","./accessor":"OEzr","./buffer":"d4ii","./vertex-array-object":"R2V4","../utils/assert":"uPB9","../utils/stub-methods":"EgC4"}],"ZKrJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../webgl-utils/attribute-utils"),s=require("../utils/assert");const e="UniformBufferLayout illegal argument",i=5126,r=5124,a=5125;class o{constructor(t){this.layout={},this.size=0;for(const e in t)this._addUniform(e,t[e]);this.size+=(4-this.size%4)%4;const s=new Float32Array(this.size);this.typedArray={[i]:s,[r]:new Int32Array(s.buffer),[a]:new Uint32Array(s.buffer)}}getBytes(){return 4*this.size}getData(){return this.typedArray[i]}getSubData(t){let s,e;if(void 0===t)s=this.data,e=0;else{const i=this.offsets[t],r=i+this.sizes[t];s=this.data.subarray(i,r),e=4*i}return{data:s,offset:e}}setUniforms(t){for(const s in t)this._setValue(s,t[s]);return this}_setValue(t,e){const i=this.layout[t];(0,s.assert)(i,"UniformLayoutStd140 illegal argument");const r=this.typedArray[i.type];1===i.size?r[i.offset]=e:r.set(e,i.offset)}_addUniform(i,r){const a=(0,t.decomposeCompositeGLType)(r);(0,s.assert)(a,e);const{type:o,components:n}=a;this.size=this._alignTo(this.size,n);const u=this.size;this.size+=n,this.layout[i]={type:o,size:n,offset:u}}_alignTo(t,s){switch(s){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}}exports.default=o;
},{"../webgl-utils/attribute-utils":"r3DH","../utils/assert":"uPB9"}],"Ijwg":[function(require,module,exports) {
"use strict";function e(e,r){const{maxElts:i=16,size:n=1}=r;let s="[";for(let o=0;o<e.length&&o<i;++o)o>0&&(s+=`,${o%n==0?" ":""}`),s+=t(e[o],r);return`${s}${e.length>i?"...":"]"}`}function t(t,r={}){const{isInteger:i=!1}=r;if(Array.isArray(t)||ArrayBuffer.isView(t))return e(t,r);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const n=t.toPrecision(2);return n.indexOf(".0")===n.length-2?n.slice(0,-1):n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=t;
},{}],"VDWA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForUniforms=r;var e=require("../utils/assert"),n=require("../utils/format-value");function r({header:r="Uniforms",program:o,uniforms:u,undefinedOnly:f=!1}){(0,e.assert)(o);const a=o._uniformSetters,i={},s=Object.keys(a).sort();let m=0;for(const e of s)e.match(".*_.*")||e.match(".*Matrix")||t({table:i,header:r,uniforms:u,uniformName:e,undefinedOnly:f})&&m++;for(const e of s)e.match(".*Matrix")&&t({table:i,header:r,uniforms:u,uniformName:e,undefinedOnly:f})&&m++;for(const e of s)i[e]||t({table:i,header:r,uniforms:u,uniformName:e,undefinedOnly:f})&&m++;let l=0;const d={};if(!f)for(const e in u){const t=u[e];i[e]||(l++,d[e]={Type:`NOT USED: ${t}`,[r]:(0,n.formatValue)(t)})}return{table:i,count:m,unusedTable:d,unusedCount:l}}function t({table:e,header:r,uniforms:t,uniformName:u,undefinedOnly:f}){const a=t[u],i=o(a);return(!f||!i)&&(e[u]={[r]:i?(0,n.formatValue)(a):"N/A","Uniform Type":i?a:"NOT PROVIDED"},!0)}function o(e){return null!=e}
},{"../utils/assert":"uPB9","../utils/format-value":"Ijwg"}],"TDxR":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForVertexArray=o;var e=s(require("../classes/buffer")),t=require("../webgl-utils/constants-to-keys"),r=require("../webgl-utils/attribute-utils"),n=require("../utils/format-value");function s(e){return e&&e.__esModule?e:{default:e}}function o({vertexArray:e,header:t="Attributes"}){if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=a(e,e.elements,null,t));const n=e.values;for(const s in n){const o=e._getAttributeInfo(s);if(o){let u=`${s}: ${o.name}`;const l=e.accessors[o.location];l&&(u=`${s}: ${i(o.name,l)}`),r[u]=a(e,n[s],l,t)}}return r}function a(r,s,o,a){const{gl:i}=r;if(!s)return{[a]:"null","Format ":"N/A"};let u,l,c,f="NOT PROVIDED",g=1,$=0,b=0;if(o&&(f=o.type,g=o.size,u=-1!==(f=String(f).replace("Array","")).indexOf("nt")),s instanceof e.default){const e=s,{data:r,changed:m}=e.getDebugData();let y;if(l=m?"*":"",c=r,$=(b=e.byteLength)/r.BYTES_PER_ELEMENT/g,o){y=`${o.divisor>0?"I ":"P "} ${$} (x${g}=${b} bytes ${(0,t.getKey)(i,f)})`}else u=!0,y=`${b} bytes`;return{[a]:`${l}${(0,n.formatValue)(c,{size:g,isInteger:u})}`,"Format ":y}}return c=s,g=s.length,u=-1!==(f=String(s.constructor.name).replace("Array","")).indexOf("nt"),{[a]:`${(0,n.formatValue)(c,{size:g,isInteger:u})} (constant)`,"Format ":`${g}x${f} (constant)`}}function i(e,t){const{type:n,size:s}=t,o=(0,r.getCompositeGLType)(n,s);return o?`${e} (${o.name})`:e}
},{"../classes/buffer":"d4ii","../webgl-utils/constants-to-keys":"UyRF","../webgl-utils/attribute-utils":"r3DH","../utils/format-value":"Ijwg"}],"jWha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDebugTableForProgramConfiguration=t;var e=require("../webgl-utils/attribute-utils");function t(e){const t={},r=`Accessors for ${e.id}`;for(const s of e.attributeInfos)if(s){t[`in ${o(s)}`]={[r]:JSON.stringify(s.accessor)}}for(const s of e.varyingInfos)if(s){t[`out ${o(s)}`]={[r]:JSON.stringify(s.accessor)}}return t}function o(t){const{type:o,size:r}=t.accessor,s=(0,e.getCompositeGLType)(o,r);return s?`${s.name} ${t.name}`:t.name}
},{"../webgl-utils/attribute-utils":"r3DH"}],"KdJH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return e.lumaStats}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return r.requestAnimationFrame}}),Object.defineProperty(exports,"cancelAnimationFrame",{enumerable:!0,get:function(){return r.cancelAnimationFrame}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return t.cloneTextureFrom}}),Object.defineProperty(exports,"getKeyValue",{enumerable:!0,get:function(){return n.getKeyValue}}),Object.defineProperty(exports,"getKey",{enumerable:!0,get:function(){return n.getKey}}),Object.defineProperty(exports,"getContextInfo",{enumerable:!0,get:function(){return u.getContextInfo}}),Object.defineProperty(exports,"getGLContextInfo",{enumerable:!0,get:function(){return u.getGLContextInfo}}),Object.defineProperty(exports,"getContextLimits",{enumerable:!0,get:function(){return u.getContextLimits}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return o.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return a.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return a.hasFeatures}}),Object.defineProperty(exports,"getFeatures",{enumerable:!0,get:function(){return a.getFeatures}}),Object.defineProperty(exports,"canCompileGLGSExtension",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Accessor",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return c.Shader}}),Object.defineProperty(exports,"VertexShader",{enumerable:!0,get:function(){return c.VertexShader}}),Object.defineProperty(exports,"FragmentShader",{enumerable:!0,get:function(){return c.FragmentShader}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return m.clear}}),Object.defineProperty(exports,"clearBuffer",{enumerable:!0,get:function(){return m.clearBuffer}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return x.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return x.readPixelsToBuffer}}),Object.defineProperty(exports,"copyToDataUrl",{enumerable:!0,get:function(){return x.copyToDataUrl}}),Object.defineProperty(exports,"copyToImage",{enumerable:!0,get:function(){return x.copyToImage}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return x.copyToTexture}}),Object.defineProperty(exports,"blit",{enumerable:!0,get:function(){return x.blit}}),Object.defineProperty(exports,"Query",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"VertexArrayObject",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"VertexArray",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"UniformBufferLayout",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"setPathPrefix",{enumerable:!0,get:function(){return T.setPathPrefix}}),Object.defineProperty(exports,"loadFile",{enumerable:!0,get:function(){return T.loadFile}}),Object.defineProperty(exports,"loadImage",{enumerable:!0,get:function(){return T.loadImage}}),Object.defineProperty(exports,"getShaderName",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"getShaderVersion",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return A.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return U.assert}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return C.uid}}),Object.defineProperty(exports,"isObjectEmpty",{enumerable:!0,get:function(){return C.isObjectEmpty}}),Object.defineProperty(exports,"parseUniformName",{enumerable:!0,get:function(){return D.parseUniformName}}),Object.defineProperty(exports,"getUniformSetter",{enumerable:!0,get:function(){return D.getUniformSetter}}),Object.defineProperty(exports,"getDebugTableForUniforms",{enumerable:!0,get:function(){return V.getDebugTableForUniforms}}),Object.defineProperty(exports,"getDebugTableForVertexArray",{enumerable:!0,get:function(){return I.getDebugTableForVertexArray}}),Object.defineProperty(exports,"getDebugTableForProgramConfiguration",{enumerable:!0,get:function(){return E.getDebugTableForProgramConfiguration}});var e=require("./init"),r=require("./webgl-utils/request-animation-frame"),t=require("./webgl-utils/texture-utils"),n=require("./webgl-utils/constants-to-keys"),u=require("./features/limits"),o=require("./features/webgl-features-table"),a=require("./features/features"),i=v(require("./features/check-glsl-extension")),s=v(require("./classes/accessor")),f=v(require("./classes/buffer")),c=require("./classes/shader"),l=v(require("./classes/program")),b=v(require("./classes/framebuffer")),p=v(require("./classes/renderbuffer")),g=v(require("./classes/texture-2d")),d=v(require("./classes/texture-cube")),m=require("./classes/clear"),x=require("./classes/copy-and-blit"),y=v(require("./classes/query")),P=v(require("./classes/texture-3d")),j=v(require("./classes/transform-feedback")),O=v(require("./classes/vertex-array-object")),q=v(require("./classes/vertex-array")),F=v(require("./classes/uniform-buffer-layout")),T=require("./utils/load-file"),h=v(require("./glsl-utils/get-shader-name")),S=v(require("./glsl-utils/get-shader-version")),A=require("@luma.gl/gltools"),U=require("./utils/assert"),C=require("./utils/utils"),D=require("./classes/uniforms"),V=require("./debug/debug-uniforms"),I=require("./debug/debug-vertex-array"),E=require("./debug/debug-program-configuration");function v(e){return e&&e.__esModule?e:{default:e}}
},{"./init":"HGnm","./webgl-utils/request-animation-frame":"AGkC","./webgl-utils/texture-utils":"oR6C","./webgl-utils/constants-to-keys":"UyRF","./features/limits":"JRcT","./features/webgl-features-table":"UMAV","./features/features":"qa8S","./features/check-glsl-extension":"CuwP","./classes/accessor":"OEzr","./classes/buffer":"d4ii","./classes/shader":"Mfxg","./classes/program":"mrLl","./classes/framebuffer":"QRT8","./classes/renderbuffer":"baET","./classes/texture-2d":"YE27","./classes/texture-cube":"eOjF","./classes/clear":"ztYM","./classes/copy-and-blit":"DmZq","./classes/query":"utYa","./classes/texture-3d":"mmMI","./classes/transform-feedback":"us29","./classes/vertex-array-object":"R2V4","./classes/vertex-array":"uoYk","./classes/uniform-buffer-layout":"ZKrJ","./utils/load-file":"QQ37","./glsl-utils/get-shader-name":"WHl0","./glsl-utils/get-shader-version":"ZDha","@luma.gl/gltools":"lAom","./utils/assert":"uPB9","./utils/utils":"OhKi","./classes/uniforms":"DC0O","./debug/debug-uniforms":"VDWA","./debug/debug-vertex-array":"TDxR","./debug/debug-program-configuration":"jWha"}],"HQLj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/gltools"),i=require("@luma.gl/webgl"),t=require("probe.gl/env");const s=(0,t.isBrowser)()&&"undefined"!=typeof document;let n=0;class a{constructor(t={}){const{onCreateContext:s=(i=>(0,e.createGLContext)(i)),onAddHTML:a=null,onInitialize:r=(()=>{}),onRender:o=(()=>{}),onFinalize:h=(()=>{}),onError:l,gl:m=null,glOptions:u={},debug:d=!1,createFramebuffer:p=!1,autoResizeViewport:c=!0,autoResizeDrawingBuffer:g=!0,stats:_=i.lumaStats.get(`animation-loop-${n++}`)}=t;let{useDevicePixels:f=!0}=t;"useDevicePixelRatio"in t&&(i.log.deprecated("useDevicePixelRatio","useDevicePixels")(),f=t.useDevicePixelRatio),this.props={onCreateContext:s,onAddHTML:a,onInitialize:r,onRender:o,onFinalize:h,onError:l,gl:m,glOptions:u,debug:d,createFramebuffer:p},this.gl=m,this.needsRedraw=null,this.timeline=null,this.stats=_,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:c,autoResizeDrawingBuffer:g,useDevicePixels:f}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return(0,i.assert)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=i.Query.isSupported(this.gl,["timers"])?new i.Query(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(e=>{this._running&&(this._addCallbackData(e||{}),!1!==e&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,i=1){const t=document.getElementById(e);return t?Number(t.value):i}setViewParameters(){return i.log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=s?new Promise((e,i)=>{s&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):(0,i.cancelAnimationFrame)(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):(0,i.requestAnimationFrame)(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:i,aspect:t}=this._getSizeAndAspect();e===this.animationProps.width&&i===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),t!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=i,this.animationProps.aspect=t,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(i){if(this.offScreen=i.canvas&&"undefined"!=typeof OffscreenCanvas&&i.canvas instanceof OffscreenCanvas,i=Object.assign({},i,this.props.glOptions),this.gl=this.props.gl?(0,e.instrumentGLContext)(this.props.gl,i):this.onCreateContext(i),!(0,e.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,e.resetParameters)(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const i=document.createElement("div");i.style.position="absolute",i.style.left="10px",i.style.bottom="10px",i.style.width="300px",i.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(i);const t=this.props.onAddHTML(i);t&&(i.innerHTML=t)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,i=this.gl.drawingBufferHeight;let t=1;const{canvas:s}=this.gl;return s&&s.clientHeight?t=s.clientWidth/s.clientHeight:e>0&&i>0&&(t=e/i),{width:e,height:i,aspect:t}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&(0,e.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new i.Framebuffer(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}exports.default=a;
},{"@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","probe.gl/env":"d3vq"}],"A8gs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAGMENT_SHADER=exports.VERTEX_SHADER=void 0;const s="vs";exports.VERTEX_SHADER="vs";const e="fs";exports.FRAGMENT_SHADER="fs";
},{}],"fG4k":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"shadertools: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"JUP5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return e.default}});var e=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./assert":"fG4k"}],"p0tA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=r;const e={number:{validate:(e,r)=>Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)},array:{validate:(e,r)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function r(e){const r={};for(const n in e){const a=t(e[n]);r[n]=a}return r}function t(r){let t=n(r);return"object"===t?r?"type"in r?Object.assign({},r,e[r.type]):"value"in r?(t=n(r.value),Object.assign({type:t},r,e[t])):{type:"object",value:r}:{type:"object",value:null}:Object.assign({type:t,value:r},e[t])}function n(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}
},{}],"X8lP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeShaderModule=n,exports.default=void 0;var e=require("../utils"),t=require("./filters/prop-types");const s="vs",i="fs";class r{constructor({name:s,vs:i,fs:r,dependencies:n=[],uniforms:a,getUniforms:f,deprecations:d=[],defines:c={},inject:u={},vertexShader:p,fragmentShader:l}){(0,e.assert)("string"==typeof s),this.name=s,this.vs=i||p,this.fs=r||l,this.getModuleUniforms=f,this.dependencies=n,this.deprecations=this._parseDeprecationDefinitions(d),this.defines=c,this.injections=o(u),a&&(this.uniforms=(0,t.parsePropTypes)(a))}getModuleSource(t){let r;switch(t){case s:r=this.vs||"";break;case i:r=this.fs||"";break;default:(0,e.assert)(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${r}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(s=>{s.regex.test(e)&&(s.deprecated?t.deprecated(s.old,s.new)():t.removed(s.old,s.new)())})}_parseDeprecationDefinitions(e){return e.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),e}_defaultGetUniforms(t={}){const s={},i=this.uniforms;for(const r in i){const n=i[r];r in t&&!n.private?(n.validate&&(0,e.assert)(n.validate(t[r],n),`${this.name}: invalid ${r}`),s[r]=t[r]):s[r]=n.value}return s}}function n(e){if(!e.normalized&&(e.normalized=!0,e.uniforms&&!e.getUniforms)){const t=new r(e);e.getUniforms=t.getUniforms.bind(t)}return e}function o(e){const t={vs:{},fs:{}};for(const s in e){let i=e[s];const r=s.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),t[r][s]=i}return t}exports.default=r;
},{"../utils":"JUP5","./filters/prop-types":"p0tA"}],"vIC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveModules=d,exports.TEST_EXPORTS=void 0;var e=o(require("./shader-module")),n=require("../utils");function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return r(s(e))}function r(e){const n={},o={};return t({modules:e,level:0,moduleMap:n,moduleDepth:o}),Object.keys(o).sort((e,n)=>o[n]-o[e]).map(e=>n[e])}function t({modules:e,level:n,moduleMap:o,moduleDepth:d}){if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const r of e)o[r.name]=r,(void 0===d[r.name]||d[r.name]<n)&&(d[r.name]=n);for(const r of e)r.dependencies&&t({modules:r.dependencies,level:n+1,moduleMap:o,moduleDepth:d})}function s(o,d){return o.map(o=>o instanceof e.default?o:((0,n.assert)("string"!=typeof o,`Shader module use by name is deprecated. Import shader module '${o}' and use it directly.`),(0,n.assert)(o.name,"shader module has no name"),(o=new e.default(o)).dependencies=s(o.dependencies),o))}const u={getShaderDependencies:r,getDependencyGraph:t};exports.TEST_EXPORTS=u;
},{"./shader-module":"X8lP","../utils":"JUP5"}],"w4sN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContextInfo=c,exports.canCompileGLGSExtension=f,exports.hasFeatures=L,exports.FEATURES=void 0;var e=r(require("./is-old-ie")),t=r(require("./assert"));function r(e){return e&&e.__esModule?e:{default:e}}const n=7936,a=7937,o=7938,i=35724,s={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},d={};function u(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||Boolean(e&&2===e._version)}function c(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||n),s=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||a);return{gpuVendor:E(r,s),vendor:r,renderer:s,version:e.getParameter(o),shadingLanguageVersion:e.getParameter(i)}}function E(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/Apple/i)||t.match(/Apple/i)?"APPLE":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN"}exports.FEATURES=d,Object.keys(s).forEach(e=>{d[e]=e});const _={};function f(r,n,a={}){const o=s[n];if((0,t.default)(o,n),!(0,e.default)(a))return!0;if(n in _)return _[n];const i=`#extension GL_${o[0]} : ${a.behavior||"enable"}\nvoid main(void) {}`,d=r.createShader(35633);r.shaderSource(d,i),r.compileShader(d);const u=r.getShaderParameter(d,35713);return r.deleteShader(d),_[n]=u,u}function A(e,r){const n=s[r];(0,t.default)(n,r);const a=u(e)&&n[1]||n[0],o="string"==typeof a?Boolean(e.getExtension(a)):a;return(0,t.default)(!1===o||!0===o),o}function L(e,t){return(t=Array.isArray(t)?t:[t]).every(t=>A(e,t))}
},{"./is-old-ie":"tGta","./assert":"fG4k"}],"iiHz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlatformShaderDefines=n,exports.getVersionDefines=_;var e=require("../utils/webgl-info");function n(n){switch((0,e.getContextInfo)(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}function _(n,_,i){let E="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DEPTH)&&(E+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_DERIVATIVES)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_DERIVATIVES)&&(E+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_FRAG_DATA)&&(0,e.canCompileGLGSExtension)(n,e.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(E+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),(0,e.hasFeatures)(n,e.FEATURES.GLSL_TEXTURE_LOD)&&(E+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),E}
},{"../utils/webgl-info":"w4sN"}],"qukd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MODULE_INJECTORS_FS=exports.MODULE_INJECTORS_VS=void 0;const o="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n";exports.MODULE_INJECTORS_VS=o;const r="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n";exports.MODULE_INJECTORS_FS=r;
},{}],"VTdi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.combineInjects=l,exports.DECLARATION_INJECT_MARKER=void 0;var e=require("../modules/module-injectors"),r=require("./constants"),s=require("../utils");const n={[r.VERTEX_SHADER]:e.MODULE_INJECTORS_VS,[r.FRAGMENT_SHADER]:e.MODULE_INJECTORS_FS},t="__LUMA_INJECT_DECLARATIONS__";exports.DECLARATION_INJECT_MARKER=t;const a=/void\s+main\s*\([^)]*\)\s*\{\n?/,c=/}\n?[^{}]*$/,o=[];function i(e,s,i,l=!1){const E=s===r.VERTEX_SHADER;for(const r in i){const s=i[r];s.sort((e,r)=>e.order-r.order),o.length=s.length;for(let e=0,r=s.length;e<r;++e)o[e]=s[e].injection;const n=`${o.join("\n")}\n`;switch(r){case"vs:#decl":E&&(e=e.replace(t,n));break;case"vs:#main-start":E&&(e=e.replace(a,e=>e+n));break;case"vs:#main-end":E&&(e=e.replace(c,e=>n+e));break;case"fs:#decl":E||(e=e.replace(t,n));break;case"fs:#main-start":E||(e=e.replace(a,e=>e+n));break;case"fs:#main-end":E||(e=e.replace(c,e=>n+e));break;default:e=e.replace(r,e=>e+n)}}return e=e.replace(t,""),l&&(e=e.replace(/\}\s*$/,e=>e+n[s])),e}function l(e){const r={};return(0,s.assert)(Array.isArray(e)&&e.length>1),e.forEach(e=>{for(const s in e)r[s]=r[s]?`${r[s]}\n${e[s]}`:e[s]}),r}
},{"../modules/module-injectors":"qukd","./constants":"A8gs","../utils":"JUP5"}],"hdw8":[function(require,module,exports) {
"use strict";function e(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=g;const t=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],r=[...t,[e("attribute"),"in $1"],[e("varying"),"out $1"]],n=[...t,[e("varying"),"in $1"]],o=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],u=[...o,[e("in"),"attribute $1"],[e("out"),"varying $1"]],c=[...o,[e("in"),"varying $1"]],i="gl_FragColor",s=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,a=/void\s+main\s*\([^)]*\)\s*\{\n?/;function g(e,t,n){switch(t){case 300:return n?b(e,r):x(e);case 100:return n?b(e,u):l(e);default:throw new Error(`unknown GLSL version ${t}`)}}function b(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function x(e){const t=(e=b(e,n)).match(s);if(t){const r=t[1];e=e.replace(new RegExp(`\\b${i}\\b`,"g"),r)}else{const t="fragmentColor";e=e.replace(a,e=>`out vec4 ${t};\n${e}`).replace(new RegExp(`\\b${i}\\b`,"g"),t)}return e}function l(e){const t=(e=b(e,c)).match(s);if(t){const r=t[1];e=e.replace(s,"").replace(new RegExp(`\\b${r}\\b`,"g"),i)}return e}
},{}],"aMxS":[function(require,module,exports) {
var define;
var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.assembleShaders=d;var n=require("./constants"),t=require("./resolve-modules"),r=require("./platform-defines"),o=u(require("./inject-shader")),s=c(require("./transpile-shader")),i=require("../utils");function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f();if(n&&n.has(e))return n.get(e);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}const a=`\n\n${o.DECLARATION_INJECT_MARKER}\n\n`,l={[n.VERTEX_SHADER]:"vertex",[n.FRAGMENT_SHADER]:"fragment"},p="precision highp float;\n\n";function d(e,r){const{vs:o,fs:s}=r,i=(0,t.resolveModules)(r.modules||[]);return{gl:e,vs:g(e,Object.assign({},r,{source:o,type:n.VERTEX_SHADER,modules:i})),fs:g(e,Object.assign({},r,{source:s,type:n.FRAGMENT_SHADER,modules:i})),getUniforms:E(i)}}function g(e,{id:t,source:c,type:f,modules:u,defines:l={},hookFunctions:d=[],inject:g={},transpileToGLSL100:E=!1,prologue:O=!0,log:_}){(0,i.assert)("string"==typeof c,"shader source must be a string");const A=f===n.VERTEX_SHADER,b=c.split("\n");let m=100,D="",R=c;0===b[0].indexOf("#version ")?(m=300,D=b[0],R=b.slice(1).join("\n")):D=`#version ${m}`;const S={};u.forEach(e=>{Object.assign(S,e.getDefines())}),Object.assign(S,l);let M=O?`${D}\n${$({id:t,source:c,type:f})}\n${y({type:f})}\n${(0,r.getPlatformShaderDefines)(e)}\n${(0,r.getVersionDefines)(e,m,!A)}\n${h(S)}\n${A?"":p}\n`:`${D}\n`;const P=v(d),T={},N={},H={};for(const n in g){const e="string"==typeof g[n]?{injection:g[n],order:0}:g[n],t=n.match(/^(v|f)s:(#)?([\w-]+)$/);if(t){const r=t[2],o=t[3];r?"decl"===o?N[n]=[e]:H[n]=[e]:T[n]=[e]}else H[n]=[e]}for(const n of u){_&&n.checkDeprecations(R,_),M+=n.getModuleSource(f,m);const e=n.injections[f];for(const n in e){const t=n.match(/^(v|f)s:#([\w-]+)$/);if(t){const r="decl"===t[2]?N:H;r[n]=r[n]||[],r[n].push(e[n])}else T[n]=T[n]||[],T[n].push(e[n])}}return M+=a,M=(0,o.default)(M,f,N),M+=j(P[f],T),M+=R,M=(0,o.default)(M,f,H),M=(0,s.default)(M,E?100:m,A)}function E(e){return function(n){const t={};for(const r of e){const e=r.getUniforms(n,t);Object.assign(t,e)}return t}}function y({type:e}){return`\n#define SHADER_TYPE_${l[e].toUpperCase()}\n`}function $({id:e,source:n,type:t}){return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${e}_${l[t]}\n\n`:""}function h(e={}){let n=0,t="";for(const r in e){0===n&&(t+="\n// APPLICATION DEFINES\n"),n++;const o=e[r];(o||Number.isFinite(o))&&(t+=`#define ${r.toUpperCase()} ${e[r]}\n`)}return 0===n&&(t+="\n"),t}function j(e,n){let t="";for(const r in e){const o=e[r];if(t+=`void ${o.signature} {\n`,o.header&&(t+=`  ${o.header}`),n[r]){const e=n[r];e.sort((e,n)=>e.order-n.order);for(const n of e)t+=`  ${n.injection}\n`}o.footer&&(t+=`  ${o.footer}`),t+="}\n"}return t}function v(e){const n={vs:{},fs:{}};return e.forEach(e=>{let t;"string"!=typeof e?e=(t=e).hook:t={},e=e.trim();const[r,o]=e.split(":"),s=e.replace(/\(.+/,"");n[r][s]=Object.assign(t,{signature:o})}),n}
},{"./constants":"A8gs","./resolve-modules":"vIC4","./platform-defines":"iiHz","./inject-shader":"VTdi","./transpile-shader":"hdw8","../utils":"JUP5"}],"uzoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQualifierDetails=s,exports.getPassthroughFS=u,exports.typeToChannelSuffix=c,exports.typeToChannelCount=o,exports.convertToVec4=a;var e=require("../utils");const r="void main() {gl_FragColor = vec4(0);}",t="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",n=`#version 300 es\n${t}`;function s(e,r){r=Array.isArray(r)?r:[r];const t=e.replace(/^\s+/,"").split(/\s+/),[n,s,u]=t;return r.includes(n)&&s&&u?{qualifier:n,type:s,name:u.split(";")[0]}:null}function u(e={}){const{version:s=100,input:u,inputType:c,output:o}=e;if(!u)return 300===s?n:s>300?`#version ${s}\n${t}`:r;const i=a(u,c);return s>=300?`#version ${s} ${300===s?"es":""}\nin ${c} ${u};\nout vec4 ${o};\nvoid main() {\n  ${o} = ${i};\n}`:`varying ${c} ${u};\nvoid main() {\n  gl_FragColor = ${i};\n}`}function c(r){switch(r){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,e.assert)(!1),null}}function o(r){switch(r){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,e.assert)(!1),null}}function a(r,t){switch(t){case"float":return`vec4(${r}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${r}, 0.0, 1.0)`;case"vec3":return`vec4(${r}, 1.0)`;case"vec4":return r;default:return(0,e.assert)(!1),null}}
},{"../utils":"JUP5"}],"LZIL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.random=void 0;const e="float random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n",o={name:"random",fs:e};exports.random=o;
},{}],"rSwV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp32=void 0;const n="#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",t={name:"fp32",vs:n,fs:null};exports.fp32=t;
},{}],"MlO6":[function(require,module,exports) {
"use strict";function t(t,r=[],e=0){const o=Math.fround(t),n=t-o;return r[e]=o,r[e+1]=n,r}function r(t){return t-Math.fround(t)}function e(r){const e=new Float32Array(32);for(let o=0;o<4;++o)for(let n=0;n<4;++n){const f=4*o+n;t(r[4*n+o],e,2*f)}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fp64ify=t,exports.fp64LowPart=r,exports.fp64ifyMatrix4=e;
},{}],"ObaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";exports.default=n;
},{}],"yYYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n";exports.default=n;
},{}],"mLAB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"fp64ify",{enumerable:!0,get:function(){return e.fp64ify}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return e.fp64LowPart}}),Object.defineProperty(exports,"fp64ifyMatrix4",{enumerable:!0,get:function(){return e.fp64ifyMatrix4}}),exports.fp64=exports.fp64arithmetic=void 0;var e=require("./fp64-utils"),t=r(require("./fp64-arithmetic.glsl")),f=r(require("./fp64-functions.glsl"));function r(e){return e&&e.__esModule?e:{default:e}}const i={ONE:1};function p(){return i}const n={name:"fp64-arithmetic",vs:t.default,fs:null,getUniforms:p,fp64ify:e.fp64ify,fp64LowPart:e.fp64LowPart,fp64ifyMatrix4:e.fp64ifyMatrix4};exports.fp64arithmetic=n;const o={name:"fp64",vs:f.default,fs:null,dependencies:[n],fp64ify:e.fp64ify,fp64LowPart:e.fp64LowPart,fp64ifyMatrix4:e.fp64ifyMatrix4};exports.fp64=o;
},{"./fp64-utils":"MlO6","./fp64-arithmetic.glsl":"ObaP","./fp64-functions.glsl":"yYYN"}],"YXhZ":[function(require,module,exports) {
"use strict";function e(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"wKVf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=u,exports.formatValue=s,exports.isArray=a,exports.clone=f,exports.toRadians=p,exports.toDegrees=x,exports.radians=h,exports.degrees=M,exports.sin=g,exports.cos=y,exports.tan=E,exports.asin=P,exports.acos=I,exports.atan=N,exports.clamp=d,exports.lerp=O,exports.equals=L,exports.exactEquals=S,exports.withEpsilon=b,exports.config=void 0;var t=r(require("./assert"));function r(t){return t&&t.__esModule?t:{default:t}}const n=1/Math.PI*180,e=1/180*Math.PI,o={};function u(r={}){for(const n in r)(0,t.default)(n in o),o[n]=r[n];return o}function i(t){return Math.round(t/o.EPSILON)*o.EPSILON}function s(t,{precision:r=o.precision||4}={}){return t=i(t),`${parseFloat(t.toPrecision(r))}`}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t){return t.clone?t.clone():new Array(t.length)}function f(t){return t.clone?t.clone():new Array(...t)}function l(t,r,n){if(a(t)){n=n||c(t);for(let e=0;e<n.length&&e<t.length;++e)n[e]=r(t[e],e,n);return n}return r(t)}function p(t){return h(t)}function x(t){return M(t)}function h(t,r){return l(t,t=>t*e,r)}function M(t,r){return l(t,t=>t*n,r)}function g(t){return l(t,t=>Math.sin(t))}function y(t){return l(t,t=>Math.cos(t))}function E(t){return l(t,t=>Math.tan(t))}function P(t){return l(t,t=>Math.asin(t))}function I(t){return l(t,t=>Math.acos(t))}function N(t){return l(t,t=>Math.atan(t))}function d(t,r,n){return l(t,t=>Math.max(r,Math.min(n,t)))}function O(t,r,n){return a(t)?t.map((t,e)=>O(t,r[e],n)):n*r+(1-n)*t}function L(t,r,n){const e=o.EPSILON;n&&(o.EPSILON=n);try{if(t===r)return!0;if(a(t)&&a(r)){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!L(t[n],r[n]))return!1;return!0}return t&&t.equals?t.equals(r):r&&r.equals?r.equals(t):!(!Number.isFinite(t)||!Number.isFinite(r))&&Math.abs(t-r)<=o.EPSILON*Math.max(1,Math.abs(t),Math.abs(r))}finally{o.EPSILON=e}}function S(t,r){if(t===r)return!0;if(t&&"object"==typeof t&&r&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(t.exactEquals)return t.exactEquals(r)}if(a(t)&&a(r)){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!S(t[n],r[n]))return!1;return!0}return!1}function b(t,r){const n=o.EPSILON;let e;o.EPSILON=t;try{e=r()}finally{o.EPSILON=n}return e}exports.config=o,o.EPSILON=1e-12,o.debug=!1,o.precision=4,o.printTypes=!1,o.printDegrees=!1,o.printRowMajor=!0;
},{"./assert":"YXhZ"}],"cPa0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../lib/common"),r=e(require("../../lib/assert"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t){function r(){var r=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return r.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t,r}class s extends(i(Array)){get ELEMENTS(){return(0,r.default)(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,r=0){for(let e=0;e<this.ELEMENTS;++e)this[e]=t[e+r];return this.check()}to(r){return r===this?this:(0,t.isArray)(r)?this.toArray(r):this.toObject(r)}toTarget(t){return t?this.to(t):this}toArray(t=[],r=0){for(let e=0;e<this.ELEMENTS;++e)t[r+e]=this[e];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(t.config)}formatString(r){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+(0,t.formatValue)(this[i],r);return`${r.printTypes?this.constructor.name:""}[${e}]`}equals(r){if(!r||this.length!==r.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,t.equals)(this[e],r[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,e){void 0===e&&(e=r,r=t,t=this);for(let i=0;i<this.ELEMENTS;++i){const s=t[i];this[i]=s+e*(r[i]-s)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(Math.max(this[e],t[e]),r[e]);return this.check()}add(...t){for(const r of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=r[t];return this.check()}subtract(...t){for(const r of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=r[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,r){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(Math.max(this[e],t),r);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(t.config.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}}exports.default=s;
},{"../../lib/common":"wKVf","../../lib/assert":"YXhZ"}],"imS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateVector=r,exports.checkNumber=n,exports.checkVector=t,exports.deprecated=i;var e=require("./common");function r(e,r){if(e.length!==r)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function n(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${e}`);return e}function t(n,t,o=""){if(e.config.debug&&!r(n,t))throw new Error(`math.gl: ${o} some fields set to invalid numbers'`);return n}const o={};function i(e,r){o[e]||(o[e]=!0,console.warn(`${e} has been removed in version ${r}, see upgrade guide for more information`))}
},{"./common":"wKVf"}],"BKjK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./math-array")),e=require("../../lib/validators"),r=s(require("../../lib/assert"));function s(t){return t&&t.__esModule?t:{default:t}}class i extends t.default{get ELEMENTS(){return(0,r.default)(!1),0}copy(t){return(0,r.default)(!1),this}get x(){return this[0]}set x(t){this[0]=(0,e.checkNumber)(t)}get y(){return this[1]}set y(t){this[1]=(0,e.checkNumber)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let e=0;e<this.ELEMENTS;++e){const s=this[e]-t[e];r+=s*s}return(0,e.checkNumber)(r)}dot(t){let r=0;for(let e=0;e<this.ELEMENTS;++e)r+=this[e]*t[e];return(0,e.checkNumber)(r)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,r.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,e.checkNumber)(this[t])}setComponent(t,e){return(0,r.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}exports.default=i;
},{"./math-array":"cPa0","../../lib/validators":"imS9","../../lib/assert":"YXhZ"}],"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=v,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=T,exports.angle=I,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(2);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function o(r){var e=new t.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function a(r,e){var n=new t.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function u(t,r){return t[0]=r[0],t[1]=r[1],t}function s(t,r,e){return t[0]=r,t[1]=e,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.hypot(e,n)}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function P(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function q(t){var r=t[0],e=t[1];return r*r+e*e}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t}function O(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function g(t,r){var e=r[0],n=r[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=r[0]*o,t[1]=r[1]*o,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]}function R(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function j(t,r,e,n){var o=r[0],a=r[1];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t}function Y(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function _(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t}function w(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o+e[4],t[1]=e[1]*n+e[3]*o+e[5],t}function D(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[3]*o+e[6],t[1]=e[1]*n+e[4]*o+e[7],t}function L(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[4]*o+e[12],t[1]=e[1]*n+e[5]*o+e[13],t}function T(t,r,e,n){var o=r[0]-e[0],a=r[1]-e[1],u=Math.sin(n),s=Math.cos(n);return t[0]=o*s-a*u+e[0],t[1]=o*u+a*s+e[1],t}function I(t,r){var e=t[0],n=t[1],o=r[0],a=r[1],u=Math.sqrt(e*e+n*n)*Math.sqrt(o*o+a*a),s=u&&(e*o+n*a)/u;return Math.acos(Math.min(Math.max(s,-1),1))}function N(t){return t[0]=0,t[1]=0,t}function k(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,r){return t[0]===r[0]&&t[1]===r[1]}function S(r,e){var n=r[0],o=r[1],a=e[0],u=e[1];return Math.abs(n-a)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,u),r[s]=t[0],r[s+1]=t[1];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"q1wk":[function(require,module,exports) {
"use strict";function t(t,r,e){const n=r[0],o=r[1],s=e[3]*n+e[7]*o||1;return t[0]=(e[0]*n+e[4]*o)/s,t[1]=(e[1]*n+e[5]*o)/s,t}function r(t,r,e){const n=r[0],o=r[1],s=r[2],c=e[3]*n+e[7]*o+e[11]*s||1;return t[0]=(e[0]*n+e[4]*o+e[8]*s)/c,t[1]=(e[1]*n+e[5]*o+e[9]*s)/c,t[2]=(e[2]*n+e[6]*o+e[10]*s)/c,t}function e(t,r,e){const n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t[2]=r[2],t}function n(t,r,e){const n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t[2]=r[2],t[3]=r[3],t}function o(t,r,e){const n=r[0],o=r[1],s=r[2];return t[0]=e[0]*n+e[3]*o+e[6]*s,t[1]=e[1]*n+e[4]*o+e[7]*s,t[2]=e[2]*n+e[5]*o+e[8]*s,t[3]=r[3],t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec2_transformMat4AsVector=t,exports.vec3_transformMat4AsVector=r,exports.vec3_transformMat2=e,exports.vec4_transformMat2=n,exports.vec4_transformMat3=o;
},{}],"JnVj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./base/vector")),r=require("../lib/common"),e=require("../lib/validators"),i=o(require("gl-matrix/vec2")),s=require("../lib/gl-matrix-extras");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n();if(r&&r.has(t))return r.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(e,s,o):e[s]=t[s]}return e.default=t,r&&r.set(t,e),e}function c(t){return t&&t.__esModule?t:{default:t}}class a extends t.default{constructor(t=0,i=0){super(2),(0,r.isArray)(t)&&1===arguments.length?this.copy(t):(r.config.debug&&((0,e.checkNumber)(t),(0,e.checkNumber)(i)),this[0]=t,this[1]=i)}set(t,r){return this[0]=t,this[1]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return r.config.debug&&((0,e.checkNumber)(t.x),(0,e.checkNumber)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return i.transformMat4(this,this,t),this.check()}transformAsVector(t){return(0,s.vec2_transformMat4AsVector)(this,this,t),this.check()}transformByMatrix3(t){return i.transformMat3(this,this,t),this.check()}transformByMatrix2x3(t){return i.transformMat2d(this,this,t),this.check()}transformByMatrix2(t){return i.transformMat2(this,this,t),this.check()}}exports.default=a;
},{"./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec2":"XSo1","../lib/gl-matrix-extras":"q1wk"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=O,exports.squaredLength=P,exports.negate=q,exports.inverse=A,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=N,exports.rotateX=I,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function P(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function N(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=t[0],n=t[1],o=t[2],a=r[0],s=r[1],u=r[2],i=Math.sqrt(e*e+n*n+o*o)*Math.sqrt(a*a+s*s+u*u),c=i&&E(t,r)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=O;exports.sqrDist=C;var G=a;exports.len=G;var H=P;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"WGSx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./base/vector")),r=require("../lib/common"),e=require("../lib/validators"),s=c(require("gl-matrix/vec3")),i=require("../lib/gl-matrix-extras");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n();if(r&&r.has(t))return r.get(t);var e={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var c=s?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(e,i,c):e[i]=t[i]}return e.default=t,r&&r.set(t,e),e}function h(t){return t&&t.__esModule?t:{default:t}}const o=[0,0,0],u={};class a extends t.default{static get ZERO(){return u.ZERO=u.ZERO||Object.freeze(new a(0,0,0,0))}constructor(t=0,s=0,i=0){super(-0,-0,-0),1===arguments.length&&(0,r.isArray)(t)?this.copy(t):(r.config.debug&&((0,e.checkNumber)(t),(0,e.checkNumber)(s),(0,e.checkNumber)(i)),this[0]=t,this[1]=s,this[2]=i)}set(t,r,e){return this[0]=t,this[1]=r,this[2]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return r.config.debug&&((0,e.checkNumber)(t.x),(0,e.checkNumber)(t.y),(0,e.checkNumber)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,e.checkNumber)(t)}angle(t){return s.angle(this,t)}cross(t){return s.cross(this,this,t),this.check()}rotateX({radians:t,origin:r=o}){return s.rotateX(this,this,r,t),this.check()}rotateY({radians:t,origin:r=o}){return s.rotateY(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=o}){return s.rotateZ(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return s.transformMat4(this,this,t),this.check()}transformAsVector(t){return(0,i.vec3_transformMat4AsVector)(this,this,t),this.check()}transformByMatrix3(t){return s.transformMat3(this,this,t),this.check()}transformByMatrix2(t){return(0,i.vec3_transformMat2)(this,this,t),this.check()}transformByQuaternion(t){return s.transformQuat(this,this,t),this.check()}}exports.default=a;
},{"./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec3":"AWBd","../lib/gl-matrix-extras":"q1wk"}],"T9bv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./base/vector")),e=require("../lib/common"),r=require("../lib/validators"),i=n(require("gl-matrix/vec3")),s=require("../lib/gl-matrix-extras");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=i?Object.getOwnPropertyDescriptor(t,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}function h(t){return t&&t.__esModule?t:{default:t}}const u={};class o extends t.default{static get ZERO(){return u.ZERO=u.ZERO||Object.freeze(new o(0,0,0,0))}constructor(t=0,i=0,s=0,c=0){super(-0,-0,-0,-0),(0,e.isArray)(t)&&1===arguments.length?this.copy(t):(e.config.debug&&((0,r.checkNumber)(t),(0,r.checkNumber)(i),(0,r.checkNumber)(s),(0,r.checkNumber)(c)),this[0]=t,this[1]=i,this[2]=s,this[3]=c)}set(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return e.config.debug&&((0,r.checkNumber)(t.x),(0,r.checkNumber)(t.y),(0,r.checkNumber)(t.z),(0,r.checkNumber)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,r.checkNumber)(t)}get w(){return this[3]}set w(t){this[3]=(0,r.checkNumber)(t)}transform(t){return i.transformMat4(this,this,t),this.check()}transformByMatrix3(t){return(0,s.vec4_transformMat3)(this,this,t),this.check()}transformByMatrix2(t){return(0,s.vec4_transformMat2)(this,this,t),this.check()}transformByQuaternion(t){return i.transformQuat(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}exports.default=o;
},{"./base/vector":"BKjK","../lib/common":"wKVf","../lib/validators":"imS9","gl-matrix/vec3":"AWBd","../lib/gl-matrix-extras":"q1wk"}],"rnPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./math-array")),e=require("../../lib/validators"),r=require("../../lib/common"),s=i(require("../../lib/assert"));function i(t){return t&&t.__esModule?t:{default:t}}class l extends t.default{get ELEMENTS(){return(0,s.default)(!1),0}get RANK(){return(0,s.default)(!1),0}toString(){let t="[";if(r.config.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=` ${this[r*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]"}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,r,s){return this[r*this.RANK+t]=(0,e.checkNumber)(s),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)e[s]=this[r+s];return e}setColumn(t,e){const r=t*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=e[s];return this}}exports.default=l;
},{"./math-array":"cPa0","../../lib/validators":"imS9","../../lib/common":"wKVf","../../lib/assert":"YXhZ"}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"XJqx"}],"YefV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./base/matrix")),e=require("../lib/validators"),r=require("../lib/gl-matrix-extras"),i=a(require("gl-matrix/mat3")),s=a(require("gl-matrix/vec2")),n=a(require("gl-matrix/vec3"));function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=i?Object.getOwnPropertyDescriptor(t,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}function c(t){return t&&t.__esModule?t:{default:t}}const o=Object.freeze([1,0,0,0,1,0,0,0,1]),u=Object.freeze([0,0,0,0,0,0,0,0,0]),f=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),l={};class O extends t.default{static get IDENTITY(){return l.IDENTITY=l.IDENTITY||Object.freeze(new O(o)),l.IDENTITY}static get ZERO(){return l.ZERO=l.ZERO||Object.freeze(new O(u)),l.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return f}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}set(t,e,r,i,s,n,h,a,c){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=s,this[5]=n,this[6]=h,this[7]=a,this[8]=c,this.check()}setRowMajor(t,e,r,i,s,n,h,a,c){return this[0]=t,this[1]=i,this[2]=h,this[3]=e,this[4]=s,this[5]=a,this[6]=r,this[7]=n,this[8]=c,this.check()}determinant(){return i.determinant(this)}identity(){return this.copy(o)}fromQuaternion(t){return i.fromQuat(this,t),this.check()}transpose(){return i.transpose(this,this),this.check()}invert(){return i.invert(this,this),this.check()}multiplyLeft(t){return i.multiply(this,t,this),this.check()}multiplyRight(t){return i.multiply(this,this,t),this.check()}rotate(t){return i.rotate(this,this,t),this.check()}scale(t){return Array.isArray(t)?i.scale(this,this,t):i.scale(this,this,[t,t,t]),this.check()}translate(t){return i.translate(this,this,t),this.check()}transform(t,i){switch(t.length){case 2:i=s.transformMat3(i||[-0,-0],t,this);break;case 3:i=n.transformMat3(i||[-0,-0,-0],t,this);break;case 4:i=(0,r.vec4_transformMat3)(i||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,e.checkVector)(i,t.length),i}transformVector(t,r){return(0,e.deprecated)("Matrix3.transformVector"),this.transform(t,r)}transformVector2(t,r){return(0,e.deprecated)("Matrix3.transformVector"),this.transform(t,r)}transformVector3(t,r){return(0,e.deprecated)("Matrix3.transformVector"),this.transform(t,r)}}exports.default=O;
},{"./base/matrix":"rnPl","../lib/validators":"imS9","../lib/gl-matrix-extras":"q1wk","gl-matrix/mat3":"vtQf","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"XJqx"}],"zWbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"XJqx"}],"of13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../lib/validators"),r=c(require("./base/matrix")),e=require("../lib/gl-matrix-extras"),i=o(require("gl-matrix/mat4")),s=o(require("gl-matrix/vec2")),h=o(require("gl-matrix/vec3")),n=o(require("gl-matrix/vec4"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var h=i?Object.getOwnPropertyDescriptor(t,s):null;h&&(h.get||h.set)?Object.defineProperty(e,s,h):e[s]=t[s]}return e.default=t,r&&r.set(t,e),e}function c(t){return t&&t.__esModule?t:{default:t}}const u=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),l=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),O={};class p extends r.default{static get IDENTITY(){return O.IDENTITY=O.IDENTITY||Object.freeze(new p(u)),O.IDENTITY}static get ZERO(){return O.ZERO=O.ZERO||Object.freeze(new p(f)),O.ZERO}get INDICES(){return l}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,e,i,s,h,n,a,o,c,u,f,l,O,p,m){return this[0]=t,this[1]=r,this[2]=e,this[3]=i,this[4]=s,this[5]=h,this[6]=n,this[7]=a,this[8]=o,this[9]=c,this[10]=u,this[11]=f,this[12]=l,this[13]=O,this[14]=p,this[15]=m,this.check()}setRowMajor(t,r,e,i,s,h,n,a,o,c,u,f,l,O,p,m){return this[0]=t,this[1]=s,this[2]=o,this[3]=l,this[4]=r,this[5]=h,this[6]=c,this[7]=O,this[8]=e,this[9]=n,this[10]=u,this[11]=p,this[12]=i,this[13]=a,this[14]=f,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(u)}fromQuaternion(t){return i.fromQuat(this,t),this.check()}frustum({left:t,right:r,bottom:e,top:s,near:h,far:n}){return n===1/0?p._computeInfinitePerspectiveOffCenter(this,t,r,e,s,h):i.frustum(this,t,r,e,s,h,n),this.check()}static _computeInfinitePerspectiveOffCenter(t,r,e,i,s,h){const n=2*h/(e-r),a=2*h/(s-i),o=(e+r)/(e-r),c=(s+i)/(s-i),u=-2*h;return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=o,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0,t}lookAt(t,r,e){return 1===arguments.length&&({eye:t,center:r,up:e}=t),r=r||[0,0,0],e=e||[0,1,0],i.lookAt(this,t,r,e),this.check()}ortho({left:t,right:r,bottom:e,top:s,near:h=.1,far:n=500}){return i.ortho(this,t,r,e,s,h,n),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:r=1,focalDistance:e=1,near:i=.1,far:s=500}){if(t>2*Math.PI)throw Error("radians");const h=t/2,n=e*Math.tan(h),a=n*r;return(new p).ortho({left:-a,right:a,bottom:-n,top:n,near:i,far:s})}perspective({fovy:t,fov:r=45*Math.PI/180,aspect:e=1,near:s=.1,far:h=500}={}){if((t=t||r)>2*Math.PI)throw Error("radians");return i.perspective(this,t,e,s,h),this.check()}determinant(){return i.determinant(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){const e=this.getScale(r||[-0,-0,-0]),i=1/e[0],s=1/e[1],h=1/e[2];return t[0]=this[0]*i,t[1]=this[1]*s,t[2]=this[2]*h,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*s,t[6]=this[6]*h,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*s,t[10]=this[10]*h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=null){const e=this.getScale(r||[-0,-0,-0]),i=1/e[0],s=1/e[1],h=1/e[2];return t[0]=this[0]*i,t[1]=this[1]*s,t[2]=this[2]*h,t[3]=this[4]*i,t[4]=this[5]*s,t[5]=this[6]*h,t[6]=this[8]*i,t[7]=this[9]*s,t[8]=this[10]*h,t}transpose(){return i.transpose(this,this),this.check()}invert(){return i.invert(this,this),this.check()}multiplyLeft(t){return i.multiply(this,t,this),this.check()}multiplyRight(t){return i.multiply(this,this,t),this.check()}rotateX(t){return i.rotateX(this,this,t),this.check()}rotateY(t){return i.rotateY(this,this,t),this.check()}rotateZ(t){return i.rotateZ(this,this,t),this.check()}rotateXYZ([t,r,e]){return this.rotateX(t).rotateY(r).rotateZ(e)}rotateAxis(t,r){return i.rotate(this,this,t,r),this.check()}scale(t){return Array.isArray(t)?i.scale(this,this,t):i.scale(this,this,[t,t,t]),this.check()}translate(t){return i.translate(this,this,t),this.check()}transform(r,e){return 4===r.length?(e=n.transformMat4(e||[-0,-0,-0,-0],r,this),(0,t.checkVector)(e,4),e):this.transformAsPoint(r,e)}transformAsPoint(r,e){const{length:i}=r;switch(i){case 2:e=s.transformMat4(e||[-0,-0],r,this);break;case 3:e=h.transformMat4(e||[-0,-0,-0],r,this);break;default:throw new Error("Illegal vector")}return(0,t.checkVector)(e,r.length),e}transformAsVector(r,i){switch(r.length){case 2:i=(0,e.vec2_transformMat4AsVector)(i||[-0,-0],r,this);break;case 3:i=(0,e.vec3_transformMat4AsVector)(i||[-0,-0,-0],r,this);break;default:throw new Error("Illegal vector")}return(0,t.checkVector)(i,r.length),i}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,e){return this.identity().translate([t,r,e])}transformPoint(r,e){return(0,t.deprecated)("Matrix4.transformPoint","3.0"),this.transformAsPoint(r,e)}transformVector(r,e){return(0,t.deprecated)("Matrix4.transformVector","3.0"),this.transformAsPoint(r,e)}transformDirection(r,e){return(0,t.deprecated)("Matrix4.transformDirection","3.0"),this.transformAsVector(r,e)}}exports.default=p;
},{"../lib/validators":"imS9","./base/matrix":"rnPl","../lib/gl-matrix-extras":"q1wk","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","gl-matrix/vec4":"zWbG"}],"KdRW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"zWbG"}],"T1TH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./base/math-array")),e=require("../lib/validators"),r=u(require("../lib/assert")),i=n(require("gl-matrix/quat")),s=n(require("gl-matrix/vec4"));function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=i?Object.getOwnPropertyDescriptor(t,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}function u(t){return t&&t.__esModule?t:{default:t}}const c=[0,0,0,1];class o extends t.default{constructor(t=0,e=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,r,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}fromMatrix3(t){return i.fromMat3(this,t),this.check()}identity(){return i.identity(this),this.check()}fromAxisRotation(t,e){return i.setAxisAngle(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,e.checkNumber)(t)}get y(){return this[1]}set y(t){this[1]=(0,e.checkNumber)(t)}get z(){return this[2]}set z(t){this[2]=(0,e.checkNumber)(t)}get w(){return this[3]}set w(t){this[3]=(0,e.checkNumber)(t)}len(){return i.length(this)}lengthSquared(){return i.squaredLength(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return i.dot(this,t)}rotationTo(t,e){return i.rotationTo(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return i.add(this,this,t),this.check()}calculateW(){return i.calculateW(this,this),this.check()}conjugate(){return i.conjugate(this,this),this.check()}invert(){return i.invert(this,this),this.check()}lerp(t,e,r){return i.lerp(this,t,e,r),this.check()}multiplyRight(t,e){return(0,r.default)(!e),i.multiply(this,this,t),this.check()}multiplyLeft(t,e){return(0,r.default)(!e),i.multiply(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return i.rotateX(this,this,t),this.check()}rotateY(t){return i.rotateY(this,this,t),this.check()}rotateZ(t){return i.rotateZ(this,this,t),this.check()}scale(t){return i.scale(this,this,t),this.check()}slerp(t,e,r){switch(arguments.length){case 1:({start:t=c,target:e,ratio:r}=arguments[0]);break;case 2:[e,r]=arguments,t=this}return i.slerp(this,t,e,r),this.check()}transformVector4(t,r=t){return s.transformQuat(r,t,this),(0,e.checkVector)(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}}exports.default=o;
},{"./base/math-array":"cPa0","../lib/validators":"imS9","../lib/assert":"YXhZ","gl-matrix/quat":"KdRW","gl-matrix/vec4":"zWbG"}],"XSGy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI};exports.default=e;
},{}],"xqJO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../lib/common"),e=h(require("./vector3")),i=s(require("gl-matrix/vec3"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if(Object.prototype.hasOwnProperty.call(t,h)){var a=s?Object.getOwnPropertyDescriptor(t,h):null;a&&(a.get||a.set)?Object.defineProperty(i,h,a):i[h]=t[h]}return i.default=t,e&&e.set(t,i),i}function h(t){return t&&t.__esModule?t:{default:t}}const a=1e-6,n=6371e3;class u{constructor({phi:t=0,theta:e=0,radius:i=1,bearing:r,pitch:s,altitude:h,radiusScale:a=n}={}){this.phi=t,this.theta=e,this.radius=i||h||1,this.radiusScale=a||1,void 0!==r&&(this.bearing=r),void 0!==s&&(this.pitch=s),this.check()}toString(){return this.formatString(t.config)}formatString({printTypes:e=!1}){const i=t.formatValue;return`${e?"Spherical":""}[rho:${i(this.radius)},theta:${i(this.theta)},phi:${i(this.phi)}]`}equals(e){return(0,t.equals)(this.radius,e.radius)&&(0,t.equals)(this.theta,e.theta)&&(0,t.equals)(this.phi,e.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,t.degrees)(this.phi)}set bearing(e){this.phi=Math.PI-(0,t.radians)(e)}get pitch(){return(0,t.degrees)(this.theta)}set pitch(e){this.theta=(0,t.radians)(e)}get longitude(){return(0,t.degrees)(this.phi)}get latitude(){return(0,t.degrees)(this.theta)}get lng(){return(0,t.degrees)(this.phi)}get lat(){return(0,t.degrees)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}clone(){return(new u).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([e,i,r]){this.radius=1+r/this.radiusScale,this.phi=(0,t.radians)(i),this.theta=(0,t.radians)(e)}fromVector3(e){return this.radius=i.length(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos((0,t.clamp)(e[2]/this.radius,-1,1))),this.check()}toVector3(){return new e.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}exports.default=u;
},{"../lib/common":"wKVf","./vector3":"WGSx","gl-matrix/vec3":"AWBd"}],"t6Su":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./base/math-array")),e=require("../lib/common"),r=require("../lib/validators"),s=a(require("./quaternion"));function a(t){return t&&t.__esModule?t:{default:t}}const i="Unknown Euler angle order",h=.99999;function n(t){return t>=0&&t<6}function o(t){if(t<0&&t>=6)throw new Error(i);return t}class c extends t.default{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return c.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(t){return c.RotationOrders[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,r=0,s=c.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,r,s)}fromQuaternion(t){const[e,r,s,a]=t,i=r*r,h=-2*(i+s*s)+1,n=2*(e*r+a*s);let o=-2*(e*s-a*r);const u=2*(r*s+a*e),M=-2*(e*e+i)+1;o=(o=o>1?1:o)<-1?-1:o;const l=Math.atan2(u,M),b=Math.asin(o),Y=Math.atan2(n,h);return new c(l,b,Y,c.RollPitchYaw)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,r=0,s){return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(s)?s:this[3],this.check()}validate(){return n(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=(0,r.checkNumber)(t)}get y(){return this[1]}set y(t){this[1]=(0,r.checkNumber)(t)}get z(){return this[2]}set z(t){this[2]=(0,r.checkNumber)(t)}get alpha(){return this[0]}set alpha(t){this[0]=(0,r.checkNumber)(t)}get beta(){return this[1]}set beta(t){this[1]=(0,r.checkNumber)(t)}get gamma(){return this[2]}set gamma(t){this[2]=(0,r.checkNumber)(t)}get phi(){return this[0]}set phi(t){this[0]=(0,r.checkNumber)(t)}get theta(){return this[1]}set theta(t){this[1]=(0,r.checkNumber)(t)}get psi(){return this[2]}set psi(t){this[2]=(0,r.checkNumber)(t)}get roll(){return this[0]}set roll(t){this[0]=(0,r.checkNumber)(t)}get pitch(){return this[1]}set pitch(t){this[1]=(0,r.checkNumber)(t)}get yaw(){return this[2]}set yaw(t){this[2]=(0,r.checkNumber)(t)}get order(){return this[3]}set order(t){this[3]=o(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,r){return this.set(t,e,r,c.ZYX)}fromRotationMatrix(t,e=c.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new s.default;switch(this[4]){case c.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case c.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case c.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case c.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case c.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case c.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(i)}}_fromRotationMatrix(t,r=c.DefaultOrder){const s=t.elements,a=s[0],n=s[4],o=s[8],u=s[1],M=s[5],l=s[9],b=s[2],Y=s[6],m=s[10];switch(r=r||this[3]){case c.XYZ:this[1]=Math.asin((0,e.clamp)(o,-1,1)),Math.abs(o)<h?(this[0]=Math.atan2(-l,m),this[2]=Math.atan2(-n,a)):(this[0]=Math.atan2(Y,M),this[2]=0);break;case c.YXZ:this[0]=Math.asin(-(0,e.clamp)(l,-1,1)),Math.abs(l)<h?(this[1]=Math.atan2(o,m),this[2]=Math.atan2(u,M)):(this[1]=Math.atan2(-b,a),this[2]=0);break;case c.ZXY:this[0]=Math.asin((0,e.clamp)(Y,-1,1)),Math.abs(Y)<h?(this[1]=Math.atan2(-b,m),this[2]=Math.atan2(-n,M)):(this[1]=0,this[2]=Math.atan2(u,a));break;case c.ZYX:this[1]=Math.asin(-(0,e.clamp)(b,-1,1)),Math.abs(b)<h?(this[0]=Math.atan2(Y,m),this[2]=Math.atan2(u,a)):(this[0]=0,this[2]=Math.atan2(-n,M));break;case c.YZX:this[2]=Math.asin((0,e.clamp)(u,-1,1)),Math.abs(u)<h?(this[0]=Math.atan2(-l,M),this[1]=Math.atan2(-b,a)):(this[0]=0,this[1]=Math.atan2(o,m));break;case c.XZY:this[2]=Math.asin(-(0,e.clamp)(n,-1,1)),Math.abs(n)<h?(this[0]=Math.atan2(Y,M),this[1]=Math.atan2(o,a)):(this[0]=Math.atan2(-l,m),this[1]=0);break;default:throw new Error(i)}return this[3]=r,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,s=this.y,a=this.z,h=Math.cos(r),n=Math.cos(s),o=Math.cos(a),u=Math.sin(r),M=Math.sin(s),l=Math.sin(a);switch(this[3]){case c.XYZ:{const t=h*o,r=h*l,s=u*o,a=u*l;e[0]=n*o,e[4]=-n*l,e[8]=M,e[1]=r+s*M,e[5]=t-a*M,e[9]=-u*n,e[2]=a-t*M,e[6]=s+r*M,e[10]=h*n;break}case c.YXZ:{const t=n*o,r=n*l,s=M*o,a=M*l;e[0]=t+a*u,e[4]=s*u-r,e[8]=h*M,e[1]=h*l,e[5]=h*o,e[9]=-u,e[2]=r*u-s,e[6]=a+t*u,e[10]=h*n;break}case c.ZXY:{const t=n*o,r=n*l,s=M*o,a=M*l;e[0]=t-a*u,e[4]=-h*l,e[8]=s+r*u,e[1]=r+s*u,e[5]=h*o,e[9]=a-t*u,e[2]=-h*M,e[6]=u,e[10]=h*n;break}case c.ZYX:{const t=h*o,r=h*l,s=u*o,a=u*l;e[0]=n*o,e[4]=s*M-r,e[8]=t*M+a,e[1]=n*l,e[5]=a*M+t,e[9]=r*M-s,e[2]=-M,e[6]=u*n,e[10]=h*n;break}case c.YZX:{const t=h*n,r=h*M,s=u*n,a=u*M;e[0]=n*o,e[4]=a-t*l,e[8]=s*l+r,e[1]=l,e[5]=h*o,e[9]=-u*o,e[2]=-M*o,e[6]=r*l+s,e[10]=t-a*l;break}case c.XZY:{const t=h*n,r=h*M,s=u*n,a=u*M;e[0]=n*o,e[4]=-l,e[8]=M*o,e[1]=t*l+a,e[5]=h*o,e[9]=r*l-s,e[2]=s*l-r,e[6]=u*o,e[10]=a*l+t;break}default:throw new Error(i)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),a=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),h=Math.sin(.5*this.pitch),n=t*r*i+e*a*h,o=t*a*i-e*r*h,c=t*r*h+e*a*i,u=e*r*i-t*a*h;return new s.default(o,c,u,n)}}exports.default=c;
},{"./base/math-array":"cPa0","../lib/common":"wKVf","../lib/validators":"imS9","./quaternion":"T1TH"}],"m8sA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./matrix4")),i=o(require("./vector3")),e=o(require("./euler"));function o(t){return t&&t.__esModule?t:{default:t}}class r{constructor({x:t=0,y:o=0,z:r=0,roll:n=0,pitch:s=0,yaw:a=0,position:h,orientation:l}={}){Array.isArray(h)&&3===h.length?this.position=new i.default(h):this.position=new i.default(t,o,r),Array.isArray(l)&&4===l.length?this.orientation=new e.default(l,l[3]):this.orientation=new e.default(n,s,a,e.default.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}exactEquals(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}getTransformationMatrix(){const i=Math.sin(this.roll),e=Math.sin(this.pitch),o=Math.sin(this.yaw),r=Math.cos(this.roll),n=Math.cos(this.pitch),s=Math.cos(this.yaw);return(new t.default).setRowMajor(s*n,-o*r+s*e*i,o*i+s*e*r,this.x,o*n,s*r+o*e*i,-s*i+o*e*r,this.y,-e,n*i,n*r,this.z,0,0,0,1)}getTransformationMatrixFromPose(i){return(new t.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(i.getTransformationMatrix().invert())}getTransformationMatrixToPose(i){return(new t.default).multiplyRight(i.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}exports.default=r;
},{"./matrix4":"of13","./vector3":"WGSx","./euler":"t6Su"}],"dwLx":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return r.config}}),Object.defineProperty(exports,"configure",{enumerable:!0,get:function(){return r.configure}}),Object.defineProperty(exports,"formatValue",{enumerable:!0,get:function(){return r.formatValue}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return r.isArray}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return r.clone}}),Object.defineProperty(exports,"equals",{enumerable:!0,get:function(){return r.equals}}),Object.defineProperty(exports,"exactEquals",{enumerable:!0,get:function(){return r.exactEquals}}),Object.defineProperty(exports,"toRadians",{enumerable:!0,get:function(){return r.toRadians}}),Object.defineProperty(exports,"toDegrees",{enumerable:!0,get:function(){return r.toDegrees}}),Object.defineProperty(exports,"radians",{enumerable:!0,get:function(){return r.radians}}),Object.defineProperty(exports,"degrees",{enumerable:!0,get:function(){return r.degrees}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return r.sin}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return r.cos}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return r.tan}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return r.asin}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return r.acos}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return r.atan}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return r.clamp}}),Object.defineProperty(exports,"lerp",{enumerable:!0,get:function(){return r.lerp}}),Object.defineProperty(exports,"withEpsilon",{enumerable:!0,get:function(){return r.withEpsilon}}),Object.defineProperty(exports,"Vector2",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Vector3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Vector4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Matrix3",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Matrix4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Quaternion",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"checkNumber",{enumerable:!0,get:function(){return c.checkNumber}}),Object.defineProperty(exports,"_MathUtils",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"SphericalCoordinates",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_SphericalCoordinates",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Pose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"_Pose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Euler",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"_Euler",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return b.default}});var r=require("./lib/common"),t=d(require("./classes/vector2")),n=d(require("./classes/vector3")),o=d(require("./classes/vector4")),u=d(require("./classes/matrix3")),i=d(require("./classes/matrix4")),a=d(require("./classes/quaternion")),c=require("./lib/validators"),s=d(require("./lib/math-utils")),f=d(require("./classes/spherical-coordinates")),l=d(require("./classes/pose")),p=d(require("./classes/euler")),b=d(require("./lib/assert"));function d(e){return e&&e.__esModule?e:{default:e}}const g={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e},m=g.global||g.self||g.window;m.mathgl={config:r.config};
},{"./lib/common":"wKVf","./classes/vector2":"JnVj","./classes/vector3":"WGSx","./classes/vector4":"T9bv","./classes/matrix3":"YefV","./classes/matrix4":"of13","./classes/quaternion":"T1TH","./lib/validators":"imS9","./lib/math-utils":"XSGy","./classes/spherical-coordinates":"xqJO","./classes/pose":"m8sA","./classes/euler":"t6Su","./lib/assert":"YXhZ"}],"zjhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.project=void 0;var o=require("@math.gl/core");const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};function n(i=r,n={}){const t={};return void 0!==i.modelMatrix&&(t.modelMatrix=i.modelMatrix),void 0!==i.viewMatrix&&(t.viewMatrix=i.viewMatrix),void 0!==i.projectionMatrix&&(t.projectionMatrix=i.projectionMatrix),void 0!==i.cameraPositionWorld&&(t.cameraPositionWorld=i.cameraPositionWorld),void 0===i.projectionMatrix&&void 0===i.viewMatrix||(t.viewProjectionMatrix=new o.Matrix4(i.projectionMatrix).multiplyRight(i.viewMatrix)),t}const t="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",e=`${t}\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n`,c=`\n${t}`,a={name:"project",getUniforms:n,vs:e,fs:c};exports.project=a;
},{"@math.gl/core":"dwLx"}],"HCaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";exports.default=n;
},{}],"ob8R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lights=void 0;var t=i(require("./lights.glsl"));function i(t){return t&&t.__esModule?t:{default:t}}const n={lightSources:{}};function e({color:t=[0,0,0],intensity:i=1}={}){return t.map(t=>t*i/255)}function o({ambientLight:t,pointLights:i=[],directionalLights:n=[]}){const o={};return o["lighting_uAmbientLight.color"]=t?e(t):[0,0,0],i.forEach((t,i)=>{o[`lighting_uPointLight[${i}].color`]=e(t),o[`lighting_uPointLight[${i}].position`]=t.position,o[`lighting_uPointLight[${i}].attenuation`]=t.attenuation||[1,0,0]}),o.lighting_uPointLightCount=i.length,n.forEach((t,i)=>{o[`lighting_uDirectionalLight[${i}].color`]=e(t),o[`lighting_uDirectionalLight[${i}].direction`]=t.direction}),o.lighting_uDirectionalLightCount=n.length,o}function g(t=n){if("lightSources"in t){const{ambientLight:i,pointLights:n,directionalLights:e}=t.lightSources||{};return i||n&&n.length>0||e&&e.length>0?Object.assign({},o({ambientLight:i,pointLights:n,directionalLights:e}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const i={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":i.ambientLight=n;break;case"directional":i.directionalLights.push(n);break;case"point":i.pointLights.push(n)}return g({lightSources:i})}return{}}const h={name:"lights",vs:t.default,fs:t.default,getUniforms:g,defines:{MAX_LIGHTS:3}};exports.lights=h;
},{"./lights.glsl":"HCaU"}],"VcTg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dirlight=void 0;var r=require("../project/project");const i=new Float32Array([1,1,2]),t={lightDirection:i};function e(r=t){const i={};return r.lightDirection&&(i.dirlight_uLightDirection=r.lightDirection),i}const o=null,n="uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",l={name:"dirlight",vs:o,fs:n,getUniforms:e,dependencies:[r.project]};exports.dirlight=l;
},{"../project/project":"zjhX"}],"flfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.picking=void 0;const i=new Uint8Array([0,255,255,255]),n={pickingSelectedColor:null,pickingHighlightColor:i,pickingActive:!1,pickingAttribute:!1};function o(i=n){const o={};if(void 0!==i.pickingSelectedColor)if(i.pickingSelectedColor){const n=i.pickingSelectedColor.slice(0,3);o.picking_uSelectedColorValid=1,o.picking_uSelectedColor=n}else o.picking_uSelectedColorValid=0;if(i.pickingHighlightColor){const n=Array.from(i.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),o.picking_uHighlightColor=n}return void 0!==i.pickingActive&&(o.picking_uActive=Boolean(i.pickingActive),o.picking_uAttribute=Boolean(i.pickingAttribute)),o}const e="uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",c="uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",l={name:"picking",vs:e,fs:c,getUniforms:o};exports.picking=l;
},{}],"bRsz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n";exports.default=i;
},{}],"VXHj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.phongLighting=exports.gouraudLighting=void 0;var i=require("../lights/lights"),e=n(require("./phong-lighting.glsl"));function n(i){return i&&i.__esModule?i:{default:i}}const t={};function g(i){const{ambient:e=.35,diffuse:n=.6,shininess:t=32,specularColor:g=[30,30,30]}=i;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:t,lighting_uSpecularColor:g.map(i=>i/255)}}function s(i=t){if(!("material"in i))return{};const{material:e}=i;return e?g(e):{lighting_uEnabled:!1}}const r={name:"gouraud-lighting",dependencies:[i.lights],vs:e.default,defines:{LIGHTING_VERTEX:1},getUniforms:s};exports.gouraudLighting=r;const u={name:"phong-lighting",dependencies:[i.lights],fs:e.default,defines:{LIGHTING_FRAGMENT:1},getUniforms:s};exports.phongLighting=u;
},{"../lights/lights":"ob8R","./phong-lighting.glsl":"bRsz"}],"tuDT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n";exports.default=n;
},{}],"VAQj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n";exports.default=n;
},{}],"rSII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pbr=void 0;var e=require("../lights/lights"),r=s(require("./pbr-vertex.glsl")),t=s(require("./pbr-fragment.glsl"));function s(e){return e&&e.__esModule?e:{default:e}}const l={name:"pbr",vs:r.default,fs:t.default,defines:{LIGHTING_FRAGMENT:1},dependencies:[e.lights]};exports.pbr=l;
},{"../lights/lights":"ob8R","./pbr-vertex.glsl":"tuDT","./pbr-fragment.glsl":"VAQj"}],"LILJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tiltShift=void 0;var e=require("../utils/random");const t="uniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform bool invert;\n\nvec2 tiltShift_getDelta(vec2 texSize) {\n  vec2 vector = normalize((end - start) * texSize);\n  return invert ? vec2(-vector.y, vector.x) : vector;\n}\n\nvec4 tiltShift_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  vec2 normal = normalize(vec2((start.y - end.y) * texSize.y, (end.x - start.x) * texSize.x));\n  float radius = smoothstep(0.0, 1.0,\n    abs(dot(texCoord * texSize - start * texSize, normal)) / gradientRadius) * blurRadius;\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + tiltShift_getDelta(texSize) / texSize * percent * radius);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",n={blurRadius:{value:15,min:0,max:50},gradientRadius:{value:200,min:0,max:400},start:[0,0],end:[1,1],invert:{value:!1,private:!0}},r={name:"tiltShift",uniforms:n,fs:t,dependencies:[e.random],passes:[{sampler:!0,uniforms:{invert:!1}},{sampler:!0,uniforms:{invert:!0}}]};exports.tiltShift=r;
},{"../utils/random":"LZIL"}],"trGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.triangleBlur=void 0;var e=require("../utils/random");const t="uniform float radius;\nuniform vec2 delta;\n\nvec4 triangleBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 adjustedDelta = delta * radius / texSize;\n\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec4 sample = texture2D(texture, texCoord + adjustedDelta * percent);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",r={radius:{value:20,min:0,softMax:100},delta:{value:[1,0],private:!0}},o={name:"triangleBlur",uniforms:r,fs:t,dependencies:[e.random],passes:[{sampler:!0,uniforms:{delta:[1,0]}},{sampler:!0,uniforms:{delta:[0,1]}}]};exports.triangleBlur=o;
},{"../utils/random":"LZIL"}],"bSXt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomBlur=void 0;var e=require("../utils/random");const t="\nuniform vec2 center;\nuniform float strength;\n\nvec4 zoomBlur_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  vec2 toCenter = center * texSize - texCoord * texSize;\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = 0.0; t <= 40.0; t++) {\n    float percent = (t + offset) / 40.0;\n    float weight = 4.0 * (percent - percent * percent);\n    vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\n    sample.rgb *= sample.a;\n\n    color += sample * weight;\n    total += weight;\n  }\n\n  color = color / total;\n  color.rgb /= color.a + 0.00001;\n\n  return color;\n}\n",o={center:[.5,.5],strength:{value:.3,min:0,softMax:1}},r={name:"zoomBlur",uniforms:o,fs:t,dependencies:[e.random],passes:[{sampler:!0}]};exports.zoomBlur=r;
},{"../utils/random":"LZIL"}],"wbqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.brightnessContrast=void 0;const r="uniform float brightness;\nuniform float contrast;\n\nvec4 brightnessContrast_filterColor(vec4 color) {\n  color.rgb += brightness;\n  if (contrast > 0.0) {\n    color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n  } else {\n    color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n  }\n  return color;\n}\n\nvec4 brightnessContrast_filterColor(vec4 color, vec2 texSize, vec2 texCoords) {\n  return brightnessContrast_filterColor(color);\n}\n",o={brightness:{value:0,min:-1,max:1},contrast:{value:0,min:-1,max:1}},t={name:"brightnessContrast",uniforms:o,fs:r,passes:[{filter:!0}]};exports.brightnessContrast=t;
},{}],"oonH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denoise=void 0;const e="uniform float strength;\n\nvec4 denoise_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  float adjustedExponent = 3. + 200. * pow(1. - strength, 4.);\n\n  vec4 center = texture2D(texture, texCoord);\n  vec4 color = vec4(0.0);\n  float total = 0.0;\n  for (float x = -4.0; x <= 4.0; x += 1.0) {\n    for (float y = -4.0; y <= 4.0; y += 1.0) {\n      vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\n      float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\n      weight = pow(weight, adjustedExponent);\n      color += sample * weight;\n      total += weight;\n    }\n  }\n\n  return color / total;\n}\n",t={strength:{value:.5,min:0,max:.1,adjust:e=>.53+200*Math.pow(1-e,4)}},o={name:"denoise",uniforms:t,fs:e,passes:[{sampler:!0},{sampler:!0}]};exports.denoise=o;
},{}],"UEue":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hueSaturation=void 0;const o="uniform float hue;\nuniform float saturation;\n\nvec4 hueSaturation_filterColor(vec4 color) {\n  float angle = hue * 3.14159265;\n  float s = sin(angle), c = cos(angle);\n  vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n  float len = length(color.rgb);\n  color.rgb = vec3(\n    dot(color.rgb, weights.xyz),\n    dot(color.rgb, weights.zxy),\n    dot(color.rgb, weights.yzx)\n  );\n  float average = (color.r + color.g + color.b) / 3.0;\n  if (saturation > 0.0) {\n    color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n  } else {\n    color.rgb += (average - color.rgb) * (-saturation);\n  }\n\n  return color;\n}\n\nvec4 hueSaturation_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return hueSaturation_filterColor(color);\n}\n",r={hue:{value:0,min:-1,max:1},saturation:{value:0,min:-1,max:1}},e={name:"hueSaturation",uniforms:r,fs:o,passes:[{filter:!0}]};exports.hueSaturation=e;
},{}],"xSdj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noise=void 0;const o="uniform float amount;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvec4 noise_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return noise_filterColor(color, texCoord);\n}\n",e={amount:{value:.5,min:0,max:1}},n={name:"noise",uniforms:e,fs:o,passes:[{filter:!0}]};exports.noise=n;
},{}],"VOww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sepia=void 0;const o="uniform float amount;\n\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n  color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n  color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\n  return color;\n}\n\nvec4 sepia_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return sepia_filterColor(color);\n}\n",n={amount:{value:.5,min:0,max:1}},r={name:"sepia",uniforms:n,fs:o,passes:[{filter:!0}]};exports.sepia=r;
},{}],"FovK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vibrance=void 0;const o="uniform float amount;\n\nvec4 vibrance_filterColor(vec4 color) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  float mx = max(color.r, max(color.g, color.b));\n  float amt = (mx - average) * (-amount * 3.0);\n  color.rgb = mix(color.rgb, vec3(mx), amt);\n  return color;\n}\n\nvec4 vibrance_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vibrance_filterColor(color);\n}\n",r={amount:{value:0,min:-1,max:1}},e={name:"vibrance",uniforms:r,fs:o,passes:[{filter:!0}]};exports.vibrance=e;
},{}],"vTmx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vignette=void 0;const e="uniform float radius;\nuniform float amount;\n\nvec4 vignette_filterColor(vec4 color, vec2 texCoord) {\n  float dist = distance(texCoord, vec2(0.5, 0.5));\n  float ratio = smoothstep(0.8, radius * 0.799, dist * (amount + radius));\n  return color.rgba * ratio + (1.0 - ratio)*vec4(0.0, 0.0, 0.0, 1.0);\n}\n\nvec4 vignette_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  return vignette_filterColor(color, texCoord);\n}\n",t={radius:{value:.5,min:0,max:1},amount:{value:.5,min:0,max:1}},o={name:"vignette",fs:e,uniforms:t,passes:[{filter:!0}]};exports.vignette=o;
},{}],"CVBQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.colorHalftone=void 0;const e="uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat scale = 3.1514 / size;\n\nfloat pattern(float angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n\tc * tex.x - s * tex.y,\n\ts * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n\tcmy * 10.0 - 3.0 + vec3(\n    pattern(angle + 0.26179, texSize, texCoord),\n\t  pattern(angle + 1.30899, texSize, texCoord),\n    pattern(angle, texSize, texCoord)\n  ),\n\t0.0,\n\t1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n",n={center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:4,min:1,softMin:3,softMax:20}},t={name:"colorHalftone",uniforms:n,fs:e,passes:[{filter:!0}]};exports.colorHalftone=t;
},{}],"jZuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dotScreen=void 0;const e="uniform vec2 center;\nuniform float angle;\nuniform float size;\n\nfloat pattern(vec2 texSize, vec2 texCoord) {\n  float scale = 3.1415 / size;\n\n  float s = sin(angle), c = cos(angle);\n  vec2 tex = texCoord * texSize - center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvec4 dotScreen_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  float average = (color.r + color.g + color.b) / 3.0;\n  return vec4(vec3(average * 10.0 - 5.0 + pattern(texSize, texCoord)), color.a);\n}\n",n={center:[.5,.5],angle:{value:1.1,softMin:0,softMax:Math.PI/2},size:{value:3,min:1,softMin:3,softMax:20}},t={name:"dotScreen",uniforms:n,fs:e,passes:[{filter:!0}]};exports.dotScreen=t;
},{}],"RiAQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.edgeWork=void 0;var e=require("../utils/random");const o="uniform float radius;\nuniform vec2 delta;\n\nvec4 edgeWork_sampleColor1(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec3 sampleColor = texture2D(source, texCoord + relativeDelta * percent).rgb;\n    float average = (sampleColor.r + sampleColor.g + sampleColor.b) / 3.0;\n    color.x += average * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += average * weight;\n      total.y += weight;\n    }\n  }\n  return vec4(color / total, 0.0, 1.0);\n}\n\nvec4 edgeWork_sampleColor2(sampler2D source, vec2 texSize, vec2 texCoord) {\n  vec2 relativeDelta = radius * delta / texSize;\n\n  vec2 color = vec2(0.0);\n  vec2 total = vec2(0.0);\n  float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n  for (float t = -30.0; t <= 30.0; t++) {\n    float percent = (t + offset - 0.5) / 30.0;\n    float weight = 1.0 - abs(percent);\n    vec2 sampleColor = texture2D(source, texCoord + relativeDelta * percent).xy;\n    color.x += sampleColor.x * weight;\n    total.x += weight;\n    if (abs(t) < 15.0) {\n      weight = weight * 2.0 - 1.0;\n      color.y += sampleColor.y * weight;\n      total.y += weight;\n    }\n  }\n  float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\n  return vec4(c, c, c, 1.0);\n}\n",t={radius:{value:2,min:1,softMax:50},delta:{value:[1,0],private:!0}},r={name:"edgeWork",uniforms:t,fs:o,dependencies:[e.random],passes:[{sampler:"edgeWork_sampleColor1",uniforms:{delta:[1,0]}},{sampler:"edgeWork_sampleColor2",uniforms:{delta:[0,1]}}]};exports.edgeWork=r;
},{"../utils/random":"LZIL"}],"izXl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexagonalPixelate=void 0;const e="uniform vec2 center;\nuniform float scale;\n\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - center * texSize) / scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= scale / texSize;\n\n  return texture2D(texture, choice + center);\n}\n",n={center:{value:[.5,.5],hint:"screenspace"},scale:{value:10,min:1,softMin:5,softMax:50}},c={name:"hexagonalPixelate",uniforms:n,fs:e,passes:[{sampler:!0}]};exports.hexagonalPixelate=c;
},{}],"z868":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ink=void 0;const e="uniform float strength;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = strength * strength * strength * strength * strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n",t={strength:{value:.25,min:0,softMax:1}},n={name:"ink",uniforms:t,fs:e,passes:[{sampler:!0}]};exports.ink=n;
},{}],"G9Jg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.magnify=void 0;const e="uniform vec2 screenXY;\nuniform float radiusPixels;\nuniform float zoom;\nuniform float borderWidthPixels;\nuniform vec4 borderColor;\n\nvec4 magnify_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 pos = vec2(screenXY.x, 1.0 - screenXY.y);\n  float dist = distance(texCoord * texSize, pos * texSize);\n  if (dist < radiusPixels) {\n    return texture2D(texture, (texCoord - pos) / zoom + pos);\n  }\n\n  if (dist <= radiusPixels + borderWidthPixels) {\n    return borderColor;\n  }\n  return texture2D(texture, texCoord);\n}\n",r={screenXY:[0,0],radiusPixels:200,zoom:2,borderWidthPixels:0,borderColor:[255,255,255,255]},o={name:"magnify",uniforms:r,fs:e,passes:[{sampler:!0}]};exports.magnify=o;
},{}],"JIP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warp=void 0;const e="vec4 warp_sampleColor(sampler2D texture, vec2 texSize, vec2 coord) {\n  vec4 color = texture2D(texture, coord / texSize);\n  vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\n  if (coord != clampedCoord) {\n    color.a *= max(0.0, 1.0 - length(coord - clampedCoord));\n  }\n\n  return color;\n}\n",o={name:"warp",fs:e};exports.warp=o;
},{}],"M0NH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bulgePinch=void 0;var e=require("./warp");const n="uniform float radius;\nuniform float strength;\nuniform vec2 center;\n\nvec2 bulgePinch_warp(vec2 coord, vec2 texCenter) {\n  coord -= texCenter;\n  float distance = length(coord);\n  if (distance < radius) {\n    float percent = distance / radius;\n    if (strength > 0.0) {\n      coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n    } else {\n      coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n    }\n  }\n  coord += texCenter;\n  return coord;\n}\n\nvec4 bulgePinch_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 coord = texCoord * texSize;\n  coord = bulgePinch_warp(coord, center * texSize);\n\n  return warp_sampleColor(texture, texSize, coord);\n}\n",r={center:[.5,.5],radius:{value:200,min:1,softMax:600},strength:{value:.5,min:-1,max:1}},t={name:"bulgePinch",fs:n,uniforms:r,dependencies:[e.warp],passes:[{sampler:!0}]};exports.bulgePinch=t;
},{"./warp":"JIP9"}],"L0x2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.swirl=void 0;var e=require("./warp");const r="uniform float radius;\nuniform float angle;\nuniform vec2 center;\n\nvec2 swirl_warp(vec2 coord, vec2 texCenter) {\n  coord -= texCenter;\n  float distance = length(coord);\n  if (distance < radius) {\n    float percent = (radius - distance) / radius;\n    float theta = percent * percent * angle;\n    float s = sin(theta);\n    float c = cos(theta);\n    coord = vec2(\n      coord.x * c - coord.y * s,\n      coord.x * s + coord.y * c\n    );\n  }\n  coord += texCenter;\n  return coord;\n}\n\nvec4 swirl_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 coord = texCoord * texSize;\n  coord = swirl_warp(coord, center * texSize);\n\n  return warp_sampleColor(texture, texSize, coord);\n}\n",o={center:[.5,.5],radius:{value:200,min:1,softMax:600},angle:{value:3,softMin:-25,softMax:25}},n={name:"swirl",fs:r,uniforms:o,dependencies:[e.warp],passes:[{sampler:!0}]};exports.swirl=n;
},{"./warp":"JIP9"}],"RDdh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fxaa=void 0;const n="\n#define FXAA_QUALITY_PRESET 29\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture2D(t, p)\n#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\nFxaaFloat FxaaLuma_(FxaaFloat4 rgba) { return dot(rgba.rgb, vec3(0.2126, 0.7152, 0.0722)); }\n\nFxaaFloat4 FxaaPixelShader_(\n\n\n    FxaaFloat2 pos,\n\n\n\n\n    FxaaTex tex,\n\n\n\n\n    FxaaFloat2 fxaaQualityRcpFrame,\n\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualitySubpix,\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualityEdgeThreshold,\n\n\n\n\n\n\n\n\n\n\n\n\n\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n    if(earlyExit)\n        return rgbyM;\n    FxaaFloat lumaNW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma_(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP));\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma_(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma_(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n                    }\n                    #endif\n                }\n                #endif\n            }\n            #endif\n        }\n        #endif\n    }\n    #endif\n                        }\n                        #endif\n                    }\n                    #endif\n                }\n                #endif\n            }\n            #endif\n        }\n        #endif\n    }\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaTexTop(tex, posM);\n}\n\nvec4 fxaa_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n    const float fxaa_QualitySubpix = 0.5;\n    const float fxaa_QualityEdgeThreshold = 0.125;\n    const float fxaa_QualityEdgeThresholdMin = 0.0833;\n\n    return FxaaPixelShader_(\n        texCoord,\n        texture,\n        vec2(1.0) / texSize,\n        fxaa_QualitySubpix,\n        fxaa_QualityEdgeThreshold,\n        fxaa_QualityEdgeThresholdMin\n    );\n}\n",a={name:"fxaa",uniforms:{},fs:n,passes:[{sampler:!0}]};exports.fxaa=a;
},{}],"hgD9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=void 0;const e="attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",r={name:"transform",vs:e,fs:null};exports.transform=r;
},{}],"wMsA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"random",{enumerable:!0,get:function(){return e.random}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return r.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return t.fp64}}),Object.defineProperty(exports,"fp64arithmetic",{enumerable:!0,get:function(){return t.fp64arithmetic}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return n.project}}),Object.defineProperty(exports,"lights",{enumerable:!0,get:function(){return i.lights}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return u.dirlight}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return o.picking}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return a.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return a.phongLighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return f.pbr}}),Object.defineProperty(exports,"tiltShift",{enumerable:!0,get:function(){return p.tiltShift}}),Object.defineProperty(exports,"triangleBlur",{enumerable:!0,get:function(){return g.triangleBlur}}),Object.defineProperty(exports,"zoomBlur",{enumerable:!0,get:function(){return l.zoomBlur}}),Object.defineProperty(exports,"brightnessContrast",{enumerable:!0,get:function(){return s.brightnessContrast}}),Object.defineProperty(exports,"denoise",{enumerable:!0,get:function(){return c.denoise}}),Object.defineProperty(exports,"hueSaturation",{enumerable:!0,get:function(){return b.hueSaturation}}),Object.defineProperty(exports,"noise",{enumerable:!0,get:function(){return m.noise}}),Object.defineProperty(exports,"sepia",{enumerable:!0,get:function(){return d.sepia}}),Object.defineProperty(exports,"vibrance",{enumerable:!0,get:function(){return j.vibrance}}),Object.defineProperty(exports,"vignette",{enumerable:!0,get:function(){return x.vignette}}),Object.defineProperty(exports,"colorHalftone",{enumerable:!0,get:function(){return P.colorHalftone}}),Object.defineProperty(exports,"dotScreen",{enumerable:!0,get:function(){return h.dotScreen}}),Object.defineProperty(exports,"edgeWork",{enumerable:!0,get:function(){return y.edgeWork}}),Object.defineProperty(exports,"hexagonalPixelate",{enumerable:!0,get:function(){return O.hexagonalPixelate}}),Object.defineProperty(exports,"ink",{enumerable:!0,get:function(){return q.ink}}),Object.defineProperty(exports,"magnify",{enumerable:!0,get:function(){return k.magnify}}),Object.defineProperty(exports,"bulgePinch",{enumerable:!0,get:function(){return w.bulgePinch}}),Object.defineProperty(exports,"swirl",{enumerable:!0,get:function(){return v.swirl}}),Object.defineProperty(exports,"_warp",{enumerable:!0,get:function(){return S.warp}}),Object.defineProperty(exports,"fxaa",{enumerable:!0,get:function(){return B.fxaa}}),Object.defineProperty(exports,"_transform",{enumerable:!0,get:function(){return L.transform}});var e=require("./utils/random"),r=require("./fp32/fp32"),t=require("./fp64/fp64"),n=require("./project/project"),i=require("./lights/lights"),u=require("./dirlight/dirlight"),o=require("./picking/picking"),a=require("./phong-lighting/phong-lighting"),f=require("./pbr/pbr"),p=require("./image-blur-filters/tiltshift"),g=require("./image-blur-filters/triangleblur"),l=require("./image-blur-filters/zoomblur"),s=require("./image-adjust-filters/brightnesscontrast"),c=require("./image-adjust-filters/denoise"),b=require("./image-adjust-filters/huesaturation"),m=require("./image-adjust-filters/noise"),d=require("./image-adjust-filters/sepia"),j=require("./image-adjust-filters/vibrance"),x=require("./image-adjust-filters/vignette"),P=require("./image-fun-filters/colorhalftone"),h=require("./image-fun-filters/dotscreen"),y=require("./image-fun-filters/edgework"),O=require("./image-fun-filters/hexagonalpixelate"),q=require("./image-fun-filters/ink"),k=require("./image-fun-filters/magnify"),w=require("./image-warp-filters/bulgepinch"),v=require("./image-warp-filters/swirl"),S=require("./image-warp-filters/warp"),B=require("./fxaa/fxaa"),L=require("./transform/transform");
},{"./utils/random":"LZIL","./fp32/fp32":"rSwV","./fp64/fp64":"mLAB","./project/project":"zjhX","./lights/lights":"ob8R","./dirlight/dirlight":"VcTg","./picking/picking":"flfn","./phong-lighting/phong-lighting":"VXHj","./pbr/pbr":"rSII","./image-blur-filters/tiltshift":"LILJ","./image-blur-filters/triangleblur":"trGj","./image-blur-filters/zoomblur":"bSXt","./image-adjust-filters/brightnesscontrast":"wbqy","./image-adjust-filters/denoise":"oonH","./image-adjust-filters/huesaturation":"UEue","./image-adjust-filters/noise":"xSdj","./image-adjust-filters/sepia":"VOww","./image-adjust-filters/vibrance":"FovK","./image-adjust-filters/vignette":"vTmx","./image-fun-filters/colorhalftone":"CVBQ","./image-fun-filters/dotscreen":"jZuR","./image-fun-filters/edgework":"RiAQ","./image-fun-filters/hexagonalpixelate":"izXl","./image-fun-filters/ink":"z868","./image-fun-filters/magnify":"G9Jg","./image-warp-filters/bulgepinch":"M0NH","./image-warp-filters/swirl":"L0x2","./image-warp-filters/warp":"JIP9","./fxaa/fxaa":"RDdh","./transform/transform":"hgD9"}],"Pzgo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={assembleShaders:!0,combineInjects:!0,normalizeShaderModule:!0,getQualifierDetails:!0,getPassthroughFS:!0,typeToChannelSuffix:!0,typeToChannelCount:!0,convertToVec4:!0};Object.defineProperty(exports,"assembleShaders",{enumerable:!0,get:function(){return r.assembleShaders}}),Object.defineProperty(exports,"combineInjects",{enumerable:!0,get:function(){return t.combineInjects}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return n.normalizeShaderModule}}),Object.defineProperty(exports,"getQualifierDetails",{enumerable:!0,get:function(){return o.getQualifierDetails}}),Object.defineProperty(exports,"getPassthroughFS",{enumerable:!0,get:function(){return o.getPassthroughFS}}),Object.defineProperty(exports,"typeToChannelSuffix",{enumerable:!0,get:function(){return o.typeToChannelSuffix}}),Object.defineProperty(exports,"typeToChannelCount",{enumerable:!0,get:function(){return o.typeToChannelCount}}),Object.defineProperty(exports,"convertToVec4",{enumerable:!0,get:function(){return o.convertToVec4}});var r=require("./lib/assemble-shaders"),t=require("./lib/inject-shader"),n=require("./lib/shader-module"),o=require("./utils/shader-utils"),u=require("./modules");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===u[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});
},{"./lib/assemble-shaders":"aMxS","./lib/inject-shader":"VTdi","./lib/shader-module":"X8lP","./utils/shader-utils":"uzoD","./modules":"wMsA"}],"BP7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=require("@luma.gl/shadertools"),t=require("@luma.gl/webgl");class e{static getDefaultProgramManager(s){return s.luma=s.luma||{},s.luma.defaultProgramManager=s.luma.defaultProgramManager||new e(s),s.luma.defaultProgramManager}constructor(s){this.gl=s,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(s){this._defaultModules.find(t=>t.name===s.name)||this._defaultModules.push(s),this.stateHash++}removeDefaultModule(s){const t="string"==typeof s?s:s.name;this._defaultModules=this._defaultModules.filter(s=>s.name!==t),this.stateHash++}addShaderHook(s,t){t&&(s=Object.assign(t,{hook:s})),this._hookFunctions.push(s),this.stateHash++}get(e={}){const{vs:h="",fs:a="",defines:o={},inject:i={},varyings:r=[],bufferMode:u=35981,transpileToGLSL100:n=!1}=e,l=this._getModuleList(e.modules),g=this._getHash(h),d=this._getHash(a),_=l.map(s=>this._getHash(s.name)).sort(),f=r.map(s=>this._getHash(s)),m=Object.keys(o).sort(),c=Object.keys(i).sort(),p=[],M=[];for(const s of m)p.push(this._getHash(s)),p.push(this._getHash(o[s]));for(const s of c)M.push(this._getHash(s)),M.push(this._getHash(i[s]));const H=`${g}/${d}D${p.join("/")}M${_.join("/")}I${M.join("/")}V${f.join("/")}H${this.stateHash}B${u}${n?"T":""}`;if(!this._programCache[H]){const e=(0,s.assembleShaders)(this.gl,{vs:h,fs:a,modules:l,inject:i,defines:o,hookFunctions:this._hookFunctions,transpileToGLSL100:n});this._programCache[H]=new t.Program(this.gl,{hash:H,vs:e.vs,fs:e.fs,varyings:r,bufferMode:u}),this._getUniforms[H]=e.getUniforms||(s=>{}),this._useCounts[H]=0}return this._useCounts[H]++,this._programCache[H]}getUniforms(s){return this._getUniforms[s.hash]||null}release(s){const t=s.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(s){return void 0===this._hashes[s]&&(this._hashes[s]=this._hashCounter++),this._hashes[s]}_getModuleList(s=[]){const t=new Array(this._defaultModules.length+s.length),e={};let h=0;for(let a=0,o=this._defaultModules.length;a<o;++a){const s=this._defaultModules[a],o=s.name;t[h++]=s,e[o]=!0}for(let a=0,o=s.length;a<o;++a){const o=s[a],i=o.name;e[i]||(t[h++]=o,e[i]=!0)}return t.length=h,t}}exports.default=e;
},{"@luma.gl/shadertools":"Pzgo","@luma.gl/webgl":"KdJH"}],"sgeN":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBuffersFromGeometry=t,exports.inferAttributeAccessor=i;var e=require("@luma.gl/webgl");const s={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function t(s,t,o){const n={};let a=t.indices;for(const c in t.attributes){const u=t.attributes[c],d=r(c,o);if("indices"===c)a=u;else if(u.constant)n[d]=u.value;else{const t=u.value,r={...u};delete r.value,n[d]=[new e.Buffer(s,t),r],i(c,r)}}if(a){const t=a.value||a;(0,e.assert)(t instanceof Uint16Array||t instanceof Uint32Array,'attribute array for "indices" must be of integer type');const r={size:1,isIndexed:void 0===a.isIndexed||a.isIndexed};n.indices=[new e.Buffer(s,{data:t,target:34963}),r]}return n}function r(e,t){const{attributeMap:r=s}=t||{};return r&&r[e]||e}function i(s,t){let r;switch(s){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}(0,e.assert)(Number.isFinite(t.size),`attribute ${s} needs size`)}
},{"@luma.gl/webgl":"KdJH"}],"EKUN":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/gltools"),t=i(require("./program-manager")),r=require("@luma.gl/webgl"),s=require("./model-utils");function i(e){return e&&e.__esModule?e:{default:e}}const a=2,o=1e4,n="Model needs drawMode and vertexCount",g=()=>{},u={};class d{constructor(t,s={}){const{id:i=(0,r.uid)("model")}=s;(0,r.assert)((0,e.isWebGL)(t)),this.id=i,this.gl=t,this.id=s.id||(0,r.uid)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(s)}initialize(e){this.props={},this.programManager=e.programManager||t.default.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:s=null,vs:i,fs:a,modules:o,defines:g,inject:u,varyings:d,bufferMode:h,transpileToGLSL100:m}=e;this.programProps={program:s,vs:i,fs:a,modules:o,defines:g,inject:u,varyings:d,bufferMode:h,transpileToGLSL100:m},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},(0,r.assert)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),n)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:r,fs:s,modules:i,defines:a,inject:o,varyings:n,bufferMode:g,transpileToGLSL100:u}=e;this.programProps={program:t,vs:r,fs:s,modules:i,defines:a,inject:o,varyings:n,bufferMode:g,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return(0,r.assert)(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return(0,r.assert)(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=(0,s.getBuffersFromGeometry)(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if((0,r.isObjectEmpty)(e))return this;const t={};for(const r in e){const s=e[r];t[r]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return(0,r.clear)(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:s,uniforms:i={},attributes:o={},transformFeedback:n=this.transformFeedback,parameters:d={},vertexArray:h=this.vertexArray}=e;let m;this.setAttributes(o),this.updateModuleSettings(t),this.setUniforms(i),r.log.priority>=a&&(m=this._logDrawCallStart(a));const f=this.vertexArray.getDrawParams(),{isIndexed:l=f.isIndexed,indexType:c=f.indexType,indexOffset:p=f.indexOffset,vertexArrayInstanced:b=f.isInstanced}=this.props;b&&!this.isInstanced&&r.log.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:M}=this,{onBeforeRender:v=g,onAfterRender:x=g}=this.props;v(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(u,e,{logPriority:m,uniforms:null,framebuffer:s,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:h,transformFeedback:n,isIndexed:l,indexType:c,isInstanced:y,instanceCount:M,offset:l?p:0}));return x(),r.log.priority>=a&&this._logDrawCallEnd(m,h,s),_}transform(e={}){const{discard:t=!0,feedbackBuffers:r,unbindModels:s=[]}=e;let{parameters:i}=e;r&&this._setFeedbackBuffers(r),t&&(i=Object.assign({},i,{35977:t})),s.forEach(e=>e.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:i}))}finally{s.forEach(e=>e.vertexArray.bindBuffers())}return this}render(e={}){return r.log.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:e}=this.programProps;if(e)this._managedProgram=!1;else{const{vs:t,fs:r,modules:s,inject:i,defines:a,varyings:o,bufferMode:n,transpileToGLSL100:g}=this.programProps;e=this.programManager.get({vs:t,fs:r,modules:s,inject:i,defines:a,varyings:o,bufferMode:n,transpileToGLSL100:g}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}(0,r.assert)(e instanceof r.Program,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new r.VertexArray(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof r.Buffer&&t.delete()}}_setAnimationProps(e){this.animated&&(0,r.assert)(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if((0,r.isObjectEmpty)(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new r.TransformFeedback(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:o;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),r.log.group(a,`>>> DRAWING MODEL ${this.id}`,{collapsed:r.log.level<=2})(),e}_logDrawCallEnd(e,t,s,i){if(void 0===e)return;const o=(0,r.getDebugTableForVertexArray)({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:n,unusedTable:g,unusedCount:u}=(0,r.getDebugTableForUniforms)({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,s)}),{table:d,count:h}=(0,r.getDebugTableForUniforms)({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,s),undefinedOnly:!0});h>0&&r.log.log("MISSING UNIFORMS",Object.keys(d))(),u>0&&r.log.log("UNUSED UNIFORMS",Object.keys(g))();const m=(0,r.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);r.log.table(e,o)(),r.log.table(e,n)(),r.log.table(e+1,m)(),i&&i.log({logLevel:a,message:`Rendered to ${i.id}`}),r.log.groupEnd(a,`>>> DRAWING MODEL ${this.id}`)()}}exports.default=d;
},{"@luma.gl/gltools":"lAom","./program-manager":"BP7a","@luma.gl/webgl":"KdJH","./model-utils":"sgeN"}],"VzDO":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/gltools"),s=require("@luma.gl/webgl");class t{constructor(e,s={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(s),Object.seal(this)}setupResources(e){for(const s of this.bindings)this._setupTransformFeedback(s,e)}updateModelProps(e={}){const{varyings:s}=this;return s.length>0&&(e=Object.assign({},e,{varyings:s})),e}getDrawOptions(e={}){const s=this.bindings[this.currentIndex],{sourceBuffers:t,transformFeedback:r}=s;return{attributes:Object.assign({},t,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],r=e?t[e]:null;return r?r instanceof s.Buffer?r:r.buffer:null}getData(e={}){const{varyingName:s}=e,t=this.getBuffer(s);return t?t.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(t={}){this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&(0,s.assert)((0,e.isWebGL2)(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:s={}}=e,t={};if(this.bindings[this.currentIndex]&&Object.assign(t,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const e=this.feedbackMap[r];r in s&&(t[e]=r)}Object.assign(t,e.feedbackBuffers);for(const r in t){const e=t[r];if("string"==typeof e){const f=s[e],{byteLength:n,usage:i,accessor:u}=f;t[r]=this._createNewBuffer(r,{byteLength:n,usage:i,accessor:u})}}return t}_setupBuffers(e={}){const{sourceBuffers:s=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const t=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:s,feedbackBuffers:t})}_setupTransformFeedback(e,{model:t}){const{program:r}=t;e.transformFeedback=new s.TransformFeedback(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:e,feedbackBuffers:s}=this._swapBuffers(this.bindings[this.currentIndex]),t=this._getNextIndex();this.bindings[t]=this._updateBinding(this.bindings[t],{sourceBuffers:e,feedbackBuffers:s})}}_updateBinding(e,s){return e?(Object.assign(e.sourceBuffers,s.sourceBuffers),Object.assign(e.feedbackBuffers,s.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},s.sourceBuffers),feedbackBuffers:Object.assign({},s.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const f in this.feedbackMap){const n=this.feedbackMap[f];t[f]=e.feedbackBuffers[n],r[n]=e.sourceBuffers[f],(0,s.assert)(r[n]instanceof s.Buffer)}return{sourceBuffers:t,feedbackBuffers:r}}_createNewBuffer(e,t){const r=new s.Buffer(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}exports.default=t;
},{"@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH"}],"eVnT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateForTextures=s,exports.getSizeUniforms=a,exports.getVaryingType=c,exports.processAttributeDefinition=l;var e=require("@luma.gl/webgl"),t=require("@luma.gl/shadertools");const r="transform_uSampler_",n="transform_uSize_",i="transform_position";function s({vs:r,sourceTextureMap:s,targetTextureVarying:a,targetTexture:o}){let u=Object.keys(s).length,f=null;const m={};let p=r,g={};if(u>0||a){const r=p.split("\n"),$=r.slice();if(r.forEach((e,r,n)=>{if(u>0){const n=l(e,s);if(n){const{updatedLine:e,inject:i}=n;$[r]=e,g=(0,t.combineInjects)([g,i]),Object.assign(m,n.samplerTextureMap),u--}}a&&!f&&(f=c(e,a))}),a){(0,e.assert)(o);const r=`${n}${a}`,s={"vs:#decl":`uniform vec2 ${r};\n`,"vs:#main-start":`     vec2 ${i} = transform_getPos(${r});\n     gl_Position = vec4(${i}, 0, 1.);\n`};g=(0,t.combineInjects)([g,s])}p=$.join("\n")}return{vs:p,targetTextureType:f,inject:g,samplerTextureMap:m}}function a({sourceTextureMap:e,targetTextureVarying:t,targetTexture:r}){const i={};let s,a;t&&(({width:s,height:a}=r),i[`${n}${t}`]=[s,a]);for(const o in e)({width:s,height:a}=e[o]),i[`${n}${o}`]=[s,a];return i}function o(e){return(0,t.getQualifierDetails)(e,["attribute","in"])}function u(e){const t=`${r}${e}`,i=`${n}${e}`;return{samplerName:t,sizeName:i,uniformDeclerations:`  uniform sampler2D ${t};\n  uniform vec2 ${i};`}}function c(e,r){const n=(0,t.getQualifierDetails)(e,["varying","out"]);return n&&n.name===r?n.type:null}function l(e,r){const n={},i=o(e);if(!i)return null;const{type:s,name:a}=i;if(a&&r[a]){const r=`// ${e} => Replaced by Transform with a sampler`,{samplerName:i,sizeName:o,uniformDeclerations:c}=u(a),l=`  ${s} ${a} = transform_getInput(${i}, ${o}).${(0,t.typeToChannelSuffix)(s)};\n`;return n[i]=a,{updatedLine:r,inject:{"vs:#decl":c,"vs:#main-start":l},samplerTextureMap:n}}return null}
},{"@luma.gl/webgl":"KdJH","@luma.gl/shadertools":"Pzgo"}],"bMvh":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/webgl"),t=require("@luma.gl/shadertools"),r=require("./transform-shader-utils");const s={10241:9728,10240:9728,10242:33071,10243:33071},u="transform_output";class i{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:s,framebuffer:u,targetTexture:i}=this.bindings[this.currentIndex],n=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),h=Object.assign({},e.parameters);let o=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){n.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];a[t]=s[e]}this._setSourceTextureParameters();const e=(0,r.getSizeUniforms)({sourceTextureMap:s,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(a,e)}return this.hasTargetTexture&&(o=!1,h.viewport=[0,0,u.width,u.height]),{attributes:n,framebuffer:u,uniforms:a,discard:o,parameters:h}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:r=!1}={}){const{framebuffer:s}=this.bindings[this.currentIndex],u=(0,e.readPixelsToArray)(s);if(!r)return u;const i=u.constructor,n=(0,t.typeToChannelCount)(this.targetTextureType),a=new i(u.length*n/4);let h=0;for(let e=0;e<u.length;e+=4)for(let t=0;t<n;t++)a[h++]=u[e+t];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:s}=t;if(s instanceof e.Texture2D)return s;const u=r[s];return u?(this._targetRefTexName=s,this._createNewTexture(u)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:r={},_targetTexture:s}=e,u=this._createTargetTexture({sourceTextures:r,textureOrReference:s});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:u}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((e,t,r)=>{r[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new e.Buffer(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:e,targetTexture:t}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:e,targetTexture:t})}}_updateBinding(t,r){const{sourceBuffers:s,sourceTextures:u,targetTexture:i}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,u),Object.assign(t.sourceBuffers,s),i){t.targetTexture=i;const{width:r,height:s}=i,{framebuffer:u}=t;u?(u.update({attachments:{36064:i},resizeAttachments:!1}),u.resize({width:r,height:s})):t.framebuffer=new e.Framebuffer(this.gl,{id:"transform-framebuffer",width:r,height:s,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const r in t)t[r].setParameters(s)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(t){const r=(0,e.cloneTextureFrom)(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(s={}){const{sourceTextures:i,targetTexture:n}=this.bindings[this.currentIndex],{vs:a,uniforms:h,targetTextureType:o,inject:x,samplerTextureMap:c}=(0,r.updateForTextures)({vs:s.vs,sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),T=(0,t.combineInjects)([s.inject||{},x]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:a,fs:s._fs||(0,t.getPassthroughFS)({version:(0,e.getShaderVersion)(a),input:this.targetTextureVarying,inputType:o,output:u}),modules:this.hasSourceTextures||this.targetTextureVarying?[t._transform].concat(s.modules||[]):s.modules,uniforms:h,inject:T}}}exports.default=i;
},{"@luma.gl/webgl":"KdJH","@luma.gl/shadertools":"Pzgo","./transform-shader-utils":"eVnT"}],"XhAc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/shadertools"),r=n(require("./buffer-transform")),t=n(require("./texture-transform")),s=require("@luma.gl/gltools"),o=require("@luma.gl/webgl"),f=n(require("../lib/model"));function n(e){return e&&e.__esModule?e:{default:e}}class u{static isSupported(e){return(0,s.isWebGL2)(e)}constructor(e,r={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:e,bufferTransform:r,textureTransform:t}=this;e&&e.delete(),r&&r.delete(),t&&t.delete()}run(e={}){const{clearRenderTarget:r=!0}=e,t=this._updateDrawOptions(e);r&&t.framebuffer&&t.framebuffer.clear({color:!0}),this.model.transform(t)}swap(){let e=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of r)e=e||t.swap();(0,o.assert)(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of r){const r=t.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of r)t.update(e)}_initialize(r={}){const{gl:t}=this;this._buildResourceTransforms(t,r),r=this._updateModelProps(r),this.model=new f.default(t,Object.assign({},r,{fs:r.fs||(0,e.getPassthroughFS)({version:(0,o.getShaderVersion)(r.vs)}),id:r.id||"transform-model",drawMode:r.drawMode||0,vertexCount:r.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let r=Object.assign({},e);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of t)r=s.updateModelProps(r);return r}_buildResourceTransforms(e,s){a(s)&&(this.bufferTransform=new r.default(e,s)),i(s)&&(this.textureTransform=new t.default(e,s)),(0,o.assert)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let r=Object.assign({},e);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of t)r=Object.assign(r,s.getDrawOptions(r));return r}}function a(e){return!((0,o.isObjectEmpty)(e.feedbackBuffers)&&(0,o.isObjectEmpty)(e.feedbackMap)&&!(e.varyings&&e.varyings.length>0))}function i(e){return!((0,o.isObjectEmpty)(e._sourceTextures)&&!e._targetTexture&&!e._targetTextureVarying)}exports.default=u;
},{"@luma.gl/shadertools":"Pzgo","./buffer-transform":"VzDO","./texture-transform":"bMvh","@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","../lib/model":"EKUN"}],"zvF0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DRAW_MODE=void 0;var t=require("@luma.gl/webgl");const e={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};exports.DRAW_MODE=e;class i{static get DRAW_MODE(){return e}constructor(i={}){const{id:s=(0,t.uid)("geometry"),drawMode:r=e.TRIANGLES,attributes:n={},indices:u=null,vertexCount:a=null}=i;this.id=s,this.drawMode=0|r,this.attributes={},this.userData={},this._setAttributes(n,u),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(e,i){i&&(this.indices=ArrayBuffer.isView(i)?{value:i,size:1}:i);for(const s in e){let i=e[s];i=ArrayBuffer.isView(i)?{value:i}:i,(0,t.assert)(ArrayBuffer.isView(i.value),`${this._print(s)}: must be typed array or object with value as typed array`),"POSITION"!==s&&"positions"!==s||i.size||(i.size=3),"indices"===s?((0,t.assert)(!this.indices),this.indices=i):this.attributes[s]=i}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,i){if(i)return i.value.length;let s=1/0;for(const t in e){const i=e[t],{value:r,size:n,constant:u}=i;!u&&r&&n>=1&&(s=Math.min(s,r.length/n))}return(0,t.assert)(Number.isFinite(s)),s}}exports.default=i;
},{"@luma.gl/webgl":"KdJH"}],"BsEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../geometry/geometry")),e=require("@luma.gl/webgl");function r(t){return t&&t.__esModule?t:{default:t}}const a={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class o extends t.default{constructor(t={}){const{id:r=(0,e.uid)("truncated-code-geometry")}=t,{indices:a,attributes:o}=i(t);super({...t,id:r,indices:a,attributes:{...o,...t.attributes}})}}function i(t){const{bottomRadius:e=0,topRadius:r=0,height:o=1,nradial:i=10,nvertical:s=10,verticalAxis:u="y",topCap:n=!1,bottomCap:l=!1}=t,c=(n?2:0)+(l?2:0),d=(i+1)*(s+1+c),f=Math.atan2(e-r,o),y=Math.sin,p=Math.cos,b=Math.PI,v=p(f),M=y(f),g=n?-2:0,h=s+(l?2:0),m=i+1,x=new Uint16Array(i*(s+c)*6),A=a[u],O=new Float32Array(3*d),w=new Float32Array(3*d),_=new Float32Array(2*d);let z=0,R=0;for(let a=g;a<=h;a++){let t,u=a/s,n=o*u;a<0?(n=0,u=1,t=e):a>s?(n=o,u=1,t=r):t=e+a/s*(r-e),-2!==a&&a!==s+2||(t=0,u=0),n-=o/2;for(let e=0;e<m;e++){const r=y(e*b*2/i),o=p(e*b*2/i);O[z+A[0]]=r*t,O[z+A[1]]=n,O[z+A[2]]=o*t,w[z+A[0]]=a<0||a>s?0:r*v,w[z+A[1]]=a<0?-1:a>s?1:M,w[z+A[2]]=a<0||a>s?0:o*v,_[R+0]=e/i,_[R+1]=u,R+=2,z+=3}}for(let a=0;a<s+c;a++)for(let t=0;t<i;t++){const e=6*(a*i+t);x[e+0]=m*(a+0)+0+t,x[e+1]=m*(a+0)+1+t,x[e+2]=m*(a+1)+1+t,x[e+3]=m*(a+0)+0+t,x[e+4]=m*(a+1)+1+t,x[e+5]=m*(a+1)+0+t}return{indices:x,attributes:{POSITION:{size:3,value:O},NORMAL:{size:3,value:w},TEXCOORD_0:{size:2,value:_}}}}exports.default=o;
},{"../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"wztz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./truncated-cone-geometry")),t=require("@luma.gl/webgl");function o(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e={}){const{id:o=(0,t.uid)("cone-geometry"),radius:r=1,cap:u=!0}=e;super({...e,id:o,topRadius:0,topCap:Boolean(u),bottomCap:Boolean(u),bottomRadius:r})}}exports.default=r;
},{"./truncated-cone-geometry":"BsEj","@luma.gl/webgl":"KdJH"}],"bmDE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../geometry/geometry")),r=require("@luma.gl/webgl");function t(e){return e&&e.__esModule?e:{default:e}}const a=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),u=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),l=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),o=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),s={POSITION:{size:3,value:new Float32Array(u)},NORMAL:{size:3,value:new Float32Array(l)},TEXCOORD_0:{size:2,value:new Float32Array(o)}};class i extends e.default{constructor(e={}){const{id:t=(0,r.uid)("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(a)},attributes:{...s,...e.attributes}})}}exports.default=i;
},{"../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"fC4C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./truncated-cone-geometry")),t=require("@luma.gl/webgl");function r(e){return e&&e.__esModule?e:{default:e}}class u extends e.default{constructor(e={}){const{id:r=(0,t.uid)("cylinder-geometry"),radius:u=1}=e;super({...e,id:r,bottomRadius:u,topRadius:u})}}exports.default=u;
},{"./truncated-cone-geometry":"BsEj","@luma.gl/webgl":"KdJH"}],"IaOA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@math.gl/core"),e=s(require("../geometry/geometry")),r=require("@luma.gl/webgl");function s(t){return t&&t.__esModule?t:{default:t}}const n=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],a=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];class o extends e.default{constructor(t={}){const{id:e=(0,r.uid)("ico-sphere-geometry")}=t,{indices:s,attributes:n}=u(t);super({...t,id:e,indices:s,attributes:{...n,...t.attributes}})}}function u(e){const{iterations:r=0}=e,s=Math.PI,o=2*s,u=[...n];let l=[...a];u.push(),l.push();const i=(()=>{const t={};return(e,r)=>{const s=`${(e*=3)<(r*=3)?e:r}|${e>r?e:r}`;if(s in t)return t[s];const n=u[e],a=u[e+1],o=u[e+2];let l=(n+u[r])/2,i=(a+u[r+1])/2,h=(o+u[r+2])/2;const c=Math.sqrt(l*l+i*i+h*h);return l/=c,i/=c,h/=c,u.push(l,i,h),t[s]=u.length/3-1}})();for(let t=0;t<r;t++){const t=[];for(let e=0;e<l.length;e+=3){const r=i(l[e+0],l[e+1]),s=i(l[e+1],l[e+2]),n=i(l[e+2],l[e+0]);t.push(n,l[e+0],r,r,l[e+1],s,s,l[e+2],n,r,s,n)}l=t}const h=new Array(u.length),c=new Array(u.length/3*2);for(let n=l.length-3;n>=0;n-=3){const e=l[n+0],r=l[n+1],a=l[n+2],i=3*e,p=3*r,d=3*a,g=2*e,y=2*r,M=2*a,f=u[i+0],z=u[i+1],w=u[i+2],x=Math.acos(w/Math.sqrt(f*f+z*z+w*w))/s,q=1-(Math.atan2(z,f)+s)/o,v=u[p+0],A=u[p+1],b=u[p+2],m=Math.acos(b/Math.sqrt(v*v+A*A+b*b))/s,O=1-(Math.atan2(A,v)+s)/o,_=u[d+0],F=u[d+1],I=u[d+2],P=Math.acos(I/Math.sqrt(_*_+F*F+I*I))/s,N=1-(Math.atan2(F,_)+s)/o,R=[_-v,F-A,I-b],T=[f-v,z-A,w-b],$=new t.Vector3(R).cross(T).normalize();let j;(0===q||0===O||0===N)&&(0===q||q>.5)&&(0===O||O>.5)&&(0===N||N>.5)&&(u.push(u[i+0],u[i+1],u[i+2]),j=u.length/3-1,l.push(j),c[2*j+0]=1,c[2*j+1]=x,h[3*j+0]=$.x,h[3*j+1]=$.y,h[3*j+2]=$.z,u.push(u[p+0],u[p+1],u[p+2]),j=u.length/3-1,l.push(j),c[2*j+0]=1,c[2*j+1]=m,h[3*j+0]=$.x,h[3*j+1]=$.y,h[3*j+2]=$.z,u.push(u[d+0],u[d+1],u[d+2]),j=u.length/3-1,l.push(j),c[2*j+0]=1,c[2*j+1]=P,h[3*j+0]=$.x,h[3*j+1]=$.y,h[3*j+2]=$.z),h[i+0]=h[p+0]=h[d+0]=$.x,h[i+1]=h[p+1]=h[d+1]=$.y,h[i+2]=h[p+2]=h[d+2]=$.z,c[g+0]=q,c[g+1]=x,c[y+0]=O,c[y+1]=m,c[M+0]=N,c[M+1]=P}return{indices:{size:1,value:new Uint16Array(l)},attributes:{POSITION:{size:3,value:new Float32Array(u)},NORMAL:{size:3,value:new Float32Array(h)},TEXCOORD_0:{size:2,value:new Float32Array(c)}}}}exports.default=o;
},{"@math.gl/core":"dwLx","../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"CGNT":[function(require,module,exports) {
"use strict";function e(e){const{indices:t,attributes:n}=e;if(!t)return e;const s=t.value.length,o={};for(const r in n){const e=n[r],{constant:c,value:u,size:i}=e;if(c||!i)continue;const a=new u.constructor(s*i);for(let n=0;n<s;++n){const e=t.value[n];for(let t=0;t<i;t++)a[n*i+t]=u[e*i+t]}o[r]={size:i,value:a}}return{attributes:Object.assign({},n,o)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackIndexedGeometry=e;
},{}],"oQ0j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../geometry/geometry")),t=require("../geometry/geometry-utils"),r=require("@luma.gl/webgl");function n(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e={}){const{id:t=(0,r.uid)("plane-geometry")}=e,{indices:n,attributes:s}=o(e);super({...e,id:t,indices:n,attributes:{...s,...e.attributes}})}}function o(e){const{type:r="x,y",offset:n=0,flipCull:s=!1,unpack:o=!1}=e,a=r.split(",");let l=e[`${a[0]}len`]||1;const u=e[`${a[1]}len`]||1,i=e[`n${a[0]}`]||1,c=e[`n${a[1]}`]||1,d=(i+1)*(c+1),y=new Float32Array(3*d),f=new Float32Array(3*d),p=new Float32Array(2*d);s&&(l=-l);let b=0,w=0;for(let t=0;t<=c;t++)for(let e=0;e<=i;e++){const o=e/i,a=t/c;switch(p[b+0]=s?1-o:o,p[b+1]=a,r){case"x,y":y[w+0]=l*o-.5*l,y[w+1]=u*a-.5*u,y[w+2]=n,f[w+0]=0,f[w+1]=0,f[w+2]=s?1:-1;break;case"x,z":y[w+0]=l*o-.5*l,y[w+1]=n,y[w+2]=u*a-.5*u,f[w+0]=0,f[w+1]=s?1:-1,f[w+2]=0;break;case"y,z":y[w+0]=n,y[w+1]=l*o-.5*l,y[w+2]=u*a-.5*u,f[w+0]=s?1:-1,f[w+1]=0,f[w+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}b+=2,w+=3}const m=i+1,x=new Uint16Array(i*c*6);for(let t=0;t<c;t++)for(let e=0;e<i;e++){const r=6*(t*i+e);x[r+0]=(t+0)*m+e,x[r+1]=(t+1)*m+e,x[r+2]=(t+0)*m+e+1,x[r+3]=(t+1)*m+e,x[r+4]=(t+1)*m+e+1,x[r+5]=(t+0)*m+e+1}const g={indices:{size:1,value:x},attributes:{POSITION:{size:3,value:y},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:p}}};return o?(0,t.unpackIndexedGeometry)(g):g}exports.default=s;
},{"../geometry/geometry":"zvF0","../geometry/geometry-utils":"CGNT","@luma.gl/webgl":"KdJH"}],"clhU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../geometry/geometry")),t=require("@luma.gl/webgl");function r(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e={}){const{id:r=(0,t.uid)("sphere-geometry")}=e,{indices:s,attributes:a}=o(e);super({...e,id:r,indices:s,attributes:{...a,...e.attributes}})}}function o(e){const{nlat:t=10,nlong:r=10}=e;let{radius:s=1}=e;const o=Math.PI-0,a=2*Math.PI-0,n=(t+1)*(r+1);if("number"==typeof s){const e=s;s=((t,r,s,o,a)=>e)}const i=new Float32Array(3*n),u=new Float32Array(3*n),l=new Float32Array(2*n),c=new(n>65535?Uint32Array:Uint16Array)(t*r*6);for(let f=0;f<=t;f++)for(let e=0;e<=r;e++){const n=e/r,c=f/t,d=e+f*(r+1),y=2*d,M=3*d,b=a*n,h=o*c,p=Math.sin(b),v=Math.cos(b),g=Math.sin(h),A=v*g,O=Math.cos(h),m=p*g,w=s(A,O,m,n,c);i[M+0]=w*A,i[M+1]=w*O,i[M+2]=w*m,u[M+0]=A,u[M+1]=O,u[M+2]=m,l[y+0]=n,l[y+1]=1-c}const d=r+1;for(let f=0;f<r;f++)for(let e=0;e<t;e++){const r=6*(f*t+e);c[r+0]=e*d+f,c[r+1]=e*d+f+1,c[r+2]=(e+1)*d+f,c[r+3]=(e+1)*d+f,c[r+4]=e*d+f+1,c[r+5]=(e+1)*d+f+1}return{indices:{size:1,value:c},attributes:{POSITION:{size:3,value:i},NORMAL:{size:3,value:u},TEXCOORD_0:{size:2,value:l}}}}exports.default=s;
},{"../geometry/geometry":"zvF0","@luma.gl/webgl":"KdJH"}],"r0ew":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timeline=void 0;let t=1,e=1;class i{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:i=0,duration:n=Number.POSITIVE_INFINITY,rate:s=1,repeat:a=1}=e,h=t++,m={time:0,delay:i,duration:n,rate:s,repeat:a};return this._setChannelTime(m,this.time),this.channels.set(h,m),h}removeChannel(t){this.channels.delete(t);for(const[e,i]of this.animations)i.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const n of e)this._setChannelTime(n,this.time);const i=this.animations.values();for(const n of i){const{animation:t,channel:e}=n;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,i){const n=e++;return this.animations.set(n,{animation:t,channel:i}),t.setTime(this.getTime(i)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const i=e-t.delay;i>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}exports.Timeline=i;
},{}],"dLHe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyFrames=void 0;class t{constructor(t){this._lastTime=-1,this.startIndex=-1,this.endIndex=-1,this.factor=0,this.times=[],this.values=[],this.setKeyFrames(t),this.setTime(0)}setKeyFrames(t){const e=t.length;this.times.length=e,this.values.length=e;for(let s=0;s<e;++s)this.times[s]=t[s][0],this.values[s]=t[s][1];this._calculateKeys(this._lastTime)}setTime(t){(t=Math.max(0,t))!==this._lastTime&&(this._calculateKeys(t),this._lastTime=t)}getStartTime(){return this.times[this.startIndex]}getEndTime(){return this.times[this.endIndex]}getStartData(){return this.values[this.startIndex]}getEndData(){return this.values[this.endIndex]}_calculateKeys(t){let e=0;const s=this.times.length;for(e=0;e<s-2&&!(this.times[e+1]>t);++e);this.startIndex=e,this.endIndex=e+1;const i=this.times[this.startIndex],h=this.times[this.endIndex];this.factor=Math.min(Math.max(0,(t-i)/(h-i)),1)}}exports.KeyFrames=t;
},{}],"KnxK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../lib/model")),t=o(require("../geometry/geometry"));function o(e){return e&&e.__esModule?e:{default:e}}const a="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",i=[-1,-1,1,-1,-1,1,1,1];class n extends e.default{constructor(e,o){const n=i.map(e=>-1===e?0:e);super(e,Object.assign({},o,{vs:a,geometry:new t.default({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(i)},aTexCoord:{size:2,value:new Float32Array(n)},aCoordinate:{size:2,value:new Float32Array(n)}}})})),this.setVertexCount(4)}}exports.default=n;
},{"../lib/model":"EKUN","../geometry/geometry":"zvF0"}],"YENE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"ProgramManager",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Timeline",{enumerable:!0,get:function(){return p.Timeline}}),Object.defineProperty(exports,"KeyFrames",{enumerable:!0,get:function(){return d.KeyFrames}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return y.default}});var e=s(require("./lib/animation-loop")),r=s(require("./lib/model")),t=s(require("./lib/program-manager")),n=s(require("./transform/transform")),o=s(require("./geometry/geometry")),u=s(require("./geometries/cone-geometry")),i=s(require("./geometries/cube-geometry")),a=s(require("./geometries/cylinder-geometry")),m=s(require("./geometries/ico-sphere-geometry")),f=s(require("./geometries/plane-geometry")),l=s(require("./geometries/sphere-geometry")),c=s(require("./geometries/truncated-cone-geometry")),p=require("./animation/timeline"),d=require("./animation/key-frames"),y=s(require("./utils/clip-space"));function s(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/animation-loop":"HQLj","./lib/model":"EKUN","./lib/program-manager":"BP7a","./transform/transform":"XhAc","./geometry/geometry":"zvF0","./geometries/cone-geometry":"wztz","./geometries/cube-geometry":"bmDE","./geometries/cylinder-geometry":"fC4C","./geometries/ico-sphere-geometry":"IaOA","./geometries/plane-geometry":"oQ0j","./geometries/sphere-geometry":"clhU","./geometries/truncated-cone-geometry":"BsEj","./animation/timeline":"r0ew","./animation/key-frames":"dLHe","./utils/clip-space":"KnxK"}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"iuAK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createGLContext",{enumerable:!0,get:function(){return r.createGLContext}}),Object.defineProperty(exports,"instrumentGLContext",{enumerable:!0,get:function(){return r.instrumentGLContext}}),Object.defineProperty(exports,"isWebGL",{enumerable:!0,get:function(){return r.isWebGL}}),Object.defineProperty(exports,"isWebGL2",{enumerable:!0,get:function(){return r.isWebGL2}}),Object.defineProperty(exports,"getParameters",{enumerable:!0,get:function(){return r.getParameters}}),Object.defineProperty(exports,"setParameters",{enumerable:!0,get:function(){return r.setParameters}}),Object.defineProperty(exports,"withParameters",{enumerable:!0,get:function(){return r.withParameters}}),Object.defineProperty(exports,"resetParameters",{enumerable:!0,get:function(){return r.resetParameters}}),Object.defineProperty(exports,"cssToDeviceRatio",{enumerable:!0,get:function(){return r.cssToDeviceRatio}}),Object.defineProperty(exports,"cssToDevicePixels",{enumerable:!0,get:function(){return r.cssToDevicePixels}}),Object.defineProperty(exports,"lumaStats",{enumerable:!0,get:function(){return t.lumaStats}}),Object.defineProperty(exports,"FEATURES",{enumerable:!0,get:function(){return t.FEATURES}}),Object.defineProperty(exports,"hasFeature",{enumerable:!0,get:function(){return t.hasFeature}}),Object.defineProperty(exports,"hasFeatures",{enumerable:!0,get:function(){return t.hasFeatures}}),Object.defineProperty(exports,"Buffer",{enumerable:!0,get:function(){return t.Buffer}}),Object.defineProperty(exports,"Program",{enumerable:!0,get:function(){return t.Program}}),Object.defineProperty(exports,"Framebuffer",{enumerable:!0,get:function(){return t.Framebuffer}}),Object.defineProperty(exports,"Renderbuffer",{enumerable:!0,get:function(){return t.Renderbuffer}}),Object.defineProperty(exports,"Texture2D",{enumerable:!0,get:function(){return t.Texture2D}}),Object.defineProperty(exports,"TextureCube",{enumerable:!0,get:function(){return t.TextureCube}}),Object.defineProperty(exports,"clear",{enumerable:!0,get:function(){return t.clear}}),Object.defineProperty(exports,"readPixelsToArray",{enumerable:!0,get:function(){return t.readPixelsToArray}}),Object.defineProperty(exports,"readPixelsToBuffer",{enumerable:!0,get:function(){return t.readPixelsToBuffer}}),Object.defineProperty(exports,"cloneTextureFrom",{enumerable:!0,get:function(){return t.cloneTextureFrom}}),Object.defineProperty(exports,"copyToTexture",{enumerable:!0,get:function(){return t.copyToTexture}}),Object.defineProperty(exports,"Texture3D",{enumerable:!0,get:function(){return t.Texture3D}}),Object.defineProperty(exports,"TransformFeedback",{enumerable:!0,get:function(){return t.TransformFeedback}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return t.log}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return t.assert}}),Object.defineProperty(exports,"uid",{enumerable:!0,get:function(){return t.uid}}),Object.defineProperty(exports,"AnimationLoop",{enumerable:!0,get:function(){return n.AnimationLoop}}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return n.Model}}),Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return n.Transform}}),Object.defineProperty(exports,"ProgramManager",{enumerable:!0,get:function(){return n.ProgramManager}}),Object.defineProperty(exports,"Timeline",{enumerable:!0,get:function(){return n.Timeline}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return n.Geometry}}),Object.defineProperty(exports,"ClipSpace",{enumerable:!0,get:function(){return n.ClipSpace}}),Object.defineProperty(exports,"ConeGeometry",{enumerable:!0,get:function(){return n.ConeGeometry}}),Object.defineProperty(exports,"CubeGeometry",{enumerable:!0,get:function(){return n.CubeGeometry}}),Object.defineProperty(exports,"CylinderGeometry",{enumerable:!0,get:function(){return n.CylinderGeometry}}),Object.defineProperty(exports,"IcoSphereGeometry",{enumerable:!0,get:function(){return n.IcoSphereGeometry}}),Object.defineProperty(exports,"PlaneGeometry",{enumerable:!0,get:function(){return n.PlaneGeometry}}),Object.defineProperty(exports,"SphereGeometry",{enumerable:!0,get:function(){return n.SphereGeometry}}),Object.defineProperty(exports,"TruncatedConeGeometry",{enumerable:!0,get:function(){return n.TruncatedConeGeometry}}),Object.defineProperty(exports,"normalizeShaderModule",{enumerable:!0,get:function(){return o.normalizeShaderModule}}),Object.defineProperty(exports,"fp32",{enumerable:!0,get:function(){return o.fp32}}),Object.defineProperty(exports,"fp64",{enumerable:!0,get:function(){return o.fp64}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return o.project}}),Object.defineProperty(exports,"dirlight",{enumerable:!0,get:function(){return o.dirlight}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return o.picking}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return o.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return o.phongLighting}}),Object.defineProperty(exports,"pbr",{enumerable:!0,get:function(){return o.pbr}});var r=require("@luma.gl/gltools"),t=require("@luma.gl/webgl"),n=require("@luma.gl/engine"),o=require("@luma.gl/shadertools");
},{"@luma.gl/gltools":"lAom","@luma.gl/webgl":"KdJH","@luma.gl/engine":"YENE","@luma.gl/shadertools":"Pzgo","buffer":"aMB2"}],"uFGI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e="\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",t="\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n";var n={name:"geometry",vs:e,fs:t};exports.default=n;
},{}],"ysbg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.PROJECTION_MODE=exports.COORDINATE_SYSTEM=void 0;var e=E(require("../utils/log"));function E(e){return e&&e.__esModule?e:{default:e}}const T={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};exports.COORDINATE_SYSTEM=T,Object.defineProperty(T,"IDENTITY",{get:()=>e.default.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const r={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0};exports.PROJECTION_MODE=r;const t={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};exports.EVENTS=t;
},{"../utils/log":"GVus"}],"HHu4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("../../lib/constants");const n=Object.keys(o.COORDINATE_SYSTEM).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(o.COORDINATE_SYSTEM[n],";")).join(""),e=Object.keys(o.PROJECTION_MODE).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(o.PROJECTION_MODE[n],";")).join("");var t="".concat(n,"\n").concat(e,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");exports.default=t;
},{"../../lib/constants":"ysbg"}],"uXG5":[function(require,module,exports) {
"use strict";function r(r,e){if(r===e)return!0;if(Array.isArray(r)){const t=r.length;if(!e||e.length!==t)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}return!1}function e(e){let t,n={};return u=>{for(const f in u)if(!r(u[f],n[f])){t=e(u),n=u;break}return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iWu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOffsetOrigin=E,exports.getUniformsFromViewport=d;var e=a(require("gl-matrix/mat4")),t=a(require("gl-matrix/vec4")),r=require("../../lib/constants"),o=i(require("../../utils/memoize"));function i(e){return e&&e.__esModule?e:{default:e}}function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}const c=[0,0,0,0],s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[0,0,0],p=[0,0,0],l=(0,o.default)(T);function E(e,t,o=p){let i,n=o,a=!0;switch(i=t===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS||t===r.COORDINATE_SYSTEM.METER_OFFSETS?o:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case r.PROJECTION_MODE.WEB_MERCATOR:t!==r.COORDINATE_SYSTEM.LNGLAT&&t!==r.COORDINATE_SYSTEM.CARTESIAN||(a=!1);break;case r.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:t===r.COORDINATE_SYSTEM.LNGLAT?n=i:t===r.COORDINATE_SYSTEM.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=o[0],n[1]-=o[1],n[2]-=o[2]);break;case r.PROJECTION_MODE.IDENTITY:n=e.position.map(Math.fround);break;case r.PROJECTION_MODE.GLOBE:a=!1,i=null;break;default:a=!1}return n[2]=n[2]||0,{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:a}}function M(r,o,i){const{viewMatrixUncentered:n,projectionMatrix:a}=r;let{viewMatrix:u,viewProjectionMatrix:O}=r,p=c,l=c,M=r.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:T,offsetMode:_}=E(r,o,i);return _&&(l=r.projectPosition(d||T),M=[M[0]-l[0],M[1]-l[1],M[2]-l[2]],l[3]=1,p=t.transformMat4([],l,O),u=n||u,O=e.multiply([],a,u),O=e.multiply([],O,s)),{viewMatrix:u,viewProjectionMatrix:O,projectionCenter:p,originCommon:l,cameraPosCommon:M,shaderCoordinateOrigin:T,geospatialOrigin:d}}function d({viewport:e,devicePixelRatio:t=1,modelMatrix:o=null,coordinateSystem:i=r.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:n,autoWrapLongitude:a=!1}={}){i===r.COORDINATE_SYSTEM.DEFAULT&&(i=e.isGeospatial?r.COORDINATE_SYSTEM.LNGLAT:r.COORDINATE_SYSTEM.CARTESIAN);const c=l({viewport:e,devicePixelRatio:t,coordinateSystem:i,coordinateOrigin:n});return c.project_uWrapLongitude=a,c.project_uModelMatrix=o||u,c}function T({viewport:e,devicePixelRatio:t,coordinateSystem:o,coordinateOrigin:i}){const{projectionCenter:n,viewProjectionMatrix:a,originCommon:c,cameraPosCommon:s,shaderCoordinateOrigin:u,geospatialOrigin:p}=M(e,o,i),l=e.getDistanceScales(),E=[e.width*t,e.height*t],d=e.projectionMatrix.transform([0,0,-e.focalDistance,1])[3]||1,T={project_uCoordinateSystem:o,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:c.slice(0,3),project_uCenter:n,project_uViewportSize:E,project_uDevicePixelRatio:t,project_uFocalDistance:d,project_uCommonUnitsPerMeter:l.unitsPerMeter,project_uCommonUnitsPerWorldUnit:l.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:O,project_uScale:e.scale,project_uViewProjectionMatrix:a,project_uCameraPosition:s};if(p){const t=e.getDistanceScales(p);switch(o){case r.COORDINATE_SYSTEM.METER_OFFSETS:T.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,T.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case r.COORDINATE_SYSTEM.LNGLAT:case r.COORDINATE_SYSTEM.LNGLAT_OFFSETS:T.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,T.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case r.COORDINATE_SYSTEM.CARTESIAN:T.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],T.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return T}
},{"gl-matrix/mat4":"w3aR","gl-matrix/vec4":"zWbG","../../lib/constants":"ysbg","../../utils/memoize":"uXG5"}],"NVOm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),r=o(require("./project.glsl")),t=require("./viewport-uniforms");function o(e){return e&&e.__esModule?e:{default:e}}const u={};function i(e=u){return e.viewport?(0,t.getUniformsFromViewport)(e):{}}var n={name:"project",dependencies:[e.fp32],vs:r.default,getUniforms:i};exports.default=n;
},{"@luma.gl/core":"iuAK","./project.glsl":"HHu4","./viewport-uniforms":"iWu9"}],"qxVk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=e(require("../project/project"));function e(o){return o&&o.__esModule?o:{default:o}}const t="\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n";var n={name:"project32",dependencies:[o.default],vs:t};exports.default=n;
},{"../project/project":"NVOm"}],"xAaq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@math.gl/core");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@math.gl/core":"dwLx"}],"AE6F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=n,exports.transformVector=o,exports.mod=u,exports.lerp=c,exports.log2=void 0;var t=r(require("gl-matrix/vec4"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e();if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=o?Object.getOwnPropertyDescriptor(t,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=t[u]}return n.default=t,r&&r.set(t,n),n}function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(e,r){const n=t.transformMat4([],r,e);return t.scale(n,n,1/n[3]),n}function u(t,e){const r=t%e;return r<0?e+r:r}function c(t,e,r){return r*e+(1-r)*t}function a(t){return Math.log(t)*Math.LOG2E}const f=Math.log2||a;exports.log2=f;
},{"gl-matrix/vec4":"zWbG"}],"zuem":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"@math.gl/web-mercator: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"eDN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=M,exports.scaleToZoom=g,exports.lngLatToWorld=m,exports.worldToLngLat=x,exports.getMeterZoom=P,exports.getDistanceScales=b,exports.addMetersToLngLat=v,exports.getViewMatrix=F,exports.getProjectionParameters=y,exports.getProjectionMatrix=T,exports.altitudeToFovy=N,exports.fovyToAltitude=w,exports.worldToPixels=D,exports.pixelsToWorld=j,exports.DEFAULT_ALTITUDE=void 0;var t=require("./math-utils"),e=u(require("gl-matrix/mat4")),r=u(require("gl-matrix/vec2")),i=u(require("gl-matrix/vec3")),n=o(require("./assert"));function o(t){return t&&t.__esModule?t:{default:t}}function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=i?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}const s=Math.PI,c=s/4,l=s/180,f=180/s,p=512,d=4003e4,h=1.5;function M(t){return Math.pow(2,t)}function g(e){return(0,t.log2)(e)}function m([t,e]){(0,n.default)(Number.isFinite(t)),(0,n.default)(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");const r=e*l;return[p*(t*l+s)/(2*s),p*(s+Math.log(Math.tan(c+.5*r)))/(2*s)]}function x([t,e]){const r=t/p*(2*s)-s,i=2*(Math.atan(Math.exp(e/p*(2*s)-s))-c);return[r*f,i*f]}function P({latitude:t}){(0,n.default)(Number.isFinite(t));const e=Math.cos(t*l);return g(d*e)-9}function b({latitude:t,longitude:e,highPrecision:r=!1}){(0,n.default)(Number.isFinite(t)&&Number.isFinite(e));const i={},o=p,a=Math.cos(t*l),u=o/360,s=u/a,c=o/d/a;if(i.unitsPerMeter=[c,c,c],i.metersPerUnit=[1/c,1/c,1/c],i.unitsPerDegree=[u,s,c],i.degreesPerUnit=[1/u,1/s,1/c],r){const e=l*Math.tan(t*l)/a,r=u*e/2,n=o/d*e,f=n/s*c;i.unitsPerDegree2=[0,r,n],i.unitsPerMeter2=[f,0,f]}return i}function v(t,e){const[r,i,n]=t,[o,a,u]=e,{unitsPerMeter:s,unitsPerMeter2:c}=b({longitude:r,latitude:i,highPrecision:!0}),l=m(t);l[0]+=o*(s[0]+c[0]*a),l[1]+=a*(s[1]+c[1]*a);const f=x(l),p=(n||0)+(u||0);return Number.isFinite(n)||Number.isFinite(u)?[f[0],f[1],p]:f}function F({height:r,pitch:n,bearing:o,altitude:a,scale:u,center:s=null}){const c=(0,t.createMat4)();return e.translate(c,c,[0,0,-a]),e.rotateX(c,c,-n*l),e.rotateZ(c,c,o*l),u/=r,e.scale(c,c,[u,u,u]),s&&e.translate(c,c,i.negate([],s)),c}function y({width:t,height:e,fovy:r=N(h),altitude:i,pitch:n=0,nearZMultiplier:o=1,farZMultiplier:a=1}){void 0!==i&&(r=N(i));const u=.5*r*l,s=w(r),c=n*l,f=Math.sin(u)*s/Math.sin(Math.min(Math.max(Math.PI/2-c-u,.01),Math.PI-.01));return{fov:2*u,aspect:t/e,focalDistance:s,near:o,far:(Math.sin(c)*f+s)*a}}function T({width:t,height:r,pitch:i,altitude:n,fovy:o,nearZMultiplier:a,farZMultiplier:u}){const{fov:s,aspect:c,near:l,far:f}=y({width:t,height:r,altitude:n,fovy:o,pitch:i,nearZMultiplier:a,farZMultiplier:u});return e.perspective([],s,c,l,f)}function N(t){return 2*Math.atan(.5/t)*f}function w(t){return.5/Math.tan(.5*t*l)}function D(e,r){const[i,o,a=0]=e;return(0,n.default)(Number.isFinite(i)&&Number.isFinite(o)&&Number.isFinite(a)),(0,t.transformVector)(r,[i,o,a,1])}function j(e,i,o=0){const[a,u,s]=e;if((0,n.default)(Number.isFinite(a)&&Number.isFinite(u),"invalid pixel coordinate"),Number.isFinite(s)){return(0,t.transformVector)(i,[a,u,s,1])}const c=(0,t.transformVector)(i,[a,u,0,1]),l=(0,t.transformVector)(i,[a,u,1,1]),f=c[2],p=l[2],d=f===p?0:((o||0)-f)/(p-f);return r.lerp([],c,l,d)}exports.DEFAULT_ALTITUDE=h;
},{"./math-utils":"AE6F","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd","./assert":"zuem"}],"Lip1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=o(require("./web-mercator-viewport")),e=o(require("./assert")),i=require("./math-utils");function o(t){return t&&t.__esModule?t:{default:t}}function r({width:o,height:r,bounds:a,minExtent:u=0,maxZoom:n=24,padding:s=0,offset:m=[0,0]}){const[[h,l],[b,d]]=a;if(Number.isFinite(s)){s={top:s,bottom:s,left:s,right:s}}else(0,e.default)(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const f=new t.default({width:o,height:r,longitude:0,latitude:0,zoom:0}),p=f.project([h,d]),c=f.project([b,l]),M=[Math.max(Math.abs(c[0]-p[0]),u),Math.max(Math.abs(c[1]-p[1]),u)],g=[o-s.left-s.right-2*Math.abs(m[0]),r-s.top-s.bottom-2*Math.abs(m[1])];(0,e.default)(g[0]>0&&g[1]>0);const x=g[0]/M[0],F=g[1]/M[1],N=(s.right-s.left)/2/x,w=(s.bottom-s.top)/2/F,j=[(c[0]+p[0])/2+N,(c[1]+p[1])/2+w],_=f.unproject(j),q=Math.min(n,f.zoom+(0,i.log2)(Math.abs(Math.min(x,F))));return(0,e.default)(Number.isFinite(q)),{longitude:_[0],latitude:_[1],zoom:q}}
},{"./web-mercator-viewport":"btK9","./assert":"zuem","./math-utils":"AE6F"}],"tHha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("./web-mercator-utils"),e=o(require("gl-matrix/vec2")),r=require("./math-utils");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}const i=Math.PI/180;function u(t,e=0){const{width:r,height:n,unproject:o}=t,u={targetZ:e},c=o([0,n],u),f=o([r,n],u);let l,p;return(t.fovy?.5*t.fovy*i:Math.atan(.5/t.altitude))>(90-t.pitch)*i-.01?(l=a(t,0,e),p=a(t,r,e)):(l=o([0,0],u),p=o([r,0],u)),[c,f,p,l]}function a(n,o,i){const{pixelUnprojectionMatrix:u}=n,a=(0,r.transformVector)(u,[o,0,1,1]),c=(0,r.transformVector)(u,[o,n.height,1,1]),f=(i*n.distanceScales.unitsPerMeter[2]-a[2])/(c[2]-a[2]),l=e.lerp([],a,c,f),p=(0,t.worldToLngLat)(l);return p[2]=i,p}
},{"./web-mercator-utils":"eDN9","gl-matrix/vec2":"XSo1","./math-utils":"AE6F"}],"btK9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./math-utils"),e=require("./web-mercator-utils"),i=u(require("./fit-bounds")),r=u(require("./get-bounds")),o=l(require("gl-matrix/mat4")),n=l(require("gl-matrix/vec2")),s=l(require("gl-matrix/vec3"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=r?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function u(t){return t&&t.__esModule?t:{default:t}}class h{constructor({width:t,height:i,latitude:r=0,longitude:o=0,zoom:n=0,pitch:a=0,bearing:l=0,altitude:u=null,fovy:h=null,position:c=null,nearZMultiplier:d=.02,farZMultiplier:p=1.01}={width:1,height:1}){t=t||1,i=i||1,null===h&&null===u?(u=e.DEFAULT_ALTITUDE,h=(0,e.altitudeToFovy)(u)):null===h?h=(0,e.altitudeToFovy)(u):null===u&&(u=(0,e.fovyToAltitude)(h));const g=(0,e.zoomToScale)(n);u=Math.max(.75,u);const f=(0,e.getDistanceScales)({longitude:o,latitude:r}),M=(0,e.lngLatToWorld)([o,r]);M[2]=0,c&&s.add(M,M,s.mul([],c,f.unitsPerMeter)),this.projectionMatrix=(0,e.getProjectionMatrix)({width:t,height:i,pitch:a,fovy:h,nearZMultiplier:d,farZMultiplier:p}),this.viewMatrix=(0,e.getViewMatrix)({height:i,scale:g,center:M,pitch:a,bearing:l,altitude:u}),this.width=t,this.height=i,this.scale=g,this.latitude=r,this.longitude=o,this.zoom=n,this.pitch=a,this.bearing=l,this.altitude=u,this.fovy=h,this.center=M,this.meterOffset=c||[0,0,0],this.distanceScales=f,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:e,height:i,projectionMatrix:r,viewMatrix:n}=this,s=(0,t.createMat4)();o.multiply(s,s,r),o.multiply(s,s,n),this.viewProjectionMatrix=s;const a=(0,t.createMat4)();o.scale(a,a,[e/2,-i/2,1]),o.translate(a,a,[1,-1,0]),o.multiply(a,a,s);const l=o.invert((0,t.createMat4)(),a);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=l}equals(t){return t instanceof h&&(t.width===this.width&&t.height===this.height&&o.equals(t.projectionMatrix,this.projectionMatrix)&&o.equals(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const r=this.projectPosition(t),o=(0,e.worldToPixels)(r,this.pixelProjectionMatrix),[n,s]=o,a=i?s:this.height-s;return 2===t.length?[n,a]:[n,a,o[2]]}unproject(t,{topLeft:i=!0,targetZ:r}={}){const[o,n,s]=t,a=i?n:this.height-n,l=r&&r*this.distanceScales.unitsPerMeter[2],u=(0,e.pixelsToWorld)([o,a,s],this.pixelUnprojectionMatrix,l),[h,c,d]=this.unprojectPosition(u);return Number.isFinite(s)?[h,c,d]:Number.isFinite(r)?[h,c,r]:[h,c]}projectPosition(t){const[i,r]=(0,e.lngLatToWorld)(t);return[i,r,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,r]=(0,e.worldToLngLat)(t);return[i,r,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return(0,e.lngLatToWorld)(t)}unprojectFlat(t){return(0,e.worldToLngLat)(t)}getMapCenterByLngLatPosition({lngLat:t,pos:i}){const r=(0,e.pixelsToWorld)(i,this.pixelUnprojectionMatrix),o=(0,e.lngLatToWorld)(t),s=n.add([],o,n.negate([],r)),a=n.add([],this.center,s);return(0,e.worldToLngLat)(a)}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}fitBounds(t,e={}){const{width:r,height:o}=this,{longitude:n,latitude:s,zoom:a}=(0,i.default)(Object.assign({width:r,height:o,bounds:t},e));return new h({width:r,height:o,longitude:n,latitude:s,zoom:a})}getBounds(t){const e=this.getBoundingRegion(t),i=Math.min(...e.map(t=>t[0])),r=Math.max(...e.map(t=>t[0]));return[[i,Math.min(...e.map(t=>t[1]))],[r,Math.max(...e.map(t=>t[1]))]]}getBoundingRegion(t={}){return(0,r.default)(this,t.z||0)}}exports.default=h;
},{"./math-utils":"AE6F","./web-mercator-utils":"eDN9","./fit-bounds":"Lip1","./get-bounds":"tHha","gl-matrix/mat4":"w3aR","gl-matrix/vec2":"XSo1","gl-matrix/vec3":"AWBd"}],"BccJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("./web-mercator-utils"),e=require("./math-utils");const o=512;function i({width:i,height:r,longitude:l,latitude:n,zoom:u,pitch:d=0,bearing:s=0}){(l<-180||l>180)&&(l=(0,e.mod)(l+180,360)-180),(s<-180||s>180)&&(s=(0,e.mod)(s+180,360)-180);const a=(0,e.log2)(r/o);if(u<=a)u=a,n=0;else{const e=r/2/Math.pow(2,u),i=(0,t.worldToLngLat)([0,e])[1];if(n<i)n=i;else{const i=(0,t.worldToLngLat)([0,o-e])[1];n>i&&(n=i)}}return{width:i,height:r,longitude:l,latitude:n,zoom:u,pitch:d,bearing:s}}
},{"./web-mercator-utils":"eDN9","./math-utils":"AE6F"}],"Ytqr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s,exports.getFlyToDuration=l;var t=require("./math-utils"),e=require("./web-mercator-utils"),r=n(require("gl-matrix/vec2"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}const a=.01,u=["longitude","latitude","zoom"],i={curve:1.414,speed:1.2};function s(o,n,i,s={}){const l={},{startZoom:h,startCenterXY:f,uDelta:d,w0:p,u1:g,S:m,rho:M,rho2:b,r0:y}=c(o,n,s);if(g<a){for(const e of u){const r=o[e],a=n[e];l[e]=(0,t.lerp)(r,a,i)}return l}const O=i*m,v=Math.cosh(y)/Math.cosh(y+M*O),j=p*((Math.cosh(y)*Math.tanh(y+M*O)-Math.sinh(y))/b)/g,w=1/v,x=h+(0,e.scaleToZoom)(w),T=r.scale([],d,j);r.add(T,T,f);const z=(0,e.worldToLngLat)(T);return l.longitude=z[0],l.latitude=z[1],l.zoom=x,l}function l(t,e,r={}){r=Object.assign({},i,r);const{screenSpeed:o,speed:n,maxDuration:a}=r,{S:u,rho:s}=c(t,e,r),l=1e3*u;let h;return h=Number.isFinite(o)?l/(o/s):l/n,Number.isFinite(a)&&h>a?0:h}function c(t,o,n){const u=(n=Object.assign({},i,n)).curve,s=t.zoom,l=[t.longitude,t.latitude],c=(0,e.zoomToScale)(s),h=o.zoom,f=[o.longitude,o.latitude],d=(0,e.zoomToScale)(h-s),p=(0,e.lngLatToWorld)(l),g=(0,e.lngLatToWorld)(f),m=r.sub([],g,p),M=Math.max(t.width,t.height),b=M/d,y=r.length(m)*c,O=Math.max(y,a),v=u*u,j=(b*b-M*M+v*v*O*O)/(2*M*v*O),w=(b*b-M*M-v*v*O*O)/(2*b*v*O),x=Math.log(Math.sqrt(j*j+1)-j),T=Math.log(Math.sqrt(w*w+1)-w);return{startZoom:s,startCenterXY:p,uDelta:m,w0:M,u1:y,S:(T-x)/u,rho:u,rho2:v,r0:x,r1:T}}
},{"./math-utils":"AE6F","./web-mercator-utils":"eDN9","gl-matrix/vec2":"XSo1"}],"PqV4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"getBounds",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"getFlyToDuration",{enumerable:!0,get:function(){return n.getFlyToDuration}}),Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return u.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return u.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return u.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return u.pixelsToWorld}}),Object.defineProperty(exports,"zoomToScale",{enumerable:!0,get:function(){return u.zoomToScale}}),Object.defineProperty(exports,"scaleToZoom",{enumerable:!0,get:function(){return u.scaleToZoom}}),Object.defineProperty(exports,"altitudeToFovy",{enumerable:!0,get:function(){return u.altitudeToFovy}}),Object.defineProperty(exports,"fovyToAltitude",{enumerable:!0,get:function(){return u.fovyToAltitude}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return u.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return u.getDistanceScales}}),Object.defineProperty(exports,"addMetersToLngLat",{enumerable:!0,get:function(){return u.addMetersToLngLat}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return u.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return u.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return u.getProjectionParameters}});var e=f(require("./web-mercator-viewport")),t=f(require("./get-bounds")),r=f(require("./fit-bounds")),o=f(require("./normalize-viewport-props")),n=a(require("./fly-to-viewport")),u=require("./web-mercator-utils");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function f(e){return e&&e.__esModule?e:{default:e}}
},{"./web-mercator-viewport":"btK9","./get-bounds":"tHha","./fit-bounds":"Lip1","./normalize-viewport-props":"BccJ","./fly-to-viewport":"Ytqr","./web-mercator-utils":"eDN9"}],"gw95":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("../../lib/constants"),a=i(require("../project/project")),t=require("math.gl"),n=i(require("../../utils/memoize")),e=require("@math.gl/web-mercator");function i(o){return o&&o.__esModule?o:{default:o}}const s="\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",h="\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",r=(0,n.default)(u),d=(0,n.default)(l),w=[0,0,0,1],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function p(o,a){const[t,n,i]=o,s=(0,e.pixelsToWorld)([t,n,i],a);return Number.isFinite(i)?s:[s[0],s[1],0]}function u({viewport:o,center:a}){return new t.Matrix4(o.viewProjectionMatrix).invert().transform(a)}function l({viewport:o,shadowMatrices:a}){const n=[],e=o.pixelUnprojectionMatrix,i=o.isGeospatial?void 0:1,s=[[0,0,i],[o.width,0,i],[0,o.height,i],[o.width,o.height,i],[0,0,-1],[o.width,0,-1],[0,o.height,-1],[o.width,o.height,-1]].map(o=>p(o,e));for(const h of a){const a=h.clone().translate(new t.Vector3(o.center).negate()),e=s.map(o=>a.transform(o)),i=(new t.Matrix4).ortho({left:Math.min(...e.map(o=>o[0])),right:Math.max(...e.map(o=>o[0])),bottom:Math.min(...e.map(o=>o[1])),top:Math.max(...e.map(o=>o[1])),near:Math.min(...e.map(o=>-o[2])),far:Math.max(...e.map(o=>-o[2]))});n.push(i.multiplyRight(h))}return n}function _(a={},n={}){const e={shadow_uDrawShadowMap:Boolean(a.drawToShadowMap),shadow_uUseShadowMap:!!a.shadowMaps&&a.shadowMaps.length>0,shadow_uColor:a.shadowColor||w,shadow_uLightId:a.shadowLightId||0,shadow_uLightCount:a.shadowMatrices.length},i=r({viewport:a.viewport,center:n.project_uCenter}),s=[],h=d({shadowMatrices:a.shadowMatrices,viewport:a.viewport}).slice();for(let r=0;r<a.shadowMatrices.length;r++){const e=h[r],d=e.clone().translate(new t.Vector3(a.viewport.center).negate());n.project_uCoordinateSystem===o.COORDINATE_SYSTEM.LNGLAT&&n.project_uProjectionMode===o.PROJECTION_MODE.WEB_MERCATOR?(h[r]=d,s[r]=i):(h[r]=e.clone().multiplyRight(c),s[r]=d.transform(i))}for(let o=0;o<h.length;o++)e["shadow_uViewProjectionMatrices[".concat(o,"]")]=h[o],e["shadow_uProjectCenters[".concat(o,"]")]=s[o],a.shadowMaps&&a.shadowMaps.length>0?e["shadow_uShadowMap".concat(o)]=a.shadowMaps[o]:e["shadow_uShadowMap".concat(o)]=a.dummyShadowMap;return e}var m={name:"shadow",dependencies:[a.default],vs:s,fs:h,inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(o={},a={})=>{if(o.drawToShadowMap||o.shadowMaps&&o.shadowMaps.length>0){const{shadowEnabled:t=!0}=o;return t&&o.shadowMatrices&&o.shadowMatrices.length>0?_(o,a):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}};exports.default=m;
},{"../../lib/constants":"ysbg","../project/project":"NVOm","math.gl":"xAaq","../../utils/memoize":"uXG5","@math.gl/web-mercator":"PqV4"}],"Vaj8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("@luma.gl/core"),e={inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...i.picking};exports.default=e;
},{"@luma.gl/core":"iuAK"}],"vZnx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProgramManager=g,Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return e.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return e.phongLighting}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"project32",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return u.default}});var e=require("@luma.gl/core"),r=i(require("./misc/geometry")),t=i(require("./project/project")),o=i(require("./project32/project32")),n=i(require("./shadow/shadow")),u=i(require("./picking/picking"));function i(e){return e&&e.__esModule?e:{default:e}}const c=[r.default,t.default],a=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function g(r){const t=e.ProgramManager.getDefaultProgramManager(r);for(const e of c)t.addDefaultModule(e);for(const e of a)t.addShaderHook(e);return t}
},{"@luma.gl/core":"iuAK","./misc/geometry":"uFGI","./project/project":"NVOm","./project32/project32":"qxVk","./shadow/shadow":"gw95","./picking/picking":"Vaj8"}],"kPtk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmbientLight=void 0;const t=[255,255,255],e=1;let i=0;class s{constructor(s={}){const{color:o=t}=s,{intensity:n=e}=s;this.id=s.id||"ambient-".concat(i++),this.color=o,this.intensity=n,this.type="ambient"}}exports.AmbientLight=s;
},{}],"n3wt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=void 0;var t=require("math.gl");const i=[255,255,255],e=1,o=[0,0,-1];let r=0;class s{constructor(s={}){const{color:c=i}=s,{intensity:n=e}=s,{direction:a=o}=s,{_shadow:h=!1}=s;this.id=s.id||"directional-".concat(r++),this.color=c,this.intensity=n,this.type="directional",this.direction=new t.Vector3(a).normalize().toArray(),this.shadow=h}getProjectedLight(){return this}}exports.DirectionalLight=s;
},{"math.gl":"xAaq"}],"Z10T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props={...e}}preRender(){}getModuleParameters(){}cleanup(){}}exports.default=e;
},{}],"ay01":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class s{constructor(s,e={}){const{id:t="pass"}=e;this.id=t,this.gl=s,this.props={...e}}setProps(s){Object.assign(this.props,s)}render(){}cleanup(){}}exports.default=s;
},{}],"oM9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.layerIndexResolver=a,exports.default=void 0;var e=t(require("./pass")),r=require("@luma.gl/core");function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{render(e){const t=this.gl;return(0,r.setParameters)(t,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:r,views:t,onViewportActive:s,clearCanvas:a=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;a&&i(o);const n=[];for(const i of r){const r=i.viewport||i,a=t&&t[r.id];s(r);const c=this._getDrawLayerParams(r,e);e.view=a;const l=r.subViewports||[r];for(const t of l){e.viewport=t;const r=this._drawLayersInViewport(o,e,c);n.push(r)}}return n}_getDrawLayerParams(e,{layers:r,pass:t,layerFilter:s,effects:o,moduleParameters:i}){const n=[],c=a(),l={viewport:e,isPicking:t.startsWith("picking"),renderPass:t};for(let a=0;a<r.length;a++){const e=r[a],u=this._shouldDrawLayer(e,l,s),p={shouldDrawLayer:u,layerRenderIndex:c(e,u)};u&&(p.moduleParameters=this._getModuleParameters(e,o,t,i),p.layerParameters=this.getLayerParameters(e,a)),n[a]=p}return n}_drawLayersInViewport(e,{layers:t,pass:s,viewport:a,view:i},n){const c=o(e,{viewport:a});if(i&&i.props.clear){const t=!0===i.props.clear?{color:!0,depth:!0}:i.props.clear;(0,r.withParameters)(e,{scissorTest:!0,scissor:c},()=>(0,r.clear)(e,t))}const l={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,r.setParameters)(e,{viewport:c});for(let r=0;r<t.length;r++){const e=t[r],{shouldDrawLayer:o,layerRenderIndex:i,moduleParameters:c,layerParameters:p}=n[r];if(o&&e.props.pickable&&l.pickableCount++,e.isComposite)l.compositeCount++;else if(o){l.visibleCount++,c.viewport=a;try{e.drawLayer({moduleParameters:c,uniforms:{layerIndex:i},parameters:p})}catch(u){e.raiseError(u,"drawing ".concat(e," to ").concat(s))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,r){return null}getLayerParameters(e,r){return e.props.parameters}_shouldDrawLayer(e,r,t){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;if(r.layer=e,t&&!t(r))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(r))return!1;r.layer=s,s=s.parent}return e.activateViewport(r.viewport),!0}_getModuleParameters(e,t,s,a){const o=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:(0,r.cssToDeviceRatio)(this.gl)});if(t)for(const r of t)Object.assign(o,r.getModuleParameters(e));return Object.assign(o,this.getModuleParameters(e,t),a)}}function a(e=0,r={}){const t={},s=(o,i)=>{const n=o.props._offset,c=o.id,l=o.parent&&o.parent.id;let u;if(!l||l in r||s(o.parent,!1),l in t){const e=t[l]=t[l]||a(r[l],r);u=e(o,i),t[c]=e}else Number.isFinite(n)?(u=n+(r[l]||0),t[c]=null):u=e;return i&&u>=e&&(e=u+1),r[c]=u,u};return s}function o(e,{viewport:t}){const s=e.canvas?e.canvas.clientHeight||e.canvas.height:100,a=t,o=(0,r.cssToDeviceRatio)(e);return[a.x*o,(s-a.y-a.height)*o,a.width*o,a.height*o]}function i(e){const t=e.drawingBufferWidth,s=e.drawingBufferHeight;(0,r.setParameters)(e,{viewport:[0,0,t,s]}),e.clear(16640)}exports.default=s;
},{"./pass":"ay01","@luma.gl/core":"iuAK"}],"STtv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./layers-pass")),t=require("@luma.gl/core");function s(e){return e&&e.__esModule?e:{default:e}}class h extends e.default{constructor(e,s){super(e,s),this.shadowMap=new t.Texture2D(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new t.Renderbuffer(e,{format:33189,width:1,height:1}),this.fbo=new t.Framebuffer(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const s=this.fbo;(0,t.withParameters)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const h=e.viewports[0],r=(0,t.cssToDeviceRatio)(this.gl),a=h.width*r,d=h.height*r;a===s.width&&d===s.height||s.resize({width:a,height:d}),super.render({...e,target:s,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}exports.default=h;
},{"./layers-pass":"oM9Q","@luma.gl/core":"iuAK"}],"MByF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/core"),e=require("./ambient-light"),s=require("./directional-light"),i=r(require("../../lib/effect")),a=require("math.gl"),h=r(require("../../passes/shadow-pass")),o=r(require("../../shaderlib/shadow/shadow"));function r(t){return t&&t.__esModule?t:{default:t}}const d={color:[255,255,255],intensity:1},n=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],l=[0,0,0,200/255];class g extends i.default{constructor(t){super(t),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=l,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const e in t){const s=t[e];switch(s.type){case"ambient":this.ambientLight=s;break;case"directional":this.directionalLights.push(s);break;case"point":this.pointLights.push(s)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:s,layerFilter:i,viewports:a,onViewportActive:h,views:r}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=t.ProgramManager.getDefaultProgramManager(e),o.default&&this.programManager.addDefaultModule(o.default)),this.dummyShadowMap||(this.dummyShadowMap=new t.Texture2D(e,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:s,layerFilter:i,viewports:a,onViewportActive:h,views:r,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(e=>e.getProjectedLight({layer:t})),pointLights:this.pointLights.map(e=>e.getProjectedLight({layer:t}))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(o.default),this.programManager=null)}_createLightMatrix(){const t=[];for(const e of this.directionalLights){const s=(new a.Matrix4).lookAt({eye:new a.Vector3(e.direction).negate()});t.push(s)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const s=new h.default(t);this.shadowPasses[e]=s,this.shadowMaps[e]=s.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:i,directionalLights:a}=this;t||0!==i.length||0!==a.length||(this.ambientLight=new e.AmbientLight(d),this.directionalLights.push(new s.DirectionalLight(n[0]),new s.DirectionalLight(n[1])))}}exports.default=g;
},{"@luma.gl/core":"iuAK","./ambient-light":"kPtk","./directional-light":"n3wt","../../lib/effect":"Z10T","math.gl":"xAaq","../../passes/shadow-pass":"STtv","../../shaderlib/shadow/shadow":"gw95"}],"yeLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TypedArrayManager=void 0;class e{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:r=1,type:s,padding:o=0,copy:i=!1,initialize:l=!1,maxCount:n}){const a=s||e&&e.constructor||Float32Array,p=t*r+o;if(ArrayBuffer.isView(e)){if(p<=e.length)return e;if(p*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new a(e.buffer,0,p)}let f;n&&(f=n*r+o);const h=this._allocate(a,p,l,f);return e&&i?h.set(e):l||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,t,r,s){let o=Math.max(Math.ceil(t*this.props.overAlloc),1);o>s&&(o=s);const i=this._pool,l=e.BYTES_PER_ELEMENT*o,n=i.findIndex(e=>e.byteLength>=l);if(n>=0){const t=new e(i.splice(n,1)[0],0,o);return r&&t.fill(0),t}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:r}=e,{byteLength:s}=r,o=t.findIndex(e=>e.byteLength>=s);o<0?t.push(r):(o>0||t.length<this.props.poolSize)&&t.splice(o,0,r),t.length>this.props.poolSize&&t.shift()}}exports.TypedArrayManager=e;var t=new e;exports.default=t;
},{}],"ki6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=n,exports.mod=o,exports.getCameraPosition=u,exports.getFrustumPlanes=a,exports.fp64LowPart=c,exports.toDoublePrecisionArray=f;var t=r(require("./typed-array-manager")),e=require("math.gl");function r(t){return t&&t.__esModule?t:{default:t}}function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t,e){const r=t%e;return r<0?e+r:r}function u(t){return[t[12],t[13],t[14]]}function a(t){const e={};return e.left=i(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),e.right=i(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),e.bottom=i(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),e.top=i(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),e.near=i(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),e.far=i(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14]),e}const s=new e.Vector3;function i(t,r,n,o){s.set(t,r,n);const u=s.len();return{distance:o/u,normal:new e.Vector3(-t/u,-r/u,-n/u)}}function c(t){return t-Math.fround(t)}let l;function f(e,{size:r=1,startIndex:n=0,endIndex:o}){Number.isFinite(o)||(o=e.length);const u=(o-n)/r;l=t.default.allocate(l,u,{type:Float32Array,size:2*r});let a=n,s=0;for(;a<o;){for(let t=0;t<r;t++){const n=e[a++];l[s+t]=n,l[s+t+r]=c(n)}s+=2*r}return l.subarray(0,u*r*2)}
},{"./typed-array-manager":"yeLJ","math.gl":"xAaq"}],"HjGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../utils/log")),i=require("../utils/math-utils"),e=require("math.gl"),s=o(require("gl-matrix/mat4")),r=require("@math.gl/web-mercator"),n=require("../lib/constants");function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=a();if(i&&i.has(t))return i.get(t);var e={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,i&&i.set(t,e),e}function h(t){return t&&t.__esModule?t:{default:t}}const c=Math.PI/180,l=(0,i.createMat4)(),u=[0,0,0],p=0,d={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class M{constructor(t={}){const{id:i=null,x:e=0,y:s=0,width:r=1,height:n=1}=t;this.id=i||this.constructor.displayName||"viewport",this.x=e,this.y=s,this.width=r||1,this.height=n||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?n.PROJECTION_MODE.WEB_MERCATOR:n.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:n.PROJECTION_MODE.IDENTITY}equals(t){return t instanceof M&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&(0,e.equals)(t.projectionMatrix,this.projectionMatrix)&&(0,e.equals)(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const e=this.projectPosition(t),s=(0,r.worldToPixels)(e,this.pixelProjectionMatrix),[n,a]=s,o=i?a:this.height-a;return 2===t.length?[n,o]:[n,o,s[2]]}unproject(t,{topLeft:i=!0,targetZ:e}={}){const[s,n,a]=t,o=i?n:this.height-n,h=e&&e*this.distanceScales.unitsPerMeter[2],c=(0,r.pixelsToWorld)([s,o,a],this.pixelUnprojectionMatrix,h),[l,u,p]=this.unprojectPosition(c);return Number.isFinite(a)?[l,u,p]:Number.isFinite(e)?[l,u,e]:[l,u]}projectPosition(t){const[i,e]=this.projectFlat(t);return[i,e,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,e]=this.unprojectFlat(t);return[i,e,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?(0,r.lngLatToWorld)(t):t}unprojectFlat(t){return this.isGeospatial?(0,r.worldToLngLat)(t):t}getBounds(t={}){const i={targetZ:t.z||0},e=this.unproject([0,0],i),s=this.unproject([this.width,0],i),r=this.unproject([0,this.height],i),n=this.unproject([this.width,this.height],i);return[Math.min(e[0],s[0],r[0],n[0]),Math.min(e[1],s[1],r[1],n[1]),Math.max(e[0],s[0],r[0],n[0]),Math.max(e[1],s[1],r[1],n[1])]}getDistanceScales(t=null){return t?(0,r.getDistanceScales)({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:i,width:e=1,height:s=1}){return t<this.x+this.width&&this.x<t+e&&i<this.y+this.height&&this.y<i+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,(0,i.getFrustumPlanes)(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,i){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:i,aspect:s,focalDistance:r,near:n,far:a}){return t?(new e.Matrix4).orthographic({fovy:i,aspect:s,focalDistance:r,near:n,far:a}):(new e.Matrix4).perspective({fovy:i,aspect:s,near:n,far:a})}_initViewMatrix(t){const{viewMatrix:i=l,longitude:s=null,latitude:n=null,zoom:a=null,position:o=null,modelMatrix:h=null,focalDistance:c=1,distanceScales:M=null}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(s),this.zoom=a,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?(0,r.getMeterZoom)({latitude:n})+Math.log2(c):p);const x=Math.pow(2,this.zoom);this.scale=x,this.distanceScales=this.isGeospatial?(0,r.getDistanceScales)({latitude:n,longitude:s}):M||d,this.focalDistance=c,this.distanceScales.metersPerUnit=new e.Vector3(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new e.Vector3(this.distanceScales.unitsPerMeter),this.position=u,this.meterOffset=u,o&&(this.position=o,this.modelMatrix=h,this.meterOffset=h?h.transformVector(o):o),this.isGeospatial?(this.longitude=s,this.latitude=n,this.center=this._getCenterInWorld({longitude:s,latitude:n})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new e.Matrix4).multiplyRight(this.viewMatrixUncentered).translate(new e.Vector3(this.center||u).negate())}_getCenterInWorld({longitude:t,latitude:i}){const{meterOffset:s,distanceScales:r}=this,n=new e.Vector3(this.projectPosition([t,i,0]));if(s){const t=new e.Vector3(s).scale(r.unitsPerMeter);n.add(t)}return n}_initProjectionMatrix(t){const{projectionMatrix:i=null,orthographic:e=!1,fovyRadians:s,fovy:r=75,near:n=.1,far:a=1e3,focalDistance:o=1}=t;this.projectionMatrix=i||this._createProjectionMatrix({orthographic:e,fovyRadians:s||r*c,aspect:this.width/this.height,focalDistance:o,near:n,far:a})}_initPixelMatrices(){const e=(0,i.createMat4)();s.multiply(e,e,this.projectionMatrix),s.multiply(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=s.invert([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,i.getCameraPosition)(this.viewMatrixInverse);const r=(0,i.createMat4)(),n=(0,i.createMat4)();s.scale(r,r,[this.width/2,-this.height/2,1]),s.translate(r,r,[1,-1,0]),s.multiply(n,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=n,this.viewportMatrix=r,this.pixelUnprojectionMatrix=s.invert((0,i.createMat4)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||t.default.warn("Pixel project matrix not invertible")()}}exports.default=M,M.displayName="Viewport";
},{"../utils/log":"GVus","../utils/math-utils":"ki6G","math.gl":"xAaq","gl-matrix/mat4":"w3aR","@math.gl/web-mercator":"PqV4","../lib/constants":"ysbg"}],"Rf6Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./viewport")),e=require("@math.gl/web-mercator"),i=a(require("gl-matrix/vec2")),r=require("math.gl");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=r?Object.getOwnPropertyDescriptor(t,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=t[a]}return i.default=t,e&&e.set(t,i),i}function n(t){return t&&t.__esModule?t:{default:t}}class s extends t.default{constructor(t={}){const{latitude:i=0,longitude:o=0,zoom:a=11,pitch:n=0,bearing:s=0,nearZMultiplier:u=.1,farZMultiplier:l=1.01,orthographic:h=!1,repeat:d=!1,worldOffset:c=0}=t;let{width:p,height:f,altitude:g=1.5}=t;const w=Math.pow(2,a);p=p||1,f=f||1,g=Math.max(.75,g);const{fov:M,aspect:b,focalDistance:m,near:x,far:y}=(0,e.getProjectionParameters)({width:p,height:f,pitch:n,altitude:g,nearZMultiplier:u,farZMultiplier:l});let v=(0,e.getViewMatrix)({height:f,pitch:n,bearing:s,scale:w,altitude:g});if(c){v=(new r.Matrix4).translate([512*c,0,0]).multiplyLeft(v)}super({...t,width:p,height:f,viewMatrix:v,longitude:o,latitude:i,zoom:a,orthographic:h,fovyRadians:M,aspect:b,focalDistance:m,near:x,far:y}),this.latitude=i,this.longitude=o,this.zoom=a,this.pitch=n,this.bearing=s,this.altitude=g,this.orthographic=h,this._subViewports=d?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let r=e;r<=i;r++){const t=r?new s({...this,worldOffset:r}):this;this._subViewports.push(t)}}return this._subViewports}addMetersToLngLat(t,i){return(0,e.addMetersToLngLat)(t,i)}panByPosition(t,r){const o=(0,e.pixelsToWorld)(r,this.pixelUnprojectionMatrix),a=this.projectFlat(t),n=i.add([],a,i.negate([],o)),s=i.add([],this.center,n),[u,l]=this.unprojectFlat(s);return{longitude:u,latitude:l}}getBounds(t={}){const i=(0,e.getBounds)(this,t.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(t,i={}){const{width:r,height:o}=this,{longitude:a,latitude:n,zoom:u}=(0,e.fitBounds)({width:r,height:o,bounds:t,...i});return new s({width:r,height:o,longitude:a,latitude:n,zoom:u})}}exports.default=s,s.displayName="WebMercatorViewport";
},{"./viewport":"HjGN","@math.gl/web-mercator":"PqV4","gl-matrix/vec2":"XSo1","math.gl":"xAaq"}],"AJ0f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWorldPosition=d,exports.projectPosition=O;var e=require("../../lib/constants"),t=require("./viewport-uniforms"),r=c(require("../../viewports/web-mercator-viewport")),o=s(require("gl-matrix/vec4")),i=s(require("gl-matrix/vec3")),n=require("@math.gl/web-mercator");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,o=!1){const i=t.projectPosition(e);if(o&&t instanceof r.default){const[r,o,n=0]=e,a=t.getDistanceScales([r,o]);i[2]=n*a.unitsPerMeter[2]}return i}function f(t){const r={...t};let{coordinateSystem:o}=t;const{viewport:i,coordinateOrigin:n,fromCoordinateSystem:a,fromCoordinateOrigin:s}=t;return o===e.COORDINATE_SYSTEM.DEFAULT&&(o=i.isGeospatial?e.COORDINATE_SYSTEM.LNGLAT:e.COORDINATE_SYSTEM.CARTESIAN),void 0===a&&(r.fromCoordinateSystem=o),void 0===s&&(r.fromCoordinateOrigin=n),r.coordinateSystem=o,r}function d(t,{viewport:r,modelMatrix:i,coordinateSystem:a,coordinateOrigin:s,offsetMode:c}){let[f,d,O=0]=t;switch(i&&([f,d,O]=o.transformMat4([],[f,d,O,1],i)),a){case e.COORDINATE_SYSTEM.LNGLAT:return u([f,d,O],r,c);case e.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return u([f+s[0],d+s[1],O+(s[2]||0)],r,c);case e.COORDINATE_SYSTEM.METER_OFFSETS:return u((0,n.addMetersToLngLat)(s,[f,d,O]),r,c);case e.COORDINATE_SYSTEM.CARTESIAN:default:return r.isGeospatial?[f+s[0],d+s[1],O+s[2]]:r.projectPosition([f,d,O])}}function O(e,r){const{viewport:o,coordinateSystem:n,coordinateOrigin:a,modelMatrix:s,fromCoordinateSystem:c,fromCoordinateOrigin:u}=f(r),{geospatialOrigin:O,shaderCoordinateOrigin:p,offsetMode:l}=(0,t.getOffsetOrigin)(o,n,a),S=d(e,{viewport:o,modelMatrix:s,coordinateSystem:c,coordinateOrigin:u,offsetMode:l});if(l){const e=o.projectPosition(O||p);i.sub(S,S,e)}return S}
},{"../../lib/constants":"ysbg","./viewport-uniforms":"iWu9","../../viewports/web-mercator-viewport":"Rf6Y","gl-matrix/vec4":"zWbG","gl-matrix/vec3":"AWBd","@math.gl/web-mercator":"PqV4"}],"dDJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROP_SYMBOLS=exports.LIFECYCLE=void 0;const e={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};exports.LIFECYCLE=e;const o={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")};exports.PROP_SYMBOLS=o;
},{}],"gSVO":[function(require,module,exports) {
"use strict";function t(t,e=(()=>!0)){return Array.isArray(t)?r(t,e,[]):e(t)?[t]:[]}function r(t,e,n){let o=-1;for(;++o<t.length;){const s=t[o];Array.isArray(s)?r(s,e,n):e(s)&&n.push(s)}return n}function e({target:t,source:r,start:e=0,count:n=1}){const o=r.length,s=n*o;let i=0;for(let u=e;i<o;i++)t[u++]=r[i];for(;i<s;)i<s-i?(t.copyWithin(e+i,e,e+i),i*=2):(t.copyWithin(e+i,e,e+s-i),i=s);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.flatten=t,exports.fillArray=e;
},{}],"h6BZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@loaders.gl/core");class s{constructor(t,s,e){this.id=t,this.context=e,this._loadCount=0,this._subscribers=new Set,this.setData(s)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(s,e){if(s===this._data&&!e)return;this._data=s;const i=++this._loadCount;let r=s;"string"==typeof s&&(r=(0,t.load)(s)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=null,this._content=t)}).catch(t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=t||!0)})):(this.isLoaded=!0,this._error=null,this._content=s);for(const t of this._subscribers)t.onChange(this.getData())}}exports.default=s;
},{"@loaders.gl/core":"ikKD"}],"CnML":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./resource"));function s(e){return e&&e.__esModule?e:{default:e}}class r{constructor({gl:e,protocol:s}){this.protocol=s||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:s,data:r,forceUpdate:t=!1,persistent:o=!0}){let u=this._resources[s];u?u.setData(r,t):(u=new e.default(s,r,this._context),this._resources[s]=u),u.persistent=o}remove(e){const s=this._resources[e];s&&(s.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const s=this._consumers[e];if(s){for(const e in s){const r=s[e];r.resource&&r.resource.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:s,consumerId:r,requestId:t="default"}){const{_resources:o,protocol:u}=this;e.startsWith(u)&&(o[e=e.replace(u,"")]||this.add({resourceId:e,data:null,persistent:!1}));const c=o[e];if(this._track(r,t,c,s),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,s,r,t){const o=this._consumers,u=o[e]=o[e]||{},c=u[s]||{};c.resource&&(c.resource.unsubscribe(c),c.resource=null,this.prune()),r&&(u[s]=c,c.onChange=t,c.resource=r,r.subscribe(c))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const s=this._resources[e];s.persistent||s.inUse()||(s.delete(),delete this._resources[e])}}}exports.default=r;
},{"./resource":"h6BZ"}],"m8xf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),t=require("../lifecycle/constants"),r=o(require("../utils/log")),a=o(require("../debug")),s=require("../utils/flatten"),i=require("probe.gl"),n=o(require("./resource/resource-manager")),l=o(require("../viewports/viewport")),d=require("../shaderlib");function o(e){return e&&e.__esModule?e:{default:e}}const c="layerManager.setLayers",u="layerManager.activateViewport",h=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class y{constructor(t,{deck:r,stats:a,viewport:s,timeline:o}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new n.default({gl:t,protocol:"deck://"}),this.context={...h,layerManager:this,gl:t,deck:r,programManager:t&&(0,d.createProgramManager)(t),stats:a||new i.Stats({id:"deck.gl"}),viewport:s||new l.default({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new e.Timeline,resourceManager:this.resourceManager},this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const a=r.getNeedsRedraw(e);t=t||a}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(e=>0===t.id.indexOf(e))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){(0,a.default)(c,this,t,e),this.lastRenderedLayers=e,e=(0,s.flatten)(e,Boolean);for(const r of e)r.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return(0,a.default)(u,this,e),e&&(this.context.viewport=e),this}_handleError(e,t,r){r.raiseError(t,"".concat(e," of ").concat(r))}_updateLayers(e,t){const a={};for(const n of e)a[n.id]?r.default.warn("Multiple old layers with same id ".concat(n.id))():a[n.id]=n;const s=[];this._updateSublayersRecursively(t,a,s),this._finalizeOldLayers(a);let i=!1;for(const r of s)if(r.hasUniformTransition()){i=!0;break}this._needsUpdate=i,this.layers=s}_updateSublayersRecursively(e,t,a){for(const i of e){i.context=this.context;const e=t[i.id];null===e&&r.default.warn("Multiple new layers with same id ".concat(i.id))(),t[i.id]=null;let n=null;try{this._debug&&e!==i&&i.validateProps(),e?(this._transferLayerState(e,i),this._updateLayer(i)):this._initializeLayer(i),a.push(i),n=i.isComposite&&i.getSubLayers()}catch(s){this._handleError("matching",s,i)}n&&this._updateSublayersRecursively(n,t,a)}}_finalizeOldLayers(e){for(const t in e){const r=e[t];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=t.LIFECYCLE.INITIALIZED}catch(r){this._handleError("initialization",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=t.LIFECYCLE.MATCHED,r!==e&&(e.lifecycle=t.LIFECYCLE.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=t.LIFECYCLE.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=t.LIFECYCLE.FINALIZED}catch(r){this._handleError("finalization",r,e)}}}exports.default=y;
},{"@luma.gl/core":"iuAK","../lifecycle/constants":"dDJN","../utils/log":"GVus","../debug":"EEoF","../utils/flatten":"gSVO","probe.gl":"TYNK","./resource/resource-manager":"CnML","../viewports/viewport":"HjGN","../shaderlib":"vZnx"}],"KSag":[function(require,module,exports) {
"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const n in e){const i=e[n],s=t[n];if(!(i===s||Array.isArray(i)&&Array.isArray(s)&&r(i,s)))return!1}return!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepEqual=r;
},{}],"H2B6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/deep-equal"),t=s(require("../utils/log")),i=require("../utils/flatten");function s(e){return e&&e.__esModule?e:{default:e}}class n{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),s={x:e[0],y:e[1]};for(let n=i.length-1;n>=0;--n){const r=i[n];if(r.containsPixel(s)){const i=e.slice();return i[0]-=r.x,i[1]-=r.y,r.unproject(i,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=(0,i.flatten)(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(i){if(i){!(0,e.deepEqual)(i,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=i}else t.default.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>e._getViewport(t,{width:t.width,height:t.height}),...t})}_updateController(e,t,i,s){let n=e.controller;return n?(n={...t,...e.props,...n,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height},s?s.setProps(n):s=this._createController(e,n),s):null}_rebuildViewports(){const{width:e,height:t,views:i}=this,s=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=i.length;r--;){const h=i[r],a=this.getViewState(h),o=h.makeViewport({width:e,height:t,viewState:a});let l=s[h.id];h.controller&&!l&&(n=!0),!n&&h.controller||!l||(l.finalize(),l=null),this.controllers[h.id]=this._updateController(h,a,o,l),this._viewports.unshift(o)}for(const r in s)s[r]&&!this.controllers[r]&&s[r].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,s)=>!e[s].equals(t[s]))}}exports.default=n;
},{"../utils/deep-equal":"KSag","../utils/log":"GVus","../utils/flatten":"gSVO"}],"MOmt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePosition=o,exports.getPosition=e;const t=/([0-9]+\.?[0-9]*)(%|px)/;function o(o){switch(typeof o){case"number":return{position:o,relative:!1};case"string":const e=o.match(t);if(e&&e.length>=3){const t="%"===e[2],o=parseFloat(e[1]);return{position:t?o/100:o,relative:t}}default:throw new Error("Could not parse position string ".concat(o))}}function e(t,o){return t.relative?Math.round(t.position*o):t.position}
},{}],"Txat":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"deck.gl: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"k6Eh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../viewports/viewport")),e=require("../utils/positions"),i=require("../utils/deep-equal"),s=r(require("../utils/assert"));function r(t){return t&&t.__esModule?t:{default:t}}class o{constructor(e={}){const{id:i=null,x:r=0,y:o=0,width:n="100%",height:h="100%",projectionMatrix:p=null,fovy:a=50,near:u=.1,far:l=1e3,modelMatrix:w=null,viewportInstance:d=null,type:c=t.default}=e;(0,s.default)(!d||d instanceof t.default),this.viewportInstance=d,this.id=i||this.constructor.displayName||"view",this.type=c,this.props={...e,id:this.id,projectionMatrix:p,fovy:a,near:u,far:l,modelMatrix:w},this._parseDimensions({x:r,y:o,width:n,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}equals(t){if(this===t)return!0;if(this.viewportInstance)return t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance);return(0,i.deepEqual)(this.props,t.props)}makeViewport({width:t,height:e,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const s=this.getDimensions({width:t,height:e});return this._getViewport(i,s)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:i}){return{x:(0,e.getPosition)(this._x,t),y:(0,e.getPosition)(this._y,i),width:(0,e.getPosition)(this._width,t),height:(0,e.getPosition)(this._height,i)}}_getControllerProps(t){let e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),{...t,...e}):null}_getViewport(t,e){const{type:i}=this;return new i({...t,...this.props,...e})}_parseDimensions({x:t,y:i,width:s,height:r}){this._x=(0,e.parsePosition)(t),this._y=(0,e.parsePosition)(i),this._width=(0,e.parsePosition)(s),this._height=(0,e.parsePosition)(r)}}exports.default=o;
},{"../viewports/viewport":"HjGN","../utils/positions":"MOmt","../utils/deep-equal":"KSag","../utils/assert":"Txat"}],"yDoV":[function(require,module,exports) {
"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const s={onStart:t,onUpdate:t,onInterrupt:t,onEnd:t};class e{constructor(t){this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}get inProgress(){return this._inProgress}start(t){this.cancel(),this.settings={...s,...t},this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:t,settings:s}=this;this._handle=t.addChannel({delay:t.getTime(),duration:s.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}exports.default=e;
},{}],"awSe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TRANSITION_EVENTS=void 0;var t=n(require("../transitions/transition"));function n(t){return t&&t.__esModule?t:{default:t}}const i=()=>{},r={BREAK:1,SNAP_TO_END:2,IGNORE:3};exports.TRANSITION_EVENTS=r;const o={transitionEasing:t=>t,transitionInterruption:r.BREAK,onTransitionStart:i,onTransitionInterrupt:i,onTransitionEnd:i};class s{constructor(n,r={}){this.ControllerState=n,this.props={...o,...r},this.propsInTransition=null,this.transition=new t.default(r.timeline),this.onViewStateChange=r.onViewStateChange||i,this.onStateChange=r.onStateChange||i,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let n=!1;const i=this.props;if(t={...o,...t},this.props=t,this._shouldIgnoreViewportChange(i,t))return n;if(this._isTransitionEnabled(t)){const{interruption:o,endProps:s}=this.transition.settings,e={...i,...o===r.SNAP_TO_END?s:this.propsInTransition||i};this._triggerTransition(e,t),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:n,transitionInterpolator:i}=t;return(n>0||"auto"===n)&&Boolean(i)}_isUpdateDueToCurrentTransition(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,n){return this.transition.inProgress?this.transition.settings.interruption===r.IGNORE||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(t,n)}_triggerTransition(t,n){const i=new this.ControllerState(t),r=new this.ControllerState(n).shortestPathFrom(i),{transitionInterpolator:o}=n,s=o.getDuration?o.getDuration(t,n):n.transitionDuration;if(0===s)return;const e=n.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.duration=s,this.transition.start({duration:s,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startProps:e.start,endProps:e.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t(n)}}_onTransitionUpdate(t){const{time:n,settings:{interpolator:i,startProps:r,endProps:o,duration:s,easing:e}}=t,a=e(n/s),p=i.interpolateProps(r,o,a);this.propsInTransition=new this.ControllerState({...this.props,...p}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}exports.default=s;
},{"../transitions/transition":"yDoV"}],"R8fo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=require("math.gl"),e=t(require("../utils/assert"));function t(r){return r&&r.__esModule?r:{default:r}}class s{constructor(r={}){Array.isArray(r)&&(r={compare:r,extract:r,required:r});const{compare:e,extract:t,required:s}=r;this._propsToCompare=e,this._propsToExtract=t,this._requiredProps=s}arePropsEqual(e,t){for(const s of this._propsToCompare||Object.keys(t))if(!(s in e&&s in t&&(0,r.equals)(e[s],t[s])))return!1;return!0}initializeProps(r,e){let t;if(this._propsToExtract){const s={},o={};for(const t of this._propsToExtract)s[t]=r[t],o[t]=e[t];t={start:s,end:o}}else t={start:r,end:e};return this._checkRequiredProps(t.start),this._checkRequiredProps(t.end),t}interpolateProps(r,e,t){return e}getDuration(r,e){return e.transitionDuration}_checkRequiredProps(r){this._requiredProps&&this._requiredProps.forEach(t=>{const s=r[t];(0,e.default)(Number.isFinite(s)||Array.isArray(s),"".concat(t," is required for transition"))})}}exports.default=s;
},{"math.gl":"xAaq","../utils/assert":"Txat"}],"bGRb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./transition-interpolator")),o=require("math.gl");function r(t){return t&&t.__esModule?t:{default:t}}const e=["longitude","latitude","zoom","bearing","pitch"],i=["longitude","latitude","zoom"];class s extends t.default{constructor(t={}){super((Array.isArray(t)?t:t.transitionProps)||{compare:e,extract:e,required:i}),this.opts=t}initializeProps(t,o){const r=super.initializeProps(t,o),{makeViewport:e,around:i}=this.opts;if(e&&i){const s=e(t),n=e(o),a=s.unproject(i);r.start.around=i,Object.assign(r.end,{around:n.project(a),aroundPosition:a,width:o.width,height:o.height})}return r}interpolateProps(t,r,e){const i={};for(const s of this._propsToExtract)i[s]=(0,o.lerp)(t[s]||0,r[s]||0,e);if(r.aroundPosition){const s=this.opts.makeViewport({...r,...i});Object.assign(i,s.panByPosition(r.aroundPosition,(0,o.lerp)(t.around,r.around,e)))}return i}}exports.default=s;
},{"./transition-interpolator":"R8fo","math.gl":"xAaq"}],"ugw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./transition-manager")),n=e(require("../transitions/linear-interpolator"));function e(t){return t&&t.__esModule?t:{default:t}}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i();if(n&&n.has(t))return n.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=o?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(e,s,r):e[s]=t[s]}return e.default=t,n&&n.set(t,e),e}const s={transitionDuration:0},r={transitionDuration:300,transitionEasing:t=>t,transitionInterruption:t.TRANSITION_EVENTS.BREAK},a=300,h=t=>1-(1-t)*(1-t),l={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]};class g{constructor(e,i={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new t.default(e,{...i,onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)});const o=this.linearTransitionProps;this._transition=o&&{...r,transitionInterpolator:new n.default({transitionProps:o})},this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(i)}get linearTransitionProps(){return null}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}finalize(){for(const t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}handleEvent(t){const{ControllerState:n}=this;this.controllerState=new n({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state});const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}getCenter(t){const{x:n,y:e}=this.controllerStateProps,{offsetCenter:i}=t;return[i.x-n,i.y-e]}isPointInBounds(t,n){const{width:e,height:i}=this.controllerStateProps;if(n&&n.handled)return!1;const o=t[0]>=0&&t[0]<=e&&t[1]>=0&&t[1]<=i;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:n}=t;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(t){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=n}setProps(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),"dragMode"in t&&(this.dragMode=t.dragMode),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);let{inertia:n}=t;!0===n&&(n=a),this.inertia=n;const{scrollZoom:e=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:r=!0,touchRotate:h=!1,keyboard:g=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(l.WHEEL,c&&e),this.toggleEvents(l.PAN,c&&(i||o)),this.toggleEvents(l.PINCH,c&&(r||h)),this.toggleEvents(l.TRIPLE_PAN,c&&h),this.toggleEvents(l.DOUBLE_TAP,c&&s),this.toggleEvents(l.KEYBOARD,c&&g),this.scrollZoom=e,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=r,this.touchRotate=h,this.keyboard=g}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,n){this.eventManager&&t.forEach(t=>{this._events[t]!==n&&(this._events[t]=n,n?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))})}updateViewport(t,n={},e={}){const i={...t.getViewportProps(),...n},o=this.controllerState!==t;if(this._state=t.getState(),this._setInteractionState(e),o){const t=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange&&(t.interactionState=this._interactionState,this.onViewStateChange(t))}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;let e=this.isFunctionKeyPressed(t)||t.rightButton;(this.invertPan||"pan"===this.dragMode)&&(e=!e);const i=this.controllerState[e?"panStart":"rotateStart"]({pos:n});return this._panMove=e,this.updateViewport(i,s,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const n=this.getCenter(t),e=this.controllerState.pan({pos:n});return this.updateViewport(e,s,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:n}=this;if(this.dragPan&&n&&t.velocity){const e=this.getCenter(t),i=[e[0]+t.velocityX*n/2,e[1]+t.velocityY*n/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:h},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const n=this.getCenter(t),e=this.controllerState.rotate({pos:n});return this.updateViewport(e,s,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:n}=this;if(this.dragRotate&&n&&t.velocity){const e=this.getCenter(t),i=[e[0]+t.velocityX*n/2,e[1]+t.velocityY*n/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:h},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.preventDefault();const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const{speed:e=.01,smooth:i=!1}=this.scrollZoom,{delta:o}=t;let s=2/(1+Math.exp(-Math.abs(o*e)));o<0&&0!==s&&(s=1/s);const r=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(r,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const e=this.controllerState.rotateStart({pos:n});return this.updateViewport(e,s,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const n=this.getCenter(t);n[0]-=t.deltaX;const e=this.controllerState.rotate({pos:n});return this.updateViewport(e,s,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&t.velocityY){const e=this.getCenter(t),i=[e[0],e[1]+=t.velocityY*n/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:h},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const e=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(e,s,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:e}=t,i=this.getCenter(t);n=n.zoom({pos:i,scale:e})}if(this.touchRotate){const{rotation:e}=t;n=n.rotate({deltaAngleX:this._startPinchRotation-e})}return this.updateViewport(n,s,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:n,_lastPinchEvent:e}=this;if(this.touchZoom&&n&&e&&t.scale!==e.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const s=Math.log2(t.scale),r=(s-Math.log2(e.scale))/(t.deltaTime-e.deltaTime),a=Math.pow(2,s+r*n/2);o=o.zoom({pos:i,scale:a}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:h},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const n=this.getCenter(t);if(!this.isPointInBounds(n,t))return!1;const e=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:n,scale:e?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(t),{zoomSpeed:e,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard,{controllerState:r}=this;let a;const h={};switch(t.srcEvent.code){case"Minus":a=n?r.zoomOut(e).zoomOut(e):r.zoomOut(e),h.isZooming=!0;break;case"Equal":a=n?r.zoomIn(e).zoomIn(e):r.zoomIn(e),h.isZooming=!0;break;case"ArrowLeft":n?(a=r.rotateLeft(o),h.isRotating=!0):(a=r.moveLeft(i),h.isPanning=!0);break;case"ArrowRight":n?(a=r.rotateRight(o),h.isRotating=!0):(a=r.moveRight(i),h.isPanning=!0);break;case"ArrowUp":n?(a=r.rotateUp(s),h.isRotating=!0):(a=r.moveUp(i),h.isPanning=!0);break;case"ArrowDown":n?(a=r.rotateDown(s),h.isRotating=!0):(a=r.moveDown(i),h.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),h),!0}_getTransitionProps(t){const{_transition:e}=this;return e?t?{...e,transitionInterpolator:new n.default({...t,transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport})}:e:s}}exports.default=g;
},{"./transition-manager":"awSe","../transitions/linear-interpolator":"bGRb"}],"TfDO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(t){this._viewportProps=this._applyConstraints(t)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(t){return this._viewportProps}_applyConstraints(t){return t}}exports.default=t;
},{}],"N44t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MapState=void 0;var t=require("math.gl"),e=i(require("./controller")),r=i(require("./view-state")),o=require("@math.gl/web-mercator"),a=i(require("../utils/assert"));function i(t){return t&&t.__esModule?t:{default:t}}const s=5,n=1.2,h={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60};class p extends r.default{constructor({makeViewport:t,width:e,height:r,latitude:o,longitude:i,zoom:s,bearing:n=h.bearing,pitch:p=h.pitch,altitude:m=h.altitude,maxZoom:c=h.maxZoom,minZoom:u=h.minZoom,maxPitch:l=h.maxPitch,minPitch:d=h.minPitch,startPanLngLat:g,startZoomLngLat:P,startRotatePos:_,startBearing:w,startPitch:b,startZoom:v,normalize:S}={}){(0,a.default)(Number.isFinite(i)),(0,a.default)(Number.isFinite(o)),(0,a.default)(Number.isFinite(s)),super({width:e,height:r,latitude:o,longitude:i,zoom:s,bearing:n,pitch:p,altitude:m,maxZoom:c,minZoom:u,maxPitch:l,minPitch:d,normalize:S}),this._state={startPanLngLat:g,startZoomLngLat:P,startRotatePos:_,startBearing:w,startPitch:b,startZoom:v},this.makeViewport=t}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){const r=this._state.startPanLngLat||this._unproject(e);if(!r)return this;const o=this.makeViewport(this._viewportProps).panByPosition(r,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:r=0}){const{startRotatePos:o,startBearing:a,startPitch:i}=this._state;if(!o||!Number.isFinite(a)||!Number.isFinite(i))return this;let s;return s=t?this._calculateNewPitchAndBearing({...this._getRotationParams(t,o),startBearing:a,startPitch:i}):{bearing:a+e,pitch:i+r},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}zoom({pos:t,startPos:e,scale:r}){let{startZoom:o,startZoomLngLat:a}=this._state;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(e)||this._unproject(t));const i=this._calculateNewZoom({scale:r,startZoom:o}),s=this.makeViewport({...this._viewportProps,zoom:i});return this._getUpdatedState({zoom:i,...s.panByPosition(a,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),r={...this._viewportProps},{bearing:o,longitude:a}=r;return Math.abs(o-e.bearing)>180&&(r.bearing=o<0?o+360:o-360),Math.abs(a-e.longitude)>180&&(r.longitude=a<0?a+360:a-360),r}_zoomFromCenter(t){const{width:e,height:r}=this._viewportProps;return this.zoom({pos:[e/2,r/2],scale:t})}_panFromCenter(t){const{width:e,height:r}=this._viewportProps;return this.pan({startPos:[e/2,r/2],pos:[e/2+t[0],r/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this._viewportProps,...this._state,...t})}_applyConstraints(e){const{maxZoom:r,minZoom:a,zoom:i}=e;e.zoom=(0,t.clamp)(i,a,r);const{maxPitch:s,minPitch:n,pitch:h}=e;e.pitch=(0,t.clamp)(h,n,s);const{normalize:p=!0}=e;return p&&Object.assign(e,(0,o.normalizeViewportProps)(e)),e}_unproject(t){const e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}_calculateNewZoom({scale:e,startZoom:r}){const{maxZoom:o,minZoom:a}=this._viewportProps,i=r+Math.log2(e);return(0,t.clamp)(i,a,o)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:r,startBearing:o,startPitch:a}){r=(0,t.clamp)(r,-1,1);const{minPitch:i,maxPitch:s}=this._viewportProps;let n=a;return r>0?n=a+r*(s-a):r<0&&(n=a-r*(i-a)),{pitch:n,bearing:o+180*e}}_getRotationParams(t,e){const r=t[0]-e[0],o=t[1]-e[1],a=t[1],i=e[1],{width:h,height:p}=this._viewportProps,m=r/h;let c=0;return o>0?Math.abs(p-i)>s&&(c=o/(i-p)*n):o<0&&i>s&&(c=1-a/i),{deltaScaleX:m,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}exports.MapState=p;class m extends e.default{constructor(t){t.dragMode=t.dragMode||"pan",super(p,t)}setProps(t){const e=this.controllerStateProps;super.setProps(t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...this.controllerStateProps,...this._state}))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}exports.default=m;
},{"math.gl":"xAaq","./controller":"ugw5","./view-state":"TfDO","@math.gl/web-mercator":"PqV4","../utils/assert":"Txat"}],"wDMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./view")),r=o(require("../viewports/web-mercator-viewport")),t=o(require("../controllers/map-controller"));function o(e){return e&&e.__esModule?e:{default:e}}class l extends e.default{constructor(e){super({...e,type:r.default})}get controller(){return this._getControllerProps({type:t.default})}}exports.default=l,l.displayName="MapView";
},{"./view":"k6Eh","../viewports/web-mercator-viewport":"Rf6Y","../controllers/map-controller":"N44t"}],"sqcc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../utils/deep-equal"),t=s(require("../effects/lighting/lighting-effect"));function s(e){return e&&e.__esModule?e:{default:e}}const f=new t.default;class n{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length===this.effects.length&&(0,e.deepEqual)(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof t.default)||this._internalEffects.push(f)}}exports.default=n;
},{"../utils/deep-equal":"KSag","../effects/lighting/lighting-effect":"MByF"}],"snJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./layers-pass"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{}exports.default=s;
},{"./layers-pass":"oM9Q"}],"WJJZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./layers-pass")),r=require("@luma.gl/core");function t(e){return e&&e.__esModule?e:{default:e}}const s={blendFunc:[1,0,32771,0],blendEquation:32774};class i extends e.default{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:a,onViewportActive:l,pickingFBO:n,deviceRect:{x:o,y:p,width:c,height:u},pass:d="picking",redrawReason:h,pickZ:g}){const k=this.gl;return this.pickZ=g,(0,r.withParameters)(k,{scissorTest:!0,scissor:[o,p,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...s,blend:!g},()=>{super.render({target:n,layers:e,layerFilter:t,views:i,viewports:a,onViewportActive:l,pass:d,redrawReason:h})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,r){const t=this.pickZ?{blend:!1}:{...s,blend:!0,blendColor:[0,0,0,this.useAlpha?(r+1)/255:1]};return{...e.props.parameters,...t}}}exports.default=i;
},{"./layers-pass":"oM9Q","@luma.gl/core":"iuAK"}],"J3c9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../debug")),r=i(require("../passes/draw-layers-pass")),s=i(require("../passes/pick-layers-pass")),t=require("@luma.gl/core");function i(e){return e&&e.__esModule?e:{default:e}}const a="deckRenderer.renderLayers";class n{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new r.default(e),this.pickLayersPass=new s.default(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(r){const s=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;r.layerFilter=this.layerFilter,r.effects=r.effects||[],r.target=r.target||t.Framebuffer.getDefaultFramebuffer(this.gl),this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,n=s.render({...r,target:i});this._postRender(r.effects,r),this.renderCount++,(0,e.default)(a,this,n,r)}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:e}=this;for(const r of e)r.delete();e.length=0}_preRender(e,r){let s=null;for(const t of e)t.preRender(this.gl,r),t.postRender&&(s=t);s&&this._resizeRenderBuffers(),this.lastPostProcessEffect=s}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new t.Framebuffer(this.gl),new t.Framebuffer(this.gl));for(const r of e)r.resize()}_postRender(e,r){const{renderBuffers:s}=this,t={inputBuffer:s[0],swapBuffer:s[1],target:null};for(const i of e)if(i.postRender){if(i===this.lastPostProcessEffect){t.target=r.target,i.postRender(this.gl,t);break}const e=i.postRender(this.gl,t);t.inputBuffer=e,t.swapBuffer=e===s[0]?s[1]:s[0]}}}exports.default=n;
},{"../debug":"EEoF","../passes/draw-layers-pass":"snJ8","../passes/pick-layers-pass":"WJJZ","@luma.gl/core":"iuAK"}],"Eruv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getClosestObject=c,exports.getUniqueObjects=o;var e=t(require("../../utils/log"));function t(e){return e&&e.__esModule?e:{default:e}}const i={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function c({pickedColors:t,layers:c,deviceX:o,deviceY:r,deviceRadius:n,deviceRect:s}){if(t){const{x:i,y:d,width:l,height:u}=s;let f=n*n,p=-1,k=0;for(let e=0;e<u;e++){const c=e+d-r,n=c*c;if(n>f)k+=4*l;else for(let e=0;e<l;e++){if(t[k+3]-1>=0){const t=e+i-o,c=t*t+n;c<=f&&(f=c,p=k)}k+=4}}if(p>=0){const o=t[p+3]-1,r=t.slice(p,p+4),n=c[o];if(n){const e=n.decodePickingColor(r),t=Math.floor(p/4/l);return{pickedColor:r,pickedLayer:n,pickedObjectIndex:e,pickedX:i+(p/4-t*l),pickedY:d+t}}e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return i}function o({pickedColors:t,layers:i}){const c=new Map;if(t)for(let o=0;o<t.length;o+=4){const r=t[o+3]-1;if(r>=0){const n=t.slice(o,o+4),s=n.join(",");if(!c.has(s)){const t=i[r];t?c.set(s,{pickedColor:n,pickedLayer:t,pickedObjectIndex:t.decodePickingColor(n)}):e.default.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(c.values())}
},{"../../utils/log":"GVus"}],"dX8M":[function(require,module,exports) {
"use strict";function e({pickInfo:e,mode:i,viewports:o,layerFilter:r,pixelRatio:t,x:c,y:l,z:p}){const d=e&&e.pickedLayer,a=n(o,{x:c,y:l},r&&d&&(e=>r({layer:d,viewport:e,isPicking:!0,renderPass:"picking:".concat(i)}))),s=a&&a.unproject([c-a.x,l-a.y],{targetZ:p});return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:c,y:l,pixel:[c,l],coordinate:s,devicePixel:e&&[e.pickedX,e.pickedY],pixelRatio:t}}function i(i){const{pickInfo:n,lastPickedInfo:r,mode:t,layers:c}=i,{pickedColor:l,pickedLayer:p,pickedObjectIndex:d}=n,a=p?[p]:[];if("hover"===t){const e=r.index,i=r.layerId,o=p&&p.props.id;if(o!==i||d!==e){if(o!==i){const e=c.find(e=>e.props.id===i);e&&a.unshift(e)}r.layerId=o,r.index=d,r.info=null}}const s=e(i),f=new Map;return f.set(null,s),a.forEach(e=>{let i={...s};e===p&&(i.color=l,i.index=d,i.picked=!0),i=o({layer:e,info:i,mode:t}),e===p&&"hover"===t&&(r.info=i),f.set(i.layer.id,i),"hover"===t&&i.layer.updateAutoHighlight(i)}),f}function o({layer:e,info:i,mode:o}){for(;e&&i;){const n=i.layer||null;i.sourceLayer=n,i.layer=e,i=e.getPickingInfo({info:i,mode:o,sourceLayer:n}),e=e.parent}return i}function n(e,i,o){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.containsPixel(i)&&(!o||o(r)))return r}return e[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEmptyPickingInfo=e,exports.processPickInfo=i,exports.getLayerPickingInfo=o;
},{}],"G03o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),i=c(require("../utils/log")),t=c(require("../passes/pick-layers-pass")),s=require("./picking/query-object"),r=require("./picking/pick-info");function c(e){return e&&e.__esModule?e:{default:e}}class o{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new t.default(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:i,layers:t,viewports:s},r=this.lastPickedInfo.info){const c=r&&r.layer&&r.layer.id,o=r&&r.viewport&&r.viewport.id,l=c?t.find(e=>e.id===c):null,n=o&&s.find(e=>e.id===o)||s[0],a=n&&n.unproject([e-n.x,i-n.y]),d={x:e,y:i,viewport:n,coordinate:a,layer:l};return l?{...r,...d}:Object.assign(d,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:i}=this;return this.pickingFBO||(this.pickingFBO=new e.Framebuffer(i),e.Framebuffer.isSupported(i,{colorBufferFloat:!0})&&(this.depthFBO=new e.Framebuffer(i),this.depthFBO.attach({36064:new e.Texture2D(i,{format:(0,e.isWebGL2)(i)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:i.canvas.width,height:i.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:i.canvas.width,height:i.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(e=>e.isPickable()&&!e.isComposite);return t.length>255?(i.default.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:i,views:t,viewports:c,x:o,y:l,radius:n=0,depth:a=1,mode:d="query",unproject3D:h,onViewportActive:p}){if(!(i=this._getPickable(i)))return{result:[],emptyInfo:(0,r.getEmptyPickingInfo)({viewports:c,x:o,y:l})};this._resizeBuffer();const u=(0,e.cssToDeviceRatio)(this.gl),k=(0,e.cssToDevicePixels)(this.gl,[o,l],!0),g=[k.x+Math.floor(k.width/2),k.y+Math.floor(k.height/2)],y=Math.round(n*u),{width:v,height:f}=this.pickingFBO,w=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceWidth:v,deviceHeight:f});let b;const x=[],F={};for(let e=0;e<a;e++){const n=w&&this._drawAndSample({layers:i,views:t,viewports:c,onViewportActive:p,deviceRect:w,pass:"picking:".concat(d),redrawReason:d}),k=(0,s.getClosestObject)({pickedColors:n,layers:i,deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceRect:w});let v;if(k.pickedLayer&&h&&this.depthFBO){v=this._drawAndSample({layers:[k.pickedLayer],views:t,viewports:c,onViewportActive:p,deviceRect:{x:k.pickedX,y:k.pickedY,width:1,height:1},pass:"picking:".concat(d),redrawReason:"pick-z",pickZ:!0})[0]*c[0].distanceScales.metersPerUnit[2]+c[0].position[2]}if(k.pickedColor&&e+1<a){const e=k.pickedColor[3]-1;F[e]=!0,i[e].disablePickingIndex(k.pickedObjectIndex)}b=(0,r.processPickInfo)({pickInfo:k,lastPickedInfo:this.lastPickedInfo,mode:d,layers:i,layerFilter:this.layerFilter,viewports:c,x:o,y:l,z:v,pixelRatio:u});for(const e of b.values())e.layer&&x.push(e);if(!k.pickedColor)break}for(const e in F)i[e].restorePickingColors();return{result:x,emptyInfo:b&&b.get(null)}}_pickVisibleObjects({layers:i,views:t,viewports:c,x:o,y:l,width:n=1,height:a=1,mode:d="query",maxObjects:h=null,onViewportActive:p}){if(!(i=this._getPickable(i)))return[];this._resizeBuffer();const u=(0,e.cssToDeviceRatio)(this.gl),k=(0,e.cssToDevicePixels)(this.gl,[o,l],!0),g=k.x,y=k.y+k.height,v=(0,e.cssToDevicePixels)(this.gl,[o+n,l+a],!0),f=v.x+v.width,w=v.y,b={x:g,y:w,width:f-g,height:y-w},x=this._drawAndSample({layers:i,views:t,viewports:c,onViewportActive:p,deviceRect:b,pass:"picking:".concat(d),redrawReason:d}),F=(0,s.getUniqueObjects)({pickedColors:x,layers:i}),O=new Map,m=Number.isFinite(h);for(let e=0;e<F.length&&!(m&&O.size>=h);e++){const i=F[e];let t={color:i.pickedColor,layer:null,index:i.pickedObjectIndex,picked:!0,x:o,y:l,width:n,height:a,pixelRatio:u};t=(0,r.getLayerPickingInfo)({layer:i.pickedLayer,info:t,mode:d}),O.has(t.object)||O.set(t.object,t)}return Array.from(O.values())}_drawAndSample({layers:i,views:t,viewports:s,onViewportActive:r,deviceRect:c,pass:o,redrawReason:l,pickZ:n}){if(i.length<1)return null;const a=n?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:i,layerFilter:this.layerFilter,views:t,viewports:s,onViewportActive:r,pickingFBO:a,deviceRect:c,pass:o,redrawReason:l,pickZ:n});const{x:d,y:h,width:p,height:u}=c,k=new(n?Float32Array:Uint8Array)(p*u*4);return(0,e.readPixelsToArray)(a,{sourceX:d,sourceY:h,sourceWidth:p,sourceHeight:u,target:k}),k}_getPickingRect({deviceX:e,deviceY:i,deviceRadius:t,deviceWidth:s,deviceHeight:r}){const c=Math.max(0,e-t),o=Math.max(0,i-t),l=Math.min(s,e+t+1)-c,n=Math.min(r,i+t+1)-o;return l<=0||n<=0?null:{x:c,y:o,width:l,height:n}}}exports.default=o;
},{"@luma.gl/core":"iuAK","../utils/log":"GVus","../passes/pick-layers-pass":"WJJZ","./picking/query-object":"Eruv","./picking/pick-info":"dX8M"}],"Dm3R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class t{constructor(t){const s=t.parentElement;s&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,e),s.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,s){const i=this.el;if("string"==typeof e)i.innerText=e;else{if(!e)return this.isVisible=!1,void(i.style.display="none");"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style)}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(t,"px, ").concat(s,"px)")}remove(){this.el&&this.el.remove()}}exports.default=t;
},{}],"d7B5":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iplO":[function(require,module,exports) {
"use strict";function e(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(a){o=!0,l=a}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}return r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"V8LL":[function(require,module,exports) {
"use strict";function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZzYf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./arrayLikeToArray.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(r){if("string"==typeof r)return(0,e.default)(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);return"Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?(0,e.default)(r,t):void 0}}
},{"./arrayLikeToArray.js":"V8LL"}],"VRdo":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"TBeo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=a(require("./arrayWithHoles.js")),r=a(require("./iterableToArrayLimit.js")),t=a(require("./unsupportedIterableToArray.js")),u=a(require("./nonIterableRest.js"));function a(e){return e&&e.__esModule?e:{default:e}}function l(a,l){return(0,e.default)(a)||(0,r.default)(a,l)||(0,t.default)(a,l)||(0,u.default)()}
},{"./arrayWithHoles.js":"d7B5","./iterableToArrayLimit.js":"iplO","./unsupportedIterableToArray.js":"ZzYf","./nonIterableRest.js":"VRdo"}],"ZamP":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"eIph":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"K0KY":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],"kXVE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enhancePointerEventInput=s,exports.enhanceMouseInput=i;var e=1,t=2,n=4,r={mousedown:e,mousemove:t,mouseup:n};function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function s(e){var t=e.prototype.handler;e.prototype.handler=function(e){var n=this.store;e.button>0&&(o(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}function i(o){o.prototype.handler=function(o){var s=r[o.type];s&e&&o.button>=0&&(this.pressed=!0),s&t&&0===o.which&&(s=n),this.pressed&&(s&n&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:"mouse",srcEvent:o}))}}
},{}],"MW4S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Manager=void 0;var e=t(require("hammerjs")),r=require("./hammer-overrides");function t(e){return e&&e.__esModule?e:{default:e}}(0,r.enhancePointerEventInput)(e.default.PointerEventInput),(0,r.enhanceMouseInput)(e.default.MouseInput);var a=e.default.Manager;exports.Manager=a;var u=e.default;exports.default=u;
},{"hammerjs":"K0KY","./hammer-overrides":"kXVE"}],"jCzK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GESTURE_EVENT_ALIASES=exports.EVENT_RECOGNIZER_MAP=exports.INPUT_EVENT_TYPES=exports.BASIC_EVENT_ALIASES=exports.RECOGNIZER_FALLBACK_MAP=exports.RECOGNIZER_COMPATIBLE_MAP=exports.RECOGNIZERS=void 0;var e=t(require("./utils/hammer"));function t(e){return e&&e.__esModule?e:{default:e}}var p=e.default?[[e.default.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[e.default.Rotate,{enable:!1}],[e.default.Pinch,{enable:!1}],[e.default.Swipe,{enable:!1}],[e.default.Pan,{threshold:0,enable:!1}],[e.default.Press,{enable:!1}],[e.default.Tap,{event:"doubletap",taps:2,enable:!1}],[e.default.Tap,{event:"anytap",enable:!1}],[e.default.Tap,{enable:!1}]]:null;exports.RECOGNIZERS=p;var a={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]};exports.RECOGNIZER_COMPATIBLE_MAP=a;var n={doubletap:["tap"]};exports.RECOGNIZER_FALLBACK_MAP=n;var o={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"};exports.BASIC_EVENT_ALIASES=o;var r={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]};exports.INPUT_EVENT_TYPES=r;var i={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"};exports.EVENT_RECOGNIZER_MAP=i;var s={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};exports.GESTURE_EVENT_ALIASES=s;
},{"./utils/hammer":"MW4S"}],"b2B5":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.passiveSupported=exports.document=exports.global=exports.window=exports.userAgent=void 0;var t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"";exports.userAgent=t;var o="undefined"!=typeof window?window:e;exports.window=o;var r=void 0!==e?e:window;exports.global=r;var s="undefined"!=typeof document?document:{};exports.document=s;var n=!1;exports.passiveSupported=n;try{var p={get passive(){return exports.passiveSupported=n=!0,!0}};o.addEventListener("test",p,p),o.removeEventListener("test",p,p)}catch(a){}
},{}],"k4W9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants"),i=require("../utils/globals");function s(e){return e&&e.__esModule?e:{default:e}}var l=-1!==i.userAgent.indexOf("firefox"),a=n.INPUT_EVENT_TYPES.WHEEL_EVENTS,r="wheel",o=4.000244140625,u=40,h=.25,v=function(){function n(t,s){var l=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},r),this.events=a.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,l.handleEvent,!!i.passiveSupported&&{passive:!1})})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===r&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;i.window.WheelEvent&&(l&&e.deltaMode===i.window.WheelEvent.DOM_DELTA_PIXEL&&(t/=i.window.devicePixelRatio),e.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE&&(t*=u));var n={x:e.clientX,y:e.clientY};0!==t&&t%o==0&&(t=Math.floor(t/o)),e.shiftKey&&t&&(t*=h),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:r,center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=v;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK","../utils/globals":"b2B5"}],"N73Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/esm/classCallCheck")),t=s(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function s(e){return e&&e.__esModule?e:{default:e}}var a=n.INPUT_EVENT_TYPES.MOUSE_EVENTS,i="pointermove",v="pointerover",l="pointerout",r="pointerleave",o=function(){function n(t,s){var i=this,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.pressed=!1,this.options=Object.assign({enable:!0},v),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=a.concat(v.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableMoveEvent=t),e===v&&(this.enableOverEvent=t),e===l&&(this.enableOutEvent=t),e===r&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:v,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:l,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:r,srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:i,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),n}();exports.default=o;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"PrTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/classCallCheck")),t=a(require("@babel/runtime/helpers/esm/createClass")),n=require("../constants");function a(e){return e&&e.__esModule?e:{default:e}}var s=n.INPUT_EVENT_TYPES.KEY_EVENTS,i="keydown",l="keyup",r=function(){function n(t,a){var i=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=a,this.options=Object.assign({enable:!0},l),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=s.concat(l.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=l.tabIndex||0,t.style.outline="none",this.events.forEach(function(e){return t.addEventListener(e,i.handleEvent)})}return(0,t.default)(n,[{key:"destroy",value:function(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function(e,t){e===i&&(this.enableDownEvent=t),e===l&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:i,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:l,srcEvent:e,key:e.key,target:e.target}))}}]),n}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","../constants":"jCzK"}],"I4Fd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/esm/classCallCheck")),t=n(require("@babel/runtime/helpers/esm/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var s="contextmenu",i=function(){function n(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,e.default)(this,n),this.element=t,this.callback=s,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return(0,t.default)(n,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){e===s&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:s,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),n}();exports.default=i;
},{"@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph"}],"zsbK":[function(require,module,exports) {
"use strict";function t(o){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?exports.default=t=function(t){return typeof t}:exports.default=t=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"sn9i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whichButtons=h,exports.getOffsetPosition=a;var e=1,t=2,n=4,o={pointerdown:e,pointermove:t,pointerup:n,mousedown:e,mousemove:t,mouseup:n},i=1,r=2,u=3,s=0,c=1,l=2,f=1,p=2,v=4;function h(h){var a=o[h.srcEvent.type];if(!a)return null;var d=h.srcEvent,m=d.buttons,B=d.button,g=d.which,x=!1,b=!1,w=!1;return a===n||a===t&&!Number.isFinite(m)?(x=g===i,b=g===r,w=g===u):a===t?(x=Boolean(m&f),b=Boolean(m&v),w=Boolean(m&p)):a===e&&(x=B===s,b=B===c,w=B===l),{leftButton:x,middleButton:b,rightButton:w}}function a(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var o=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),r=i.width/t.offsetWidth,u=i.height/t.offsetHeight;return{center:o,offsetCenter:{x:(o.x-i.left-t.clientLeft)/r,y:(o.y-i.top-t.clientTop)/u}}}
},{}],"e1JC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/esm/typeof")),t=i(require("@babel/runtime/helpers/esm/classCallCheck")),n=i(require("@babel/runtime/helpers/esm/createClass")),r=require("./event-utils");function i(e){return e&&e.__esModule?e:{default:e}}var s={srcElement:"root",priority:0},a=function(){function i(e){(0,t.default)(this,i),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return(0,n.default)(i,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=this.handlers,o=this.handlersByElement;r&&("object"!==(0,e.default)(r)||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},s,r):s;var h=o.get(r.srcElement);h||(h=[],o.set(r.srcElement,h));var v={type:t,handler:n,srcElement:r.srcElement,priority:r.priority};i&&(v.once=!0),a&&(v.passive=!0),l.push(v),this._active=this._active||!v.passive;for(var u=h.length-1;u>=0&&!(h[u].priority>=v.priority);)u--;h.splice(u+1,0,v)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var s=n[i];if(s.type===e&&s.handler===t){n.splice(i,1);var a=r.get(s.srcElement);a.splice(a.indexOf(s),1),0===a.length&&r.delete(s.srcElement)}}this._active=n.some(function(e){return!e.passive})}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},s=function(){e.handled=!0,r=!0},a=[],l=0;l<n.length;l++){var o=n[l],h=o.type,v=o.handler,u=o.once;if(v(Object.assign({},e,{type:h,stopPropagation:i,stopImmediatePropagation:s})),u&&a.push(n[l]),r)break}for(var d=0;d<a.length;d++){var c=a[d],p=c.type,f=c.handler;this.remove(p,f)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,(0,r.whichButtons)(e),(0,r.getOffsetPosition)(e,t),{handled:!1,rootElement:t})}}]),i}();exports.default=a;
},{"@babel/runtime/helpers/esm/typeof":"zsbK","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./event-utils":"sn9i"}],"GjpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/slicedToArray")),t=h(require("@babel/runtime/helpers/esm/classCallCheck")),n=h(require("@babel/runtime/helpers/esm/createClass")),r=require("./utils/hammer"),i=h(require("./inputs/wheel-input")),a=h(require("./inputs/move-input")),o=h(require("./inputs/key-input")),s=h(require("./inputs/contextmenu-input")),u=h(require("./utils/event-registrar")),l=require("./constants");function h(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={events:null,recognizers:null,recognizerOptions:{},Manager:r.Manager,touchAction:"none",tabIndex:0},p=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.default)(this,r),this.options=Object.assign({},d,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var i=n.events;i&&this.on(i)}return(0,n.default)(r,[{key:"setElement",value:function(t){var n=this;if(this.element&&this.destroy(),this.element=t,t){var r=this.options,u=r.Manager;for(var h in this.manager=new u(t,{touchAction:r.touchAction,recognizers:r.recognizers||l.RECOGNIZERS}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(l.RECOGNIZER_COMPATIBLE_MAP).forEach(function(e){var t=n.manager.get(e);t&&l.RECOGNIZER_COMPATIBLE_MAP[e].forEach(function(e){t.recognizeWith(e)})}),r.recognizerOptions){var v=this.manager.get(h);if(v){var f=r.recognizerOptions[h];delete f.enable,v.set(f)}}this.wheelInput=new i.default(t,this._onOtherEvent,{enable:!1}),this.moveInput=new a.default(t,this._onOtherEvent,{enable:!1}),this.keyInput=new o.default(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new s.default(t,this._onOtherEvent,{enable:!1});var d,p=c(this.events);try{for(p.s();!(d=p.n()).done;){var m=(0,e.default)(d.value,2),y=m[0],E=m[1];E.isEmpty()||(this._toggleRecognizer(E.recognizerName,!0),this.manager.on(y,E.handleEvent))}}catch(g){p.e(g)}finally{p.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=l.RECOGNIZER_FALLBACK_MAP[e];i&&!this.options.recognizers&&i.forEach(function(i){var a=n.get(i);t?(a.requireFailure(e),r.dropRequireFailure(i)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var a=this.manager,o=this.events,s=l.GESTURE_EVENT_ALIASES[e]||e,h=o.get(s);h||(h=new u.default(this),o.set(s,h),h.recognizerName=l.EVENT_RECOGNIZER_MAP[s]||s,a&&a.on(s,h.handleEvent)),h.add(e,t,n,r,i),h.isEmpty()||this._toggleRecognizer(h.recognizerName,!0)}else for(var c in n=t,e)this._addEventHandler(c,e[c],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=l.GESTURE_EVENT_ALIASES[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var a,o=i.recognizerName,s=!1,u=c(n.values());try{for(u.s();!(a=u.n()).done;){var h=a.value;if(h.recognizerName===o&&!h.isEmpty()){s=!0;break}}}catch(f){u.e(f)}finally{u.f()}s||this._toggleRecognizer(o,!1)}}else for(var v in e)this._removeEventHandler(v,e[v])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=l.BASIC_EVENT_ALIASES[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),r}();exports.default=p;
},{"@babel/runtime/helpers/esm/slicedToArray":"TBeo","@babel/runtime/helpers/esm/classCallCheck":"ZamP","@babel/runtime/helpers/esm/createClass":"eIph","./utils/hammer":"MW4S","./inputs/wheel-input":"k4W9","./inputs/move-input":"N73Z","./inputs/key-input":"PrTM","./inputs/contextmenu-input":"I4Fd","./utils/event-registrar":"e1JC","./constants":"jCzK"}],"sV3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"EventManager",{enumerable:!0,get:function(){return e.default}});var e=r(require("./event-manager"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./event-manager":"GjpX"}],"ruUO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("./layer-manager")),t=v(require("./view-manager")),i=v(require("../views/map-view")),r=v(require("./effect-manager")),s=v(require("./effect")),n=v(require("./deck-renderer")),a=v(require("./deck-picker")),o=v(require("./tooltip")),h=v(require("../utils/log")),c=require("../utils/deep-equal"),l=v(require("../utils/typed-array-manager")),p=v(require("./init")),g=require("probe.gl/env"),u=require("@luma.gl/core"),d=require("probe.gl"),f=require("mjolnir.js"),w=v(require("../utils/assert")),m=require("./constants");function v(e){return e&&e.__esModule?e:{default:e}}function y(){}const _=({isDragging:e})=>e?"grabbing":"grab";function M(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(s.default)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,eventRecognizerOptions:e.object,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onInteractionStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,onError:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool,_pickable:e.bool,_typedArrayManagerProps:e.object}}const b={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:y,onResize:y,onViewStateChange:y,onInteractionStateChange:y,onBeforeRender:y,onAfterRender:y,onLoad:y,onError:(e,t)=>h.default.error(e)(),_onMetrics:null,getCursor:_,debug:!1,drawPickingColors:!1};class k{constructor(e){e={...b,...e},this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&h.default.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,g.getBrowser)()&&h.default.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new d.Stats({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&l.default.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&h.default.removed("onLayerHover","onHover")(),"onLayerClick"in e&&h.default.removed("onLayerClick","onClick")(),e.initialViewState&&!(0,c.deepEqual)(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),n=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||n}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,...i});return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;if("string"==typeof t&&(t=document.getElementById(t),(0,w.default)(t)),!t){(t=document.createElement("canvas")).id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:i}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:n,onError:a,onBeforeRender:o,onAfterRender:h,useDevicePixels:c,autoResizeDrawingBuffer:l}=e;return new u.AnimationLoop({width:t,height:i,useDevicePixels:c,autoResizeDrawingBuffer:l,autoResizeViewport:!1,gl:r,onCreateContext:e=>(0,u.createGLContext)({...s,...e,canvas:this.canvas,debug:n,onContextLost:()=>this._onContextLost()}),onInitialize:e=>this._setGLContext(e.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:o,onAfterRender:h,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new i.default({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=i,s=!1;for(const n of t)r=n,s=n.layer.onHover(n,e.event);if(!s&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const e=this.props.getTooltip(r);this.tooltip.setTooltip(e,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(i){if(this.layerManager)return;this.canvas||(this.canvas=i.canvas,(0,u.instrumentGLContext)(i,{enable:!0,copyState:!0})),this.tooltip=new o.default(this.canvas),(0,u.setParameters)(i,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(i);const s=new u.Timeline;s.play(),this.animationLoop.attachTimeline(s),this.eventManager=new f.EventManager(this.props.parent||i.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const e in m.EVENTS)this.eventManager.on(e,this._onEvent);this.viewManager=new t.default({timeline:s,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const h=this.viewManager.getViewports()[0];this.layerManager=new e.default(i,{deck:this,stats:this.stats,viewport:h,timeline:s}),this.effectManager=new r.default,this.deckRenderer=new n.default(i),this.deckPicker=new a.default(i),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;(0,u.setParameters)(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),h.default.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=m.EVENTS[e.type],i=e.offsetCenter;if(!t||!i)return;const r=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:n}=s,a=n&&(n[t.handler]||n.props[t.handler]),o=this.props[t.handler];let h=!1;a&&(h=a.call(n,s,e)),!h&&o&&o(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=u.lumaStats.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}exports.default=k,k.getPropTypes=M,k.defaultProps=b,k.VERSION=p.default.VERSION;
},{"./layer-manager":"m8xf","./view-manager":"H2B6","../views/map-view":"wDMu","./effect-manager":"sqcc","./effect":"Z10T","./deck-renderer":"J3c9","./deck-picker":"G03o","./tooltip":"Dm3R","../utils/log":"GVus","../utils/deep-equal":"KSag","../utils/typed-array-manager":"yeLJ","./init":"N6pv","probe.gl/env":"d3vq","@luma.gl/core":"iuAK","probe.gl":"TYNK","mjolnir.js":"sV3P","../utils/assert":"Txat","./constants":"ysbg"}],"CFZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:s}=this.source,{size:r}=t;let o=s;if(s&&s.length!==r){o=new Float32Array(r);const e=t.elementOffset||0;for(let t=0;t<r;++t)o[t]=s[e+t]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}exports.default=e;
},{}],"SsHL":[function(require,module,exports) {
"use strict";function r(r){switch(r){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.glArrayFromType=r;
},{}],"WlAL":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),t=n(require("./shader-attribute")),s=require("./gl-utils"),r=n(require("../../utils/typed-array-manager")),i=require("../../utils/math-utils"),a=n(require("../../utils/log"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return e.stride||e.size*e.bytesPerElement}function l(e,t){t.offset&&a.default.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const s=u(e),r=("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*s+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:s}}function f(e,t){const s=l(e,t);return{high:s,low:{...s,offset:s.offset+4*e.size}}}class o{constructor(t,r){this.gl=t,this.id=r.id,this.size=r.size;const i=r.logicalType||r.type,a=5130===i;let{defaultValue:n}=r;n=Number.isFinite(n)?[n]:n||new Array(this.size).fill(0),r.defaultValue=n;let u=i;a?u=5126:!u&&r.isIndexed?u=t&&(0,e.hasFeature)(t,e.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123:u||(u=5126),r.logicalType=i,r.type=u;let l=(0,s.glArrayFromType)(i||u||5126);this.shaderAttributes={},this.doublePrecision=a,a&&!1===r.fp64&&(l=Float32Array),r.bytesPerElement=l.BYTES_PER_ELEMENT,this.defaultType=l,this.value=null,this.settings=r,this.state={externalBuffer:null,bufferAccessor:r,allocatedValue:null,constant:!1},this._buffer=null,this.setData(r)}get buffer(){if(!this._buffer){const{isIndexed:t,type:s}=this.settings;this._buffer=new e.Buffer(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:s}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*u(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),r.default.release(this.state.allocatedValue)}getShaderAttributes(e,s){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,a=f(this.getAccessor(),s||{});return r[e]=new t.default(this,a.high),r["".concat(e,"64Low")]=i?new t.default(this,a.low):new Float32Array(this.size),r}if(s){const r=l(this.getAccessor(),s);return{[e]:new t.default(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(t){const{state:s}=this;ArrayBuffer.isView(t)?t={value:t}:t instanceof e.Buffer&&(t={buffer:t});const r={...this.settings,...t};if(s.bufferAccessor=r,t.constant){let e=t.value;if(e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this._normalizeConstant(e)),!(!s.constant||!this._areValuesEqual(e,this.value)))return!1;s.externalBuffer=null,s.constant=!0,this.value=e}else if(t.buffer){const e=t.buffer;s.externalBuffer=e,s.constant=!1,this.value=t.value;const i=t.value instanceof Float64Array;r.type=t.type||e.accessor.type,r.bytesPerElement=e.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=u(r)}else if(t.value){this._checkExternalBuffer(t);let e=t.value;s.externalBuffer=null,s.constant=!1,this.value=e,r.bytesPerElement=e.BYTES_PER_ELEMENT,r.stride=u(r);const{buffer:a,byteOffset:n}=this;this.doublePrecision&&e instanceof Float64Array&&(e=(0,i.toDoublePrecisionArray)(e,r));const l=e.byteLength+n+2*r.stride;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:e,offset:n}),r.type=t.type||a.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:s=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?(0,i.toDoublePrecisionArray)(t,{size:this.size,startIndex:s,endIndex:r}):t.subarray(s,r),offset:s*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:s}=this,a=s.allocatedValue,n=r.default.allocate(a,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=n;const{buffer:u,byteOffset:l}=this;return u.byteLength<n.byteLength+l&&(u.reallocate(n.byteLength+l),t&&a&&u.subData({data:a instanceof Float64Array?(0,i.toDoublePrecisionArray)(a,this):a,offset:l})),s.allocatedValue=n,s.constant=!1,s.externalBuffer=null,s.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const s=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof s||!this.settings.normalized||"normalized"in e||a.default.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(e=>(e+128)/255*2-1);case 5122:return new Float32Array(e).map(e=>(e+32768)/65535*2-1);case 5121:return new Float32Array(e).map(e=>e/255);case 5123:return new Float32Array(e).map(e=>e/65535);default:return e}}_normalizeValue(e,t,s){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(e))return t[s]=e,t;if(!e)return t[s]=r[0],t;switch(i){case 4:t[s+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[s+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[s+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[s+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let a=i;for(;--a>=0;)t[s+a]=Number.isFinite(e[a])?e[a]:r[a]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:s}=this;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}}exports.default=o;
},{"@luma.gl/core":"iuAK","./shader-attribute":"CFZ8","./gl-utils":"SsHL","../../utils/typed-array-manager":"yeLJ","../../utils/math-utils":"ki6G","../../utils/log":"GVus"}],"kai7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIterable=r,exports.isAsyncIterable=n,exports.getAccessorFromBuffer=o;const e=[],t=[];function r(r,n=0,o=1/0){let s=e;const c={index:-1,data:r,target:[]};return r?"function"==typeof r[Symbol.iterator]?s=r:r.length>0&&(t.length=r.length,s=t):s=e,(n>0||Number.isFinite(o))&&(s=(Array.isArray(s)?s:Array.from(s)).slice(n,o),c.index=n-1),{iterable:s,objectInfo:c}}function n(e){return e&&e[Symbol.asyncIterator]}function o(e,{size:t,stride:r,offset:n,startIndices:o,nested:s}){const c=e.BYTES_PER_ELEMENT,i=r?r/c:t,l=n?n/c:0,a=Math.floor((e.length-l)/i);return(r,{index:n,target:c})=>{if(!o){const r=n*i+l;for(let n=0;n<t;n++)c[n]=e[r+n];return c}const f=o[n],u=o[n+1]||a;let y;if(s){y=new Array(u-f);for(let r=f;r<u;r++){const n=r*i+l;c=new Array(t);for(let r=0;r<t;r++)c[r]=e[n+r];y[r-f]=c}}else if(i===t)y=e.subarray(f*t+l,u*t+l);else{y=new e.constructor((u-f)*t);let r=0;for(let n=f;n<u;n++){const o=n*i+l;for(let n=0;n<t;n++)y[r++]=e[o+n]}}return y}}
},{}],"UFya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=r,exports.FULL=exports.EMPTY=void 0;const t=[];exports.EMPTY=t;const e=[[0,1/0]];function r(t,r){if(t===e)return t;if(r[0]<0&&(r[0]=0),r[0]>=r[1])return t;const s=[],o=t.length;let n=0;for(let e=0;e<o;e++){const o=t[e];o[1]<r[0]?(s.push(o),n=e+1):o[0]>r[1]?s.push(o):r=[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}return s.splice(n,0,r),s}exports.FULL=e;
},{}],"LUSB":[function(require,module,exports) {
"use strict";function t({source:t,target:e,start:r=0,end:a,size:s,getData:n}){a=a||e.length;const o=t.length,i=a-r;if(o>i)return void e.set(t.subarray(0,i),r);if(e.set(t,r),!n)return;let u=o;for(;u<i;){const a=n(u,t);for(let t=0;t<s;t++)e[r+u]=a[t]||0,u++}}function e({source:e,target:r,size:a,getData:s,sourceStartIndices:n,targetStartIndices:o}){if(!Array.isArray(o))return t({source:e,target:r,size:a,getData:s}),r;let i=0,u=0;const c=s&&((t,e)=>s(t+u,e)),g=Math.min(n.length,o.length);for(let l=1;l<g;l++){const s=n[l]*a,g=o[l]*a;t({source:e.subarray(i,s),target:r,start:u,end:g,size:a,getData:c}),i=s,u=g}return u<r.length&&t({source:[],target:r,start:u,size:a,getData:c}),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padArray=e;
},{}],"pb8L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeTransitionSettings=r,exports.getSourceBufferAttribute=n,exports.getAttributeTypeFromSize=s,exports.cycleBuffers=a,exports.getAttributeBufferLength=i,exports.padBuffer=o;var t=require("../../utils/array-utils");const e={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function r(t,r){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",{...e[t.type],...r,...t}):null}function n(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function s(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function a(t){t.push(t.shift())}function i(t,e){const{doublePrecision:r,settings:n,value:s,size:a}=t,i=r&&s instanceof Float64Array?2:1;return(n.noAlloc?s.length:e*a)*i}function o({buffer:e,numInstances:r,attribute:n,fromLength:s,fromStartIndices:a,getData:o=(t=>t)}){const u=n.doublePrecision&&n.value instanceof Float64Array?2:1,c=n.size*u,f=n.byteOffset,l=n.startIndices,g=a&&l,d=i(n,r),p=n.state.constant;if(!g&&s>=d)return;const y=p?n.value:n.getBuffer().getData({srcByteOffset:f});if(n.settings.normalized&&!p){const t=o;o=((e,r)=>n._normalizeConstant(t(e,r)))}const b=p?(t,e)=>o(y,e):(t,e)=>o(y.subarray(t,t+c),e),z=e.getData({length:s}),h=new Float32Array(d);(0,t.padArray)({source:z,target:h,sourceStartIndices:a,targetStartIndices:l,size:c,getData:b}),e.byteLength<h.byteLength+f&&e.reallocate(h.byteLength+f),e.subData({data:h,offset:f})}
},{"../../utils/array-utils":"LUSB"}],"btRH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./data-column")),e=o(require("../../utils/assert")),s=require("../../utils/iterable-utils"),r=require("../../utils/flatten"),a=u(require("../../utils/range")),n=require("./attribute-transition-utils");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=r?Object.getOwnPropertyDescriptor(t,a):null;n&&(n.get||n.set)?Object.defineProperty(s,a,n):s[a]=t[a]}return s.default=t,e&&e.set(t,s),s}function o(t){return t&&t.__esModule?t:{default:t}}class l extends t.default{constructor(t,e={}){super(t,e);const{transition:s=!1,noAlloc:r=!1,update:n=null,accessor:i=null,transform:u=null,startIndices:o=null}=e;Object.assign(this.settings,{transition:s,noAlloc:r,update:n||i&&this._autoUpdater,accessor:i,transform:u}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:a.FULL,startIndices:o}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,s=this.settings.transition,r=Array.isArray(e)?t[e.find(e=>t[e])]:t[e];return(0,n.normalizeTransitionSettings)(r,s)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:s=1/0}=e;this.state.updateRanges=a.add(this.state.updateRanges,[t,s])}else this.state.updateRanges=a.FULL}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=a.EMPTY}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}update(t){this.setData(t)}allocate(t){const{state:e,settings:s}=this;return!s.noAlloc&&(!!s.update&&(super.allocate({numInstances:t,copy:e.updateRanges!==a.FULL}),!0))}updateBuffer({numInstances:t,data:e,props:s,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:a},settings:{update:n,noAlloc:i}}=this;let u=!0;if(n){for(const[i,u]of a)n.call(r,this,{data:e,startRow:i,endRow:u,props:s,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,s]of a){const r=Number.isFinite(e)?this.getVertexOffset(e):0,a=Number.isFinite(s)?this.getVertexOffset(s):i||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:a})}else;this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(t){if(void 0===t||"function"==typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t),!0)):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:a,settings:n}=this;if(!t)return a.binaryValue=null,a.binaryAccessor=null,!1;if(n.noAlloc)return!1;if(a.binaryValue===t)return this.clearNeedsUpdate(),!0;if(a.binaryValue=t,this.setNeedsRedraw(),ArrayBuffer.isView(t)&&(t={value:t}),n.transform||r!==this.startIndices){(0,e.default)(ArrayBuffer.isView(t.value),"invalid ".concat(n.accessor));const i=t.size&&t.size!==this.size;return a.binaryAccessor=(0,s.getAccessorFromBuffer)(t.value,{size:t.size||this.size,stride:t.stride,offset:t.offset,startIndices:r,nested:i}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?e[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const s in t)Object.assign(e,super.getShaderAttributes(s,t[s]));return e}_autoUpdater(t,{data:a,startRow:n,endRow:i,props:u,numInstances:o}){if(t.constant)return;const{settings:l,state:c,value:d,size:f,startIndices:h}=t,{accessor:p,transform:g}=l,b=c.binaryAccessor||("function"==typeof p?p:u[p]);(0,e.default)("function"==typeof b,'accessor "'.concat(p,'" is not a function'));let y=t.getVertexOffset(n);const{iterable:w,objectInfo:A}=(0,s.createIterable)(a,n,i);for(const e of w){A.index++;let s=b(e,A);if(g&&(s=g.call(this,s)),h){const e=(A.index<h.length-1?h[A.index+1]:o)-h[A.index];if(s&&Array.isArray(s[0])){let e=y;for(const r of s)t._normalizeValue(r,d,e),e+=f}else s&&s.length>f?d.set(s,y):(t._normalizeValue(s,A.target,0),(0,r.fillArray)({target:d,source:A.target,start:y,count:e}));y+=e*f}else t._normalizeValue(s,d,y),y+=f}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"==typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let s=!0;switch(e){case 4:s=s&&Number.isFinite(t[3]);case 3:s=s&&Number.isFinite(t[2]);case 2:s=s&&Number.isFinite(t[1]);case 1:s=s&&Number.isFinite(t[0]);break;default:s=!1}if(!s)throw new Error("Illegal attribute generated for ".concat(this.id))}}}exports.default=l;
},{"./data-column":"WlAL","../../utils/assert":"Txat","../../utils/iterable-utils":"kai7","../../utils/flatten":"gSVO","../../utils/range":"UFya","./attribute-transition-utils":"pb8L"}],"cHcD":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/core"),e=i(require("../lib/attribute/attribute")),r=require("../lib/attribute/attribute-transition-utils"),n=i(require("./transition"));function i(t){return t&&t.__esModule?t:{default:t}}class s{constructor({gl:r,attribute:i,timeline:s}){this.gl=r,this.type="interpolation",this.transition=new n.default(s),this.attribute=i,this.attributeInTransition=new e.default(r,i.settings),this.currentStartIndices=i.startIndices,this.currentLength=0,this.transform=a(r,i);const u={byteLength:0,usage:35050};this.buffers=[new t.Buffer(r,u),new t.Buffer(r,u)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();const{gl:n,buffers:i,attribute:s}=this;(0,r.cycleBuffers)(i);const u={numInstances:e,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)(0,r.padBuffer)({buffer:a,...u});this.currentStartIndices=s.startIndices,this.currentLength=(0,r.getAttributeBufferLength)(s,e),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:(0,r.getSourceBufferAttribute)(n,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{time:t,settings:{duration:e,easing:r}}=this.transition,n=r(t/e);this.transform.run({uniforms:{time:n}})}return t}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}}exports.default=s;const u="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function a(e,n){const i=(0,r.getAttributeTypeFromSize)(n.size);return new t.Transform(e,{vs:u,defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"]})}
},{"@luma.gl/core":"iuAK","../lib/attribute/attribute":"btRH","../lib/attribute/attribute-transition-utils":"pb8L","./transition":"yDoV"}],"YGNu":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/core"),e=require("../lib/attribute/attribute-transition-utils"),r=i(require("../lib/attribute/attribute")),n=i(require("./transition"));function i(t){return t&&t.__esModule?t:{default:t}}class s{constructor({gl:e,attribute:i,timeline:s}){this.gl=e,this.type="spring",this.transition=new n.default(s),this.attribute=i,this.attributeInTransition=new r.default(e,{...i.settings,normalized:!1}),this.currentStartIndices=i.startIndices,this.currentLength=0,this.texture=u(e),this.framebuffer=f(e,this.texture),this.transform=a(e,i,this.framebuffer);const o={byteLength:0,usage:35050};this.buffers=[new t.Buffer(e,o),new t.Buffer(e,o),new t.Buffer(e,o)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:s}=this,a={numInstances:r,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const u of i)(0,e.padBuffer)({buffer:u,...a});this.currentStartIndices=s.startIndices,this.currentLength=(0,e.getAttributeBufferLength)(s,r),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:(0,e.getSourceBufferAttribute)(n,s)}})}update(){const{buffers:r,transform:n,framebuffer:i,transition:s}=this;return!!s.update()&&(n.update({sourceBuffers:{aPrev:r[0],aCur:r[1]},feedbackBuffers:{vNext:r[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.settings.stiffness,damping:s.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,e.cycleBuffers)(r),this.attributeInTransition.update({buffer:r[1],value:this.attribute.value}),(0,t.readPixelsToArray)(i)[0]>0||s.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}function a(r,n,i){const s=(0,e.getAttributeTypeFromSize)(n.size);return new t.Transform(r,{framebuffer:i,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:s},varyings:["vNext"]})}function u(e){return new t.Texture2D(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function f(e,r){return new t.Framebuffer(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:r}})}exports.default=s;
},{"@luma.gl/core":"iuAK","../lib/attribute/attribute-transition-utils":"pb8L","../lib/attribute/attribute":"btRH","./transition":"yDoV"}],"Llox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@luma.gl/core"),i=e(require("../../transitions/gpu-interpolation-transition")),s=e(require("../../transitions/gpu-spring-transition")),n=e(require("../../utils/log"));function e(t){return t&&t.__esModule?t:{default:t}}const r={interpolation:i.default,spring:s.default};class o{constructor(i,{id:s,timeline:n}){this.id=s,this.gl=i,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=t.Transform.isSupported(i)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:i,numInstances:s}){this.numInstances=s||1;for(const n in t){const s=t[n],e=s.getTransitionSetting(i);e&&this._updateAttribute(n,s,e)}for(const n in this.transitions){const s=t[n];s&&s.getTransitionSetting(i)||this._removeTransition(n)}}hasAttribute(t){const i=this.transitions[t];return i&&i.inProgress}getAttributes(){const t={};for(const i in this.transitions){const s=this.transitions[i];s.inProgress&&(t[i]=s.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const i in this.transitions){this.transitions[i].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,i,s){const e=this.transitions[t];let o=!e||e.type!==s.type;if(o){if(!this.isSupported)return void n.default.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();e&&this._removeTransition(t);const a=r[s.type];a?this.transitions[t]=new a({attribute:i,timeline:this.timeline,gl:this.gl}):(n.default.error("unsupported transition type '".concat(s.type,"'"))(),o=!1)}(o||i.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(s,this.numInstances))}}exports.default=o;
},{"@luma.gl/core":"iuAK","../../transitions/gpu-interpolation-transition":"cHcD","../../transitions/gpu-spring-transition":"YGNu","../../utils/log":"GVus"}],"wT56":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./attribute")),e=i(require("../../utils/log")),s=i(require("../../debug")),a=i(require("./attribute-transition-manager"));function i(t){return t&&t.__esModule?t:{default:t}}const r="attributeManager.invalidate",n="attributeManager.updateStart",d="attributeManager.updateEnd",u="attribute.updateStart",o="attribute.allocate",c="attribute.updateEnd";class h{constructor(t,{id:e="attribute-manager",stats:s,timeline:i}={}){this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=s,this.attributeTransitionManager=new a.default(t,{id:"".concat(e,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(t=!0){return this.needsRedraw=!0,this}add(t,e){this._add(t,e)}addInstanced(t,e){this._add(t,e,{instanced:1})}remove(t){for(let e=0;e<t.length;e++){const s=t[e];void 0!==this.attributes[s]&&(this.attributes[s].delete(),delete this.attributes[s])}}invalidate(t,e){const a=this._invalidateTrigger(t,e);(0,s.default)(r,this,t,a)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);(0,s.default)(r,this,"all")}update({data:t,numInstances:a,startIndices:i=null,transitions:r,props:u={},buffers:o={},context:c={}}={}){let h=!1;(0,s.default)(n,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const s in this.attributes){const r=this.attributes[s],n=r.settings.accessor;r.startIndices=i,u[s]&&e.default.removed("props.".concat(s),"data.attributes.".concat(s))(),r.setExternalBuffer(o[s])||r.setBinaryValue(o[n],t.startIndices)||!o[n]&&r.setConstantValue(u[n])||r.needsUpdate()&&(h=!0,this._updateAttribute({attribute:r,numInstances:a,data:t,props:u,context:c})),this.needsRedraw|=r.needsRedraw()}h&&(0,s.default)(d,this,a),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:a,transitions:r})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:e,attributeTransitionManager:s}=this,a={...s.getAttributes()};for(const i in e){const r=e[i];r.needsRedraw(t)&&!s.hasAttribute(i)&&(a[i]=r)}return a}getShaderAttributes(t,e={}){t||(t=this.getAttributes());const s={};for(const a in t)e[a]||Object.assign(s,t[a].getShaderAttributes());return s}getAccessors(){return this.updateTriggers}_add(t,s,a={}){s&&e.default.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const e in t){const s=t[e];this.attributes[e]=this._createAttribute(e,s,a)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,s,a){const i={...s,id:e,isIndexed:s.isIndexed||s.elements||!1,constant:s.constant||!1,size:(s.elements?1:s.size)||1,value:s.value||null,divisor:s.instanced||a.instanced?1:s.divisor||0};return new t.default(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach(s=>{t[s]||(t[s]=[]),t[s].push(e)})}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:s,updateTriggers:a}=this,i=a[t];return i&&i.forEach(t=>{const a=s[t];a&&a.setNeedsUpdate(a.id,e)}),i}_updateAttribute(t){const{attribute:e,numInstances:a}=t;(0,s.default)(u,e),e.constant?e.setConstantValue(e.value):(e.allocate(a)&&(0,s.default)(o,e,a),e.updateBuffer(t)&&(this.needsRedraw=!0,(0,s.default)(c,e,a)))}}exports.default=h;
},{"./attribute":"btRH","../../utils/log":"GVus","../../debug":"EEoF","./attribute-transition-manager":"Llox"}],"YhSP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("math.gl"),t=r(require("./transition"));function r(e){return e&&e.__esModule?e:{default:e}}class u extends t.default{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:u,duration:s,easing:a}}=this,i=a(t/s);this._value=(0,e.lerp)(r,u,i)}}exports.default=u;
},{"math.gl":"xAaq","./transition":"yDoV"}],"juRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./transition"));function e(t){return t&&t.__esModule?t:{default:t}}const r=1e-5;function n(t,e,r,n,s){const u=e-t;return(r-e)*s+-u*n+u+e}function s(t,e,r,s,u){if(Array.isArray(r)){const a=[];for(let i=0;i<r.length;i++)a[i]=n(t[i],e[i],r[i],s,u);return a}return n(t,e,r,s,u)}function u(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){const s=t[n]-e[n];r+=s*s}return Math.sqrt(r)}return Math.abs(t-e)}class a extends t.default{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:a}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let l=s(i,o,e,n,a);const c=u(l,e),f=u(l,o);c<r&&f<r&&(l=e,this.end()),this._prevValue=o,this._currValue=l}}exports.default=a;
},{"./transition":"yDoV"}],"f2Ln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./attribute/attribute-transition-utils"),e=r(require("../transitions/cpu-interpolation-transition")),i=r(require("../transitions/cpu-spring-transition")),s=r(require("../utils/log"));function r(t){return t&&t.__esModule?t:{default:t}}const n={interpolation:e.default,spring:i.default};class o{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(e,i,r,o){const{transitions:a}=this;if(a.has(e)){const t=a.get(e),{value:s=t.settings.fromValue}=t;i=s,this.remove(e)}if(!(o=(0,t.normalizeTransitionSettings)(o)))return;const u=n[o.type];if(!u)return void s.default.error("unsupported transition type '".concat(o.type,"'"))();const l=new u(this.timeline);l.start({...o,fromValue:i,toValue:r}),a.set(e,l)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,i]of this.transitions)i.update(),t[e]=i.value,i.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}exports.default=o;
},{"./attribute/attribute-transition-utils":"pb8L","../transitions/cpu-interpolation-transition":"YhSP","../transitions/cpu-spring-transition":"juRJ","../utils/log":"GVus"}],"UiIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateProps=r,exports.diffProps=e,exports.compareProps=a;var n=require("./constants");const{COMPONENT:t}=n.PROP_SYMBOLS;function r(n){const t=p(n);for(const r in t){const e=t[r],{validate:o}=e;if(o&&!o(n[r],e))throw new Error("Invalid prop ".concat(r,": ").concat(n[r]))}}function e(n,t){const r=a({newProps:n,oldProps:t,propTypes:p(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),e=i(n,t);let l=!1;return e||(l=s(n,t)),{dataChanged:e,propsChanged:r,updateTriggersChanged:l,extensionsChanged:c(n,t),transitionsChanged:o(n,t)}}function o(n,t){if(!n.transitions)return null;const r={},e=p(n);for(const o in n.transitions){const a=e[o],i=a&&a.type;("number"===i||"color"===i||"array"===i)&&l(n[o],t[o],a)&&(r[o]=!0)}return r}function a({newProps:n,oldProps:t,ignoreProps:r={},propTypes:e={},triggerName:o="props"}={}){if(t===n)return null;if("object"!=typeof n||null===n)return"".concat(o," changed shallowly");if("object"!=typeof t||null===t)return"".concat(o," changed shallowly");for(const a of Object.keys(n))if(!(a in r)){if(!(a in t))return"".concat(o,".").concat(a," added");const r=l(n[a],t[a],e[a]);if(r)return"".concat(o,".").concat(a," ").concat(r)}for(const a of Object.keys(t))if(!(a in r)){if(!(a in n))return"".concat(o,".").concat(a," dropped");if(!Object.hasOwnProperty.call(n,a)){const r=l(n[a],t[a],e[a]);if(r)return"".concat(o,".").concat(a," ").concat(r)}}return null}function l(n,t,r){let e=r&&r.equal;return e&&!e(n,t,r)?"changed deeply":e||!(e=n&&t&&n.equals)||e.call(n,t)?e||t===n?null:"changed shallowly":"changed deeply"}function i(n,t){if(null===t)return"oldProps is null, initial diff";let r=null;const{dataComparator:e,_dataDiff:o}=n;return e?e(n.data,t.data)||(r="Data comparator detected a change"):n.data!==t.data&&(r="A new data container was supplied"),r&&o&&(r=o(n.data,t.data)||r),r}function s(n,t){if(null===t)return"oldProps is null, initial diff";if("all"in n.updateTriggers){if(u(n,t,"all"))return{all:!0}}const r={};let e=!1;for(const o in n.updateTriggers)if("all"!==o){u(n,t,o)&&(r[o]=!0,e=r)}return e}function c(n,t){if(null===t)return"oldProps is null, initial diff";const r=t.extensions,{extensions:e}=n;if(e===r)return!1;if(e.length!==r.length)return!0;for(let o=0;o<e.length;o++)if(!e[o].equals(r[o]))return!0;return!1}function u(n,t,r){let e=n.updateTriggers[r];e=null==e?{}:e;let o=t.updateTriggers[r];return a({oldProps:o=null==o?{}:o,newProps:e,triggerName:r})}function p(n){const r=n[t],e=r&&r.constructor;return e?e._propTypes:{}}
},{"./constants":"dDJN"}],"nzk4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.count=n;const t="count(): argument not an object",e="count(): argument not a container";function n(n){if(!o(n))throw new Error(t);if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(r(n))return Object.keys(n).length;throw new Error(e)}function r(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function o(t){return null!==t&&"object"==typeof t}
},{}],"NycH":[function(require,module,exports) {
"use strict";function e(e,n){if(!n)return e;const i={...e,...n};if("defines"in n&&(i.defines={...e.defines,...n.defines}),"modules"in n&&(i.modules=(e.modules||[]).concat(n.modules),n.modules.some(e=>"project64"===e.name))){const e=i.modules.findIndex(e=>"project32"===e.name);e>=0&&i.modules.splice(e,1)}if("inject"in n)if(e.inject){const s={...e.inject};for(const e in n.inject)s[e]=(s[e]||"")+n.inject[e];i.inject=s}else i.inject=n.inject;return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeShaders=e;
},{}],"RaIZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTexture=n,exports.destroyTexture=o;var e=require("@luma.gl/core");const t={10241:9987,10240:9729,10242:33071,10243:33071},r={};function n(n,o){const u=n.context&&n.context.gl;if(!u||!o)return null;if(o instanceof e.Texture2D)return o;o.constructor&&"Object"!==o.constructor.name&&(o={data:o});let c=null;o.compressed&&(c={10241:o.data.length>1?9985:9729});const s=new e.Texture2D(u,{...o,parameters:{...t,...c,...n.props.textureParameters}});return r[s.id]=!0,s}function o(t){t&&t instanceof e.Texture2D&&r[t.id]&&(t.delete(),delete r[t.id])}
},{"@luma.gl/core":"iuAK"}],"qD4Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parsePropTypes=a;var e=require("../utils/texture");const r={boolean:{validate:(e,r)=>!0,equal:(e,r,t)=>Boolean(e)===Boolean(r)},number:{validate:(e,r)=>Number.isFinite(e)&&(!("max"in r)||e<=r.max)&&(!("min"in r)||e>=r.min)},color:{validate:(e,r)=>r.optional&&!e||u(e)&&(3===e.length||4===e.length),equal:(e,r,a)=>t(e,r)},accessor:{validate(e,r){const t=i(e);return"function"===t||t===i(r.value)},equal:(e,r,a)=>"function"==typeof r||t(e,r)},array:{validate:(e,r)=>r.optional&&!e||u(e),equal:(e,r,a)=>a.compare?t(e,r):e===r},function:{validate:(e,r)=>r.optional&&!e||"function"==typeof e,equal:(e,r,t)=>!t.compare||e===r},data:{transform:(e,r,t)=>{const{dataTransform:a}=t?t.props:{};return a&&e?a(e):e}},image:{transform:(r,t,a)=>(0,e.createTexture)(a,r),release:r=>{(0,e.destroyTexture)(r)}}};function t(e,r){if(e===r)return!0;if(!u(e)||!u(r))return!1;const t=e.length;if(t!==r.length)return!1;for(let a=0;a<t;a++)if(e[a]!==r[a])return!1;return!0}function a(e){const r={},t={},a={};for(const[o,u]of Object.entries(e))if(u&&u.deprecatedFor)a[o]=Array.isArray(u.deprecatedFor)?u.deprecatedFor:[u.deprecatedFor];else{const e=n(o,u);r[o]=e,t[o]=e.value}return{propTypes:r,defaultProps:t,deprecatedProps:a}}function n(e,r){switch(i(r)){case"object":return o(e,r);case"array":return o(e,{type:"array",value:r,compare:!1});case"boolean":return o(e,{type:"boolean",value:r});case"number":return o(e,{type:"number",value:r});case"function":return o(e,{type:"function",value:r,compare:!0});default:return{name:e,type:"unknown",value:r}}}function o(e,t){return"type"in t?{name:e,...r[t.type],...t}:"value"in t?{name:e,type:i(t.value),...t}:{name:e,type:"object",value:t}}function u(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function i(e){return u(e)?"array":null===e?"null":typeof e}
},{"../utils/texture":"RaIZ"}],"jz7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProps=p;var e=o(require("../utils/log")),t=require("../utils/iterable-utils"),r=require("./prop-types"),n=require("./constants");function o(e){return e&&e.__esModule?e:{default:e}}const{COMPONENT:s,ASYNC_ORIGINAL:c,ASYNC_RESOLVED:i,ASYNC_DEFAULTS:u}=n.PROP_SYMBOLS;function p(){const e=a(this.constructor),t=Object.create(e);t[s]=this,t[c]={},t[i]={};for(let r=0;r<arguments.length;++r){const e=arguments[r];for(const r in e)t[r]=e[r]}return Object.freeze(t),t}function a(e){const t=y(e,"_mergedDefaultProps");return t||(f(e),e._mergedDefaultProps)}function f(e){if(!e.prototype)return;const t=Object.getPrototypeOf(e),n=a(t),o=y(e,"defaultProps")||{},s=(0,r.parsePropTypes)(o),c=l(s.defaultProps,n,e),i={...t._propTypes,...s.propTypes};P(c,i);const u={...t._deprecatedProps,...s.deprecatedProps};d(c,u),e._mergedDefaultProps=c,e._propTypes=i,e._deprecatedProps=u}function l(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const o=b(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:o}}),n}function d(t,r){for(const n in r)Object.defineProperty(t,n,{enumerable:!1,set(t){const o="".concat(this.id,": ").concat(n);for(const e of r[n])O(this,e)||(this[e]=t);e.default.deprecated(o,r[n].join("/"))()}})}function P(e,t){const r={},n={};for(const o in t){const e=t[o],{name:s,value:c}=e;e.async&&(r[s]=c,n[s]=h(s,c))}e[u]=r,e[c]={},Object.defineProperties(e,n)}function h(e){return{enumerable:!0,set(r){"string"==typeof r||r instanceof Promise||(0,t.isAsyncIterable)(r)?this[c][e]=r:this[i][e]=r},get(){if(this[i]){if(e in this[i]){return this[i][e]||this[u][e]}if(e in this[c]){const t=this[s]&&this[s].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[u][e]}}return this[u][e]}}}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){return O(e,t)&&e[t]}function b(t){const r=y(t,"layerName")||y(t,"componentName");return r||e.default.once(0,"".concat(t.name,".componentName not specified"))(),r||t.name}
},{"../utils/log":"GVus","../utils/iterable-utils":"kai7","./prop-types":"qD4Q","./constants":"dDJN"}],"c85S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=require("../utils/iterable-utils"),o=require("./constants");const{ASYNC_ORIGINAL:e,ASYNC_RESOLVED:t,ASYNC_DEFAULTS:n}=o.PROP_SYMBOLS,r=Object.freeze({});class a{constructor(s=null){this.component=s,this.asyncProps={},this.onAsyncPropUpdated=(()=>{}),this.oldProps=r,this.oldAsyncProps=null}finalize(){for(const s in this.asyncProps){const o=this.asyncProps[s];o.type&&o.type.release&&o.type.release(o.resolvedValue,o.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const s in this.asyncProps)Object.defineProperty(this.oldAsyncProps,s,{enumerable:!0,value:this.oldProps[s]})}}hasAsyncProp(s){return s in this.asyncProps}getAsyncProp(s){const o=this.asyncProps[s];return o&&o.resolvedValue}isAsyncPropLoading(s){if(s){const o=this.asyncProps[s];return Boolean(o&&o.pendingLoadCount>0&&o.pendingLoadCount!==o.resolvedLoadCount)}for(const o in this.asyncProps)if(this.isAsyncPropLoading(o))return!0;return!1}reloadAsyncProp(s,o){this._watchPromise(s,Promise.resolve(o))}setAsyncProps(s){const o=s[t]||{},r=s[e]||s,a=s[n]||{};for(const e in o){const s=o[e];this._createAsyncPropData(e,a[e]),this._updateAsyncProp(e,s),o[e]=this.getAsyncProp(e)}for(const e in r){const s=r[e];this._createAsyncPropData(e,a[e]),this._updateAsyncProp(e,s)}}_updateAsyncProp(o,e){if(this._didAsyncInputValueChange(o,e)){if("string"==typeof e){var t;const s=null===(t=this.layer)||void 0===t?void 0:t.props.fetch,n=e;s&&(e=s(n,{propName:o,layer:this.layer}))}e instanceof Promise?this._watchPromise(o,e):(0,s.isAsyncIterable)(e)?this._resolveAsyncIterable(o,e):this._setPropValue(o,e)}}_didAsyncInputValueChange(s,o){const e=this.asyncProps[s];return o!==e.resolvedValue&&o!==e.lastValue&&(e.lastValue=o,!0)}_setPropValue(s,o){this.freezeAsyncOldProps();const e=this.asyncProps[s];o=this._postProcessValue(e,o),e.resolvedValue=o,e.pendingLoadCount++,e.resolvedLoadCount=e.pendingLoadCount}_setAsyncPropValue(s,o,e){const t=this.asyncProps[s];t&&e>=t.resolvedLoadCount&&void 0!==o&&(this.freezeAsyncOldProps(),t.resolvedValue=o,t.resolvedLoadCount=e,this.onAsyncPropUpdated(s,o))}_watchPromise(s,o){const e=this.asyncProps[s];e.pendingLoadCount++;const t=e.pendingLoadCount;o.then(o=>{var n;o=this._postProcessValue(e,o),this._setAsyncPropValue(s,o,t);const r=null===(n=this.layer)||void 0===n?void 0:n.props.onDataLoad;"data"===s&&r&&r(o,{propName:s,layer:this.layer})}).catch(o=>{var e;null===(e=this.layer)||void 0===e||e.raiseError(o,"loading ".concat(s," of ").concat(this.layer))})}async _resolveAsyncIterable(s,o){var e;"data"!==s&&this._setPropValue(s,o);const t=this.asyncProps[s];t.pendingLoadCount++;const n=t.pendingLoadCount;let r=[],a=0;for await(const p of o){const{dataTransform:o}=this.component?this.component.props:{};r=o?o(p,r):r.concat(p),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:a,endRow:r.length}]}),a=r.length,this._setAsyncPropValue(s,r,n)}const i=null===(e=this.layer)||void 0===e?void 0:e.props.onDataLoad;i&&i(r,{propName:s,layer:this.layer})}_postProcessValue(s,o){const e=s.type;return e&&(e.release&&e.release(s.resolvedValue,e,this.component),e.transform)?e.transform(o,e,this.component):o}_createAsyncPropData(s,o){if(!this.asyncProps[s]){const e=this.component&&this.component.constructor._propTypes;this.asyncProps[s]={type:e&&e[s],lastValue:null,resolvedValue:o,pendingLoadCount:0,resolvedLoadCount:0}}}}exports.default=a;
},{"../utils/iterable-utils":"kai7","./constants":"dDJN"}],"ElXl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../lifecycle/constants"),e=require("./create-props"),s=require("./constants"),n=r(require("./component-state"));function r(t){return t&&t.__esModule?t:{default:t}}const{ASYNC_ORIGINAL:i,ASYNC_RESOLVED:o,ASYNC_DEFAULTS:l}=s.PROP_SYMBOLS,a={};let c=0;class u{constructor(){this.props=e.createProps.apply(this,arguments),this.id=this.props.id,this.count=c++,this.lifecycle=t.LIFECYCLE.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:e}=this,s={};for(const n in e[l])n in e[o]?s[n]=e[o][n]:n in e[i]&&(s[n]=e[i][n]);return new this.constructor({...e,...s,...t})}get stats(){return this.internalState.stats}_initState(){this.internalState=new n.default({})}}exports.default=u,u.componentName="Component",u.defaultProps=a;
},{"../lifecycle/constants":"dDJN","./create-props":"jz7I","./constants":"dDJN","./component-state":"c85S"}],"CAGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../lifecycle/component-state"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}exports.default=r;
},{"../lifecycle/component-state":"c85S"}],"xVVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./constants"),e=S(require("./attribute/attribute-manager")),i=S(require("./uniform-transition-manager")),a=require("../lifecycle/props"),s=require("../utils/count"),n=S(require("../utils/log")),r=S(require("../debug")),o=require("@luma.gl/core"),l=S(require("../utils/assert")),h=S(require("../utils/memoize")),d=require("../utils/shader"),c=require("../shaderlib/project/project-functions"),p=S(require("../utils/typed-array-manager")),u=S(require("../lifecycle/component")),g=S(require("./layer-state")),f=require("@math.gl/web-mercator"),m=require("@loaders.gl/core");function S(t){return t&&t.__esModule?t:{default:t}}const y="layer.changeFlag",C="layer.initialize",b="layer.update",v="layer.finalize",A="layer.matched",x=2**24-1,P=Object.freeze([]),w=(0,h.default)(({oldViewport:t,viewport:e})=>t.equals(e));let M=new Uint8ClampedArray(0);const _={data:{type:"data",value:P,async:!0},dataComparator:null,_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:i,loaders:a,loadOptions:s,signal:n})=>{const{resourceManager:r}=i.context;var o;(s=s||i.getLoadOptions(),a=a||i.props.loaders,n)&&(s={...s,fetch:{...null===(o=s)||void 0===o?void 0:o.fetch,signal:n}});let l=r.contains(t);return l||s||(r.add({resourceId:t,data:(0,m.load)(t,a),persistent:!1}),l=!0),l?r.subscribe({resourceId:t,onChange:t=>i.internalState.reloadAsyncProp(e,t),consumerId:i.id,requestId:e}):(0,m.load)(t,a,s)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:t.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class I extends u.default{toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}raiseError(t,e){var i,a,s,n;(e&&(t.message="".concat(e,": ").concat(t.message)),null===(i=(a=this.props).onError)||void 0===i?void 0:i.call(a,t))||(null===(s=this.context)||void 0===s||null===(n=s.onError)||void 0===n||n.call(s,t,this))}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:e}=this.context,i=(0,c.getWorldPosition)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[a,s,n]=(0,f.worldToPixels)(i,e.pixelProjectionMatrix);return 2===t.length?[a,s]:[a,s,n]}unproject(t){const{viewport:e}=this.context;return e.unproject(t)}projectPosition(t){return(0,c.projectPosition)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===t.COORDINATE_SYSTEM.DEFAULT||e===t.COORDINATE_SYSTEM.LNGLAT||e===t.COORDINATE_SYSTEM.CARTESIAN}onHover(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}onClick(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){(0,l.default)(t instanceof Uint8Array);const[e,i,a]=t;return e+256*i+65536*a-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const e of this.props.extensions)t=(0,d.mergeShaders)(t,e.getShaders.call(this,e));return t}shouldUpdateState({oldProps:t,props:e,context:i,changeFlags:a}){return a.propsOrDataChanged}updateState({oldProps:t,props:e,context:i,changeFlags:a}){const s=this.getAttributeManager();if(a.dataChanged&&s){const{dataChanged:t}=a;if(Array.isArray(t))for(const e of t)s.invalidateAll(e);else s.invalidateAll()}const n=t.highlightedObjectIndex>=0||t.pickable,r=e.highlightedObjectIndex>=0||e.pickable;if(n!==r&&s){const{pickingColors:t,instancePickingColors:e}=s.attributes,i=t||e;i&&(r&&i.constant&&(i.constant=!1,s.invalidate(i.id)),i.value||r||(i.constant=!0,i.value=[0,0,0]))}}finalizeState(){for(const e of this.getModels())e.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}activateViewport(t){const e=this.internalState.viewport;this.internalState.viewport=t,e&&w({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",e=""){const i=this.getAttributeManager();i&&("all"===t?i.invalidateAll():i.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(t){const e=this.getAttributeManager();if(!e)return;const i=this.getNumInstances(t),a=this.getStartIndices(t);e.update({data:t.data,numInstances:i,startIndices:a,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),i=Object.create(this.props);for(const t in e)Object.defineProperty(i,t,{value:e[t]});return i}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;const i=Math.floor(M.length/3);if(this.internalState.usesPickingColorCache=!0,i<e){e>x&&n.default.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),M=p.default.allocate(M,e,{size:3,copy:!0,maxCount:Math.max(e,x)});const t=Math.floor(M.length/3),a=[];for(let e=i;e<t;e++)this.encodePickingColor(e,a),M[3*e+0]=a[0],M[3*e+1]=a[1],M[3*e+2]=a[2]}t.value=M.subarray(0,3*e)}_setModelAttributes(t,e){const i=this.getAttributeManager(),a=t.userData.excludeAttributes||{},s=i.getShaderAttributes(e,a);t.setAttributes(s)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:i}=this.getAttributeManager().attributes,a=e||i,s=a.getVertexOffset(t),n=a.getVertexOffset(t+1);a.buffer.subData({data:new Uint8Array(n-s),offset:s})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,i=t||e;this.internalState.usesPickingColorCache&&i.value.buffer!==M.buffer&&(i.value=M.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,s.count)(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){(0,r.default)(C,this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();(0,r.default)(b,this,t),t&&this._updateState()}_updateState(){const t=this.props,e=this.context.viewport,i=this._updateUniformTransition();this.internalState.propsInTransition=i,this.context.viewport=this.internalState.viewport||e,this.props=i;try{const i=this._getUpdateParams(),s=this.getModels();if(this.context.gl)this.updateState(i);else try{this.updateState(i)}catch(a){}for(const t of this.props.extensions)t.updateState.call(this,i,t);const n=this.getModels()[0]!==s[0];this._updateModules(i,n),this.isComposite?this._renderLayers(i):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=e,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){(0,r.default)(v,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:e={},parameters:i={}}){this._updateAttributeTransition();const a=this.props;this.props=this.internalState.propsInTransition||a;const{opacity:s}=this.props;e.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,n=s&&s(e)||[0,0];(0,o.setParameters)(this.context.gl,{polygonOffset:n}),(0,o.withParameters)(this.context.gl,i,()=>{const a={moduleParameters:t,uniforms:e,parameters:i,context:this.context};for(const t of this.props.extensions)t.draw.call(this,a,t);this.draw(a)})}finally{this.props=a}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:e}=this.internalState;for(const a in t)if(t[a]){let i=!1;switch(a){case"dataChanged":Array.isArray(e[a])&&(e[a]=Array.isArray(t[a])?e[a].concat(t[a]):t[a],i=!0);default:e[a]||(e[a]=t[a],i=!0)}i&&(0,r.default)(y,this,a,t)}const i=e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged;e.propsOrDataChanged=i,e.somethingChanged=i||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,e){const i=(0,a.diffProps)(t,e);if(i.updateTriggersChanged)for(const a in i.updateTriggersChanged)i.updateTriggersChanged[a]&&this.invalidateAttribute(a);if(i.transitionsChanged)for(const a in i.transitionsChanged)this.internalState.uniformTransitions.add(a,e[a],t[a],t.transitions[a]);return this.setChangeFlags(i)}validateProps(){(0,a.validateProps)(this.props)}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:i}=this.props;t.picked&&"function"==typeof i&&(e.pickingHighlightColor=i(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_updateModules({props:t,oldProps:e},i){const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:n}=t;if(i||e.autoHighlight!==a||e.highlightedObjectIndex!==s||e.highlightColor!==n){const t={};a||(t.pickingSelectedColor=null),Array.isArray(n)&&(t.pickingHighlightColor=n),Number.isInteger(s)&&(t.pickingSelectedColor=s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const i=this.getAttributeManager(),a=i&&i.getNeedsRedraw(t);return e=e||a}_getAttributeManager(){return new e.default(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){(0,l.default)(!this.internalState&&!this.state),(0,l.default)(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new g.default({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(n.default.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new i.default(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){(0,r.default)(A,this,this===t);const{state:e,internalState:i}=t;this!==t&&(this.internalState=i,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}exports.default=I,I.layerName="Layer",I.defaultProps=_;
},{"./constants":"ysbg","./attribute/attribute-manager":"wT56","./uniform-transition-manager":"f2Ln","../lifecycle/props":"UiIs","../utils/count":"nzk4","../utils/log":"GVus","../debug":"EEoF","@luma.gl/core":"iuAK","../utils/assert":"Txat","../utils/memoize":"uXG5","../utils/shader":"NycH","../shaderlib/project/project-functions":"AJ0f","../utils/typed-array-manager":"yeLJ","../lifecycle/component":"ElXl","./layer-state":"CAGE","@math.gl/web-mercator":"PqV4","@loaders.gl/core":"ikKD"}],"dK5R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./layer")),t=s(require("../debug")),r=require("../utils/flatten");function s(e){return e&&e.__esModule?e:{default:e}}const i="compositeLayer.renderLayers";class o extends e.default{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id?(e.object=t.__source.object,e.index=t.__source.index,e):e}renderLayers(){return null}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||t}getSubLayerRow(e,t,r){return e.__source={parent:this,object:t,index:r},e}getSubLayerAccessor(e){if("function"==typeof e){const t={data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(t.index=r.__source.index,e(r.__source.object,t)):e(r,s)}return e}getSubLayerProps(e={}){const{opacity:t,pickable:r,visible:s,parameters:i,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:n,highlightColor:u,coordinateSystem:c,coordinateOrigin:d,wrapLongitude:g,positionFormat:p,modelMatrix:l,extensions:h,fetch:y,_subLayerProps:b}=this.props,f={opacity:t,pickable:r,visible:s,parameters:i,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:n,highlightColor:u,coordinateSystem:c,coordinateOrigin:d,wrapLongitude:g,positionFormat:p,modelMatrix:l,extensions:h,fetch:y},_=b&&b[e.id],L=_&&_.updateTriggers,S=e.id||"sublayer";if(_){const t=this.constructor._propTypes,r=e.type?e.type._propTypes:{};for(const e in _){const s=r[e]||t[e];s&&"accessor"===s.type&&(_[e]=this.getSubLayerAccessor(_[e]))}}Object.assign(f,e,_),f.id="".concat(this.props.id,"-").concat(S),f.updateTriggers={all:this.props.updateTriggers.all,...e.updateTriggers,...L};for(const x of h){const e=x.getSubLayerProps.call(this,x);e&&Object.assign(f,e,{updateTriggers:Object.assign(f.updateTriggers,e.updateTriggers)})}return f}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:e}=this.internalState;const s=!e||this.needsUpdate();s&&(e=this.renderLayers(),e=(0,r.flatten)(e,Boolean),this.internalState.subLayers=e),(0,t.default)(i,this,s,e);for(const t of e)t.parent=this}}exports.default=o,o.layerName="CompositeLayer";
},{"./layer":"xVVm","../debug":"EEoF","../utils/flatten":"gSVO"}],"TXTo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../utils/deep-equal");class e{constructor(t={}){this.opts=t}equals(e){return this===e||this.constructor===e.constructor&&(0,t.deepEqual)(this.opts,e.opts)}getShaders(t){return null}getSubLayerProps(t){const{defaultProps:e={}}=t.constructor,r={updateTriggers:{}};for(const s in e)if(s in this.props){const t=e[s],o=this.props[s];r[s]=o,t&&"accessor"===t.type&&(r.updateTriggers[s]=this.props.updateTriggers[s],"function"==typeof o&&(r[s]=this.getSubLayerAccessor(o,!0)))}return r}initializeState(t,e){}updateState(t,e){}draw(t,e){}finalizeState(t){}}exports.default=e;
},{"../utils/deep-equal":"KSag"}],"MNZ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return e.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"LayerExtension",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return f.default}});var e=require("./constants"),r=c(require("./deck")),t=c(require("./deck-renderer")),n=c(require("./effect")),u=c(require("./layer")),a=c(require("./composite-layer")),o=c(require("./layer-extension")),i=c(require("./attribute/attribute-manager")),f=c(require("./layer-manager"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./constants":"ysbg","./deck":"ruUO","./deck-renderer":"J3c9","./effect":"Z10T","./layer":"xVVm","./composite-layer":"dK5R","./layer-extension":"TXTo","./attribute/attribute-manager":"wT56","./layer-manager":"m8xf"}],"yBNR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointLight=void 0;var t=require("../../shaderlib/project/project-functions"),i=require("../../lib");const o=[255,255,255],e=1,n=[0,0,1],r=[0,0,1];let s=0;class c{constructor(t={}){const{color:i=o}=t,{intensity:n=e}=t,{position:c=r}=t;this.id=t.id||"point-".concat(s++),this.color=i,this.intensity=n,this.type="point",this.position=c,this.attenuation=p(t),this.projectedLight={...this}}getProjectedLight({layer:o}){const{projectedLight:e}=this,n=o.context.viewport,{coordinateSystem:r,coordinateOrigin:s}=o.props,c=(0,t.projectPosition)(this.position,{viewport:n,coordinateSystem:r,coordinateOrigin:s,fromCoordinateSystem:n.isGeospatial?i.COORDINATE_SYSTEM.LNGLAT:i.COORDINATE_SYSTEM.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return e.color=this.color,e.intensity=this.intensity,e.position=c,e}}function p(t){return"attenuation"in t?t.attenuation:"intensity"in t?[0,0,t.intensity]:n}exports.PointLight=c;
},{"../../shaderlib/project/project-functions":"AJ0f","../../lib":"MNZ9"}],"xYso":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./point-light"),e=require("../../shaderlib/project/viewport-uniforms");class o extends t.PointLight{getProjectedLight({layer:t}){const{projectedLight:o}=this,i=t.context.viewport,{coordinateSystem:r,coordinateOrigin:s,modelMatrix:n}=t.props,{project_uCameraPosition:a}=(0,e.getUniformsFromViewport)({viewport:i,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s});return o.color=this.color,o.intensity=this.intensity,o.position=a,o}}exports.default=o;
},{"./point-light":"yBNR","../../shaderlib/project/viewport-uniforms":"iWu9"}],"IzZd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSolarPosition=M,exports.getSunlightDirection=r;const t=Math.PI/180,n=864e5,a=2440588,i=2451545,s=23.4397*t,o=357.5291,c=.98560028,h=280.147,e=360.9856235;function M(n,a,i){const s=t*-i,o=t*a,c=f(n),h=z(c),e=P(c,s)-h.rightAscension;return{azimuth:g(e,o,h.declination),altitude:p(e,o,h.declination)}}function r(t,n,a){const{azimuth:i,altitude:s}=M(t,n,a);return[Math.sin(i)*Math.cos(s),Math.cos(i)*Math.cos(s),-Math.sin(s)]}function u(t){return t/n-.5+a}function f(t){return u(t)-i}function l(t,n){const a=t;return Math.atan2(Math.sin(a)*Math.cos(s)-Math.tan(n)*Math.sin(s),Math.cos(a))}function d(t,n){const a=t;return Math.asin(Math.sin(n)*Math.cos(s)+Math.cos(n)*Math.sin(s)*Math.sin(a))}function g(t,n,a){const i=t,s=n,o=a;return Math.atan2(Math.sin(i),Math.cos(i)*Math.sin(s)-Math.tan(o)*Math.cos(s))}function p(t,n,a){const i=t,s=n,o=a;return Math.asin(Math.sin(s)*Math.sin(o)+Math.cos(s)*Math.cos(o)*Math.cos(i))}function P(n,a){return t*(h+e*n)-a}function x(n){return t*(o+c*n)}function m(n){const a=n;return a+t*(1.9148*Math.sin(a)+.02*Math.sin(2*a)+3e-4*Math.sin(3*a))+102.9372*t+Math.PI}function z(t){const n=m(x(t));return{declination:d(n,0),rightAscension:l(n,0)}}
},{}],"hMy0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./directional-light"),e=require("./suncalc");class i extends t.DirectionalLight{constructor({timestamp:t,...e}){super(e),this.timestamp=t}getProjectedLight({layer:t}){const{viewport:i}=t.context;if(i.resolution>0){const[t,i,s]=(0,e.getSunlightDirection)(this.timestamp,0,0);this.direction=[t,-s,i]}else{const{latitude:t,longitude:s}=i;this.direction=(0,e.getSunlightDirection)(this.timestamp,t,s)}return this}}exports.default=i;
},{"./directional-light":"n3wt","./suncalc":"IzZd"}],"YqRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@luma.gl/core"),t=r(require("./pass"));function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(t,r={}){super(t,r);const{module:s,fs:u,id:d}=r;this.model=new e.ClipSpace(t,{id:d,fs:u,modules:[s]})}render(t){const r=this.gl;(0,e.setParameters)(r,{viewport:[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}),(0,e.withParameters)(r,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},()=>this._renderPass(r,t))}delete(){this.model.delete(),this.model=null}_renderPass(t,{inputBuffer:r,outputBuffer:s}){(0,e.clear)(t,{color:!0}),this.model.draw({moduleSettings:this.props.moduleSettings,uniforms:{texture:r,texSize:[r.width,r.height]},parameters:{depthWrite:!1,depthTest:!1}})}}exports.default=s;
},{"@luma.gl/core":"iuAK","./pass":"ay01"}],"QgRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../lib/effect")),t=r(require("../passes/screen-pass")),n=require("@luma.gl/core");function r(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e,t={}){super(t),this.id="".concat(e.name,"-pass"),(0,n.normalizeShaderModule)(e),this.module=e}postRender(e,t){this.passes||(this.passes=o(e,this.module,this.id,this.props));const{target:n}=t;let r=t.inputBuffer,s=t.swapBuffer;for(let o=0;o<this.passes.length;o++){n&&o===this.passes.length-1&&(s=n),this.passes[o].render({inputBuffer:r,outputBuffer:s});const e=s;s=r,r=e}return r}cleanup(){if(this.passes){for(const e of this.passes)e.delete();this.passes=null}}}function o(e,n,r,s){if(n.filter||n.sampler){const o=u(n);return[new t.default(e,{id:r,module:n,fs:o,moduleSettings:s})]}return(n.passes||[]).map((o,i)=>{const a=u(n,o),l="".concat(r,"-").concat(i);return new t.default(e,{id:l,module:n,fs:a,moduleSettings:s})})}exports.default=s;const i=e=>"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n"),a=e=>"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n");function u(e,t=e){if(t.filter){const n="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return i(n)}if(t.sampler){const n="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return a(n)}return null}
},{"../lib/effect":"Z10T","../passes/screen-pass":"YqRQ","@luma.gl/core":"iuAK"}],"DUOV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("math.gl"),e=a(require("./viewport")),r=require("../lib/constants"),i=s(require("gl-matrix/vec3")),n=s(require("gl-matrix/vec4"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=i?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function a(t){return t&&t.__esModule?t:{default:t}}const u=Math.PI/180,c=180/Math.PI,h=6370972,l=256;function p(){const t=l/h,e=Math.PI/180*l;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class d extends e.default{constructor(e={}){const{latitude:r=0,longitude:i=0,zoom:n=11,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:a=10}=e;let{width:c,height:h,altitude:d=1.5}=e;c=c||1,h=h||1,d=Math.max(.75,d);const M=(new t.Matrix4).lookAt({eye:[0,-d,0],up:[0,0,1]}),f=Math.pow(2,n);M.rotateX(r*u),M.rotateZ(-i*u),M.scale(f/h);const g=Math.atan(.5/d),j=2*l*f/h;super({...e,width:c,height:h,viewMatrix:M,longitude:i,latitude:r,zoom:n,fovyRadians:2*g,aspect:c/h,focalDistance:d,near:o,far:Math.min(2,1/j+1)*d*s}),this.resolution=a,this.distanceScales=p()}get projectionMode(){return r.PROJECTION_MODE.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const e={targetZ:t.z||0},r=this.unproject([0,this.height/2],e),i=this.unproject([this.width/2,0],e),n=this.unproject([this.width,this.height/2],e),o=this.unproject([this.width/2,this.height],e);return n[0]<this.longitude&&(n[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],n[0],i[0],o[0]),Math.min(r[1],n[1],i[1],o[1]),Math.max(r[0],n[0],i[0],o[0]),Math.max(r[1],n[1],i[1],o[1])]}unproject(t,{topLeft:e=!0,targetZ:r}={}){const[n,o,s]=t,a=e?o:this.height-o,{pixelUnprojectionMatrix:u}=this;let c;if(Number.isFinite(s))c=M(u,[n,a,s,1]);else{const t=M(u,[n,a,-1,1]),e=M(u,[n,a,1,1]),o=((r||0)/h+1)*l,s=i.sqrLen(i.sub([],t,e)),p=i.sqrLen(t),d=i.sqrLen(e),f=4*((4*p*d-(s-p-d)**2)/16)/s,g=(Math.sqrt(p-f)-Math.sqrt(Math.max(0,o*o-f)))/Math.sqrt(s);c=i.lerp([],t,e,g)}const[p,d,f]=this.unprojectPosition(c);return Number.isFinite(s)?[p,d,f]:Number.isFinite(r)?[p,d,r]:[p,d]}projectPosition(t){const[e,r,i=0]=t,n=e*u,o=r*u,s=Math.cos(o),a=(i/h+1)*l;return[Math.sin(n)*s*a,-Math.cos(n)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,r,n]=t,o=i.len(t),s=Math.asin(n/o);return[Math.atan2(e,-r)*c,s*c,(o/l-1)*h]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const r=this.unproject(e);return{longitude:t[0]-r[0]+this.longitude,latitude:t[1]-r[1]+this.latitude}}}function M(t,e){const r=n.transformMat4([],e,t);return n.scale(r,r,1/r[3]),r}exports.default=d;
},{"math.gl":"xAaq","./viewport":"HjGN","../lib/constants":"ysbg","gl-matrix/vec3":"AWBd","gl-matrix/vec4":"zWbG"}],"Egne":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./controller")),e=o(require("./view-state")),i=require("../utils/math-utils"),r=require("math.gl");function o(t){return t&&t.__esModule?t:{default:t}}const s=20,a={position:[0,0,0],pitch:0,bearing:0,maxPitch:90,minPitch:-90};class n extends e.default{constructor({width:t,height:e,position:i=a.position,bearing:r=a.bearing,pitch:o=a.pitch,longitude:s,latitude:n,maxPitch:h=a.maxPitch,minPitch:p=a.minPitch,startRotatePos:c,startBearing:u,startPitch:g,startZoomPosition:d,startZoom:l}){super({width:t,height:e,position:i,bearing:r,pitch:o,longitude:s,latitude:n,maxPitch:h,minPitch:p}),this._state={startRotatePos:c,startBearing:u,startPitch:g,startZoomPosition:d,startZoom:l}}getDirection(t=!1){return new r._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:t?90:90+this._viewportProps.pitch}).toVector3().normalize()}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:o,startPitch:s}=this._state,{width:a,height:n}=this._viewportProps;if(!r||!Number.isFinite(o)||!Number.isFinite(s))return this;let h;if(t){h={bearing:o-180*((t[0]-r[0])/a),pitch:s-90*((t[1]-r[1])/n)}}else h={bearing:o-e,pitch:s-i};return this._getUpdatedState(h)}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,startZoom:this._viewportProps.zoom})}zoom({scale:t}){let{startZoomPosition:e}=this._state;e||(e=this._viewportProps.position);const i=this.getDirection();return this._move(i,Math.log2(t)*s,e)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}moveLeft(t=s){const e=this.getDirection(!0);return this._move(e.rotateZ({radians:Math.PI/2}),t)}moveRight(t=s){const e=this.getDirection(!0);return this._move(e.rotateZ({radians:-Math.PI/2}),t)}moveUp(t=s){const e=this.getDirection(!0);return this._move(e,t)}moveDown(t=s){const e=this.getDirection(!0);return this._move(e.negate(),t)}rotateLeft(t=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-t})}zoomIn(t=2){return this.zoom({scale:t})}zoomOut(t=2){return this.zoom({scale:1/t})}shortestPathFrom(t){const e=t.getViewportProps(),i={...this._viewportProps},{bearing:r,longitude:o}=i;return Math.abs(r-e.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(o-e.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}_move(t,e,i=this._viewportProps.position){const o=t.scale(e);return this._getUpdatedState({position:new r.Vector3(i).add(o)})}_getUpdatedState(t){return new n({...this._viewportProps,...this._state,...t})}_applyConstraints(t){const{pitch:e,maxPitch:o,minPitch:s,longitude:a,bearing:n}=t;return t.pitch=(0,r.clamp)(e,s,o),(a<-180||a>180)&&(t.longitude=(0,i.mod)(a+180,360)-180),(n<-180||n>180)&&(t.bearing=(0,i.mod)(n+180,360)-180),t}}class h extends t.default{constructor(t){super(n,t)}get linearTransitionProps(){return["position","pitch","bearing"]}}exports.default=h;
},{"./controller":"ugw5","./view-state":"TfDO","../utils/math-utils":"ki6G","math.gl":"xAaq"}],"EN53":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./view")),r=n(require("../viewports/viewport")),t=require("@math.gl/web-mercator"),o=require("math.gl"),i=n(require("../controllers/first-person-controller"));function n(e){return e&&e.__esModule?e:{default:e}}function s({bearing:e,pitch:r}){return new o._SphericalCoordinates({bearing:e,pitch:r}).toVector3().normalize()}class l extends r.default{constructor(e){const{modelMatrix:r=null,bearing:i=0,pitch:n=0,up:l=[0,0,1]}=e,a=s({bearing:i,pitch:-90===n?1e-4:90+n}),u=r?r.transformDirection(a):a,c=(0,t.getMeterZoom)(e),p=Math.pow(2,c),d=(new o.Matrix4).lookAt({eye:[0,0,0],center:u,up:l}).scale(p);super({...e,zoom:c,viewMatrix:d})}}class a extends e.default{constructor(e){super({...e,type:l})}get controller(){return this._getControllerProps({type:i.default})}}exports.default=a,a.displayName="FirstPersonView";
},{"./view":"k6Eh","../viewports/viewport":"HjGN","@math.gl/web-mercator":"PqV4","math.gl":"xAaq","../controllers/first-person-controller":"Egne"}],"o35a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.OrbitState=void 0;var t=require("math.gl"),o=e(require("./controller")),r=e(require("./view-state")),i=require("../utils/math-utils");function e(t){return t&&t.__esModule?t:{default:t}}const a={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0};class s extends r.default{constructor({makeViewport:t,width:o,height:r,rotationX:i=a.rotationX,rotationOrbit:e=a.rotationOrbit,target:s=a.target,zoom:n=a.zoom,minRotationX:p=a.minRotationX,maxRotationX:m=a.maxRotationX,minZoom:h=a.minZoom,maxZoom:u=a.maxZoom,startPanPosition:_,startRotatePos:d,startRotationX:l,startRotationOrbit:c,startZoomPosition:P,startZoom:w}){super({width:o,height:r,rotationX:i,rotationOrbit:e,target:s,zoom:n,minRotationX:p,maxRotationX:m,minZoom:h,maxZoom:u}),this._state={startPanPosition:_,startRotatePos:d,startRotationX:l,startRotationOrbit:c,startZoomPosition:P,startZoom:w},this.makeViewport=t}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:o}){const r=this._state.startPanPosition||o;if(!r)return this;const i=this.makeViewport(this._viewportProps).panByPosition(r,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:t,deltaAngleX:o=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:e,startRotationOrbit:a}=this._state,{width:s,height:n}=this._viewportProps;if(!i||!Number.isFinite(e)||!Number.isFinite(a))return this;let p;if(t){let o=(t[0]-i[0])/s;const r=(t[1]-i[1])/n;(e<-90||e>90)&&(o*=-1),p={rotationX:e+180*r,rotationOrbit:a+180*o}}else p={rotationX:e+r,rotationOrbit:a+o};return this._getUpdatedState(p)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const o=t.getViewportProps(),r={...this._viewportProps},{rotationOrbit:i}=r;return Math.abs(i-o.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this._viewportProps.zoom})}zoom({pos:t,startPos:o,scale:r}){const{zoom:i}=this._viewportProps;let{startZoom:e,startZoomPosition:a}=this._state;Number.isFinite(e)||(e=i,a=this._unproject(o)||this._unproject(t));const s=this._calculateNewZoom({scale:r,startZoom:e}),n=this.makeViewport({...this._viewportProps,zoom:s});return this._getUpdatedState({zoom:s,...n.panByPosition(a,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})}_unproject(t){const o=this.makeViewport(this._viewportProps);return t&&o.unproject(t)}_calculateNewZoom({scale:o,startZoom:r}){const{maxZoom:i,minZoom:e}=this._viewportProps;Number.isFinite(r)||(r=this._viewportProps.zoom);const a=r+Math.log2(o);return(0,t.clamp)(a,e,i)}_panFromCenter(t){const{width:o,height:r,target:i}=this._viewportProps;return this.pan({startPosition:i,pos:[o/2+t[0],r/2+t[1]]})}_getUpdatedState(t){return new s({...this._viewportProps,...this._state,...t})}_applyConstraints(o){const{maxZoom:r,minZoom:e,zoom:a,maxRotationX:s,minRotationX:n,rotationOrbit:p}=o;return o.zoom=(0,t.clamp)(a,e,r),o.rotationX=(0,t.clamp)(o.rotationX,n,s),(p<-180||p>180)&&(o.rotationOrbit=(0,i.mod)(p+180,360)-180),o}}exports.OrbitState=s;class n extends o.default{constructor(t){super(s,t)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}exports.default=n;
},{"math.gl":"xAaq","./controller":"ugw5","./view-state":"TfDO","../utils/math-utils":"ki6G"}],"gGaz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./view")),e=s(require("../viewports/viewport")),o=require("math.gl"),r=require("@math.gl/web-mercator"),i=s(require("../controllers/orbit-controller"));function s(t){return t&&t.__esModule?t:{default:t}}const n=Math.PI/180;function a({height:t,fovy:e,orbitAxis:r,rotationX:i,rotationOrbit:s,zoom:a}){const c=.5/Math.tan(e*n/2),u="Z"===r?[0,0,1]:[0,1,0],l="Z"===r?[0,-c,0]:[0,0,c],h=(new o.Matrix4).lookAt({eye:l,up:u});h.rotateX(i*n),"Z"===r?h.rotateZ(s*n):h.rotateY(s*n);const p=Math.pow(2,a)/(t||1);return h.scale(p),h}class c extends e.default{constructor(t){const{height:e,fovy:o,orbitAxis:r,target:i=[0,0,0],rotationX:s=0,rotationOrbit:n=0,zoom:c=0}=t;super({...t,longitude:null,viewMatrix:a({height:e,fovy:o,orbitAxis:r,rotationX:s,rotationOrbit:n,zoom:c}),fovy:o,position:i,zoom:c}),this.projectedCenter=this.project(this.center)}unproject(t,{topLeft:e=!0}={}){const[o,i,s=this.projectedCenter[2]]=t,n=e?i:this.height-i,[a,c,u]=(0,r.pixelsToWorld)([o,n,s],this.pixelUnprojectionMatrix);return[a,c,u]}panByPosition(t,e){const o=this.project(t),r=[this.width/2+o[0]-e[0],this.height/2+o[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(r)}}}class u extends t.default{constructor(t={}){const{orbitAxis:e="Z"}=t;super({...t,orbitAxis:e,type:c})}get controller(){return this._getControllerProps({type:i.default})}}exports.default=u,u.displayName="OrbitView";
},{"./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"xAaq","@math.gl/web-mercator":"PqV4","../controllers/orbit-controller":"o35a"}],"osBw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./controller")),r=require("./orbit-controller");function t(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e){e.dragMode=e.dragMode||"pan",super(r.OrbitState,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}exports.default=o;
},{"./controller":"ugw5","./orbit-controller":"o35a"}],"d3vQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./view")),t=l(require("../viewports/viewport")),r=require("math.gl"),o=require("@math.gl/web-mercator"),n=u(require("gl-matrix/vec2")),i=l(require("../controllers/orthographic-controller"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}const c=(new r.Matrix4).lookAt({eye:[0,0,1]});function s({width:e,height:t,near:o,far:n}){return e=e||1,t=t||1,(new r.Matrix4).ortho({left:-e/2,right:e/2,bottom:-t/2,top:t/2,near:o,far:n})}class p extends t.default{constructor(e){const{width:t,height:r,near:o=.1,far:n=1e3,zoom:i=0,target:a=[0,0,0],flipY:u=!0}=e,l=Math.pow(2,i);super({...e,longitude:null,position:a,viewMatrix:c.clone().scale([l,l*(u?-1:1),l]),projectionMatrix:s({width:t,height:r,near:o,far:n}),zoom:i})}panByPosition(e,t){const r=(0,o.pixelsToWorld)(t,this.pixelUnprojectionMatrix),i=n.add([],e,n.negate([],r));return{target:n.add([],this.center,i)}}}class f extends e.default{constructor(e){super({...e,type:p})}get controller(){return this._getControllerProps({type:i.default})}}exports.default=f,f.displayName="OrthographicView";
},{"./view":"k6Eh","../viewports/viewport":"HjGN","math.gl":"xAaq","@math.gl/web-mercator":"PqV4","gl-matrix/vec2":"XSo1","../controllers/orthographic-controller":"osBw"}],"JDk6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("math.gl"),t=s(require("./controller")),o=require("./map-controller"),r=require("../utils/math-utils");function s(e){return e&&e.__esModule?e:{default:e}}class a extends o.MapState{_applyConstraints(t){const{maxZoom:o,minZoom:s,zoom:a}=t;t.zoom=(0,e.clamp)(a,s,o);const{longitude:u,latitude:l}=t;return(u<-180||u>180)&&(t.longitude=(0,r.mod)(u+180,360)-180),t.latitude=(0,e.clamp)(l,-89,89),t}}class u extends t.default{constructor(e){e.dragMode=e.dragMode||"pan",super(a,e)}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}get linearTransitionProps(){return["longitude","latitude","zoom"]}}exports.default=u;
},{"math.gl":"xAaq","./controller":"ugw5","./map-controller":"N44t","../utils/math-utils":"ki6G"}],"WZeT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./view")),r=o(require("../viewports/globe-viewport")),t=o(require("../controllers/globe-controller"));function o(e){return e&&e.__esModule?e:{default:e}}class l extends e.default{constructor(e){super({...e,type:r.default})}get controller(){return this._getControllerProps({type:t.default})}}exports.default=l,l.displayName="GlobeView";
},{"./view":"k6Eh","../viewports/globe-viewport":"DUOV","../controllers/globe-controller":"JDk6"}],"T8B5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./transition-interpolator")),e=require("math.gl"),r=require("@math.gl/web-mercator");function o(t){return t&&t.__esModule?t:{default:t}}const i=["bearing","pitch"],u={speed:1.2,curve:1.414};class a extends t.default{constructor(t={}){super({compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}),this.props={...u,...t}}interpolateProps(t,o,u){const a=(0,r.flyToViewport)(t,o,u,this.props);for(const r of i)a[r]=(0,e.lerp)(t[r]||0,o[r]||0,u);return a}getDuration(t,e){let{transitionDuration:o}=e;return"auto"===o&&(o=(0,r.getFlyToDuration)(t,e,this.props)),o}}exports.default=a;
},{"./transition-interpolator":"R8fo","math.gl":"xAaq","@math.gl/web-mercator":"PqV4"}],"yiMu":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./iterable-utils"),e=i(require("./typed-array-manager")),r=i(require("./assert")),s=require("@luma.gl/core");function i(t){return t&&t.__esModule?t:{default:t}}class o{constructor(t={}){const{attributes:r={}}=t;this.typedArrayManager=e.default,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t),Object.seal(this)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:s={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:n,normalize:u=!0}=this.opts;if(this.data=e,this.getGeometry=i,this.positionSize=o&&o.size||("XY"===a?2:3),this.buffers=s,this.normalize=u,o&&((0,r.default)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),u||(s.positions=o)),this.geometryBuffer=s.positions,Array.isArray(n))for(const r of n)this._rebuildGeometry(r);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}normalizeGeometry(t){return t}updateGeometryAttributes(t,e,r){throw new Error("Not implemented")}getGeometrySize(t){throw new Error("Not implemented")}getGeometryFromBuffer(e){const s=e.value||e;return(0,r.default)(ArrayBuffer.isView(s)),(0,t.getAccessorFromBuffer)(s,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}_allocate(t,e){const{attributes:r,buffers:s,_attributeDefs:i,typedArrayManager:o}=this;for(const a in i)if(a in s)o.release(r[a]),r[a]=null;else{const s=i[a];s.copy=e,r[a]=o.allocate(r[a],t,s)}}_forEachGeometry(e,r,s){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:n}=(0,t.createIterable)(i,r,s);for(const t of a){n.index++,e(o(t,n),n.index)}}_rebuildGeometry(t){if(!this.data||!this.getGeometry)return;let{indexStarts:e,vertexStarts:r,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:n=0,endRow:u=1/0}=t||{},h={};if(t||(e=[0],r=[0]),this.normalize||!a)this._forEachGeometry((t,e)=>{t=this.normalizeGeometry(t),h[e]=t,r[e+1]=r[e]+this.getGeometrySize(t)},n,u),i=r[r.length-1];else if(a.buffer instanceof s.Buffer){const t=a.stride||4*this.positionSize;r=o.startIndices,i=r[o.length]||a.buffer.byteLength/t}else{const t=a.value||a,e=a.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=o.startIndices,i=r[o.length]||t.length/e}this._allocate(i,Boolean(t)),this.indexStarts=e,this.vertexStarts=r,this.instanceCount=i;const l={};this._forEachGeometry((t,s)=>{t=h[s]||t,l.vertexStart=r[s],l.indexStart=e[s];const o=s<r.length-1?r[s+1]:i;l.geometrySize=o-r[s],l.geometryIndex=s,this.updateGeometryAttributes(t,l)},n,u),this.vertexCount=e[e.length-1]}}exports.default=o;
},{"./iterable-utils":"kai7","./typed-array-manager":"yeLJ","./assert":"Txat","@luma.gl/core":"iuAK"}],"vvxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"picking",{enumerable:!0,get:function(){return e.picking}}),Object.defineProperty(exports,"project",{enumerable:!0,get:function(){return e.project}}),Object.defineProperty(exports,"project32",{enumerable:!0,get:function(){return e.project32}}),Object.defineProperty(exports,"gouraudLighting",{enumerable:!0,get:function(){return e.gouraudLighting}}),Object.defineProperty(exports,"phongLighting",{enumerable:!0,get:function(){return e.phongLighting}}),Object.defineProperty(exports,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(exports,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return r.COORDINATE_SYSTEM}}),Object.defineProperty(exports,"LightingEffect",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"AmbientLight",{enumerable:!0,get:function(){return n.AmbientLight}}),Object.defineProperty(exports,"DirectionalLight",{enumerable:!0,get:function(){return i.DirectionalLight}}),Object.defineProperty(exports,"PointLight",{enumerable:!0,get:function(){return o.PointLight}}),Object.defineProperty(exports,"_CameraLight",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"_SunLight",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"PostProcessEffect",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"_LayersPass",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Deck",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"LayerManager",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"AttributeManager",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"CompositeLayer",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"DeckRenderer",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Viewport",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"_GlobeViewport",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"MapView",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"FirstPersonView",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"OrbitView",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"OrthographicView",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"_GlobeView",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"Controller",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"MapController",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"_GlobeController",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"FirstPersonController",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"OrbitController",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"OrthographicController",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"Effect",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"LayerExtension",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"TRANSITION_EVENTS",{enumerable:!0,get:function(){return C.TRANSITION_EVENTS}}),Object.defineProperty(exports,"TransitionInterpolator",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"LinearInterpolator",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"FlyToInterpolator",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"createIterable",{enumerable:!0,get:function(){return D.createIterable}}),Object.defineProperty(exports,"fp64LowPart",{enumerable:!0,get:function(){return R.fp64LowPart}}),Object.defineProperty(exports,"Tesselator",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"_fillArray",{enumerable:!0,get:function(){return G.fillArray}}),Object.defineProperty(exports,"_flatten",{enumerable:!0,get:function(){return G.flatten}}),Object.defineProperty(exports,"_count",{enumerable:!0,get:function(){return z.count}}),Object.defineProperty(exports,"_memoize",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(exports,"_mergeShaders",{enumerable:!0,get:function(){return W.mergeShaders}}),Object.defineProperty(exports,"_compareProps",{enumerable:!0,get:function(){return B.compareProps}}),require("./lib/init");var e=require("./shaderlib"),r=require("./lib/constants"),t=H(require("./effects/lighting/lighting-effect")),n=require("./effects/lighting/ambient-light"),i=require("./effects/lighting/directional-light"),o=require("./effects/lighting/point-light"),u=H(require("./effects/lighting/camera-light")),l=H(require("./effects/lighting/sun-light")),f=H(require("./effects/post-process-effect")),a=H(require("./passes/layers-pass")),c=H(require("./lib/deck")),p=H(require("./lib/layer-manager")),s=H(require("./lib/attribute/attribute-manager")),b=H(require("./lib/layer")),g=H(require("./lib/composite-layer")),d=H(require("./lib/deck-renderer")),m=H(require("./viewports/viewport")),y=H(require("./viewports/web-mercator-viewport")),P=H(require("./viewports/globe-viewport")),O=H(require("./views/view")),j=H(require("./views/map-view")),x=H(require("./views/first-person-view")),q=H(require("./views/orbit-view")),h=H(require("./views/orthographic-view")),w=H(require("./views/globe-view")),v=H(require("./controllers/controller")),L=H(require("./controllers/map-controller")),_=H(require("./controllers/globe-controller")),T=H(require("./controllers/first-person-controller")),E=H(require("./controllers/orbit-controller")),I=H(require("./controllers/orthographic-controller")),S=H(require("./lib/effect")),V=H(require("./lib/layer-extension")),C=require("./controllers/transition-manager"),A=H(require("./transitions/transition-interpolator")),M=H(require("./transitions/linear-interpolator")),N=H(require("./transitions/viewport-fly-to-interpolator")),k=H(require("./utils/log")),D=require("./utils/iterable-utils"),R=require("./utils/math-utils"),F=H(require("./utils/tesselator")),G=require("./utils/flatten"),z=require("./utils/count"),Y=H(require("./utils/memoize")),W=require("./utils/shader"),B=require("./lifecycle/props");function H(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/init":"N6pv","./shaderlib":"vZnx","./lib/constants":"ysbg","./effects/lighting/lighting-effect":"MByF","./effects/lighting/ambient-light":"kPtk","./effects/lighting/directional-light":"n3wt","./effects/lighting/point-light":"yBNR","./effects/lighting/camera-light":"xYso","./effects/lighting/sun-light":"hMy0","./effects/post-process-effect":"QgRQ","./passes/layers-pass":"oM9Q","./lib/deck":"ruUO","./lib/layer-manager":"m8xf","./lib/attribute/attribute-manager":"wT56","./lib/layer":"xVVm","./lib/composite-layer":"dK5R","./lib/deck-renderer":"J3c9","./viewports/viewport":"HjGN","./viewports/web-mercator-viewport":"Rf6Y","./viewports/globe-viewport":"DUOV","./views/view":"k6Eh","./views/map-view":"wDMu","./views/first-person-view":"EN53","./views/orbit-view":"gGaz","./views/orthographic-view":"d3vQ","./views/globe-view":"WZeT","./controllers/controller":"ugw5","./controllers/map-controller":"N44t","./controllers/globe-controller":"JDk6","./controllers/first-person-controller":"Egne","./controllers/orbit-controller":"o35a","./controllers/orthographic-controller":"osBw","./lib/effect":"Z10T","./lib/layer-extension":"TXTo","./controllers/transition-manager":"awSe","./transitions/transition-interpolator":"R8fo","./transitions/linear-interpolator":"bGRb","./transitions/viewport-fly-to-interpolator":"T8B5","./utils/log":"GVus","./utils/iterable-utils":"kai7","./utils/math-utils":"ki6G","./utils/tesselator":"yiMu","./utils/flatten":"gSVO","./utils/count":"nzk4","./utils/memoize":"uXG5","./utils/shader":"NycH","./lifecycle/props":"UiIs"}],"jPrh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDeckInstance=r,exports.addLayer=t,exports.removeLayer=a,exports.updateLayer=n,exports.drawLayer=o;var e=require("@deck.gl/core");function r({map:r,gl:t,deck:a}){if(r.__deck)return r.__deck;const n=a&&a.props._customRender,o={useDevicePixels:!0,_customRender:()=>{r.triggerRepaint(),n&&n()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[770,771,1,771],blendEquation:32774},userData:{isExternal:!1,mapboxLayers:new Set}};return a?(a.setProps(o),a.props.userData.isExternal=!0):(Object.assign(o,{gl:t,width:!1,height:!1,touchAction:"unset",viewState:s(r)}),a=new e.Deck(o),r.on("move",()=>c(a,r)),r.on("remove",()=>{a.finalize(),r.__deck=null})),a.props.userData.mapboxVersion=i(r),r.__deck=a,r.on("render",()=>{a.layerManager&&u(a,r)}),a}function t(e,r){e.props.userData.mapboxLayers.add(r),f(e)}function a(e,r){e.props.userData.mapboxLayers.delete(r),f(e)}function n(e,r){f(e)}function o(e,r,t){let{currentViewport:a}=e.props.userData;a||(a=p(e,r,!0),e.props.userData.currentViewport=a),e.layerManager&&e._drawLayers("mapbox-repaint",{viewports:[a],layers:l(e,e=>d(t.id,e)),clearCanvas:!1})}function s(e){const{lng:r,lat:t}=e.getCenter();return{longitude:r,latitude:t,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}}function i(e){let r=0,t=0;return e.version&&([r,t]=e.version.split(".").slice(0,2).map(Number)),{major:r,minor:t}}function p(r,t,a=!0){const{mapboxVersion:n}=r.props.userData;return new e.WebMercatorViewport(Object.assign({x:0,y:0,width:r.width,height:r.height,repeat:!0},s(t),a?{nearZMultiplier:1===n.major&&n.minor>=3||n.major>=2?.02:1/(r.height||1)}:{nearZMultiplier:.1}))}function u(e,r){const{mapboxLayers:t,isExternal:a}=e.props.userData;if(a){const a=Array.from(t,e=>e.id),n=l(e,e=>{for(const r of a)if(d(r,e))return!1;return!0});n.length>0&&e._drawLayers("mapbox-repaint",{viewports:[p(e,r,!1)],layers:n,clearCanvas:!1})}e.props.userData.currentViewport=null}function c(e,r){e.setProps({viewState:s(r)}),e.needsRedraw({clearRedrawFlags:!0})}function l(e,r){return e.layerManager.getLayers().filter(r)}function d(e,r){let t=r;for(;t;){if(t.id===e)return!0;t=t.parent}return!1}function f(e){if(e.props.userData.isExternal)return;const r=[];e.props.userData.mapboxLayers.forEach(e=>{const t=new(0,e.props.type)(e.props);r.push(t)}),e.setProps({layers:r})}
},{"@deck.gl/core":"vvxL"}],"OaWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./deck-utils");class t{constructor(e){if(!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.map=null,this.deck=null,this.props=e}onAdd(t,s){this.map=t,this.deck=(0,e.getDeckInstance)({map:t,gl:s,deck:this.props.deck}),(0,e.addLayer)(this.deck,this)}onRemove(){(0,e.removeLayer)(this.deck,this)}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&(0,e.updateLayer)(this.deck,this)}render(t,s){(0,e.drawLayer)(this.deck,this.map,this)}}exports.default=t;
},{"./deck-utils":"jPrh"}],"WkxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shouldComposeModelMatrix=i,exports.MATRIX_ATTRIBUTES=void 0;var e=require("@deck.gl/core");const t=Math.PI/180,s=new Float32Array(16),a=new Float32Array(12);function r(e,s,a){const r=s[0]*t,n=s[1]*t,o=s[2]*t,i=Math.sin(o),l=Math.sin(r),c=Math.sin(n),T=Math.cos(o),A=Math.cos(r),M=Math.cos(n),f=a[0],O=a[1],_=a[2];e[0]=f*M*A,e[1]=f*c*A,e[2]=f*-l,e[3]=O*(-c*T+M*l*i),e[4]=O*(M*T+c*l*i),e[5]=O*A*i,e[6]=_*(c*i+M*l*T),e[7]=_*(-M*i+c*l*T),e[8]=_*A*T}function n(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}const o={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:o,endRow:i}){const{data:l,getOrientation:c,getScale:T,getTranslation:A,getTransformMatrix:M}=this.props,f=Array.isArray(M),O=f&&16===M.length,_=Array.isArray(T),u=Array.isArray(c),d=Array.isArray(A),I=O||!f&&Boolean(M(l[0]));t.constant=I?O:u&&_&&d;const y=t.value;if(t.constant){let e;if(I)s.set(M),e=n(s);else{r(e=a,c,T),e.set(A,9)}t.value=new Float32Array(e)}else{let f=o*t.size;const{iterable:E,objectInfo:S}=(0,e.createIterable)(l,o,i);for(const e of E){let t;if(S.index++,I)s.set(O?M:M(e,S)),t=n(s);else{r(t=a,u?c:c(e,S),_?T:T(e,S)),t.set(d?A:A(e,S),9)}y[f++]=t[0],y[f++]=t[1],y[f++]=t[2],y[f++]=t[3],y[f++]=t[4],y[f++]=t[5],y[f++]=t[6],y[f++]=t[7],y[f++]=t[8],y[f++]=t[9],y[f++]=t[10],y[f++]=t[11]}}}};function i(t,s){return s===e.COORDINATE_SYSTEM.CARTESIAN||s===e.COORDINATE_SYSTEM.METER_OFFSETS||s===e.COORDINATE_SYSTEM.DEFAULT&&!t.isGeospatial}exports.MATRIX_ATTRIBUTES=o;
},{"@deck.gl/core":"vvxL"}],"NMSJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n";exports.default=o;
},{}],"yokP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n";exports.default=o;
},{}],"twBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@deck.gl/core"),t=require("@luma.gl/core"),s=require("@luma.gl/webgl"),r=require("../utils/matrix"),a=i(require("./simple-mesh-layer-vertex.glsl")),o=i(require("./simple-mesh-layer-fragment.glsl"));function i(e){return e&&e.__esModule?e:{default:e}}function l(t,s){(t.COLOR_0||t.colors)&&s||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),e.log.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function n(e,s){if(e.attributes)return l(e.attributes,s),e instanceof t.Geometry?e:new t.Geometry(e);if(e.positions||e.POSITION)return l(e,s),new t.Geometry({attributes:e});throw Error("Invalid mesh")}const u=[0,0,0,255],h={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:u},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};class c extends e.Layer{getShaders(){const r=!(0,t.isWebGL2)(this.context.gl),i={};return(0,s.hasFeature)(this.context.gl,s.FEATURES.GLSL_DERIVATIVES)&&(i.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:a.default,fs:o.default,modules:[e.project32,e.phongLighting,e.picking],transpileToGLSL100:r,defines:i})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:r.MATRIX_ATTRIBUTES}),this.setState({emptyTexture:new t.Texture2D(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:e,oldProps:t,changeFlags:s}){if(super.updateState({props:e,oldProps:t,changeFlags:s}),e.mesh!==t.mesh||s.extensionsChanged){var r;if(null===(r=this.state.model)||void 0===r||r.delete(),e.mesh){this.state.model=this.getModel(e.mesh);const t=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(t.NORMAL||t.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==t.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:s,coordinateSystem:a,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:s,composeModelMatrix:!o||(0,r.shouldComposeModelMatrix)(t,a),flatShading:!this.state.hasNormals}).draw()}getModel(e){const s=new t.Model(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:n(e,this.props._useMeshColors),isInstanced:!0}),{texture:r}=this.props,{emptyTexture:a}=this.state;return s.setUniforms({sampler:r||a,hasTexture:Boolean(r)}),s}setTexture(e){const{emptyTexture:t,model:s}=this.state;null==s||s.setUniforms({sampler:e||t,hasTexture:Boolean(e)})}}exports.default=c,c.layerName="SimpleMeshLayer",c.defaultProps=h;
},{"@deck.gl/core":"vvxL","@luma.gl/core":"iuAK","@luma.gl/webgl":"KdJH","../utils/matrix":"WkxE","./simple-mesh-layer-vertex.glsl":"NMSJ","./simple-mesh-layer-fragment.glsl":"yokP"}],"NWI1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.feature=n,exports.geometry=i,exports.point=s,exports.points=a,exports.polygon=u,exports.polygons=l,exports.lineString=c,exports.lineStrings=m,exports.featureCollection=d,exports.multiLineString=f,exports.multiPoint=p,exports.multiPolygon=h,exports.geometryCollection=v,exports.round=g,exports.radiansToLength=x,exports.lengthToRadians=w,exports.lengthToDegrees=b,exports.bearingToAzimuth=y,exports.radiansToDegrees=E,exports.degreesToRadians=P,exports.convertLength=M,exports.convertArea=k,exports.isNumber=A,exports.isObject=L,exports.validateBBox=F,exports.validateId=S,exports.areaFactors=exports.unitsFactors=exports.factors=exports.earthRadius=void 0;var r=6371008.8;exports.earthRadius=r;var e={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};exports.factors=e;var t={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133};exports.unitsFactors=t;var o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function n(r,e,t){void 0===t&&(t={});var o={type:"Feature"};return(0===t.id||t.id)&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.properties=e||{},o.geometry=r,o}function i(r,e,t){switch(void 0===t&&(t={}),r){case"Point":return s(e).geometry;case"LineString":return c(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return p(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(r+" is invalid")}}function s(r,e,t){if(void 0===t&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(r[0])||!A(r[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:r},e,t)}function a(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return s(r,e)}),t)}function u(r,e,t){void 0===t&&(t={});for(var o=0,i=r;o<i.length;o++){var s=i[o];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:r},e,t)}function l(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return u(r,e)}),t)}function c(r,e,t){if(void 0===t&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:r},e,t)}function m(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return c(r,e)}),t)}function d(r,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function f(r,e,t){return void 0===t&&(t={}),n({type:"MultiLineString",coordinates:r},e,t)}function p(r,e,t){return void 0===t&&(t={}),n({type:"MultiPoint",coordinates:r},e,t)}function h(r,e,t){return void 0===t&&(t={}),n({type:"MultiPolygon",coordinates:r},e,t)}function v(r,e,t){return void 0===t&&(t={}),n({type:"GeometryCollection",geometries:r},e,t)}function g(r,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function x(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r*o}function w(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r/o}function b(r,e){return E(w(r,e))}function y(r){var e=r%360;return e<0&&(e+=360),e}function E(r){return 180*(r%(2*Math.PI))/Math.PI}function P(r){return r%360*Math.PI/180}function M(r,e,t){if(void 0===e&&(e="kilometers"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return x(w(r,e),t)}function k(r,e,t){if(void 0===e&&(e="meters"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[t];if(!i)throw new Error("invalid final units");return r/n*i}function A(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}function L(r){return!!r&&r.constructor===Object}function F(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!A(r))throw new Error("bbox must only contain numbers")})}function S(r){if(!r)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string")}exports.areaFactors=o;
},{}],"QASF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoord=r,exports.getCoords=t,exports.containsNumber=o,exports.geojsonType=n,exports.featureOf=i,exports.collectionOf=u,exports.getGeom=a,exports.getType=y;var e=require("@turf/helpers");function r(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function t(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(r){if(r.length>1&&(0,e.isNumber)(r[0])&&(0,e.isNumber)(r[1]))return!0;if(Array.isArray(r[0])&&r[0].length)return o(r[0]);throw new Error("coordinates must only contain numbers")}function n(e,r,t){if(!r||!t)throw new Error("type and name required");if(!e||e.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.type)}function i(e,r,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.geometry.type)}function u(e,r,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0,n=e.features;o<n.length;o++){var i=n[o];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+i.geometry.type)}}function a(e){return"Feature"===e.type?e.geometry:e}function y(e,r){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}
},{"@turf/helpers":"NWI1"}],"zGL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("@turf/helpers"),a=require("@turf/invariant");function s(s,t,r,i){void 0===i&&(i={});var n=(0,a.getCoord)(s),o=(0,e.degreesToRadians)(n[0]),h=(0,e.degreesToRadians)(n[1]),d=(0,e.degreesToRadians)(r),M=(0,e.lengthToRadians)(t,i.units),u=Math.asin(Math.sin(h)*Math.cos(M)+Math.cos(h)*Math.sin(M)*Math.cos(d)),c=o+Math.atan2(Math.sin(d)*Math.sin(M)*Math.cos(h),Math.cos(M)-Math.sin(h)*Math.sin(u)),g=(0,e.radiansToDegrees)(c),p=(0,e.radiansToDegrees)(u);return(0,e.point)([g,p],i.properties)}
},{"@turf/helpers":"NWI1","@turf/invariant":"QASF"}],"NOdx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@turf/destination")),r=require("@turf/helpers");function t(e){return e&&e.__esModule?e:{default:e}}function o(t,o,s){void 0===s&&(s={});for(var u=s.steps||64,p=s.properties?s.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},i=[],a=0;a<u;a++)i.push((0,e.default)(t,o,-360*a/u,s).geometry.coordinates);return i.push(i[0]),(0,r.polygon)([i],p)}var s=o;exports.default=s;
},{"@turf/destination":"zGL9","@turf/helpers":"NWI1"}],"s33A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._TypecheckDracoLoader=exports.DracoLoader=void 0;var e=require("./lib/utils/version");const r={draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},o={name:"Draco",id:"draco",module:"draco",version:e.VERSION,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:r};exports.DracoLoader=o;const t=o;exports._TypecheckDracoLoader=t;
},{"./lib/utils/version":"pSqu"}],"m6I7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/defineProperty"));function s(t){return t&&t.__esModule?t:{default:t}}const e=100;class r{constructor(s,e){if((0,t.default)(this,"schema",void 0),(0,t.default)(this,"options",void 0),(0,t.default)(this,"length",0),(0,t.default)(this,"rows",null),(0,t.default)(this,"cursor",0),(0,t.default)(this,"_headers",[]),this.options=e,this.schema=s,!Array.isArray(s)){this._headers=[];for(const t in s)this._headers[s[t].index]=s[t].name}}rowCount(){return this.length}addArrayRow(t,s){Number.isFinite(s)&&(this.cursor=s),this.rows=this.rows||new Array(e),this.rows[this.length]=t,this.length++}addObjectRow(t,s){Number.isFinite(s)&&(this.cursor=s),this.rows=this.rows||new Array(e),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;if(!t)return null;return t=t.slice(0,this.length),this.rows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}}}exports.default=r;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"URch":[function(require,module,exports) {
"use strict";function r(r,e){if(!r)throw new Error("null row");if(!e)throw new Error("no headers");const o={};for(let t=0;t<e.length;t++)o[e[t]]=r[t];return o}function e(r,e){if(!r)throw new Error("null row");if(!e)throw new Error("no headers");const o=new Array(e.length);for(let t=0;t<e.length;t++)o[t]=r[e[t]];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToObjectRow=r,exports.convertToArrayRow=e;
},{}],"LjR1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("@babel/runtime/helpers/esm/defineProperty")),s=require("../utils/row-utils");function e(t){return t&&t.__esModule?t:{default:t}}const r=100;class a{constructor(s,e){if((0,t.default)(this,"schema",void 0),(0,t.default)(this,"options",void 0),(0,t.default)(this,"length",0),(0,t.default)(this,"objectRows",null),(0,t.default)(this,"arrayRows",null),(0,t.default)(this,"cursor",0),(0,t.default)(this,"_headers",[]),this.options=e,this.schema=s,!Array.isArray(s)){this._headers=[];for(const t in s)this._headers[s[t].index]=s[t].name}}rowCount(){return this.length}addArrayRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this.options.shape){case"object-row-table":const a=(0,s.convertToObjectRow)(t,this._headers);this.addObjectRow(a,e);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(r),this.arrayRows[this.length]=t,this.length++}}addObjectRow(t,e){switch(Number.isFinite(e)&&(this.cursor=e),this.options.shape){case"array-row-table":const a=(0,s.convertToArrayRow)(t,this._headers);this.addArrayRow(a,e);break;case"object-row-table":this.objectRows=this.objectRows||new Array(r),this.objectRows[this.length]=t,this.length++}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}exports.default=a;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../utils/row-utils":"URch"}],"hGnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/defineProperty"));function s(t){return t&&t.__esModule?t:{default:t}}const e=100;class l{constructor(s,e){(0,t.default)(this,"schema",void 0),(0,t.default)(this,"length",0),(0,t.default)(this,"allocated",0),(0,t.default)(this,"columns",{}),this.schema=s,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let s=0;for(const e in this.columns)this.columns[e][this.length]=t[s++];this.length++}addObjectRow(t){this._reallocateColumns();for(const s in t)this.columns[s][this.length]=t[s];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const s in this.schema){const e=this.schema[s];t[e.name]=this.columns[e.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:e,this.columns={};for(const t in this.schema){const s=this.schema[t],e=s.type||Float32Array,l=this.columns[s.index];if(l&&ArrayBuffer.isView(l)){const t=new e(this.allocated);t.set(l),this.columns[s.index]=t}else l?(l.length=this.allocated,this.columns[s.index]=l):this.columns[s.index]=new e(this.allocated)}}}_pruneColumns(){for(const[t,s]of Object.entries(this.columns))this.columns[t]=s.slice(0,this.length)}}exports.default=l;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"vSHb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/defineProperty")),e=i(require("./base-table-batch-aggregator")),a=i(require("./row-table-batch-aggregator")),s=i(require("./columnar-table-batch-aggregator"));function i(t){return t&&t.__esModule?t:{default:t}}const r={shape:"array-row-table",batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},o="TableBatchBuilder";class h{constructor(e,a){(0,t.default)(this,"schema",void 0),(0,t.default)(this,"options",void 0),(0,t.default)(this,"aggregator",null),(0,t.default)(this,"batchCount",0),(0,t.default)(this,"bytesUsed",0),(0,t.default)(this,"isChunkComplete",!1),(0,t.default)(this,"lastBatchEmittedMs",Date.now()),(0,t.default)(this,"totalLength",0),(0,t.default)(this,"totalBytes",0),(0,t.default)(this,"rowBytes",0),this.schema=e,this.options={...r,...a}}limitReached(){var t,e;return!!(Boolean(null===(t=this.options)||void 0===t?void 0:t.limit)&&this.totalLength>=this.options.limit)||!!(Boolean(null===(e=this.options)||void 0===e?void 0:e._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),"string"==typeof t&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?8*t.length:8*Object.keys(t).length}_isFull(){if(!this.aggregator||0===this.aggregator.rowCount())return!1;if("auto"===this.options.batchSize){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return!(this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs)&&(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;null!=t&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const e=this.aggregator.getBatch();return e.count=this.batchCount,e.bytesUsed=this.bytesUsed,Object.assign(e,t),this.batchCount++,this.aggregator=null,e}_getTableBatchType(){switch(this.options.shape){case"row-table":return e.default;case"array-row-table":case"object-row-table":return a.default;case"columnar-table":return s.default;case"arrow-table":if(!h.ArrowBatch)throw new Error(o);return h.ArrowBatch;default:throw new Error(o)}}}exports.default=h,(0,t.default)(h,"ArrowBatch",void 0);
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./base-table-batch-aggregator":"m6I7","./row-table-batch-aggregator":"LjR1","./columnar-table-batch-aggregator":"hGnk"}],"M8Xq":[function(require,module,exports) {
"use strict";function e(e){let t=0;for(const n in e){const o=e[n];ArrayBuffer.isView(o)&&(t+=o.byteLength*o.BYTES_PER_ELEMENT)}return t}function t(e){let t=1/0,n=1/0,o=1/0,r=-1/0,s=-1/0,u=-1/0;const i=e.POSITION?e.POSITION.value:[],c=i&&i.length;for(let f=0;f<c;f+=3){const e=i[f],c=i[f+1],l=i[f+2];t=e<t?e:t,n=c<n?c:n,o=l<o?l:o,r=e>r?e:r,s=c>s?c:s,u=l>u?l:u}return[[t,n,o],[r,s,u]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMeshSize=e,exports.getMeshBoundingBox=t;
},{}],"w0q6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/esm/defineProperty")),t=require("../../utils/assert");function a(e){return e&&e.__esModule?e:{default:e}}class s{constructor(a,s){(0,e.default)(this,"fields",void 0),(0,e.default)(this,"metadata",void 0),(0,t.assert)(Array.isArray(a)),n(a),this.fields=a,this.metadata=s||new Map}compareTo(e){if(this.metadata!==e.metadata)return!1;if(this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const s of e)t[s]=!0;const a=this.fields.filter(e=>t[e.name]);return new s(a,this.metadata)}selectAt(...e){const t=e.map(e=>this.fields[e]).filter(Boolean);return new s(t,this.metadata)}assign(e){let t,a=this.metadata;if(e instanceof s){const s=e;t=s.fields,a=r(r(new Map,this.metadata),s.metadata)}else t=e;const n=Object.create(null);for(const s of this.fields)n[s.name]=s;for(const s of t)n[s.name]=s;const i=Object.values(n);return new s(i,a)}}function n(e){const t={};for(const a of e)t[a.name]&&console.warn("Schema: duplicated field name",a.name,a),t[a.name]=!0}function r(e,t){return new Map([...e||new Map,...t||new Map])}exports.default=s;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","../../utils/assert":"E2ik"}],"Vv08":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("@babel/runtime/helpers/esm/defineProperty"));function e(t){return t&&t.__esModule?t:{default:t}}class a{constructor(e,a,l=!1,i=new Map){(0,t.default)(this,"name",void 0),(0,t.default)(this,"type",void 0),(0,t.default)(this,"nullable",void 0),(0,t.default)(this,"metadata",void 0),this.name=e,this.type=a,this.nullable=l,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new a(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}exports.default=a;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"p1zG":[function(require,module,exports) {
"use strict";let e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Type=void 0,exports.Type=e,function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(e||(exports.Type=e={}));
},{}],"wqwc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Type",{enumerable:!0,get:function(){return e.Type}}),exports.FixedSizeList=exports.IntervalYearMonth=exports.IntervalDayTime=exports.Interval=exports.TimestampNanosecond=exports.TimestampMicrosecond=exports.TimestampMillisecond=exports.TimestampSecond=exports.Timestamp=exports.TimeMillisecond=exports.TimeSecond=exports.Time=exports.DateMillisecond=exports.DateDay=exports.Date=exports.Utf8=exports.Binary=exports.Float64=exports.Float32=exports.Float16=exports.Float=exports.Uint64=exports.Uint32=exports.Uint16=exports.Uint8=exports.Int64=exports.Int32=exports.Int16=exports.Int8=exports.Int=exports.Bool=exports.Null=exports.DataType=void 0;var t=s(require("@babel/runtime/helpers/esm/defineProperty")),e=require("./enum");function s(t){return t&&t.__esModule?t:{default:t}}let r,i,n,o,p,u,a;class c{static isNull(t){return t&&t.typeId===e.Type.Null}static isInt(t){return t&&t.typeId===e.Type.Int}static isFloat(t){return t&&t.typeId===e.Type.Float}static isBinary(t){return t&&t.typeId===e.Type.Binary}static isUtf8(t){return t&&t.typeId===e.Type.Utf8}static isBool(t){return t&&t.typeId===e.Type.Bool}static isDecimal(t){return t&&t.typeId===e.Type.Decimal}static isDate(t){return t&&t.typeId===e.Type.Date}static isTime(t){return t&&t.typeId===e.Type.Time}static isTimestamp(t){return t&&t.typeId===e.Type.Timestamp}static isInterval(t){return t&&t.typeId===e.Type.Interval}static isList(t){return t&&t.typeId===e.Type.List}static isStruct(t){return t&&t.typeId===e.Type.Struct}static isUnion(t){return t&&t.typeId===e.Type.Union}static isFixedSizeBinary(t){return t&&t.typeId===e.Type.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===e.Type.FixedSizeList}static isMap(t){return t&&t.typeId===e.Type.Map}static isDictionary(t){return t&&t.typeId===e.Type.Dictionary}get typeId(){return e.Type.NONE}compareTo(t){return this===t}}exports.DataType=c;class l extends c{get typeId(){return e.Type.Null}get[Symbol.toStringTag](){return"Null"}toString(){return"Null"}}exports.Null=l;class d extends c{get typeId(){return e.Type.Bool}get[Symbol.toStringTag](){return"Bool"}toString(){return"Bool"}}exports.Bool=d,r=Symbol.toStringTag;class x extends c{constructor(e,s){super(),(0,t.default)(this,"isSigned",void 0),(0,t.default)(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=s}get typeId(){return e.Type.Int}get[r](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}exports.Int=x;class y extends x{constructor(){super(!0,8)}}exports.Int8=y;class T extends x{constructor(){super(!0,16)}}exports.Int16=T;class I extends x{constructor(){super(!0,32)}}exports.Int32=I;class S extends x{constructor(){super(!0,64)}}exports.Int64=S;class m extends x{constructor(){super(!1,8)}}exports.Uint8=m;class g extends x{constructor(){super(!1,16)}}exports.Uint16=g;class h extends x{constructor(){super(!1,32)}}exports.Uint32=h;class D extends x{constructor(){super(!1,64)}}exports.Uint64=D;const N={HALF:16,SINGLE:32,DOUBLE:64};i=Symbol.toStringTag;class v extends c{constructor(e){super(),(0,t.default)(this,"precision",void 0),this.precision=e}get typeId(){return e.Type.Float}get[i](){return"Float"}toString(){return`Float${this.precision}`}}exports.Float=v;class F extends v{constructor(){super(N.HALF)}}exports.Float16=F;class L extends v{constructor(){super(N.SINGLE)}}exports.Float32=L;class M extends v{constructor(){super(N.DOUBLE)}}exports.Float64=M;class f extends c{constructor(){super()}get typeId(){return e.Type.Binary}toString(){return"Binary"}get[Symbol.toStringTag](){return"Binary"}}exports.Binary=f;class O extends c{get typeId(){return e.Type.Utf8}get[Symbol.toStringTag](){return"Utf8"}toString(){return"Utf8"}}exports.Utf8=O;const b={DAY:0,MILLISECOND:1};n=Symbol.toStringTag;class E extends c{constructor(e){super(),(0,t.default)(this,"unit",void 0),this.unit=e}get typeId(){return e.Type.Date}get[n](){return"Date"}toString(){return`Date${32*(this.unit+1)}<${b[this.unit]}>`}}exports.Date=E;class U extends E{constructor(){super(b.DAY)}}exports.DateDay=U;class B extends E{constructor(){super(b.MILLISECOND)}}exports.DateMillisecond=B;const z={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};o=Symbol.toStringTag;class C extends c{constructor(e,s){super(),(0,t.default)(this,"unit",void 0),(0,t.default)(this,"bitWidth",void 0),this.unit=e,this.bitWidth=s}get typeId(){return e.Type.Time}toString(){return`Time${this.bitWidth}<${z[this.unit]}>`}get[o](){return"Time"}}exports.Time=C;class $ extends C{constructor(){super(z.SECOND,32)}}exports.TimeSecond=$;class A extends C{constructor(){super(z.MILLISECOND,32)}}exports.TimeMillisecond=A,p=Symbol.toStringTag;class Y extends c{constructor(e,s=null){super(),(0,t.default)(this,"unit",void 0),(0,t.default)(this,"timezone",void 0),this.unit=e,this.timezone=s}get typeId(){return e.Type.Timestamp}get[p](){return"Timestamp"}toString(){return`Timestamp<${z[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}exports.Timestamp=Y;class _ extends Y{constructor(t=null){super(z.SECOND,t)}}exports.TimestampSecond=_;class W extends Y{constructor(t=null){super(z.MILLISECOND,t)}}exports.TimestampMillisecond=W;class H extends Y{constructor(t=null){super(z.MICROSECOND,t)}}exports.TimestampMicrosecond=H;class R extends Y{constructor(t=null){super(z.NANOSECOND,t)}}exports.TimestampNanosecond=R;const P={DAY_TIME:0,YEAR_MONTH:1};u=Symbol.toStringTag;class j extends c{constructor(e){super(),(0,t.default)(this,"unit",void 0),this.unit=e}get typeId(){return e.Type.Interval}get[u](){return"Interval"}toString(){return`Interval<${P[this.unit]}>`}}exports.Interval=j;class q extends j{constructor(){super(P.DAY_TIME)}}exports.IntervalDayTime=q;class G extends j{constructor(){super(P.YEAR_MONTH)}}exports.IntervalYearMonth=G,a=Symbol.toStringTag;class k extends c{constructor(e,s){super(),(0,t.default)(this,"listSize",void 0),(0,t.default)(this,"children",void 0),this.listSize=e,this.children=[s]}get typeId(){return e.Type.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[a](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}exports.FixedSizeList=k;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","./enum":"p1zG"}],"ouxm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Schema",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Field",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Type",{enumerable:!0,get:function(){return r.Type}}),Object.defineProperty(exports,"DataType",{enumerable:!0,get:function(){return r.DataType}}),Object.defineProperty(exports,"Null",{enumerable:!0,get:function(){return r.Null}}),Object.defineProperty(exports,"Bool",{enumerable:!0,get:function(){return r.Bool}}),Object.defineProperty(exports,"Int",{enumerable:!0,get:function(){return r.Int}}),Object.defineProperty(exports,"Int8",{enumerable:!0,get:function(){return r.Int8}}),Object.defineProperty(exports,"Int16",{enumerable:!0,get:function(){return r.Int16}}),Object.defineProperty(exports,"Int32",{enumerable:!0,get:function(){return r.Int32}}),Object.defineProperty(exports,"Int64",{enumerable:!0,get:function(){return r.Int64}}),Object.defineProperty(exports,"Uint8",{enumerable:!0,get:function(){return r.Uint8}}),Object.defineProperty(exports,"Uint16",{enumerable:!0,get:function(){return r.Uint16}}),Object.defineProperty(exports,"Uint32",{enumerable:!0,get:function(){return r.Uint32}}),Object.defineProperty(exports,"Uint64",{enumerable:!0,get:function(){return r.Uint64}}),Object.defineProperty(exports,"Float",{enumerable:!0,get:function(){return r.Float}}),Object.defineProperty(exports,"Float16",{enumerable:!0,get:function(){return r.Float16}}),Object.defineProperty(exports,"Float32",{enumerable:!0,get:function(){return r.Float32}}),Object.defineProperty(exports,"Float64",{enumerable:!0,get:function(){return r.Float64}}),Object.defineProperty(exports,"Binary",{enumerable:!0,get:function(){return r.Binary}}),Object.defineProperty(exports,"Utf8",{enumerable:!0,get:function(){return r.Utf8}}),Object.defineProperty(exports,"Date",{enumerable:!0,get:function(){return r.Date}}),Object.defineProperty(exports,"DateDay",{enumerable:!0,get:function(){return r.DateDay}}),Object.defineProperty(exports,"DateMillisecond",{enumerable:!0,get:function(){return r.DateMillisecond}}),Object.defineProperty(exports,"Time",{enumerable:!0,get:function(){return r.Time}}),Object.defineProperty(exports,"TimeSecond",{enumerable:!0,get:function(){return r.TimeSecond}}),Object.defineProperty(exports,"TimeMillisecond",{enumerable:!0,get:function(){return r.TimeMillisecond}}),Object.defineProperty(exports,"Timestamp",{enumerable:!0,get:function(){return r.Timestamp}}),Object.defineProperty(exports,"TimestampSecond",{enumerable:!0,get:function(){return r.TimestampSecond}}),Object.defineProperty(exports,"TimestampMillisecond",{enumerable:!0,get:function(){return r.TimestampMillisecond}}),Object.defineProperty(exports,"TimestampMicrosecond",{enumerable:!0,get:function(){return r.TimestampMicrosecond}}),Object.defineProperty(exports,"TimestampNanosecond",{enumerable:!0,get:function(){return r.TimestampNanosecond}}),Object.defineProperty(exports,"Interval",{enumerable:!0,get:function(){return r.Interval}}),Object.defineProperty(exports,"IntervalDayTime",{enumerable:!0,get:function(){return r.IntervalDayTime}}),Object.defineProperty(exports,"IntervalYearMonth",{enumerable:!0,get:function(){return r.IntervalYearMonth}}),Object.defineProperty(exports,"FixedSizeList",{enumerable:!0,get:function(){return r.FixedSizeList}});var e=n(require("./impl/schema")),t=n(require("./impl/field")),r=require("./impl/type");function n(e){return e&&e.__esModule?e:{default:e}}
},{"./impl/schema":"w0q6","./impl/field":"Vv08","./impl/type":"wqwc"}],"jRDg":[function(require,module,exports) {
"use strict";function n(n,r){const o=Array.isArray(n)?e(n):t(n);return Object.assign(o,r)}function t(n){const t={};for(const e in n){const o=n[e];if(ArrayBuffer.isView(o))t[e]=o.constructor;else if(o.length){const n=o[0];t[e]=r(n)}t[e]=t[e]||null}return t}function e(n){const t={};if(n.length){const e=n[0];for(const n in e){const o=e[n];t[n]=r(o)}}return t}function r(n){return n instanceof Date?Date:n instanceof Number?Float32Array:"string"==typeof n?String:null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deduceTableSchema=n;
},{}],"emAD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTypeInfo=r;var e=require("../schema");function r(e){return{typeId:e.typeId,ArrayType:e.ArrayType,typeName:e.toString(),typeEnumName:n(e.typeId),precision:e.precision}}let t=null;function n(r){if(!t){t={};for(const r in e.Type)t[e.Type[r]]=r}return t[r]}
},{"../schema":"ouxm"}],"JSkg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArrowTypeFromTypedArray=e;var r=require("../schema");function e(e){switch(e.constructor){case Int8Array:return new r.Int8;case Uint8Array:return new r.Uint8;case Int16Array:return new r.Int16;case Uint16Array:return new r.Uint16;case Int32Array:return new r.Int32;case Uint32Array:return new r.Uint32;case Float32Array:return new r.Float32;case Float64Array:return new r.Float64;default:throw new Error("array type not supported")}}
},{"../schema":"ouxm"}],"xRgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.takeAsync=o,exports.default=void 0;var e=t(require("@babel/runtime/helpers/esm/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}let s;class r extends Array{enqueue(e){return this.push(e)}dequeue(){return this.shift()}}s=Symbol.asyncIterator;class l{constructor(){(0,e.default)(this,"_values",void 0),(0,e.default)(this,"_settlers",void 0),(0,e.default)(this,"_closed",void 0),this._values=new r,this._settlers=new r,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[s](){return this}enqueue(e){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const t=this._settlers.dequeue();e instanceof Error?t.reject(e):t.resolve({value:e})}else this._values.enqueue(e)}next(){if(this._values.length>0){const e=this._values.dequeue();return e instanceof Error?Promise.reject(e):Promise.resolve({value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((e,t)=>{this._settlers.enqueue({resolve:e,reject:t})})}}async function o(e,t=1/0){const s=[],r=e[Symbol.asyncIterator]();for(;s.length<t;){const{value:e,done:t}=await r.next();if(t)break;s.push(e)}return s}exports.default=l;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"X7Kf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"TableBatchBuilder",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"RowTableBatchAggregator",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"ColumnarTableBatchAggregator",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"convertToObjectRow",{enumerable:!0,get:function(){return n.convertToObjectRow}}),Object.defineProperty(exports,"convertToArrayRow",{enumerable:!0,get:function(){return n.convertToArrayRow}}),Object.defineProperty(exports,"getMeshSize",{enumerable:!0,get:function(){return o.getMeshSize}}),Object.defineProperty(exports,"getMeshBoundingBox",{enumerable:!0,get:function(){return o.getMeshBoundingBox}}),Object.defineProperty(exports,"Schema",{enumerable:!0,get:function(){return u.Schema}}),Object.defineProperty(exports,"Field",{enumerable:!0,get:function(){return u.Field}}),Object.defineProperty(exports,"DataType",{enumerable:!0,get:function(){return u.DataType}}),Object.defineProperty(exports,"Null",{enumerable:!0,get:function(){return u.Null}}),Object.defineProperty(exports,"Binary",{enumerable:!0,get:function(){return u.Binary}}),Object.defineProperty(exports,"Bool",{enumerable:!0,get:function(){return u.Bool}}),Object.defineProperty(exports,"Int",{enumerable:!0,get:function(){return u.Int}}),Object.defineProperty(exports,"Int8",{enumerable:!0,get:function(){return u.Int8}}),Object.defineProperty(exports,"Int16",{enumerable:!0,get:function(){return u.Int16}}),Object.defineProperty(exports,"Int32",{enumerable:!0,get:function(){return u.Int32}}),Object.defineProperty(exports,"Int64",{enumerable:!0,get:function(){return u.Int64}}),Object.defineProperty(exports,"Uint8",{enumerable:!0,get:function(){return u.Uint8}}),Object.defineProperty(exports,"Uint16",{enumerable:!0,get:function(){return u.Uint16}}),Object.defineProperty(exports,"Uint32",{enumerable:!0,get:function(){return u.Uint32}}),Object.defineProperty(exports,"Uint64",{enumerable:!0,get:function(){return u.Uint64}}),Object.defineProperty(exports,"Float",{enumerable:!0,get:function(){return u.Float}}),Object.defineProperty(exports,"Float16",{enumerable:!0,get:function(){return u.Float16}}),Object.defineProperty(exports,"Float32",{enumerable:!0,get:function(){return u.Float32}}),Object.defineProperty(exports,"Float64",{enumerable:!0,get:function(){return u.Float64}}),Object.defineProperty(exports,"Utf8",{enumerable:!0,get:function(){return u.Utf8}}),Object.defineProperty(exports,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(exports,"DateDay",{enumerable:!0,get:function(){return u.DateDay}}),Object.defineProperty(exports,"DateMillisecond",{enumerable:!0,get:function(){return u.DateMillisecond}}),Object.defineProperty(exports,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(exports,"TimeMillisecond",{enumerable:!0,get:function(){return u.TimeMillisecond}}),Object.defineProperty(exports,"TimeSecond",{enumerable:!0,get:function(){return u.TimeSecond}}),Object.defineProperty(exports,"Timestamp",{enumerable:!0,get:function(){return u.Timestamp}}),Object.defineProperty(exports,"TimestampSecond",{enumerable:!0,get:function(){return u.TimestampSecond}}),Object.defineProperty(exports,"TimestampMillisecond",{enumerable:!0,get:function(){return u.TimestampMillisecond}}),Object.defineProperty(exports,"TimestampMicrosecond",{enumerable:!0,get:function(){return u.TimestampMicrosecond}}),Object.defineProperty(exports,"TimestampNanosecond",{enumerable:!0,get:function(){return u.TimestampNanosecond}}),Object.defineProperty(exports,"Interval",{enumerable:!0,get:function(){return u.Interval}}),Object.defineProperty(exports,"IntervalDayTime",{enumerable:!0,get:function(){return u.IntervalDayTime}}),Object.defineProperty(exports,"IntervalYearMonth",{enumerable:!0,get:function(){return u.IntervalYearMonth}}),Object.defineProperty(exports,"FixedSizeList",{enumerable:!0,get:function(){return u.FixedSizeList}}),Object.defineProperty(exports,"deduceTableSchema",{enumerable:!0,get:function(){return i.deduceTableSchema}}),Object.defineProperty(exports,"getTypeInfo",{enumerable:!0,get:function(){return c.getTypeInfo}}),Object.defineProperty(exports,"getArrowTypeFromTypedArray",{enumerable:!0,get:function(){return a.getArrowTypeFromTypedArray}}),Object.defineProperty(exports,"AsyncQueue",{enumerable:!0,get:function(){return l.default}});var e=b(require("./lib/table/table-batch-builder")),t=b(require("./lib/table/row-table-batch-aggregator")),r=b(require("./lib/table/columnar-table-batch-aggregator")),n=require("./lib/utils/row-utils"),o=require("./category/mesh/mesh-utils"),u=require("./lib/schema"),i=require("./lib/schema-utils/deduce-table-schema"),c=require("./lib/schema-utils/get-type-info"),a=require("./lib/schema-utils/type-utils"),l=b(require("./lib/utils/async-queue"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/table/table-batch-builder":"vSHb","./lib/table/row-table-batch-aggregator":"LjR1","./lib/table/columnar-table-batch-aggregator":"hGnk","./lib/utils/row-utils":"URch","./category/mesh/mesh-utils":"M8Xq","./lib/schema":"ouxm","./lib/schema-utils/deduce-table-schema":"jRDg","./lib/schema-utils/get-type-info":"emAD","./lib/schema-utils/type-utils":"JSkg","./lib/utils/async-queue":"xRgA"}],"kRk5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeSchemaFromAttributes=t;var e=require("@loaders.gl/schema");function t(t,i,o){const c=s(i.metadata),a=[],u=n(i.attributes);for(const e in t){const n=r(e,t[e],u[e]);a.push(n)}if(o){const e=r("indices",o);a.push(e)}return new e.Schema(a,c)}function n(e){const t={};for(const n in e){const r=e[n];t[r.name||"undefined"]=r}return t}function r(t,n,r){const i=r?s(r.metadata):void 0,o=(0,e.getArrowTypeFromTypedArray)(n.value);return new e.Field(t,new e.FixedSizeList(n.size,new e.Field("value",o)),!1,i)}function s(e){const t=new Map;for(const n in e)t.set(`${n}.string`,JSON.stringify(e[n]));return t}
},{"@loaders.gl/schema":"X7Kf"}],"SPtI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/defineProperty")),e=require("@loaders.gl/schema"),r=require("./utils/schema-attribute-utils");function a(t){return t&&t.__esModule?t:{default:t}}const i={TRIANGULAR_MESH:0,POINT_CLOUD:1},n={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},s={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},o=4;class d{constructor(e){(0,t.default)(this,"draco",void 0),(0,t.default)(this,"decoder",void 0),(0,t.default)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t,a={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(a);const n=this.decoder.GetEncodedGeometryType(i),s=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let t;switch(n){case this.draco.TRIANGULAR_MESH:t=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:t=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!t.ok()||!s.ptr){const e=`DRACO decompression failed: ${t.error_msg()}`;throw new Error(e)}const o=this._getDracoLoaderData(s,n,a),d=this._getMeshData(s,o,a),u=(0,e.getMeshBoundingBox)(d.attributes),c=(0,r.makeSchemaFromAttributes)(d.attributes,o,d.indices);return{loader:"draco",loaderData:o,header:{vertexCount:s.num_points(),boundingBox:u},...d,schema:c}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(t,e,r){const a=this._getTopLevelMetadata(t),i=this._getDracoAttributes(t,r);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:a,attributes:i}}_getDracoAttributes(t,e){const r={};for(let a=0;a<t.num_attributes();a++){const i=this.decoder.GetAttribute(t,a),n=this._getAttributeMetadata(t,a);r[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:a,metadata:n};const s=this._getQuantizationTransform(i,e);s&&(r[i.unique_id()].quantization_transform=s);const o=this._getOctahedronTransform(i,e);o&&(r[i.unique_id()].octahedron_transform=o)}return r}_getMeshData(t,e,r){const a=this._getMeshAttributes(e,t,r);if(!a.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:a,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:a,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:a}}_getMeshAttributes(t,e,r){const a={};for(const i of Object.values(t.attributes)){const t=this._deduceAttributeName(i,r);i.name=t;const{value:n,size:s}=this._getAttributeValues(e,i);a[t]={value:n,size:s,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return a}_getTriangleListIndices(t){const e=3*t.num_faces(),r=e*o,a=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(t,r,a),new Uint32Array(this.draco.HEAPF32.buffer,a,e).slice()}finally{this.draco._free(a)}}_getTriangleStripIndices(t){const e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),_(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){const r=s[e.data_type],a=e.num_components,i=t.num_points()*a,n=i*r.BYTES_PER_ELEMENT,o=u(this.draco,r);let d;const c=this.draco._malloc(n);try{const a=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,a,o,n,c),d=new r(this.draco.HEAPF32.buffer,c,i).slice()}finally{this.draco._free(c)}return{value:d,size:a}}_deduceAttributeName(t,e){const r=t.unique_id;for(const[n,s]of Object.entries(e.extraAttributes||{}))if(s===r)return n;const a=t.attribute_type;for(const s in n){if(this.draco[s]===a)return n[s]}const i=e.attributeNameEntry||"name";return t.metadata[i]?t.metadata[i].string:`CUSTOM_ATTRIBUTE_${r}`}_getTopLevelMetadata(t){const e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){const r=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(r)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const e={},r=this.metadataQuerier.NumEntries(t);for(let a=0;a<r;a++){const r=this.metadataQuerier.GetEntryName(t,a);e[r]=this._getDracoMetadataField(t,r)}return e}_getDracoMetadataField(t,e){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,r);const a=c(r);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:a}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(t){const{quantizedAttributes:e=[],octahedronAttributes:r=[]}=t,a=[...e,...r];for(const i of a)this.decoder.SkipAttributeTransform(this.draco[i])}_getQuantizationTransform(t,e){const{quantizedAttributes:r=[]}=e,a=t.attribute_type();if(r.map(t=>this.decoder[t]).includes(a)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits(),range:e.range(),min_values:new Float32Array([1,2,3]).map(t=>e.min_value(t))}}finally{this.draco.destroy(e)}}return null}_getOctahedronTransform(t,e){const{octahedronAttributes:r=[]}=e,a=t.attribute_type();if(r.map(t=>this.decoder[t]).includes(a)){const e=new this.draco.AttributeQuantizationTransform;try{if(e.InitFromAttribute(t))return{quantization_bits:e.quantization_bits()}}finally{this.draco.destroy(e)}}return null}}function u(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function c(t){const e=t.size(),r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=t.GetValue(a);return r}function _(t){const e=t.size(),r=new Int32Array(e);for(let a=0;a<e;a++)r[a]=t.GetValue(a);return r}exports.default=d;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3","@loaders.gl/schema":"X7Kf","./utils/schema-attribute-utils":"kRk5"}],"h9FQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadDracoDecoderModule=n,exports.loadDracoEncoderModule=i;var o=require("@loaders.gl/worker-utils");const e="1.4.1",r="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",a="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",d="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm",c="https://raw.githubusercontent.com/google/draco/1.4.1/javascript/draco_encoder.js";let t,s;async function n(o){const e=o.modules||{};return t=e.draco3d?t||e.draco3d.createDecoderModule({}).then(o=>({draco:o})):t||l(o),await t}async function i(o){const e=o.modules||{};return s=e.draco3d?s||e.draco3d.createEncoderModule({}).then(o=>({draco:o})):s||w(o),await s}async function l(e){let c,t;switch(e.draco&&e.draco.decoderType){case"js":c=await(0,o.loadLibrary)(r,"draco",e);break;case"wasm":default:[c,t]=await Promise.all([await(0,o.loadLibrary)(a,"draco",e),await(0,o.loadLibrary)(d,"draco",e)])}return c=c||globalThis.DracoDecoderModule,await u(c,t)}function u(o,e){const r={};return e&&(r.wasmBinary=e),new Promise(e=>{o({...r,onModuleLoaded:o=>e({draco:o})})})}async function w(e){let r=await(0,o.loadLibrary)(c,"draco",e);return r=r||globalThis.DracoEncoderModule,new Promise(o=>{r({onModuleLoaded:e=>o({draco:e})})})}
},{"@loaders.gl/worker-utils":"gqfu"}],"Bnoo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("@babel/runtime/helpers/esm/defineProperty"));function e(t){return t&&t.__esModule?t:{default:t}}const r={POSITION:"POSITION",NORMAL:"NORMAL",COLOR_0:"COLOR",TEXCOORD_0:"TEX_COORD"},o=()=>{};class a{constructor(e){(0,t.default)(this,"draco",void 0),(0,t.default)(this,"dracoEncoder",void 0),(0,t.default)(this,"dracoMeshBuilder",void 0),(0,t.default)(this,"dracoMetadataBuilder",void 0),(0,t.default)(this,"log",void 0),this.draco=e,this.dracoEncoder=new this.draco.Encoder,this.dracoMeshBuilder=new this.draco.MeshBuilder,this.dracoMetadataBuilder=new this.draco.MetadataBuilder}destroy(){this.destroyEncodedObject(this.dracoMeshBuilder),this.destroyEncodedObject(this.dracoEncoder),this.destroyEncodedObject(this.dracoMetadataBuilder),this.dracoMeshBuilder=null,this.dracoEncoder=null,this.draco=null}destroyEncodedObject(t){t&&this.draco.destroy(t)}encodeSync(t,e={}){return this.log=o,this._setOptions(e),e.pointcloud?this._encodePointCloud(t,e):this._encodeMesh(t,e)}_getAttributesFromMesh(t){const e={...t,...t.attributes};return t.indices&&(e.indices=t.indices),e}_encodePointCloud(t,e){const r=new this.draco.PointCloud;e.metadata&&this._addGeometryMetadata(r,e.metadata);const o=this._getAttributesFromMesh(t);this._createDracoPointCloud(r,o,e);const a=new this.draco.DracoInt8Array;try{const t=this.dracoEncoder.EncodePointCloudToDracoBuffer(r,!1,a);if(!(t>0))throw new Error("Draco encoding failed.");return this.log(`DRACO encoded ${r.num_points()} points\n        with ${r.num_attributes()} attributes into ${t} bytes`),i(a)}finally{this.destroyEncodedObject(a),this.destroyEncodedObject(r)}}_encodeMesh(t,e){const r=new this.draco.Mesh;e.metadata&&this._addGeometryMetadata(r,e.metadata);const o=this._getAttributesFromMesh(t);this._createDracoMesh(r,o,e);const a=new this.draco.DracoInt8Array;try{const t=this.dracoEncoder.EncodeMeshToDracoBuffer(r,a);if(t<=0)throw new Error("Draco encoding failed.");return this.log(`DRACO encoded ${r.num_points()} points\n        with ${r.num_attributes()} attributes into ${t} bytes`),i(a)}finally{this.destroyEncodedObject(a),this.destroyEncodedObject(r)}}_setOptions(t){if("speed"in t&&this.dracoEncoder.SetSpeedOptions(...t.speed),"method"in t){const e=this.draco[t.method||"MESH_SEQUENTIAL_ENCODING"];this.dracoEncoder.SetEncodingMethod(e)}if("quantization"in t)for(const e in t.quantization){const r=t.quantization[e],o=this.draco[e];this.dracoEncoder.SetAttributeQuantization(o,r)}}_createDracoMesh(t,e,o){const a=o.attributesMetadata||{};try{const o=this._getPositionAttribute(e);if(!o)throw new Error("positions");const d=o.length/3;for(let i in e){const o=e[i];i=r[i]||i;const s=this._addAttributeToMesh(t,i,o,d);-1!==s&&this._addAttributeMetadata(t,s,{name:i,...a[i]||{}})}}catch(i){throw this.destroyEncodedObject(t),i}return t}_createDracoPointCloud(t,e,o){const a=o.attributesMetadata||{};try{const o=this._getPositionAttribute(e);if(!o)throw new Error("positions");const d=o.length/3;for(let i in e){const o=e[i];i=r[i]||i;const s=this._addAttributeToMesh(t,i,o,d);-1!==s&&this._addAttributeMetadata(t,s,{name:i,...a[i]||{}})}}catch(i){throw this.destroyEncodedObject(t),i}return t}_addAttributeToMesh(t,e,r,o){if(!ArrayBuffer.isView(r))return-1;const a=this._getDracoAttributeType(e),i=r.length/o;if("indices"===a){const o=r.length/3;return this.log(`Adding attribute ${e}, size ${o}`),this.dracoMeshBuilder.AddFacesToMesh(t,o,r),-1}this.log(`Adding attribute ${e}, size ${i}`);const d=this.dracoMeshBuilder,{buffer:s}=r;switch(r.constructor){case Int8Array:return d.AddInt8Attribute(t,a,o,i,new Int8Array(s));case Int16Array:return d.AddInt16Attribute(t,a,o,i,new Int16Array(s));case Int32Array:return d.AddInt32Attribute(t,a,o,i,new Int32Array(s));case Uint8Array:case Uint8ClampedArray:return d.AddUInt8Attribute(t,a,o,i,new Uint8Array(s));case Uint16Array:return d.AddUInt16Attribute(t,a,o,i,new Uint16Array(s));case Uint32Array:return d.AddUInt32Attribute(t,a,o,i,new Uint32Array(s));case Float32Array:default:return d.AddFloatAttribute(t,a,o,i,new Float32Array(s))}}_getDracoAttributeType(t){switch(t.toLowerCase()){case"indices":return"indices";case"position":case"positions":case"vertices":return this.draco.POSITION;case"normal":case"normals":return this.draco.NORMAL;case"color":case"colors":return this.draco.COLOR;case"texcoord":case"texcoords":return this.draco.TEX_COORD;default:return this.draco.GENERIC}}_getPositionAttribute(t){for(const e in t){const r=t[e];if(this._getDracoAttributeType(e)===this.draco.POSITION)return r}return null}_addGeometryMetadata(t,e){const r=new this.draco.Metadata;this._populateDracoMetadata(r,e),this.dracoMeshBuilder.AddMetadata(t,r)}_addAttributeMetadata(t,e,r){const o=new this.draco.Metadata;this._populateDracoMetadata(o,r),this.dracoMeshBuilder.SetMetadataForAttribute(t,e,o)}_populateDracoMetadata(t,e){for(const[r,o]of d(e))switch(typeof o){case"number":Math.trunc(o)===o?this.dracoMetadataBuilder.AddIntEntry(t,r,o):this.dracoMetadataBuilder.AddDoubleEntry(t,r,o);break;case"object":o instanceof Int32Array&&this.dracoMetadataBuilder.AddIntEntryArray(t,r,o,o.length);break;case"string":default:this.dracoMetadataBuilder.AddStringEntry(t,r,o)}}}function i(t){const e=t.size(),r=new ArrayBuffer(e),o=new Int8Array(r);for(let a=0;a<e;++a)o[a]=t.GetValue(a);return r}function d(t){return t.entries&&!t.hasOwnProperty("entries")?t.entries():Object.entries(t)}exports.default=a;
},{"@babel/runtime/helpers/esm/defineProperty":"iDM3"}],"cK5m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DracoWriter=void 0;var e=t(require("./lib/draco-builder")),r=require("./lib/draco-module-loader"),o=require("./lib/utils/version");function t(e){return e&&e.__esModule?e:{default:e}}const d={pointcloud:!1,attributeNameEntry:"name"},n={name:"DRACO",id:"draco",module:"draco",version:o.VERSION,extensions:["drc"],encode:a,options:{draco:d}};async function a(o,t={}){const{draco:d}=await(0,r.loadDracoEncoderModule)(t),n=new e.default(d);try{return n.encodeSync(o,t.draco)}finally{n.destroy()}}exports.DracoWriter=n;
},{"./lib/draco-builder":"Bnoo","./lib/draco-module-loader":"h9FQ","./lib/utils/version":"pSqu"}],"xort":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DracoWorkerLoader",{enumerable:!0,get:function(){return e.DracoLoader}}),Object.defineProperty(exports,"DracoWriter",{enumerable:!0,get:function(){return a.DracoWriter}}),exports._TypecheckDracoLoader=exports.DracoLoader=void 0;var e=require("./draco-loader"),r=t(require("./lib/draco-parser")),o=require("./lib/draco-module-loader"),a=require("./draco-writer");function t(e){return e&&e.__esModule?e:{default:e}}const c={...e.DracoLoader,parse:d};async function d(e,a){const{draco:t}=await(0,o.loadDracoDecoderModule)(a),c=new r.default(t);try{return c.parseSync(e,null==a?void 0:a.draco)}finally{c.destroy()}}exports.DracoLoader=c;const n=c;exports._TypecheckDracoLoader=n;
},{"./draco-loader":"s33A","./lib/draco-parser":"SPtI","./lib/draco-module-loader":"h9FQ","./draco-writer":"cK5m"}],"S06B":[function(require,module,exports) {
module.exports="/crown.54840efa.drc";
},{}],"xJal":[function(require,module,exports) {
"use strict";var e=c(require("@deck.gl/mapbox/dist/esm/mapbox-layer")),t=require("@deck.gl/core/dist/esm/effects/lighting/ambient-light"),r=require("@deck.gl/core/dist/esm/effects/lighting/directional-light"),i=c(require("@deck.gl/core/dist/esm/effects/lighting/lighting-effect")),n=c(require("@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer")),a=c(require("@luma.gl/engine/dist/esm/geometries/cylinder-geometry")),o=c(require("@turf/circle")),s=require("@loaders.gl/draco"),l=c(require("../assets/crown.drc"));function c(e){return e&&e.__esModule?e:{default:e}}var d="pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjanF3azBrMjMwM2w1NDNyN3Yzc21saDUzIn0.jNWlsBO-S3uDKdfT9IKT1A";mapboxgl.accessToken=d;var u=window._map=new mapboxgl.Map({container:"map",style:"mapbox://styles/cheeaun/ckpoxzt7o076k17rqq7jrowxg",minZoom:8,renderWorldCopies:!1,hash:!0,center:[103.84708968044379,1.2928590602954841],pitch:65,zoom:17.7});u.addControl(new mapboxgl.NavigationControl);var g=function(e,t){var r=6+2*(t-.5),i=t/Math.PI*2;return(0,o.default)(e,i/1e3,{steps:r}).geometry.coordinates},m=new Map,h=function(e){var t=e.properties,r=t.id,i=t.girth,n=t.height_est,a=parseFloat((i||"0.5").match(/[\d.]+[^\d.]?$/)[0],10);if(m.has(r))return m.get(r);var o=a/1.5,s=.66*n,l={id:r,position:e.geometry.coordinates,trunk:{translation:[0,0,.75*n/2],scale:[o,.75*n,o]},crown:{translation:[0,0,.6*n],scale:[.1*s,.1*s,.135*s],orientation:[0,r.slice(-1)/9*180,0]}};return m.set(r,l),l},f=new e.default({id:"trees-trunk-2",type:n.default,mesh:new a.default,getColor:[219,195,154],getOrientation:[0,0,90],getTranslation:function(e){return e.trunk.translation},getScale:function(e){return e.trunk.scale}}),p=new e.default({id:"trees-crown",type:n.default,mesh:l.default,loaders:[s.DracoLoader],getColor:[175,216,142],getTranslation:function(e){return e.crown.translation},getScale:function(e){return e.crown.scale},getOrientation:function(e){return e.crown.orientation}}),y=new t.AmbientLight({intensity:2.25}),w=new r.DirectionalLight({color:[255,255,255],intensity:.35,direction:[0,0,-1]}),k=new i.default({ambientLight:y,directionalLight:w});u.once("styledata",function(){u.addLayer(f,"building-extrusion-2"),u.setLayerZoomRange("trees-trunk-2",15,22.1),u.addLayer(p,"building-extrusion-2"),u.setLayerZoomRange("trees-crown",15,22.1),u.addSource("trees-source",{type:"vector",url:"mapbox://cheeaun.bptkspgy"}),u.addLayer({id:"trees",type:"circle",source:"trees-source","source-layer":"trees",filter:["all",["has","girth_size"],["has","height_est"]],minzoom:15,paint:{"circle-radius":0}});var e=function(){var e=u.getZoom();if(!(e<15)){var t=(e-15)/4*-24+24,r=window,i=r.innerHeight,n=r.innerWidth,a=u.getPitch(),o=[[0,i],[n,a>60?(a-60)/25*(n/2):0]],s=u.queryRenderedFeatures(o,{filter:[">","height_est",t],layers:["trees"],validate:!1});console.log("🌳",s.length),requestAnimationFrame(function(){var e=s.map(h);f.setProps({data:e}),p.setProps({data:e})})}};u.on("moveend",e),u.once("idle",e),u.on("resize",e),p.deck.setProps({effects:[k]})});
},{"@deck.gl/mapbox/dist/esm/mapbox-layer":"OaWZ","@deck.gl/core/dist/esm/effects/lighting/ambient-light":"kPtk","@deck.gl/core/dist/esm/effects/lighting/directional-light":"n3wt","@deck.gl/core/dist/esm/effects/lighting/lighting-effect":"MByF","@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer":"twBb","@luma.gl/engine/dist/esm/geometries/cylinder-geometry":"fC4C","@turf/circle":"NOdx","@loaders.gl/draco":"xort","../assets/crown.drc":"S06B"}]},{},["xJal"], null)
//# sourceMappingURL=/3d.89876a2e.js.map